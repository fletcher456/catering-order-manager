var T2=Object.defineProperty;var u_=b=>{throw TypeError(b)};var C2=(b,t,i)=>t in b?T2(b,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):b[t]=i;var J=(b,t,i)=>C2(b,typeof t!="symbol"?t+"":t,i),_b=(b,t,i)=>t.has(b)||u_("Cannot "+i);var c=(b,t,i)=>(_b(b,t,"read from private field"),i?i.call(b):t.get(b)),w=(b,t,i)=>t.has(b)?u_("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(b):t.set(b,i),A=(b,t,i,n)=>(_b(b,t,"write to private field"),n?n.call(b,i):t.set(b,i),i),E=(b,t,i)=>(_b(b,t,"access private method"),i);var pi=(b,t,i,n)=>({set _(r){A(b,t,r,i)},get _(){return c(b,t,n)}});(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const l of r)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&n(u)}).observe(document,{childList:!0,subtree:!0});function i(r){const l={};return r.integrity&&(l.integrity=r.integrity),r.referrerPolicy&&(l.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?l.credentials="include":r.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function n(r){if(r.ep)return;r.ep=!0;const l=i(r);fetch(r.href,l)}})();function q_(b){return b&&b.__esModule&&Object.prototype.hasOwnProperty.call(b,"default")?b.default:b}var xb={exports:{}},wh={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var h_;function M2(){if(h_)return wh;h_=1;var b=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function i(n,r,l){var u=null;if(l!==void 0&&(u=""+l),r.key!==void 0&&(u=""+r.key),"key"in r){l={};for(var h in r)h!=="key"&&(l[h]=r[h])}else l=r;return r=l.ref,{$$typeof:b,type:n,key:u,ref:r!==void 0?r:null,props:l}}return wh.Fragment=t,wh.jsx=i,wh.jsxs=i,wh}var d_;function R2(){return d_||(d_=1,xb.exports=M2()),xb.exports}var P=R2(),wb={exports:{}},Et={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f_;function D2(){if(f_)return Et;f_=1;var b=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),u=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),y=Symbol.iterator;function v(N){return N===null||typeof N!="object"?null:(N=y&&N[y]||N["@@iterator"],typeof N=="function"?N:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},T=Object.assign,x={};function M(N,K,tt){this.props=N,this.context=K,this.refs=x,this.updater=tt||S}M.prototype.isReactComponent={},M.prototype.setState=function(N,K){if(typeof N!="object"&&typeof N!="function"&&N!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,N,K,"setState")},M.prototype.forceUpdate=function(N){this.updater.enqueueForceUpdate(this,N,"forceUpdate")};function R(){}R.prototype=M.prototype;function k(N,K,tt){this.props=N,this.context=K,this.refs=x,this.updater=tt||S}var O=k.prototype=new R;O.constructor=k,T(O,M.prototype),O.isPureReactComponent=!0;var H=Array.isArray,z={H:null,A:null,T:null,S:null,V:null},G=Object.prototype.hasOwnProperty;function V(N,K,tt,W,ut,wt){return tt=wt.ref,{$$typeof:b,type:N,key:K,ref:tt!==void 0?tt:null,props:wt}}function Z(N,K){return V(N.type,K,void 0,void 0,void 0,N.props)}function et(N){return typeof N=="object"&&N!==null&&N.$$typeof===b}function rt(N){var K={"=":"=0",":":"=2"};return"$"+N.replace(/[=:]/g,function(tt){return K[tt]})}var st=/\/+/g;function vt(N,K){return typeof N=="object"&&N!==null&&N.key!=null?rt(""+N.key):K.toString(36)}function Lt(){}function At(N){switch(N.status){case"fulfilled":return N.value;case"rejected":throw N.reason;default:switch(typeof N.status=="string"?N.then(Lt,Lt):(N.status="pending",N.then(function(K){N.status==="pending"&&(N.status="fulfilled",N.value=K)},function(K){N.status==="pending"&&(N.status="rejected",N.reason=K)})),N.status){case"fulfilled":return N.value;case"rejected":throw N.reason}}throw N}function Ft(N,K,tt,W,ut){var wt=typeof N;(wt==="undefined"||wt==="boolean")&&(N=null);var gt=!1;if(N===null)gt=!0;else switch(wt){case"bigint":case"string":case"number":gt=!0;break;case"object":switch(N.$$typeof){case b:case t:gt=!0;break;case p:return gt=N._init,Ft(gt(N._payload),K,tt,W,ut)}}if(gt)return ut=ut(N),gt=W===""?"."+vt(N,0):W,H(ut)?(tt="",gt!=null&&(tt=gt.replace(st,"$&/")+"/"),Ft(ut,K,tt,"",function(Ks){return Ks})):ut!=null&&(et(ut)&&(ut=Z(ut,tt+(ut.key==null||N&&N.key===ut.key?"":(""+ut.key).replace(st,"$&/")+"/")+gt)),K.push(ut)),1;gt=0;var kt=W===""?".":W+":";if(H(N))for(var qt=0;qt<N.length;qt++)W=N[qt],wt=kt+vt(W,qt),gt+=Ft(W,K,tt,wt,ut);else if(qt=v(N),typeof qt=="function")for(N=qt.call(N),qt=0;!(W=N.next()).done;)W=W.value,wt=kt+vt(W,qt++),gt+=Ft(W,K,tt,wt,ut);else if(wt==="object"){if(typeof N.then=="function")return Ft(At(N),K,tt,W,ut);throw K=String(N),Error("Objects are not valid as a React child (found: "+(K==="[object Object]"?"object with keys {"+Object.keys(N).join(", ")+"}":K)+"). If you meant to render a collection of children, use an array instead.")}return gt}function B(N,K,tt){if(N==null)return N;var W=[],ut=0;return Ft(N,W,"","",function(wt){return K.call(tt,wt,ut++)}),W}function X(N){if(N._status===-1){var K=N._result;K=K(),K.then(function(tt){(N._status===0||N._status===-1)&&(N._status=1,N._result=tt)},function(tt){(N._status===0||N._status===-1)&&(N._status=2,N._result=tt)}),N._status===-1&&(N._status=0,N._result=K)}if(N._status===1)return N._result.default;throw N._result}var ct=typeof reportError=="function"?reportError:function(N){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var K=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof N=="object"&&N!==null&&typeof N.message=="string"?String(N.message):String(N),error:N});if(!window.dispatchEvent(K))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",N);return}console.error(N)};function Dt(){}return Et.Children={map:B,forEach:function(N,K,tt){B(N,function(){K.apply(this,arguments)},tt)},count:function(N){var K=0;return B(N,function(){K++}),K},toArray:function(N){return B(N,function(K){return K})||[]},only:function(N){if(!et(N))throw Error("React.Children.only expected to receive a single React element child.");return N}},Et.Component=M,Et.Fragment=i,Et.Profiler=r,Et.PureComponent=k,Et.StrictMode=n,Et.Suspense=f,Et.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=z,Et.__COMPILER_RUNTIME={__proto__:null,c:function(N){return z.H.useMemoCache(N)}},Et.cache=function(N){return function(){return N.apply(null,arguments)}},Et.cloneElement=function(N,K,tt){if(N==null)throw Error("The argument must be a React element, but you passed "+N+".");var W=T({},N.props),ut=N.key,wt=void 0;if(K!=null)for(gt in K.ref!==void 0&&(wt=void 0),K.key!==void 0&&(ut=""+K.key),K)!G.call(K,gt)||gt==="key"||gt==="__self"||gt==="__source"||gt==="ref"&&K.ref===void 0||(W[gt]=K[gt]);var gt=arguments.length-2;if(gt===1)W.children=tt;else if(1<gt){for(var kt=Array(gt),qt=0;qt<gt;qt++)kt[qt]=arguments[qt+2];W.children=kt}return V(N.type,ut,void 0,void 0,wt,W)},Et.createContext=function(N){return N={$$typeof:u,_currentValue:N,_currentValue2:N,_threadCount:0,Provider:null,Consumer:null},N.Provider=N,N.Consumer={$$typeof:l,_context:N},N},Et.createElement=function(N,K,tt){var W,ut={},wt=null;if(K!=null)for(W in K.key!==void 0&&(wt=""+K.key),K)G.call(K,W)&&W!=="key"&&W!=="__self"&&W!=="__source"&&(ut[W]=K[W]);var gt=arguments.length-2;if(gt===1)ut.children=tt;else if(1<gt){for(var kt=Array(gt),qt=0;qt<gt;qt++)kt[qt]=arguments[qt+2];ut.children=kt}if(N&&N.defaultProps)for(W in gt=N.defaultProps,gt)ut[W]===void 0&&(ut[W]=gt[W]);return V(N,wt,void 0,void 0,null,ut)},Et.createRef=function(){return{current:null}},Et.forwardRef=function(N){return{$$typeof:h,render:N}},Et.isValidElement=et,Et.lazy=function(N){return{$$typeof:p,_payload:{_status:-1,_result:N},_init:X}},Et.memo=function(N,K){return{$$typeof:g,type:N,compare:K===void 0?null:K}},Et.startTransition=function(N){var K=z.T,tt={};z.T=tt;try{var W=N(),ut=z.S;ut!==null&&ut(tt,W),typeof W=="object"&&W!==null&&typeof W.then=="function"&&W.then(Dt,ct)}catch(wt){ct(wt)}finally{z.T=K}},Et.unstable_useCacheRefresh=function(){return z.H.useCacheRefresh()},Et.use=function(N){return z.H.use(N)},Et.useActionState=function(N,K,tt){return z.H.useActionState(N,K,tt)},Et.useCallback=function(N,K){return z.H.useCallback(N,K)},Et.useContext=function(N){return z.H.useContext(N)},Et.useDebugValue=function(){},Et.useDeferredValue=function(N,K){return z.H.useDeferredValue(N,K)},Et.useEffect=function(N,K,tt){var W=z.H;if(typeof tt=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return W.useEffect(N,K)},Et.useId=function(){return z.H.useId()},Et.useImperativeHandle=function(N,K,tt){return z.H.useImperativeHandle(N,K,tt)},Et.useInsertionEffect=function(N,K){return z.H.useInsertionEffect(N,K)},Et.useLayoutEffect=function(N,K){return z.H.useLayoutEffect(N,K)},Et.useMemo=function(N,K){return z.H.useMemo(N,K)},Et.useOptimistic=function(N,K){return z.H.useOptimistic(N,K)},Et.useReducer=function(N,K,tt){return z.H.useReducer(N,K,tt)},Et.useRef=function(N){return z.H.useRef(N)},Et.useState=function(N){return z.H.useState(N)},Et.useSyncExternalStore=function(N,K,tt){return z.H.useSyncExternalStore(N,K,tt)},Et.useTransition=function(){return z.H.useTransition()},Et.version="19.1.0",Et}var g_;function ev(){return g_||(g_=1,wb.exports=D2()),wb.exports}var Xe=ev();const N2=q_(Xe);var Eb={exports:{}},Eh={},Tb={exports:{}},Cb={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var p_;function O2(){return p_||(p_=1,function(b){function t(B,X){var ct=B.length;B.push(X);t:for(;0<ct;){var Dt=ct-1>>>1,N=B[Dt];if(0<r(N,X))B[Dt]=X,B[ct]=N,ct=Dt;else break t}}function i(B){return B.length===0?null:B[0]}function n(B){if(B.length===0)return null;var X=B[0],ct=B.pop();if(ct!==X){B[0]=ct;t:for(var Dt=0,N=B.length,K=N>>>1;Dt<K;){var tt=2*(Dt+1)-1,W=B[tt],ut=tt+1,wt=B[ut];if(0>r(W,ct))ut<N&&0>r(wt,W)?(B[Dt]=wt,B[ut]=ct,Dt=ut):(B[Dt]=W,B[tt]=ct,Dt=tt);else if(ut<N&&0>r(wt,ct))B[Dt]=wt,B[ut]=ct,Dt=ut;else break t}}return X}function r(B,X){var ct=B.sortIndex-X.sortIndex;return ct!==0?ct:B.id-X.id}if(b.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;b.unstable_now=function(){return l.now()}}else{var u=Date,h=u.now();b.unstable_now=function(){return u.now()-h}}var f=[],g=[],p=1,y=null,v=3,S=!1,T=!1,x=!1,M=!1,R=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,O=typeof setImmediate<"u"?setImmediate:null;function H(B){for(var X=i(g);X!==null;){if(X.callback===null)n(g);else if(X.startTime<=B)n(g),X.sortIndex=X.expirationTime,t(f,X);else break;X=i(g)}}function z(B){if(x=!1,H(B),!T)if(i(f)!==null)T=!0,G||(G=!0,vt());else{var X=i(g);X!==null&&Ft(z,X.startTime-B)}}var G=!1,V=-1,Z=5,et=-1;function rt(){return M?!0:!(b.unstable_now()-et<Z)}function st(){if(M=!1,G){var B=b.unstable_now();et=B;var X=!0;try{t:{T=!1,x&&(x=!1,k(V),V=-1),S=!0;var ct=v;try{e:{for(H(B),y=i(f);y!==null&&!(y.expirationTime>B&&rt());){var Dt=y.callback;if(typeof Dt=="function"){y.callback=null,v=y.priorityLevel;var N=Dt(y.expirationTime<=B);if(B=b.unstable_now(),typeof N=="function"){y.callback=N,H(B),X=!0;break e}y===i(f)&&n(f),H(B)}else n(f);y=i(f)}if(y!==null)X=!0;else{var K=i(g);K!==null&&Ft(z,K.startTime-B),X=!1}}break t}finally{y=null,v=ct,S=!1}X=void 0}}finally{X?vt():G=!1}}}var vt;if(typeof O=="function")vt=function(){O(st)};else if(typeof MessageChannel<"u"){var Lt=new MessageChannel,At=Lt.port2;Lt.port1.onmessage=st,vt=function(){At.postMessage(null)}}else vt=function(){R(st,0)};function Ft(B,X){V=R(function(){B(b.unstable_now())},X)}b.unstable_IdlePriority=5,b.unstable_ImmediatePriority=1,b.unstable_LowPriority=4,b.unstable_NormalPriority=3,b.unstable_Profiling=null,b.unstable_UserBlockingPriority=2,b.unstable_cancelCallback=function(B){B.callback=null},b.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Z=0<B?Math.floor(1e3/B):5},b.unstable_getCurrentPriorityLevel=function(){return v},b.unstable_next=function(B){switch(v){case 1:case 2:case 3:var X=3;break;default:X=v}var ct=v;v=X;try{return B()}finally{v=ct}},b.unstable_requestPaint=function(){M=!0},b.unstable_runWithPriority=function(B,X){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var ct=v;v=B;try{return X()}finally{v=ct}},b.unstable_scheduleCallback=function(B,X,ct){var Dt=b.unstable_now();switch(typeof ct=="object"&&ct!==null?(ct=ct.delay,ct=typeof ct=="number"&&0<ct?Dt+ct:Dt):ct=Dt,B){case 1:var N=-1;break;case 2:N=250;break;case 5:N=1073741823;break;case 4:N=1e4;break;default:N=5e3}return N=ct+N,B={id:p++,callback:X,priorityLevel:B,startTime:ct,expirationTime:N,sortIndex:-1},ct>Dt?(B.sortIndex=ct,t(g,B),i(f)===null&&B===i(g)&&(x?(k(V),V=-1):x=!0,Ft(z,ct-Dt))):(B.sortIndex=N,t(f,B),T||S||(T=!0,G||(G=!0,vt()))),B},b.unstable_shouldYield=rt,b.unstable_wrapCallback=function(B){var X=v;return function(){var ct=v;v=X;try{return B.apply(this,arguments)}finally{v=ct}}}}(Cb)),Cb}var m_;function L2(){return m_||(m_=1,Tb.exports=O2()),Tb.exports}var Mb={exports:{}},li={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var b_;function k2(){if(b_)return li;b_=1;var b=ev();function t(f){var g="https://react.dev/errors/"+f;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)g+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+f+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var n={d:{f:i,r:function(){throw Error(t(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},r=Symbol.for("react.portal");function l(f,g,p){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:y==null?null:""+y,children:f,containerInfo:g,implementation:p}}var u=b.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(f,g){if(f==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return li.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,li.createPortal=function(f,g){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(t(299));return l(f,g,null,p)},li.flushSync=function(f){var g=u.T,p=n.p;try{if(u.T=null,n.p=2,f)return f()}finally{u.T=g,n.p=p,n.d.f()}},li.preconnect=function(f,g){typeof f=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,n.d.C(f,g))},li.prefetchDNS=function(f){typeof f=="string"&&n.d.D(f)},li.preinit=function(f,g){if(typeof f=="string"&&g&&typeof g.as=="string"){var p=g.as,y=h(p,g.crossOrigin),v=typeof g.integrity=="string"?g.integrity:void 0,S=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;p==="style"?n.d.S(f,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:y,integrity:v,fetchPriority:S}):p==="script"&&n.d.X(f,{crossOrigin:y,integrity:v,fetchPriority:S,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},li.preinitModule=function(f,g){if(typeof f=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var p=h(g.as,g.crossOrigin);n.d.M(f,{crossOrigin:p,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&n.d.M(f)},li.preload=function(f,g){if(typeof f=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var p=g.as,y=h(p,g.crossOrigin);n.d.L(f,p,{crossOrigin:y,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},li.preloadModule=function(f,g){if(typeof f=="string")if(g){var p=h(g.as,g.crossOrigin);n.d.m(f,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:p,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else n.d.m(f)},li.requestFormReset=function(f){n.d.r(f)},li.unstable_batchedUpdates=function(f,g){return f(g)},li.useFormState=function(f,g,p){return u.H.useFormState(f,g,p)},li.useFormStatus=function(){return u.H.useHostTransitionStatus()},li.version="19.1.0",li}var y_;function z2(){if(y_)return Mb.exports;y_=1;function b(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(b)}catch(t){console.error(t)}}return b(),Mb.exports=k2(),Mb.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var v_;function P2(){if(v_)return Eh;v_=1;var b=L2(),t=ev(),i=z2();function n(e){var s="https://react.dev/errors/"+e;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function l(e){var s=e,a=e;if(e.alternate)for(;s.return;)s=s.return;else{e=s;do s=e,(s.flags&4098)!==0&&(a=s.return),e=s.return;while(e)}return s.tag===3?a:null}function u(e){if(e.tag===13){var s=e.memoizedState;if(s===null&&(e=e.alternate,e!==null&&(s=e.memoizedState)),s!==null)return s.dehydrated}return null}function h(e){if(l(e)!==e)throw Error(n(188))}function f(e){var s=e.alternate;if(!s){if(s=l(e),s===null)throw Error(n(188));return s!==e?null:e}for(var a=e,o=s;;){var d=a.return;if(d===null)break;var m=d.alternate;if(m===null){if(o=d.return,o!==null){a=o;continue}break}if(d.child===m.child){for(m=d.child;m;){if(m===a)return h(d),e;if(m===o)return h(d),s;m=m.sibling}throw Error(n(188))}if(a.return!==o.return)a=d,o=m;else{for(var _=!1,C=d.child;C;){if(C===a){_=!0,a=d,o=m;break}if(C===o){_=!0,o=d,a=m;break}C=C.sibling}if(!_){for(C=m.child;C;){if(C===a){_=!0,a=m,o=d;break}if(C===o){_=!0,o=m,a=d;break}C=C.sibling}if(!_)throw Error(n(189))}}if(a.alternate!==o)throw Error(n(190))}if(a.tag!==3)throw Error(n(188));return a.stateNode.current===a?e:s}function g(e){var s=e.tag;if(s===5||s===26||s===27||s===6)return e;for(e=e.child;e!==null;){if(s=g(e),s!==null)return s;e=e.sibling}return null}var p=Object.assign,y=Symbol.for("react.element"),v=Symbol.for("react.transitional.element"),S=Symbol.for("react.portal"),T=Symbol.for("react.fragment"),x=Symbol.for("react.strict_mode"),M=Symbol.for("react.profiler"),R=Symbol.for("react.provider"),k=Symbol.for("react.consumer"),O=Symbol.for("react.context"),H=Symbol.for("react.forward_ref"),z=Symbol.for("react.suspense"),G=Symbol.for("react.suspense_list"),V=Symbol.for("react.memo"),Z=Symbol.for("react.lazy"),et=Symbol.for("react.activity"),rt=Symbol.for("react.memo_cache_sentinel"),st=Symbol.iterator;function vt(e){return e===null||typeof e!="object"?null:(e=st&&e[st]||e["@@iterator"],typeof e=="function"?e:null)}var Lt=Symbol.for("react.client.reference");function At(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===Lt?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case T:return"Fragment";case M:return"Profiler";case x:return"StrictMode";case z:return"Suspense";case G:return"SuspenseList";case et:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case S:return"Portal";case O:return(e.displayName||"Context")+".Provider";case k:return(e._context.displayName||"Context")+".Consumer";case H:var s=e.render;return e=e.displayName,e||(e=s.displayName||s.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case V:return s=e.displayName||null,s!==null?s:At(e.type)||"Memo";case Z:s=e._payload,e=e._init;try{return At(e(s))}catch{}}return null}var Ft=Array.isArray,B=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,X=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ct={pending:!1,data:null,method:null,action:null},Dt=[],N=-1;function K(e){return{current:e}}function tt(e){0>N||(e.current=Dt[N],Dt[N]=null,N--)}function W(e,s){N++,Dt[N]=e.current,e.current=s}var ut=K(null),wt=K(null),gt=K(null),kt=K(null);function qt(e,s){switch(W(gt,s),W(wt,e),W(ut,null),s.nodeType){case 9:case 11:e=(e=s.documentElement)&&(e=e.namespaceURI)?BS(e):0;break;default:if(e=s.tagName,s=s.namespaceURI)s=BS(s),e=IS(s,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}tt(ut),W(ut,e)}function Ks(){tt(ut),tt(wt),tt(gt)}function Eu(e){e.memoizedState!==null&&W(kt,e);var s=ut.current,a=IS(s,e.type);s!==a&&(W(wt,e),W(ut,a))}function Ea(e){wt.current===e&&(tt(ut),tt(wt)),kt.current===e&&(tt(kt),vh._currentValue=ct)}var Fr=Object.prototype.hasOwnProperty,_o=b.unstable_scheduleCallback,Tu=b.unstable_cancelCallback,nE=b.unstable_shouldYield,aE=b.unstable_requestPaint,Qs=b.unstable_now,rE=b.unstable_getCurrentPriorityLevel,yv=b.unstable_ImmediatePriority,vv=b.unstable_UserBlockingPriority,Lf=b.unstable_NormalPriority,lE=b.unstable_LowPriority,Av=b.unstable_IdlePriority,oE=b.log,cE=b.unstable_setDisableYieldValue,Cu=null,Pi=null;function Ta(e){if(typeof oE=="function"&&cE(e),Pi&&typeof Pi.setStrictMode=="function")try{Pi.setStrictMode(Cu,e)}catch{}}var Hi=Math.clz32?Math.clz32:dE,uE=Math.log,hE=Math.LN2;function dE(e){return e>>>=0,e===0?32:31-(uE(e)/hE|0)|0}var kf=256,zf=4194304;function Ur(e){var s=e&42;if(s!==0)return s;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Pf(e,s,a){var o=e.pendingLanes;if(o===0)return 0;var d=0,m=e.suspendedLanes,_=e.pingedLanes;e=e.warmLanes;var C=o&134217727;return C!==0?(o=C&~m,o!==0?d=Ur(o):(_&=C,_!==0?d=Ur(_):a||(a=C&~e,a!==0&&(d=Ur(a))))):(C=o&~m,C!==0?d=Ur(C):_!==0?d=Ur(_):a||(a=o&~e,a!==0&&(d=Ur(a)))),d===0?0:s!==0&&s!==d&&(s&m)===0&&(m=d&-d,a=s&-s,m>=a||m===32&&(a&4194048)!==0)?s:d}function Mu(e,s){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&s)===0}function fE(e,s){switch(e){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Sv(){var e=kf;return kf<<=1,(kf&4194048)===0&&(kf=256),e}function _v(){var e=zf;return zf<<=1,(zf&62914560)===0&&(zf=4194304),e}function hm(e){for(var s=[],a=0;31>a;a++)s.push(e);return s}function Ru(e,s){e.pendingLanes|=s,s!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function gE(e,s,a,o,d,m){var _=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var C=e.entanglements,D=e.expirationTimes,U=e.hiddenUpdates;for(a=_&~a;0<a;){var Y=31-Hi(a),Q=1<<Y;C[Y]=0,D[Y]=-1;var j=U[Y];if(j!==null)for(U[Y]=null,Y=0;Y<j.length;Y++){var q=j[Y];q!==null&&(q.lane&=-536870913)}a&=~Q}o!==0&&xv(e,o,0),m!==0&&d===0&&e.tag!==0&&(e.suspendedLanes|=m&~(_&~s))}function xv(e,s,a){e.pendingLanes|=s,e.suspendedLanes&=~s;var o=31-Hi(s);e.entangledLanes|=s,e.entanglements[o]=e.entanglements[o]|1073741824|a&4194090}function wv(e,s){var a=e.entangledLanes|=s;for(e=e.entanglements;a;){var o=31-Hi(a),d=1<<o;d&s|e[o]&s&&(e[o]|=s),a&=~d}}function dm(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function fm(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Ev(){var e=X.p;return e!==0?e:(e=window.event,e===void 0?32:n_(e.type))}function pE(e,s){var a=X.p;try{return X.p=e,s()}finally{X.p=a}}var Ca=Math.random().toString(36).slice(2),ai="__reactFiber$"+Ca,Ei="__reactProps$"+Ca,xo="__reactContainer$"+Ca,gm="__reactEvents$"+Ca,mE="__reactListeners$"+Ca,bE="__reactHandles$"+Ca,Tv="__reactResources$"+Ca,Du="__reactMarker$"+Ca;function pm(e){delete e[ai],delete e[Ei],delete e[gm],delete e[mE],delete e[bE]}function wo(e){var s=e[ai];if(s)return s;for(var a=e.parentNode;a;){if(s=a[xo]||a[ai]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(e=GS(e);e!==null;){if(a=e[ai])return a;e=GS(e)}return s}e=a,a=e.parentNode}return null}function Eo(e){if(e=e[ai]||e[xo]){var s=e.tag;if(s===5||s===6||s===13||s===26||s===27||s===3)return e}return null}function Nu(e){var s=e.tag;if(s===5||s===26||s===27||s===6)return e.stateNode;throw Error(n(33))}function To(e){var s=e[Tv];return s||(s=e[Tv]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function Pe(e){e[Du]=!0}var Cv=new Set,Mv={};function jr(e,s){Co(e,s),Co(e+"Capture",s)}function Co(e,s){for(Mv[e]=s,e=0;e<s.length;e++)Cv.add(s[e])}var yE=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Rv={},Dv={};function vE(e){return Fr.call(Dv,e)?!0:Fr.call(Rv,e)?!1:yE.test(e)?Dv[e]=!0:(Rv[e]=!0,!1)}function Hf(e,s,a){if(vE(s))if(a===null)e.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(s);return;case"boolean":var o=s.toLowerCase().slice(0,5);if(o!=="data-"&&o!=="aria-"){e.removeAttribute(s);return}}e.setAttribute(s,""+a)}}function Bf(e,s,a){if(a===null)e.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(s);return}e.setAttribute(s,""+a)}}function Tn(e,s,a,o){if(o===null)e.removeAttribute(a);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(s,a,""+o)}}var mm,Nv;function Mo(e){if(mm===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);mm=s&&s[1]||"",Nv=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+mm+e+Nv}var bm=!1;function ym(e,s){if(!e||bm)return"";bm=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var o={DetermineComponentFrameRoot:function(){try{if(s){var Q=function(){throw Error()};if(Object.defineProperty(Q.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Q,[])}catch(q){var j=q}Reflect.construct(e,[],Q)}else{try{Q.call()}catch(q){j=q}e.call(Q.prototype)}}else{try{throw Error()}catch(q){j=q}(Q=e())&&typeof Q.catch=="function"&&Q.catch(function(){})}}catch(q){if(q&&j&&typeof q.stack=="string")return[q.stack,j.stack]}return[null,null]}};o.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var d=Object.getOwnPropertyDescriptor(o.DetermineComponentFrameRoot,"name");d&&d.configurable&&Object.defineProperty(o.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=o.DetermineComponentFrameRoot(),_=m[0],C=m[1];if(_&&C){var D=_.split(`
`),U=C.split(`
`);for(d=o=0;o<D.length&&!D[o].includes("DetermineComponentFrameRoot");)o++;for(;d<U.length&&!U[d].includes("DetermineComponentFrameRoot");)d++;if(o===D.length||d===U.length)for(o=D.length-1,d=U.length-1;1<=o&&0<=d&&D[o]!==U[d];)d--;for(;1<=o&&0<=d;o--,d--)if(D[o]!==U[d]){if(o!==1||d!==1)do if(o--,d--,0>d||D[o]!==U[d]){var Y=`
`+D[o].replace(" at new "," at ");return e.displayName&&Y.includes("<anonymous>")&&(Y=Y.replace("<anonymous>",e.displayName)),Y}while(1<=o&&0<=d);break}}}finally{bm=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?Mo(a):""}function AE(e){switch(e.tag){case 26:case 27:case 5:return Mo(e.type);case 16:return Mo("Lazy");case 13:return Mo("Suspense");case 19:return Mo("SuspenseList");case 0:case 15:return ym(e.type,!1);case 11:return ym(e.type.render,!1);case 1:return ym(e.type,!0);case 31:return Mo("Activity");default:return""}}function Ov(e){try{var s="";do s+=AE(e),e=e.return;while(e);return s}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function cs(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Lv(e){var s=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function SE(e){var s=Lv(e)?"checked":"value",a=Object.getOwnPropertyDescriptor(e.constructor.prototype,s),o=""+e[s];if(!e.hasOwnProperty(s)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var d=a.get,m=a.set;return Object.defineProperty(e,s,{configurable:!0,get:function(){return d.call(this)},set:function(_){o=""+_,m.call(this,_)}}),Object.defineProperty(e,s,{enumerable:a.enumerable}),{getValue:function(){return o},setValue:function(_){o=""+_},stopTracking:function(){e._valueTracker=null,delete e[s]}}}}function If(e){e._valueTracker||(e._valueTracker=SE(e))}function kv(e){if(!e)return!1;var s=e._valueTracker;if(!s)return!0;var a=s.getValue(),o="";return e&&(o=Lv(e)?e.checked?"true":"false":e.value),e=o,e!==a?(s.setValue(e),!0):!1}function Ff(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var _E=/[\n"\\]/g;function us(e){return e.replace(_E,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function vm(e,s,a,o,d,m,_,C){e.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?e.type=_:e.removeAttribute("type"),s!=null?_==="number"?(s===0&&e.value===""||e.value!=s)&&(e.value=""+cs(s)):e.value!==""+cs(s)&&(e.value=""+cs(s)):_!=="submit"&&_!=="reset"||e.removeAttribute("value"),s!=null?Am(e,_,cs(s)):a!=null?Am(e,_,cs(a)):o!=null&&e.removeAttribute("value"),d==null&&m!=null&&(e.defaultChecked=!!m),d!=null&&(e.checked=d&&typeof d!="function"&&typeof d!="symbol"),C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?e.name=""+cs(C):e.removeAttribute("name")}function zv(e,s,a,o,d,m,_,C){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(e.type=m),s!=null||a!=null){if(!(m!=="submit"&&m!=="reset"||s!=null))return;a=a!=null?""+cs(a):"",s=s!=null?""+cs(s):a,C||s===e.value||(e.value=s),e.defaultValue=s}o=o??d,o=typeof o!="function"&&typeof o!="symbol"&&!!o,e.checked=C?e.checked:!!o,e.defaultChecked=!!o,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(e.name=_)}function Am(e,s,a){s==="number"&&Ff(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function Ro(e,s,a,o){if(e=e.options,s){s={};for(var d=0;d<a.length;d++)s["$"+a[d]]=!0;for(a=0;a<e.length;a++)d=s.hasOwnProperty("$"+e[a].value),e[a].selected!==d&&(e[a].selected=d),d&&o&&(e[a].defaultSelected=!0)}else{for(a=""+cs(a),s=null,d=0;d<e.length;d++){if(e[d].value===a){e[d].selected=!0,o&&(e[d].defaultSelected=!0);return}s!==null||e[d].disabled||(s=e[d])}s!==null&&(s.selected=!0)}}function Pv(e,s,a){if(s!=null&&(s=""+cs(s),s!==e.value&&(e.value=s),a==null)){e.defaultValue!==s&&(e.defaultValue=s);return}e.defaultValue=a!=null?""+cs(a):""}function Hv(e,s,a,o){if(s==null){if(o!=null){if(a!=null)throw Error(n(92));if(Ft(o)){if(1<o.length)throw Error(n(93));o=o[0]}a=o}a==null&&(a=""),s=a}a=cs(s),e.defaultValue=a,o=e.textContent,o===a&&o!==""&&o!==null&&(e.value=o)}function Do(e,s){if(s){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=s;return}}e.textContent=s}var xE=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Bv(e,s,a){var o=s.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?o?e.setProperty(s,""):s==="float"?e.cssFloat="":e[s]="":o?e.setProperty(s,a):typeof a!="number"||a===0||xE.has(s)?s==="float"?e.cssFloat=a:e[s]=(""+a).trim():e[s]=a+"px"}function Iv(e,s,a){if(s!=null&&typeof s!="object")throw Error(n(62));if(e=e.style,a!=null){for(var o in a)!a.hasOwnProperty(o)||s!=null&&s.hasOwnProperty(o)||(o.indexOf("--")===0?e.setProperty(o,""):o==="float"?e.cssFloat="":e[o]="");for(var d in s)o=s[d],s.hasOwnProperty(d)&&a[d]!==o&&Bv(e,d,o)}else for(var m in s)s.hasOwnProperty(m)&&Bv(e,m,s[m])}function Sm(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wE=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),EE=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Uf(e){return EE.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var _m=null;function xm(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var No=null,Oo=null;function Fv(e){var s=Eo(e);if(s&&(e=s.stateNode)){var a=e[Ei]||null;t:switch(e=s.stateNode,s.type){case"input":if(vm(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),s=a.name,a.type==="radio"&&s!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+us(""+s)+'"][type="radio"]'),s=0;s<a.length;s++){var o=a[s];if(o!==e&&o.form===e.form){var d=o[Ei]||null;if(!d)throw Error(n(90));vm(o,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name)}}for(s=0;s<a.length;s++)o=a[s],o.form===e.form&&kv(o)}break t;case"textarea":Pv(e,a.value,a.defaultValue);break t;case"select":s=a.value,s!=null&&Ro(e,!!a.multiple,s,!1)}}}var wm=!1;function Uv(e,s,a){if(wm)return e(s,a);wm=!0;try{var o=e(s);return o}finally{if(wm=!1,(No!==null||Oo!==null)&&(Tg(),No&&(s=No,e=Oo,Oo=No=null,Fv(s),e)))for(s=0;s<e.length;s++)Fv(e[s])}}function Ou(e,s){var a=e.stateNode;if(a===null)return null;var o=a[Ei]||null;if(o===null)return null;a=o[s];t:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(e=e.type,o=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!o;break t;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(n(231,s,typeof a));return a}var Cn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Em=!1;if(Cn)try{var Lu={};Object.defineProperty(Lu,"passive",{get:function(){Em=!0}}),window.addEventListener("test",Lu,Lu),window.removeEventListener("test",Lu,Lu)}catch{Em=!1}var Ma=null,Tm=null,jf=null;function jv(){if(jf)return jf;var e,s=Tm,a=s.length,o,d="value"in Ma?Ma.value:Ma.textContent,m=d.length;for(e=0;e<a&&s[e]===d[e];e++);var _=a-e;for(o=1;o<=_&&s[a-o]===d[m-o];o++);return jf=d.slice(e,1<o?1-o:void 0)}function Gf(e){var s=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&s===13&&(e=13)):e=s,e===10&&(e=13),32<=e||e===13?e:0}function qf(){return!0}function Gv(){return!1}function Ti(e){function s(a,o,d,m,_){this._reactName=a,this._targetInst=d,this.type=o,this.nativeEvent=m,this.target=_,this.currentTarget=null;for(var C in e)e.hasOwnProperty(C)&&(a=e[C],this[C]=a?a(m):m[C]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?qf:Gv,this.isPropagationStopped=Gv,this}return p(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=qf)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=qf)},persist:function(){},isPersistent:qf}),s}var Gr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Vf=Ti(Gr),ku=p({},Gr,{view:0,detail:0}),TE=Ti(ku),Cm,Mm,zu,Xf=p({},ku,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Dm,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==zu&&(zu&&e.type==="mousemove"?(Cm=e.screenX-zu.screenX,Mm=e.screenY-zu.screenY):Mm=Cm=0,zu=e),Cm)},movementY:function(e){return"movementY"in e?e.movementY:Mm}}),qv=Ti(Xf),CE=p({},Xf,{dataTransfer:0}),ME=Ti(CE),RE=p({},ku,{relatedTarget:0}),Rm=Ti(RE),DE=p({},Gr,{animationName:0,elapsedTime:0,pseudoElement:0}),NE=Ti(DE),OE=p({},Gr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),LE=Ti(OE),kE=p({},Gr,{data:0}),Vv=Ti(kE),zE={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},PE={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},HE={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function BE(e){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(e):(e=HE[e])?!!s[e]:!1}function Dm(){return BE}var IE=p({},ku,{key:function(e){if(e.key){var s=zE[e.key]||e.key;if(s!=="Unidentified")return s}return e.type==="keypress"?(e=Gf(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?PE[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Dm,charCode:function(e){return e.type==="keypress"?Gf(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Gf(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),FE=Ti(IE),UE=p({},Xf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Xv=Ti(UE),jE=p({},ku,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Dm}),GE=Ti(jE),qE=p({},Gr,{propertyName:0,elapsedTime:0,pseudoElement:0}),VE=Ti(qE),XE=p({},Xf,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),YE=Ti(XE),$E=p({},Gr,{newState:0,oldState:0}),KE=Ti($E),QE=[9,13,27,32],Nm=Cn&&"CompositionEvent"in window,Pu=null;Cn&&"documentMode"in document&&(Pu=document.documentMode);var ZE=Cn&&"TextEvent"in window&&!Pu,Yv=Cn&&(!Nm||Pu&&8<Pu&&11>=Pu),$v=" ",Kv=!1;function Qv(e,s){switch(e){case"keyup":return QE.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Zv(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Lo=!1;function WE(e,s){switch(e){case"compositionend":return Zv(s);case"keypress":return s.which!==32?null:(Kv=!0,$v);case"textInput":return e=s.data,e===$v&&Kv?null:e;default:return null}}function JE(e,s){if(Lo)return e==="compositionend"||!Nm&&Qv(e,s)?(e=jv(),jf=Tm=Ma=null,Lo=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Yv&&s.locale!=="ko"?null:s.data;default:return null}}var tT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wv(e){var s=e&&e.nodeName&&e.nodeName.toLowerCase();return s==="input"?!!tT[e.type]:s==="textarea"}function Jv(e,s,a,o){No?Oo?Oo.push(o):Oo=[o]:No=o,s=Og(s,"onChange"),0<s.length&&(a=new Vf("onChange","change",null,a,o),e.push({event:a,listeners:s}))}var Hu=null,Bu=null;function eT(e){LS(e,0)}function Yf(e){var s=Nu(e);if(kv(s))return e}function tA(e,s){if(e==="change")return s}var eA=!1;if(Cn){var Om;if(Cn){var Lm="oninput"in document;if(!Lm){var iA=document.createElement("div");iA.setAttribute("oninput","return;"),Lm=typeof iA.oninput=="function"}Om=Lm}else Om=!1;eA=Om&&(!document.documentMode||9<document.documentMode)}function sA(){Hu&&(Hu.detachEvent("onpropertychange",nA),Bu=Hu=null)}function nA(e){if(e.propertyName==="value"&&Yf(Bu)){var s=[];Jv(s,Bu,e,xm(e)),Uv(eT,s)}}function iT(e,s,a){e==="focusin"?(sA(),Hu=s,Bu=a,Hu.attachEvent("onpropertychange",nA)):e==="focusout"&&sA()}function sT(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Yf(Bu)}function nT(e,s){if(e==="click")return Yf(s)}function aT(e,s){if(e==="input"||e==="change")return Yf(s)}function rT(e,s){return e===s&&(e!==0||1/e===1/s)||e!==e&&s!==s}var Bi=typeof Object.is=="function"?Object.is:rT;function Iu(e,s){if(Bi(e,s))return!0;if(typeof e!="object"||e===null||typeof s!="object"||s===null)return!1;var a=Object.keys(e),o=Object.keys(s);if(a.length!==o.length)return!1;for(o=0;o<a.length;o++){var d=a[o];if(!Fr.call(s,d)||!Bi(e[d],s[d]))return!1}return!0}function aA(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function rA(e,s){var a=aA(e);e=0;for(var o;a;){if(a.nodeType===3){if(o=e+a.textContent.length,e<=s&&o>=s)return{node:a,offset:s-e};e=o}t:{for(;a;){if(a.nextSibling){a=a.nextSibling;break t}a=a.parentNode}a=void 0}a=aA(a)}}function lA(e,s){return e&&s?e===s?!0:e&&e.nodeType===3?!1:s&&s.nodeType===3?lA(e,s.parentNode):"contains"in e?e.contains(s):e.compareDocumentPosition?!!(e.compareDocumentPosition(s)&16):!1:!1}function oA(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var s=Ff(e.document);s instanceof e.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)e=s.contentWindow;else break;s=Ff(e.document)}return s}function km(e){var s=e&&e.nodeName&&e.nodeName.toLowerCase();return s&&(s==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||s==="textarea"||e.contentEditable==="true")}var lT=Cn&&"documentMode"in document&&11>=document.documentMode,ko=null,zm=null,Fu=null,Pm=!1;function cA(e,s,a){var o=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Pm||ko==null||ko!==Ff(o)||(o=ko,"selectionStart"in o&&km(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),Fu&&Iu(Fu,o)||(Fu=o,o=Og(zm,"onSelect"),0<o.length&&(s=new Vf("onSelect","select",null,s,a),e.push({event:s,listeners:o}),s.target=ko)))}function qr(e,s){var a={};return a[e.toLowerCase()]=s.toLowerCase(),a["Webkit"+e]="webkit"+s,a["Moz"+e]="moz"+s,a}var zo={animationend:qr("Animation","AnimationEnd"),animationiteration:qr("Animation","AnimationIteration"),animationstart:qr("Animation","AnimationStart"),transitionrun:qr("Transition","TransitionRun"),transitionstart:qr("Transition","TransitionStart"),transitioncancel:qr("Transition","TransitionCancel"),transitionend:qr("Transition","TransitionEnd")},Hm={},uA={};Cn&&(uA=document.createElement("div").style,"AnimationEvent"in window||(delete zo.animationend.animation,delete zo.animationiteration.animation,delete zo.animationstart.animation),"TransitionEvent"in window||delete zo.transitionend.transition);function Vr(e){if(Hm[e])return Hm[e];if(!zo[e])return e;var s=zo[e],a;for(a in s)if(s.hasOwnProperty(a)&&a in uA)return Hm[e]=s[a];return e}var hA=Vr("animationend"),dA=Vr("animationiteration"),fA=Vr("animationstart"),oT=Vr("transitionrun"),cT=Vr("transitionstart"),uT=Vr("transitioncancel"),gA=Vr("transitionend"),pA=new Map,Bm="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Bm.push("scrollEnd");function Rs(e,s){pA.set(e,s),jr(s,[e])}var mA=new WeakMap;function hs(e,s){if(typeof e=="object"&&e!==null){var a=mA.get(e);return a!==void 0?a:(s={value:e,source:s,stack:Ov(s)},mA.set(e,s),s)}return{value:e,source:s,stack:Ov(s)}}var ds=[],Po=0,Im=0;function $f(){for(var e=Po,s=Im=Po=0;s<e;){var a=ds[s];ds[s++]=null;var o=ds[s];ds[s++]=null;var d=ds[s];ds[s++]=null;var m=ds[s];if(ds[s++]=null,o!==null&&d!==null){var _=o.pending;_===null?d.next=d:(d.next=_.next,_.next=d),o.pending=d}m!==0&&bA(a,d,m)}}function Kf(e,s,a,o){ds[Po++]=e,ds[Po++]=s,ds[Po++]=a,ds[Po++]=o,Im|=o,e.lanes|=o,e=e.alternate,e!==null&&(e.lanes|=o)}function Fm(e,s,a,o){return Kf(e,s,a,o),Qf(e)}function Ho(e,s){return Kf(e,null,null,s),Qf(e)}function bA(e,s,a){e.lanes|=a;var o=e.alternate;o!==null&&(o.lanes|=a);for(var d=!1,m=e.return;m!==null;)m.childLanes|=a,o=m.alternate,o!==null&&(o.childLanes|=a),m.tag===22&&(e=m.stateNode,e===null||e._visibility&1||(d=!0)),e=m,m=m.return;return e.tag===3?(m=e.stateNode,d&&s!==null&&(d=31-Hi(a),e=m.hiddenUpdates,o=e[d],o===null?e[d]=[s]:o.push(s),s.lane=a|536870912),m):null}function Qf(e){if(50<hh)throw hh=0,X0=null,Error(n(185));for(var s=e.return;s!==null;)e=s,s=e.return;return e.tag===3?e.stateNode:null}var Bo={};function hT(e,s,a,o){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ii(e,s,a,o){return new hT(e,s,a,o)}function Um(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Mn(e,s){var a=e.alternate;return a===null?(a=Ii(e.tag,s,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=s,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,s=e.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function yA(e,s){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=s,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,s=a.dependencies,e.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),e}function Zf(e,s,a,o,d,m){var _=0;if(o=e,typeof e=="function")Um(e)&&(_=1);else if(typeof e=="string")_=f2(e,a,ut.current)?26:e==="html"||e==="head"||e==="body"?27:5;else t:switch(e){case et:return e=Ii(31,a,s,d),e.elementType=et,e.lanes=m,e;case T:return Xr(a.children,d,m,s);case x:_=8,d|=24;break;case M:return e=Ii(12,a,s,d|2),e.elementType=M,e.lanes=m,e;case z:return e=Ii(13,a,s,d),e.elementType=z,e.lanes=m,e;case G:return e=Ii(19,a,s,d),e.elementType=G,e.lanes=m,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case R:case O:_=10;break t;case k:_=9;break t;case H:_=11;break t;case V:_=14;break t;case Z:_=16,o=null;break t}_=29,a=Error(n(130,e===null?"null":typeof e,"")),o=null}return s=Ii(_,a,s,d),s.elementType=e,s.type=o,s.lanes=m,s}function Xr(e,s,a,o){return e=Ii(7,e,o,s),e.lanes=a,e}function jm(e,s,a){return e=Ii(6,e,null,s),e.lanes=a,e}function Gm(e,s,a){return s=Ii(4,e.children!==null?e.children:[],e.key,s),s.lanes=a,s.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},s}var Io=[],Fo=0,Wf=null,Jf=0,fs=[],gs=0,Yr=null,Rn=1,Dn="";function $r(e,s){Io[Fo++]=Jf,Io[Fo++]=Wf,Wf=e,Jf=s}function vA(e,s,a){fs[gs++]=Rn,fs[gs++]=Dn,fs[gs++]=Yr,Yr=e;var o=Rn;e=Dn;var d=32-Hi(o)-1;o&=~(1<<d),a+=1;var m=32-Hi(s)+d;if(30<m){var _=d-d%5;m=(o&(1<<_)-1).toString(32),o>>=_,d-=_,Rn=1<<32-Hi(s)+d|a<<d|o,Dn=m+e}else Rn=1<<m|a<<d|o,Dn=e}function qm(e){e.return!==null&&($r(e,1),vA(e,1,0))}function Vm(e){for(;e===Wf;)Wf=Io[--Fo],Io[Fo]=null,Jf=Io[--Fo],Io[Fo]=null;for(;e===Yr;)Yr=fs[--gs],fs[gs]=null,Dn=fs[--gs],fs[gs]=null,Rn=fs[--gs],fs[gs]=null}var gi=null,ge=null,jt=!1,Kr=null,Zs=!1,Xm=Error(n(519));function Qr(e){var s=Error(n(418,""));throw Gu(hs(s,e)),Xm}function AA(e){var s=e.stateNode,a=e.type,o=e.memoizedProps;switch(s[ai]=e,s[Ei]=o,a){case"dialog":Ot("cancel",s),Ot("close",s);break;case"iframe":case"object":case"embed":Ot("load",s);break;case"video":case"audio":for(a=0;a<fh.length;a++)Ot(fh[a],s);break;case"source":Ot("error",s);break;case"img":case"image":case"link":Ot("error",s),Ot("load",s);break;case"details":Ot("toggle",s);break;case"input":Ot("invalid",s),zv(s,o.value,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name,!0),If(s);break;case"select":Ot("invalid",s);break;case"textarea":Ot("invalid",s),Hv(s,o.value,o.defaultValue,o.children),If(s)}a=o.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||s.textContent===""+a||o.suppressHydrationWarning===!0||HS(s.textContent,a)?(o.popover!=null&&(Ot("beforetoggle",s),Ot("toggle",s)),o.onScroll!=null&&Ot("scroll",s),o.onScrollEnd!=null&&Ot("scrollend",s),o.onClick!=null&&(s.onclick=Lg),s=!0):s=!1,s||Qr(e)}function SA(e){for(gi=e.return;gi;)switch(gi.tag){case 5:case 13:Zs=!1;return;case 27:case 3:Zs=!0;return;default:gi=gi.return}}function Uu(e){if(e!==gi)return!1;if(!jt)return SA(e),jt=!0,!1;var s=e.tag,a;if((a=s!==3&&s!==27)&&((a=s===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||ob(e.type,e.memoizedProps)),a=!a),a&&ge&&Qr(e),SA(e),s===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(n(317));t:{for(e=e.nextSibling,s=0;e;){if(e.nodeType===8)if(a=e.data,a==="/$"){if(s===0){ge=Ns(e.nextSibling);break t}s--}else a!=="$"&&a!=="$!"&&a!=="$?"||s++;e=e.nextSibling}ge=null}}else s===27?(s=ge,qa(e.type)?(e=db,db=null,ge=e):ge=s):ge=gi?Ns(e.stateNode.nextSibling):null;return!0}function ju(){ge=gi=null,jt=!1}function _A(){var e=Kr;return e!==null&&(Ri===null?Ri=e:Ri.push.apply(Ri,e),Kr=null),e}function Gu(e){Kr===null?Kr=[e]:Kr.push(e)}var Ym=K(null),Zr=null,Nn=null;function Ra(e,s,a){W(Ym,s._currentValue),s._currentValue=a}function On(e){e._currentValue=Ym.current,tt(Ym)}function $m(e,s,a){for(;e!==null;){var o=e.alternate;if((e.childLanes&s)!==s?(e.childLanes|=s,o!==null&&(o.childLanes|=s)):o!==null&&(o.childLanes&s)!==s&&(o.childLanes|=s),e===a)break;e=e.return}}function Km(e,s,a,o){var d=e.child;for(d!==null&&(d.return=e);d!==null;){var m=d.dependencies;if(m!==null){var _=d.child;m=m.firstContext;t:for(;m!==null;){var C=m;m=d;for(var D=0;D<s.length;D++)if(C.context===s[D]){m.lanes|=a,C=m.alternate,C!==null&&(C.lanes|=a),$m(m.return,a,e),o||(_=null);break t}m=C.next}}else if(d.tag===18){if(_=d.return,_===null)throw Error(n(341));_.lanes|=a,m=_.alternate,m!==null&&(m.lanes|=a),$m(_,a,e),_=null}else _=d.child;if(_!==null)_.return=d;else for(_=d;_!==null;){if(_===e){_=null;break}if(d=_.sibling,d!==null){d.return=_.return,_=d;break}_=_.return}d=_}}function qu(e,s,a,o){e=null;for(var d=s,m=!1;d!==null;){if(!m){if((d.flags&524288)!==0)m=!0;else if((d.flags&262144)!==0)break}if(d.tag===10){var _=d.alternate;if(_===null)throw Error(n(387));if(_=_.memoizedProps,_!==null){var C=d.type;Bi(d.pendingProps.value,_.value)||(e!==null?e.push(C):e=[C])}}else if(d===kt.current){if(_=d.alternate,_===null)throw Error(n(387));_.memoizedState.memoizedState!==d.memoizedState.memoizedState&&(e!==null?e.push(vh):e=[vh])}d=d.return}e!==null&&Km(s,e,a,o),s.flags|=262144}function tg(e){for(e=e.firstContext;e!==null;){if(!Bi(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Wr(e){Zr=e,Nn=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function ri(e){return xA(Zr,e)}function eg(e,s){return Zr===null&&Wr(e),xA(e,s)}function xA(e,s){var a=s._currentValue;if(s={context:s,memoizedValue:a,next:null},Nn===null){if(e===null)throw Error(n(308));Nn=s,e.dependencies={lanes:0,firstContext:s},e.flags|=524288}else Nn=Nn.next=s;return a}var dT=typeof AbortController<"u"?AbortController:function(){var e=[],s=this.signal={aborted:!1,addEventListener:function(a,o){e.push(o)}};this.abort=function(){s.aborted=!0,e.forEach(function(a){return a()})}},fT=b.unstable_scheduleCallback,gT=b.unstable_NormalPriority,Re={$$typeof:O,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Qm(){return{controller:new dT,data:new Map,refCount:0}}function Vu(e){e.refCount--,e.refCount===0&&fT(gT,function(){e.controller.abort()})}var Xu=null,Zm=0,Uo=0,jo=null;function pT(e,s){if(Xu===null){var a=Xu=[];Zm=0,Uo=J0(),jo={status:"pending",value:void 0,then:function(o){a.push(o)}}}return Zm++,s.then(wA,wA),s}function wA(){if(--Zm===0&&Xu!==null){jo!==null&&(jo.status="fulfilled");var e=Xu;Xu=null,Uo=0,jo=null;for(var s=0;s<e.length;s++)(0,e[s])()}}function mT(e,s){var a=[],o={status:"pending",value:null,reason:null,then:function(d){a.push(d)}};return e.then(function(){o.status="fulfilled",o.value=s;for(var d=0;d<a.length;d++)(0,a[d])(s)},function(d){for(o.status="rejected",o.reason=d,d=0;d<a.length;d++)(0,a[d])(void 0)}),o}var EA=B.S;B.S=function(e,s){typeof s=="object"&&s!==null&&typeof s.then=="function"&&pT(e,s),EA!==null&&EA(e,s)};var Jr=K(null);function Wm(){var e=Jr.current;return e!==null?e:se.pooledCache}function ig(e,s){s===null?W(Jr,Jr.current):W(Jr,s.pool)}function TA(){var e=Wm();return e===null?null:{parent:Re._currentValue,pool:e}}var Yu=Error(n(460)),CA=Error(n(474)),sg=Error(n(542)),Jm={then:function(){}};function MA(e){return e=e.status,e==="fulfilled"||e==="rejected"}function ng(){}function RA(e,s,a){switch(a=e[a],a===void 0?e.push(s):a!==s&&(s.then(ng,ng),s=a),s.status){case"fulfilled":return s.value;case"rejected":throw e=s.reason,NA(e),e;default:if(typeof s.status=="string")s.then(ng,ng);else{if(e=se,e!==null&&100<e.shellSuspendCounter)throw Error(n(482));e=s,e.status="pending",e.then(function(o){if(s.status==="pending"){var d=s;d.status="fulfilled",d.value=o}},function(o){if(s.status==="pending"){var d=s;d.status="rejected",d.reason=o}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw e=s.reason,NA(e),e}throw $u=s,Yu}}var $u=null;function DA(){if($u===null)throw Error(n(459));var e=$u;return $u=null,e}function NA(e){if(e===Yu||e===sg)throw Error(n(483))}var Da=!1;function t0(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function e0(e,s){e=e.updateQueue,s.updateQueue===e&&(s.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Na(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Oa(e,s,a){var o=e.updateQueue;if(o===null)return null;if(o=o.shared,(Xt&2)!==0){var d=o.pending;return d===null?s.next=s:(s.next=d.next,d.next=s),o.pending=s,s=Qf(e),bA(e,null,a),s}return Kf(e,o,s,a),Qf(e)}function Ku(e,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194048)!==0)){var o=s.lanes;o&=e.pendingLanes,a|=o,s.lanes=a,wv(e,a)}}function i0(e,s){var a=e.updateQueue,o=e.alternate;if(o!==null&&(o=o.updateQueue,a===o)){var d=null,m=null;if(a=a.firstBaseUpdate,a!==null){do{var _={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};m===null?d=m=_:m=m.next=_,a=a.next}while(a!==null);m===null?d=m=s:m=m.next=s}else d=m=s;a={baseState:o.baseState,firstBaseUpdate:d,lastBaseUpdate:m,shared:o.shared,callbacks:o.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=s:e.next=s,a.lastBaseUpdate=s}var s0=!1;function Qu(){if(s0){var e=jo;if(e!==null)throw e}}function Zu(e,s,a,o){s0=!1;var d=e.updateQueue;Da=!1;var m=d.firstBaseUpdate,_=d.lastBaseUpdate,C=d.shared.pending;if(C!==null){d.shared.pending=null;var D=C,U=D.next;D.next=null,_===null?m=U:_.next=U,_=D;var Y=e.alternate;Y!==null&&(Y=Y.updateQueue,C=Y.lastBaseUpdate,C!==_&&(C===null?Y.firstBaseUpdate=U:C.next=U,Y.lastBaseUpdate=D))}if(m!==null){var Q=d.baseState;_=0,Y=U=D=null,C=m;do{var j=C.lane&-536870913,q=j!==C.lane;if(q?(Ht&j)===j:(o&j)===j){j!==0&&j===Uo&&(s0=!0),Y!==null&&(Y=Y.next={lane:0,tag:C.tag,payload:C.payload,callback:null,next:null});t:{var yt=e,pt=C;j=s;var Zt=a;switch(pt.tag){case 1:if(yt=pt.payload,typeof yt=="function"){Q=yt.call(Zt,Q,j);break t}Q=yt;break t;case 3:yt.flags=yt.flags&-65537|128;case 0:if(yt=pt.payload,j=typeof yt=="function"?yt.call(Zt,Q,j):yt,j==null)break t;Q=p({},Q,j);break t;case 2:Da=!0}}j=C.callback,j!==null&&(e.flags|=64,q&&(e.flags|=8192),q=d.callbacks,q===null?d.callbacks=[j]:q.push(j))}else q={lane:j,tag:C.tag,payload:C.payload,callback:C.callback,next:null},Y===null?(U=Y=q,D=Q):Y=Y.next=q,_|=j;if(C=C.next,C===null){if(C=d.shared.pending,C===null)break;q=C,C=q.next,q.next=null,d.lastBaseUpdate=q,d.shared.pending=null}}while(!0);Y===null&&(D=Q),d.baseState=D,d.firstBaseUpdate=U,d.lastBaseUpdate=Y,m===null&&(d.shared.lanes=0),Fa|=_,e.lanes=_,e.memoizedState=Q}}function OA(e,s){if(typeof e!="function")throw Error(n(191,e));e.call(s)}function LA(e,s){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)OA(a[e],s)}var Go=K(null),ag=K(0);function kA(e,s){e=In,W(ag,e),W(Go,s),In=e|s.baseLanes}function n0(){W(ag,In),W(Go,Go.current)}function a0(){In=ag.current,tt(Go),tt(ag)}var La=0,Ct=null,Kt=null,_e=null,rg=!1,qo=!1,tl=!1,lg=0,Wu=0,Vo=null,bT=0;function be(){throw Error(n(321))}function r0(e,s){if(s===null)return!1;for(var a=0;a<s.length&&a<e.length;a++)if(!Bi(e[a],s[a]))return!1;return!0}function l0(e,s,a,o,d,m){return La=m,Ct=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,B.H=e===null||e.memoizedState===null?b1:y1,tl=!1,m=a(o,d),tl=!1,qo&&(m=PA(s,a,o,d)),zA(e),m}function zA(e){B.H=fg;var s=Kt!==null&&Kt.next!==null;if(La=0,_e=Kt=Ct=null,rg=!1,Wu=0,Vo=null,s)throw Error(n(300));e===null||He||(e=e.dependencies,e!==null&&tg(e)&&(He=!0))}function PA(e,s,a,o){Ct=e;var d=0;do{if(qo&&(Vo=null),Wu=0,qo=!1,25<=d)throw Error(n(301));if(d+=1,_e=Kt=null,e.updateQueue!=null){var m=e.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}B.H=wT,m=s(a,o)}while(qo);return m}function yT(){var e=B.H,s=e.useState()[0];return s=typeof s.then=="function"?Ju(s):s,e=e.useState()[0],(Kt!==null?Kt.memoizedState:null)!==e&&(Ct.flags|=1024),s}function o0(){var e=lg!==0;return lg=0,e}function c0(e,s,a){s.updateQueue=e.updateQueue,s.flags&=-2053,e.lanes&=~a}function u0(e){if(rg){for(e=e.memoizedState;e!==null;){var s=e.queue;s!==null&&(s.pending=null),e=e.next}rg=!1}La=0,_e=Kt=Ct=null,qo=!1,Wu=lg=0,Vo=null}function Ci(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return _e===null?Ct.memoizedState=_e=e:_e=_e.next=e,_e}function xe(){if(Kt===null){var e=Ct.alternate;e=e!==null?e.memoizedState:null}else e=Kt.next;var s=_e===null?Ct.memoizedState:_e.next;if(s!==null)_e=s,Kt=e;else{if(e===null)throw Ct.alternate===null?Error(n(467)):Error(n(310));Kt=e,e={memoizedState:Kt.memoizedState,baseState:Kt.baseState,baseQueue:Kt.baseQueue,queue:Kt.queue,next:null},_e===null?Ct.memoizedState=_e=e:_e=_e.next=e}return _e}function h0(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ju(e){var s=Wu;return Wu+=1,Vo===null&&(Vo=[]),e=RA(Vo,e,s),s=Ct,(_e===null?s.memoizedState:_e.next)===null&&(s=s.alternate,B.H=s===null||s.memoizedState===null?b1:y1),e}function og(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Ju(e);if(e.$$typeof===O)return ri(e)}throw Error(n(438,String(e)))}function d0(e){var s=null,a=Ct.updateQueue;if(a!==null&&(s=a.memoCache),s==null){var o=Ct.alternate;o!==null&&(o=o.updateQueue,o!==null&&(o=o.memoCache,o!=null&&(s={data:o.data.map(function(d){return d.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),a===null&&(a=h0(),Ct.updateQueue=a),a.memoCache=s,a=s.data[s.index],a===void 0)for(a=s.data[s.index]=Array(e),o=0;o<e;o++)a[o]=rt;return s.index++,a}function Ln(e,s){return typeof s=="function"?s(e):s}function cg(e){var s=xe();return f0(s,Kt,e)}function f0(e,s,a){var o=e.queue;if(o===null)throw Error(n(311));o.lastRenderedReducer=a;var d=e.baseQueue,m=o.pending;if(m!==null){if(d!==null){var _=d.next;d.next=m.next,m.next=_}s.baseQueue=d=m,o.pending=null}if(m=e.baseState,d===null)e.memoizedState=m;else{s=d.next;var C=_=null,D=null,U=s,Y=!1;do{var Q=U.lane&-536870913;if(Q!==U.lane?(Ht&Q)===Q:(La&Q)===Q){var j=U.revertLane;if(j===0)D!==null&&(D=D.next={lane:0,revertLane:0,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null}),Q===Uo&&(Y=!0);else if((La&j)===j){U=U.next,j===Uo&&(Y=!0);continue}else Q={lane:0,revertLane:U.revertLane,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null},D===null?(C=D=Q,_=m):D=D.next=Q,Ct.lanes|=j,Fa|=j;Q=U.action,tl&&a(m,Q),m=U.hasEagerState?U.eagerState:a(m,Q)}else j={lane:Q,revertLane:U.revertLane,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null},D===null?(C=D=j,_=m):D=D.next=j,Ct.lanes|=Q,Fa|=Q;U=U.next}while(U!==null&&U!==s);if(D===null?_=m:D.next=C,!Bi(m,e.memoizedState)&&(He=!0,Y&&(a=jo,a!==null)))throw a;e.memoizedState=m,e.baseState=_,e.baseQueue=D,o.lastRenderedState=m}return d===null&&(o.lanes=0),[e.memoizedState,o.dispatch]}function g0(e){var s=xe(),a=s.queue;if(a===null)throw Error(n(311));a.lastRenderedReducer=e;var o=a.dispatch,d=a.pending,m=s.memoizedState;if(d!==null){a.pending=null;var _=d=d.next;do m=e(m,_.action),_=_.next;while(_!==d);Bi(m,s.memoizedState)||(He=!0),s.memoizedState=m,s.baseQueue===null&&(s.baseState=m),a.lastRenderedState=m}return[m,o]}function HA(e,s,a){var o=Ct,d=xe(),m=jt;if(m){if(a===void 0)throw Error(n(407));a=a()}else a=s();var _=!Bi((Kt||d).memoizedState,a);_&&(d.memoizedState=a,He=!0),d=d.queue;var C=FA.bind(null,o,d,e);if(th(2048,8,C,[e]),d.getSnapshot!==s||_||_e!==null&&_e.memoizedState.tag&1){if(o.flags|=2048,Xo(9,ug(),IA.bind(null,o,d,a,s),null),se===null)throw Error(n(349));m||(La&124)!==0||BA(o,s,a)}return a}function BA(e,s,a){e.flags|=16384,e={getSnapshot:s,value:a},s=Ct.updateQueue,s===null?(s=h0(),Ct.updateQueue=s,s.stores=[e]):(a=s.stores,a===null?s.stores=[e]:a.push(e))}function IA(e,s,a,o){s.value=a,s.getSnapshot=o,UA(s)&&jA(e)}function FA(e,s,a){return a(function(){UA(s)&&jA(e)})}function UA(e){var s=e.getSnapshot;e=e.value;try{var a=s();return!Bi(e,a)}catch{return!0}}function jA(e){var s=Ho(e,2);s!==null&&qi(s,e,2)}function p0(e){var s=Ci();if(typeof e=="function"){var a=e;if(e=a(),tl){Ta(!0);try{a()}finally{Ta(!1)}}}return s.memoizedState=s.baseState=e,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ln,lastRenderedState:e},s}function GA(e,s,a,o){return e.baseState=a,f0(e,Kt,typeof o=="function"?o:Ln)}function vT(e,s,a,o,d){if(dg(e))throw Error(n(485));if(e=s.action,e!==null){var m={payload:d,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){m.listeners.push(_)}};B.T!==null?a(!0):m.isTransition=!1,o(m),a=s.pending,a===null?(m.next=s.pending=m,qA(s,m)):(m.next=a.next,s.pending=a.next=m)}}function qA(e,s){var a=s.action,o=s.payload,d=e.state;if(s.isTransition){var m=B.T,_={};B.T=_;try{var C=a(d,o),D=B.S;D!==null&&D(_,C),VA(e,s,C)}catch(U){m0(e,s,U)}finally{B.T=m}}else try{m=a(d,o),VA(e,s,m)}catch(U){m0(e,s,U)}}function VA(e,s,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(o){XA(e,s,o)},function(o){return m0(e,s,o)}):XA(e,s,a)}function XA(e,s,a){s.status="fulfilled",s.value=a,YA(s),e.state=a,s=e.pending,s!==null&&(a=s.next,a===s?e.pending=null:(a=a.next,s.next=a,qA(e,a)))}function m0(e,s,a){var o=e.pending;if(e.pending=null,o!==null){o=o.next;do s.status="rejected",s.reason=a,YA(s),s=s.next;while(s!==o)}e.action=null}function YA(e){e=e.listeners;for(var s=0;s<e.length;s++)(0,e[s])()}function $A(e,s){return s}function KA(e,s){if(jt){var a=se.formState;if(a!==null){t:{var o=Ct;if(jt){if(ge){e:{for(var d=ge,m=Zs;d.nodeType!==8;){if(!m){d=null;break e}if(d=Ns(d.nextSibling),d===null){d=null;break e}}m=d.data,d=m==="F!"||m==="F"?d:null}if(d){ge=Ns(d.nextSibling),o=d.data==="F!";break t}}Qr(o)}o=!1}o&&(s=a[0])}}return a=Ci(),a.memoizedState=a.baseState=s,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:$A,lastRenderedState:s},a.queue=o,a=g1.bind(null,Ct,o),o.dispatch=a,o=p0(!1),m=S0.bind(null,Ct,!1,o.queue),o=Ci(),d={state:s,dispatch:null,action:e,pending:null},o.queue=d,a=vT.bind(null,Ct,d,m,a),d.dispatch=a,o.memoizedState=e,[s,a,!1]}function QA(e){var s=xe();return ZA(s,Kt,e)}function ZA(e,s,a){if(s=f0(e,s,$A)[0],e=cg(Ln)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var o=Ju(s)}catch(_){throw _===Yu?sg:_}else o=s;s=xe();var d=s.queue,m=d.dispatch;return a!==s.memoizedState&&(Ct.flags|=2048,Xo(9,ug(),AT.bind(null,d,a),null)),[o,m,e]}function AT(e,s){e.action=s}function WA(e){var s=xe(),a=Kt;if(a!==null)return ZA(s,a,e);xe(),s=s.memoizedState,a=xe();var o=a.queue.dispatch;return a.memoizedState=e,[s,o,!1]}function Xo(e,s,a,o){return e={tag:e,create:a,deps:o,inst:s,next:null},s=Ct.updateQueue,s===null&&(s=h0(),Ct.updateQueue=s),a=s.lastEffect,a===null?s.lastEffect=e.next=e:(o=a.next,a.next=e,e.next=o,s.lastEffect=e),e}function ug(){return{destroy:void 0,resource:void 0}}function JA(){return xe().memoizedState}function hg(e,s,a,o){var d=Ci();o=o===void 0?null:o,Ct.flags|=e,d.memoizedState=Xo(1|s,ug(),a,o)}function th(e,s,a,o){var d=xe();o=o===void 0?null:o;var m=d.memoizedState.inst;Kt!==null&&o!==null&&r0(o,Kt.memoizedState.deps)?d.memoizedState=Xo(s,m,a,o):(Ct.flags|=e,d.memoizedState=Xo(1|s,m,a,o))}function t1(e,s){hg(8390656,8,e,s)}function e1(e,s){th(2048,8,e,s)}function i1(e,s){return th(4,2,e,s)}function s1(e,s){return th(4,4,e,s)}function n1(e,s){if(typeof s=="function"){e=e();var a=s(e);return function(){typeof a=="function"?a():s(null)}}if(s!=null)return e=e(),s.current=e,function(){s.current=null}}function a1(e,s,a){a=a!=null?a.concat([e]):null,th(4,4,n1.bind(null,s,e),a)}function b0(){}function r1(e,s){var a=xe();s=s===void 0?null:s;var o=a.memoizedState;return s!==null&&r0(s,o[1])?o[0]:(a.memoizedState=[e,s],e)}function l1(e,s){var a=xe();s=s===void 0?null:s;var o=a.memoizedState;if(s!==null&&r0(s,o[1]))return o[0];if(o=e(),tl){Ta(!0);try{e()}finally{Ta(!1)}}return a.memoizedState=[o,s],o}function y0(e,s,a){return a===void 0||(La&1073741824)!==0?e.memoizedState=s:(e.memoizedState=a,e=uS(),Ct.lanes|=e,Fa|=e,a)}function o1(e,s,a,o){return Bi(a,s)?a:Go.current!==null?(e=y0(e,a,o),Bi(e,s)||(He=!0),e):(La&42)===0?(He=!0,e.memoizedState=a):(e=uS(),Ct.lanes|=e,Fa|=e,s)}function c1(e,s,a,o,d){var m=X.p;X.p=m!==0&&8>m?m:8;var _=B.T,C={};B.T=C,S0(e,!1,s,a);try{var D=d(),U=B.S;if(U!==null&&U(C,D),D!==null&&typeof D=="object"&&typeof D.then=="function"){var Y=mT(D,o);eh(e,s,Y,Gi(e))}else eh(e,s,o,Gi(e))}catch(Q){eh(e,s,{then:function(){},status:"rejected",reason:Q},Gi())}finally{X.p=m,B.T=_}}function ST(){}function v0(e,s,a,o){if(e.tag!==5)throw Error(n(476));var d=u1(e).queue;c1(e,d,s,ct,a===null?ST:function(){return h1(e),a(o)})}function u1(e){var s=e.memoizedState;if(s!==null)return s;s={memoizedState:ct,baseState:ct,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ln,lastRenderedState:ct},next:null};var a={};return s.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ln,lastRenderedState:a},next:null},e.memoizedState=s,e=e.alternate,e!==null&&(e.memoizedState=s),s}function h1(e){var s=u1(e).next.queue;eh(e,s,{},Gi())}function A0(){return ri(vh)}function d1(){return xe().memoizedState}function f1(){return xe().memoizedState}function _T(e){for(var s=e.return;s!==null;){switch(s.tag){case 24:case 3:var a=Gi();e=Na(a);var o=Oa(s,e,a);o!==null&&(qi(o,s,a),Ku(o,s,a)),s={cache:Qm()},e.payload=s;return}s=s.return}}function xT(e,s,a){var o=Gi();a={lane:o,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},dg(e)?p1(s,a):(a=Fm(e,s,a,o),a!==null&&(qi(a,e,o),m1(a,s,o)))}function g1(e,s,a){var o=Gi();eh(e,s,a,o)}function eh(e,s,a,o){var d={lane:o,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(dg(e))p1(s,d);else{var m=e.alternate;if(e.lanes===0&&(m===null||m.lanes===0)&&(m=s.lastRenderedReducer,m!==null))try{var _=s.lastRenderedState,C=m(_,a);if(d.hasEagerState=!0,d.eagerState=C,Bi(C,_))return Kf(e,s,d,0),se===null&&$f(),!1}catch{}finally{}if(a=Fm(e,s,d,o),a!==null)return qi(a,e,o),m1(a,s,o),!0}return!1}function S0(e,s,a,o){if(o={lane:2,revertLane:J0(),action:o,hasEagerState:!1,eagerState:null,next:null},dg(e)){if(s)throw Error(n(479))}else s=Fm(e,a,o,2),s!==null&&qi(s,e,2)}function dg(e){var s=e.alternate;return e===Ct||s!==null&&s===Ct}function p1(e,s){qo=rg=!0;var a=e.pending;a===null?s.next=s:(s.next=a.next,a.next=s),e.pending=s}function m1(e,s,a){if((a&4194048)!==0){var o=s.lanes;o&=e.pendingLanes,a|=o,s.lanes=a,wv(e,a)}}var fg={readContext:ri,use:og,useCallback:be,useContext:be,useEffect:be,useImperativeHandle:be,useLayoutEffect:be,useInsertionEffect:be,useMemo:be,useReducer:be,useRef:be,useState:be,useDebugValue:be,useDeferredValue:be,useTransition:be,useSyncExternalStore:be,useId:be,useHostTransitionStatus:be,useFormState:be,useActionState:be,useOptimistic:be,useMemoCache:be,useCacheRefresh:be},b1={readContext:ri,use:og,useCallback:function(e,s){return Ci().memoizedState=[e,s===void 0?null:s],e},useContext:ri,useEffect:t1,useImperativeHandle:function(e,s,a){a=a!=null?a.concat([e]):null,hg(4194308,4,n1.bind(null,s,e),a)},useLayoutEffect:function(e,s){return hg(4194308,4,e,s)},useInsertionEffect:function(e,s){hg(4,2,e,s)},useMemo:function(e,s){var a=Ci();s=s===void 0?null:s;var o=e();if(tl){Ta(!0);try{e()}finally{Ta(!1)}}return a.memoizedState=[o,s],o},useReducer:function(e,s,a){var o=Ci();if(a!==void 0){var d=a(s);if(tl){Ta(!0);try{a(s)}finally{Ta(!1)}}}else d=s;return o.memoizedState=o.baseState=d,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:d},o.queue=e,e=e.dispatch=xT.bind(null,Ct,e),[o.memoizedState,e]},useRef:function(e){var s=Ci();return e={current:e},s.memoizedState=e},useState:function(e){e=p0(e);var s=e.queue,a=g1.bind(null,Ct,s);return s.dispatch=a,[e.memoizedState,a]},useDebugValue:b0,useDeferredValue:function(e,s){var a=Ci();return y0(a,e,s)},useTransition:function(){var e=p0(!1);return e=c1.bind(null,Ct,e.queue,!0,!1),Ci().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,s,a){var o=Ct,d=Ci();if(jt){if(a===void 0)throw Error(n(407));a=a()}else{if(a=s(),se===null)throw Error(n(349));(Ht&124)!==0||BA(o,s,a)}d.memoizedState=a;var m={value:a,getSnapshot:s};return d.queue=m,t1(FA.bind(null,o,m,e),[e]),o.flags|=2048,Xo(9,ug(),IA.bind(null,o,m,a,s),null),a},useId:function(){var e=Ci(),s=se.identifierPrefix;if(jt){var a=Dn,o=Rn;a=(o&~(1<<32-Hi(o)-1)).toString(32)+a,s=""+s+"R"+a,a=lg++,0<a&&(s+="H"+a.toString(32)),s+=""}else a=bT++,s=""+s+"r"+a.toString(32)+"";return e.memoizedState=s},useHostTransitionStatus:A0,useFormState:KA,useActionState:KA,useOptimistic:function(e){var s=Ci();s.memoizedState=s.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=a,s=S0.bind(null,Ct,!0,a),a.dispatch=s,[e,s]},useMemoCache:d0,useCacheRefresh:function(){return Ci().memoizedState=_T.bind(null,Ct)}},y1={readContext:ri,use:og,useCallback:r1,useContext:ri,useEffect:e1,useImperativeHandle:a1,useInsertionEffect:i1,useLayoutEffect:s1,useMemo:l1,useReducer:cg,useRef:JA,useState:function(){return cg(Ln)},useDebugValue:b0,useDeferredValue:function(e,s){var a=xe();return o1(a,Kt.memoizedState,e,s)},useTransition:function(){var e=cg(Ln)[0],s=xe().memoizedState;return[typeof e=="boolean"?e:Ju(e),s]},useSyncExternalStore:HA,useId:d1,useHostTransitionStatus:A0,useFormState:QA,useActionState:QA,useOptimistic:function(e,s){var a=xe();return GA(a,Kt,e,s)},useMemoCache:d0,useCacheRefresh:f1},wT={readContext:ri,use:og,useCallback:r1,useContext:ri,useEffect:e1,useImperativeHandle:a1,useInsertionEffect:i1,useLayoutEffect:s1,useMemo:l1,useReducer:g0,useRef:JA,useState:function(){return g0(Ln)},useDebugValue:b0,useDeferredValue:function(e,s){var a=xe();return Kt===null?y0(a,e,s):o1(a,Kt.memoizedState,e,s)},useTransition:function(){var e=g0(Ln)[0],s=xe().memoizedState;return[typeof e=="boolean"?e:Ju(e),s]},useSyncExternalStore:HA,useId:d1,useHostTransitionStatus:A0,useFormState:WA,useActionState:WA,useOptimistic:function(e,s){var a=xe();return Kt!==null?GA(a,Kt,e,s):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:d0,useCacheRefresh:f1},Yo=null,ih=0;function gg(e){var s=ih;return ih+=1,Yo===null&&(Yo=[]),RA(Yo,e,s)}function sh(e,s){s=s.props.ref,e.ref=s!==void 0?s:null}function pg(e,s){throw s.$$typeof===y?Error(n(525)):(e=Object.prototype.toString.call(s),Error(n(31,e==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":e)))}function v1(e){var s=e._init;return s(e._payload)}function A1(e){function s(I,L){if(e){var F=I.deletions;F===null?(I.deletions=[L],I.flags|=16):F.push(L)}}function a(I,L){if(!e)return null;for(;L!==null;)s(I,L),L=L.sibling;return null}function o(I){for(var L=new Map;I!==null;)I.key!==null?L.set(I.key,I):L.set(I.index,I),I=I.sibling;return L}function d(I,L){return I=Mn(I,L),I.index=0,I.sibling=null,I}function m(I,L,F){return I.index=F,e?(F=I.alternate,F!==null?(F=F.index,F<L?(I.flags|=67108866,L):F):(I.flags|=67108866,L)):(I.flags|=1048576,L)}function _(I){return e&&I.alternate===null&&(I.flags|=67108866),I}function C(I,L,F,$){return L===null||L.tag!==6?(L=jm(F,I.mode,$),L.return=I,L):(L=d(L,F),L.return=I,L)}function D(I,L,F,$){var ot=F.type;return ot===T?Y(I,L,F.props.children,$,F.key):L!==null&&(L.elementType===ot||typeof ot=="object"&&ot!==null&&ot.$$typeof===Z&&v1(ot)===L.type)?(L=d(L,F.props),sh(L,F),L.return=I,L):(L=Zf(F.type,F.key,F.props,null,I.mode,$),sh(L,F),L.return=I,L)}function U(I,L,F,$){return L===null||L.tag!==4||L.stateNode.containerInfo!==F.containerInfo||L.stateNode.implementation!==F.implementation?(L=Gm(F,I.mode,$),L.return=I,L):(L=d(L,F.children||[]),L.return=I,L)}function Y(I,L,F,$,ot){return L===null||L.tag!==7?(L=Xr(F,I.mode,$,ot),L.return=I,L):(L=d(L,F),L.return=I,L)}function Q(I,L,F){if(typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint")return L=jm(""+L,I.mode,F),L.return=I,L;if(typeof L=="object"&&L!==null){switch(L.$$typeof){case v:return F=Zf(L.type,L.key,L.props,null,I.mode,F),sh(F,L),F.return=I,F;case S:return L=Gm(L,I.mode,F),L.return=I,L;case Z:var $=L._init;return L=$(L._payload),Q(I,L,F)}if(Ft(L)||vt(L))return L=Xr(L,I.mode,F,null),L.return=I,L;if(typeof L.then=="function")return Q(I,gg(L),F);if(L.$$typeof===O)return Q(I,eg(I,L),F);pg(I,L)}return null}function j(I,L,F,$){var ot=L!==null?L.key:null;if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return ot!==null?null:C(I,L,""+F,$);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case v:return F.key===ot?D(I,L,F,$):null;case S:return F.key===ot?U(I,L,F,$):null;case Z:return ot=F._init,F=ot(F._payload),j(I,L,F,$)}if(Ft(F)||vt(F))return ot!==null?null:Y(I,L,F,$,null);if(typeof F.then=="function")return j(I,L,gg(F),$);if(F.$$typeof===O)return j(I,L,eg(I,F),$);pg(I,F)}return null}function q(I,L,F,$,ot){if(typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint")return I=I.get(F)||null,C(L,I,""+$,ot);if(typeof $=="object"&&$!==null){switch($.$$typeof){case v:return I=I.get($.key===null?F:$.key)||null,D(L,I,$,ot);case S:return I=I.get($.key===null?F:$.key)||null,U(L,I,$,ot);case Z:var Mt=$._init;return $=Mt($._payload),q(I,L,F,$,ot)}if(Ft($)||vt($))return I=I.get(F)||null,Y(L,I,$,ot,null);if(typeof $.then=="function")return q(I,L,F,gg($),ot);if($.$$typeof===O)return q(I,L,F,eg(L,$),ot);pg(L,$)}return null}function yt(I,L,F,$){for(var ot=null,Mt=null,dt=L,bt=L=0,Ie=null;dt!==null&&bt<F.length;bt++){dt.index>bt?(Ie=dt,dt=null):Ie=dt.sibling;var Ut=j(I,dt,F[bt],$);if(Ut===null){dt===null&&(dt=Ie);break}e&&dt&&Ut.alternate===null&&s(I,dt),L=m(Ut,L,bt),Mt===null?ot=Ut:Mt.sibling=Ut,Mt=Ut,dt=Ie}if(bt===F.length)return a(I,dt),jt&&$r(I,bt),ot;if(dt===null){for(;bt<F.length;bt++)dt=Q(I,F[bt],$),dt!==null&&(L=m(dt,L,bt),Mt===null?ot=dt:Mt.sibling=dt,Mt=dt);return jt&&$r(I,bt),ot}for(dt=o(dt);bt<F.length;bt++)Ie=q(dt,I,bt,F[bt],$),Ie!==null&&(e&&Ie.alternate!==null&&dt.delete(Ie.key===null?bt:Ie.key),L=m(Ie,L,bt),Mt===null?ot=Ie:Mt.sibling=Ie,Mt=Ie);return e&&dt.forEach(function(Ka){return s(I,Ka)}),jt&&$r(I,bt),ot}function pt(I,L,F,$){if(F==null)throw Error(n(151));for(var ot=null,Mt=null,dt=L,bt=L=0,Ie=null,Ut=F.next();dt!==null&&!Ut.done;bt++,Ut=F.next()){dt.index>bt?(Ie=dt,dt=null):Ie=dt.sibling;var Ka=j(I,dt,Ut.value,$);if(Ka===null){dt===null&&(dt=Ie);break}e&&dt&&Ka.alternate===null&&s(I,dt),L=m(Ka,L,bt),Mt===null?ot=Ka:Mt.sibling=Ka,Mt=Ka,dt=Ie}if(Ut.done)return a(I,dt),jt&&$r(I,bt),ot;if(dt===null){for(;!Ut.done;bt++,Ut=F.next())Ut=Q(I,Ut.value,$),Ut!==null&&(L=m(Ut,L,bt),Mt===null?ot=Ut:Mt.sibling=Ut,Mt=Ut);return jt&&$r(I,bt),ot}for(dt=o(dt);!Ut.done;bt++,Ut=F.next())Ut=q(dt,I,bt,Ut.value,$),Ut!==null&&(e&&Ut.alternate!==null&&dt.delete(Ut.key===null?bt:Ut.key),L=m(Ut,L,bt),Mt===null?ot=Ut:Mt.sibling=Ut,Mt=Ut);return e&&dt.forEach(function(E2){return s(I,E2)}),jt&&$r(I,bt),ot}function Zt(I,L,F,$){if(typeof F=="object"&&F!==null&&F.type===T&&F.key===null&&(F=F.props.children),typeof F=="object"&&F!==null){switch(F.$$typeof){case v:t:{for(var ot=F.key;L!==null;){if(L.key===ot){if(ot=F.type,ot===T){if(L.tag===7){a(I,L.sibling),$=d(L,F.props.children),$.return=I,I=$;break t}}else if(L.elementType===ot||typeof ot=="object"&&ot!==null&&ot.$$typeof===Z&&v1(ot)===L.type){a(I,L.sibling),$=d(L,F.props),sh($,F),$.return=I,I=$;break t}a(I,L);break}else s(I,L);L=L.sibling}F.type===T?($=Xr(F.props.children,I.mode,$,F.key),$.return=I,I=$):($=Zf(F.type,F.key,F.props,null,I.mode,$),sh($,F),$.return=I,I=$)}return _(I);case S:t:{for(ot=F.key;L!==null;){if(L.key===ot)if(L.tag===4&&L.stateNode.containerInfo===F.containerInfo&&L.stateNode.implementation===F.implementation){a(I,L.sibling),$=d(L,F.children||[]),$.return=I,I=$;break t}else{a(I,L);break}else s(I,L);L=L.sibling}$=Gm(F,I.mode,$),$.return=I,I=$}return _(I);case Z:return ot=F._init,F=ot(F._payload),Zt(I,L,F,$)}if(Ft(F))return yt(I,L,F,$);if(vt(F)){if(ot=vt(F),typeof ot!="function")throw Error(n(150));return F=ot.call(F),pt(I,L,F,$)}if(typeof F.then=="function")return Zt(I,L,gg(F),$);if(F.$$typeof===O)return Zt(I,L,eg(I,F),$);pg(I,F)}return typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint"?(F=""+F,L!==null&&L.tag===6?(a(I,L.sibling),$=d(L,F),$.return=I,I=$):(a(I,L),$=jm(F,I.mode,$),$.return=I,I=$),_(I)):a(I,L)}return function(I,L,F,$){try{ih=0;var ot=Zt(I,L,F,$);return Yo=null,ot}catch(dt){if(dt===Yu||dt===sg)throw dt;var Mt=Ii(29,dt,null,I.mode);return Mt.lanes=$,Mt.return=I,Mt}finally{}}}var $o=A1(!0),S1=A1(!1),ps=K(null),Ws=null;function ka(e){var s=e.alternate;W(De,De.current&1),W(ps,e),Ws===null&&(s===null||Go.current!==null||s.memoizedState!==null)&&(Ws=e)}function _1(e){if(e.tag===22){if(W(De,De.current),W(ps,e),Ws===null){var s=e.alternate;s!==null&&s.memoizedState!==null&&(Ws=e)}}else za()}function za(){W(De,De.current),W(ps,ps.current)}function kn(e){tt(ps),Ws===e&&(Ws=null),tt(De)}var De=K(0);function mg(e){for(var s=e;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||hb(a)))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===e)break;for(;s.sibling===null;){if(s.return===null||s.return===e)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}function _0(e,s,a,o){s=e.memoizedState,a=a(o,s),a=a==null?s:p({},s,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var x0={enqueueSetState:function(e,s,a){e=e._reactInternals;var o=Gi(),d=Na(o);d.payload=s,a!=null&&(d.callback=a),s=Oa(e,d,o),s!==null&&(qi(s,e,o),Ku(s,e,o))},enqueueReplaceState:function(e,s,a){e=e._reactInternals;var o=Gi(),d=Na(o);d.tag=1,d.payload=s,a!=null&&(d.callback=a),s=Oa(e,d,o),s!==null&&(qi(s,e,o),Ku(s,e,o))},enqueueForceUpdate:function(e,s){e=e._reactInternals;var a=Gi(),o=Na(a);o.tag=2,s!=null&&(o.callback=s),s=Oa(e,o,a),s!==null&&(qi(s,e,a),Ku(s,e,a))}};function x1(e,s,a,o,d,m,_){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(o,m,_):s.prototype&&s.prototype.isPureReactComponent?!Iu(a,o)||!Iu(d,m):!0}function w1(e,s,a,o){e=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,o),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,o),s.state!==e&&x0.enqueueReplaceState(s,s.state,null)}function el(e,s){var a=s;if("ref"in s){a={};for(var o in s)o!=="ref"&&(a[o]=s[o])}if(e=e.defaultProps){a===s&&(a=p({},a));for(var d in e)a[d]===void 0&&(a[d]=e[d])}return a}var bg=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function E1(e){bg(e)}function T1(e){console.error(e)}function C1(e){bg(e)}function yg(e,s){try{var a=e.onUncaughtError;a(s.value,{componentStack:s.stack})}catch(o){setTimeout(function(){throw o})}}function M1(e,s,a){try{var o=e.onCaughtError;o(a.value,{componentStack:a.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(d){setTimeout(function(){throw d})}}function w0(e,s,a){return a=Na(a),a.tag=3,a.payload={element:null},a.callback=function(){yg(e,s)},a}function R1(e){return e=Na(e),e.tag=3,e}function D1(e,s,a,o){var d=a.type.getDerivedStateFromError;if(typeof d=="function"){var m=o.value;e.payload=function(){return d(m)},e.callback=function(){M1(s,a,o)}}var _=a.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(e.callback=function(){M1(s,a,o),typeof d!="function"&&(Ua===null?Ua=new Set([this]):Ua.add(this));var C=o.stack;this.componentDidCatch(o.value,{componentStack:C!==null?C:""})})}function ET(e,s,a,o,d){if(a.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){if(s=a.alternate,s!==null&&qu(s,a,d,!0),a=ps.current,a!==null){switch(a.tag){case 13:return Ws===null?$0():a.alternate===null&&pe===0&&(pe=3),a.flags&=-257,a.flags|=65536,a.lanes=d,o===Jm?a.flags|=16384:(s=a.updateQueue,s===null?a.updateQueue=new Set([o]):s.add(o),Q0(e,o,d)),!1;case 22:return a.flags|=65536,o===Jm?a.flags|=16384:(s=a.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([o])},a.updateQueue=s):(a=s.retryQueue,a===null?s.retryQueue=new Set([o]):a.add(o)),Q0(e,o,d)),!1}throw Error(n(435,a.tag))}return Q0(e,o,d),$0(),!1}if(jt)return s=ps.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=d,o!==Xm&&(e=Error(n(422),{cause:o}),Gu(hs(e,a)))):(o!==Xm&&(s=Error(n(423),{cause:o}),Gu(hs(s,a))),e=e.current.alternate,e.flags|=65536,d&=-d,e.lanes|=d,o=hs(o,a),d=w0(e.stateNode,o,d),i0(e,d),pe!==4&&(pe=2)),!1;var m=Error(n(520),{cause:o});if(m=hs(m,a),uh===null?uh=[m]:uh.push(m),pe!==4&&(pe=2),s===null)return!0;o=hs(o,a),a=s;do{switch(a.tag){case 3:return a.flags|=65536,e=d&-d,a.lanes|=e,e=w0(a.stateNode,o,e),i0(a,e),!1;case 1:if(s=a.type,m=a.stateNode,(a.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(Ua===null||!Ua.has(m))))return a.flags|=65536,d&=-d,a.lanes|=d,d=R1(d),D1(d,e,a,o),i0(a,d),!1}a=a.return}while(a!==null);return!1}var N1=Error(n(461)),He=!1;function Ye(e,s,a,o){s.child=e===null?S1(s,null,a,o):$o(s,e.child,a,o)}function O1(e,s,a,o,d){a=a.render;var m=s.ref;if("ref"in o){var _={};for(var C in o)C!=="ref"&&(_[C]=o[C])}else _=o;return Wr(s),o=l0(e,s,a,_,m,d),C=o0(),e!==null&&!He?(c0(e,s,d),zn(e,s,d)):(jt&&C&&qm(s),s.flags|=1,Ye(e,s,o,d),s.child)}function L1(e,s,a,o,d){if(e===null){var m=a.type;return typeof m=="function"&&!Um(m)&&m.defaultProps===void 0&&a.compare===null?(s.tag=15,s.type=m,k1(e,s,m,o,d)):(e=Zf(a.type,null,o,s,s.mode,d),e.ref=s.ref,e.return=s,s.child=e)}if(m=e.child,!O0(e,d)){var _=m.memoizedProps;if(a=a.compare,a=a!==null?a:Iu,a(_,o)&&e.ref===s.ref)return zn(e,s,d)}return s.flags|=1,e=Mn(m,o),e.ref=s.ref,e.return=s,s.child=e}function k1(e,s,a,o,d){if(e!==null){var m=e.memoizedProps;if(Iu(m,o)&&e.ref===s.ref)if(He=!1,s.pendingProps=o=m,O0(e,d))(e.flags&131072)!==0&&(He=!0);else return s.lanes=e.lanes,zn(e,s,d)}return E0(e,s,a,o,d)}function z1(e,s,a){var o=s.pendingProps,d=o.children,m=e!==null?e.memoizedState:null;if(o.mode==="hidden"){if((s.flags&128)!==0){if(o=m!==null?m.baseLanes|a:a,e!==null){for(d=s.child=e.child,m=0;d!==null;)m=m|d.lanes|d.childLanes,d=d.sibling;s.childLanes=m&~o}else s.childLanes=0,s.child=null;return P1(e,s,o,a)}if((a&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},e!==null&&ig(s,m!==null?m.cachePool:null),m!==null?kA(s,m):n0(),_1(s);else return s.lanes=s.childLanes=536870912,P1(e,s,m!==null?m.baseLanes|a:a,a)}else m!==null?(ig(s,m.cachePool),kA(s,m),za(),s.memoizedState=null):(e!==null&&ig(s,null),n0(),za());return Ye(e,s,d,a),s.child}function P1(e,s,a,o){var d=Wm();return d=d===null?null:{parent:Re._currentValue,pool:d},s.memoizedState={baseLanes:a,cachePool:d},e!==null&&ig(s,null),n0(),_1(s),e!==null&&qu(e,s,o,!0),null}function vg(e,s){var a=s.ref;if(a===null)e!==null&&e.ref!==null&&(s.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(n(284));(e===null||e.ref!==a)&&(s.flags|=4194816)}}function E0(e,s,a,o,d){return Wr(s),a=l0(e,s,a,o,void 0,d),o=o0(),e!==null&&!He?(c0(e,s,d),zn(e,s,d)):(jt&&o&&qm(s),s.flags|=1,Ye(e,s,a,d),s.child)}function H1(e,s,a,o,d,m){return Wr(s),s.updateQueue=null,a=PA(s,o,a,d),zA(e),o=o0(),e!==null&&!He?(c0(e,s,m),zn(e,s,m)):(jt&&o&&qm(s),s.flags|=1,Ye(e,s,a,m),s.child)}function B1(e,s,a,o,d){if(Wr(s),s.stateNode===null){var m=Bo,_=a.contextType;typeof _=="object"&&_!==null&&(m=ri(_)),m=new a(o,m),s.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=x0,s.stateNode=m,m._reactInternals=s,m=s.stateNode,m.props=o,m.state=s.memoizedState,m.refs={},t0(s),_=a.contextType,m.context=typeof _=="object"&&_!==null?ri(_):Bo,m.state=s.memoizedState,_=a.getDerivedStateFromProps,typeof _=="function"&&(_0(s,a,_,o),m.state=s.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(_=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),_!==m.state&&x0.enqueueReplaceState(m,m.state,null),Zu(s,o,m,d),Qu(),m.state=s.memoizedState),typeof m.componentDidMount=="function"&&(s.flags|=4194308),o=!0}else if(e===null){m=s.stateNode;var C=s.memoizedProps,D=el(a,C);m.props=D;var U=m.context,Y=a.contextType;_=Bo,typeof Y=="object"&&Y!==null&&(_=ri(Y));var Q=a.getDerivedStateFromProps;Y=typeof Q=="function"||typeof m.getSnapshotBeforeUpdate=="function",C=s.pendingProps!==C,Y||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(C||U!==_)&&w1(s,m,o,_),Da=!1;var j=s.memoizedState;m.state=j,Zu(s,o,m,d),Qu(),U=s.memoizedState,C||j!==U||Da?(typeof Q=="function"&&(_0(s,a,Q,o),U=s.memoizedState),(D=Da||x1(s,a,D,o,j,U,_))?(Y||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(s.flags|=4194308)):(typeof m.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=o,s.memoizedState=U),m.props=o,m.state=U,m.context=_,o=D):(typeof m.componentDidMount=="function"&&(s.flags|=4194308),o=!1)}else{m=s.stateNode,e0(e,s),_=s.memoizedProps,Y=el(a,_),m.props=Y,Q=s.pendingProps,j=m.context,U=a.contextType,D=Bo,typeof U=="object"&&U!==null&&(D=ri(U)),C=a.getDerivedStateFromProps,(U=typeof C=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(_!==Q||j!==D)&&w1(s,m,o,D),Da=!1,j=s.memoizedState,m.state=j,Zu(s,o,m,d),Qu();var q=s.memoizedState;_!==Q||j!==q||Da||e!==null&&e.dependencies!==null&&tg(e.dependencies)?(typeof C=="function"&&(_0(s,a,C,o),q=s.memoizedState),(Y=Da||x1(s,a,Y,o,j,q,D)||e!==null&&e.dependencies!==null&&tg(e.dependencies))?(U||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(o,q,D),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(o,q,D)),typeof m.componentDidUpdate=="function"&&(s.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof m.componentDidUpdate!="function"||_===e.memoizedProps&&j===e.memoizedState||(s.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||_===e.memoizedProps&&j===e.memoizedState||(s.flags|=1024),s.memoizedProps=o,s.memoizedState=q),m.props=o,m.state=q,m.context=D,o=Y):(typeof m.componentDidUpdate!="function"||_===e.memoizedProps&&j===e.memoizedState||(s.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||_===e.memoizedProps&&j===e.memoizedState||(s.flags|=1024),o=!1)}return m=o,vg(e,s),o=(s.flags&128)!==0,m||o?(m=s.stateNode,a=o&&typeof a.getDerivedStateFromError!="function"?null:m.render(),s.flags|=1,e!==null&&o?(s.child=$o(s,e.child,null,d),s.child=$o(s,null,a,d)):Ye(e,s,a,d),s.memoizedState=m.state,e=s.child):e=zn(e,s,d),e}function I1(e,s,a,o){return ju(),s.flags|=256,Ye(e,s,a,o),s.child}var T0={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function C0(e){return{baseLanes:e,cachePool:TA()}}function M0(e,s,a){return e=e!==null?e.childLanes&~a:0,s&&(e|=ms),e}function F1(e,s,a){var o=s.pendingProps,d=!1,m=(s.flags&128)!==0,_;if((_=m)||(_=e!==null&&e.memoizedState===null?!1:(De.current&2)!==0),_&&(d=!0,s.flags&=-129),_=(s.flags&32)!==0,s.flags&=-33,e===null){if(jt){if(d?ka(s):za(),jt){var C=ge,D;if(D=C){t:{for(D=C,C=Zs;D.nodeType!==8;){if(!C){C=null;break t}if(D=Ns(D.nextSibling),D===null){C=null;break t}}C=D}C!==null?(s.memoizedState={dehydrated:C,treeContext:Yr!==null?{id:Rn,overflow:Dn}:null,retryLane:536870912,hydrationErrors:null},D=Ii(18,null,null,0),D.stateNode=C,D.return=s,s.child=D,gi=s,ge=null,D=!0):D=!1}D||Qr(s)}if(C=s.memoizedState,C!==null&&(C=C.dehydrated,C!==null))return hb(C)?s.lanes=32:s.lanes=536870912,null;kn(s)}return C=o.children,o=o.fallback,d?(za(),d=s.mode,C=Ag({mode:"hidden",children:C},d),o=Xr(o,d,a,null),C.return=s,o.return=s,C.sibling=o,s.child=C,d=s.child,d.memoizedState=C0(a),d.childLanes=M0(e,_,a),s.memoizedState=T0,o):(ka(s),R0(s,C))}if(D=e.memoizedState,D!==null&&(C=D.dehydrated,C!==null)){if(m)s.flags&256?(ka(s),s.flags&=-257,s=D0(e,s,a)):s.memoizedState!==null?(za(),s.child=e.child,s.flags|=128,s=null):(za(),d=o.fallback,C=s.mode,o=Ag({mode:"visible",children:o.children},C),d=Xr(d,C,a,null),d.flags|=2,o.return=s,d.return=s,o.sibling=d,s.child=o,$o(s,e.child,null,a),o=s.child,o.memoizedState=C0(a),o.childLanes=M0(e,_,a),s.memoizedState=T0,s=d);else if(ka(s),hb(C)){if(_=C.nextSibling&&C.nextSibling.dataset,_)var U=_.dgst;_=U,o=Error(n(419)),o.stack="",o.digest=_,Gu({value:o,source:null,stack:null}),s=D0(e,s,a)}else if(He||qu(e,s,a,!1),_=(a&e.childLanes)!==0,He||_){if(_=se,_!==null&&(o=a&-a,o=(o&42)!==0?1:dm(o),o=(o&(_.suspendedLanes|a))!==0?0:o,o!==0&&o!==D.retryLane))throw D.retryLane=o,Ho(e,o),qi(_,e,o),N1;C.data==="$?"||$0(),s=D0(e,s,a)}else C.data==="$?"?(s.flags|=192,s.child=e.child,s=null):(e=D.treeContext,ge=Ns(C.nextSibling),gi=s,jt=!0,Kr=null,Zs=!1,e!==null&&(fs[gs++]=Rn,fs[gs++]=Dn,fs[gs++]=Yr,Rn=e.id,Dn=e.overflow,Yr=s),s=R0(s,o.children),s.flags|=4096);return s}return d?(za(),d=o.fallback,C=s.mode,D=e.child,U=D.sibling,o=Mn(D,{mode:"hidden",children:o.children}),o.subtreeFlags=D.subtreeFlags&65011712,U!==null?d=Mn(U,d):(d=Xr(d,C,a,null),d.flags|=2),d.return=s,o.return=s,o.sibling=d,s.child=o,o=d,d=s.child,C=e.child.memoizedState,C===null?C=C0(a):(D=C.cachePool,D!==null?(U=Re._currentValue,D=D.parent!==U?{parent:U,pool:U}:D):D=TA(),C={baseLanes:C.baseLanes|a,cachePool:D}),d.memoizedState=C,d.childLanes=M0(e,_,a),s.memoizedState=T0,o):(ka(s),a=e.child,e=a.sibling,a=Mn(a,{mode:"visible",children:o.children}),a.return=s,a.sibling=null,e!==null&&(_=s.deletions,_===null?(s.deletions=[e],s.flags|=16):_.push(e)),s.child=a,s.memoizedState=null,a)}function R0(e,s){return s=Ag({mode:"visible",children:s},e.mode),s.return=e,e.child=s}function Ag(e,s){return e=Ii(22,e,null,s),e.lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function D0(e,s,a){return $o(s,e.child,null,a),e=R0(s,s.pendingProps.children),e.flags|=2,s.memoizedState=null,e}function U1(e,s,a){e.lanes|=s;var o=e.alternate;o!==null&&(o.lanes|=s),$m(e.return,s,a)}function N0(e,s,a,o,d){var m=e.memoizedState;m===null?e.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:o,tail:a,tailMode:d}:(m.isBackwards=s,m.rendering=null,m.renderingStartTime=0,m.last=o,m.tail=a,m.tailMode=d)}function j1(e,s,a){var o=s.pendingProps,d=o.revealOrder,m=o.tail;if(Ye(e,s,o.children,a),o=De.current,(o&2)!==0)o=o&1|2,s.flags|=128;else{if(e!==null&&(e.flags&128)!==0)t:for(e=s.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&U1(e,a,s);else if(e.tag===19)U1(e,a,s);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===s)break t;for(;e.sibling===null;){if(e.return===null||e.return===s)break t;e=e.return}e.sibling.return=e.return,e=e.sibling}o&=1}switch(W(De,o),d){case"forwards":for(a=s.child,d=null;a!==null;)e=a.alternate,e!==null&&mg(e)===null&&(d=a),a=a.sibling;a=d,a===null?(d=s.child,s.child=null):(d=a.sibling,a.sibling=null),N0(s,!1,d,a,m);break;case"backwards":for(a=null,d=s.child,s.child=null;d!==null;){if(e=d.alternate,e!==null&&mg(e)===null){s.child=d;break}e=d.sibling,d.sibling=a,a=d,d=e}N0(s,!0,a,null,m);break;case"together":N0(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function zn(e,s,a){if(e!==null&&(s.dependencies=e.dependencies),Fa|=s.lanes,(a&s.childLanes)===0)if(e!==null){if(qu(e,s,a,!1),(a&s.childLanes)===0)return null}else return null;if(e!==null&&s.child!==e.child)throw Error(n(153));if(s.child!==null){for(e=s.child,a=Mn(e,e.pendingProps),s.child=a,a.return=s;e.sibling!==null;)e=e.sibling,a=a.sibling=Mn(e,e.pendingProps),a.return=s;a.sibling=null}return s.child}function O0(e,s){return(e.lanes&s)!==0?!0:(e=e.dependencies,!!(e!==null&&tg(e)))}function TT(e,s,a){switch(s.tag){case 3:qt(s,s.stateNode.containerInfo),Ra(s,Re,e.memoizedState.cache),ju();break;case 27:case 5:Eu(s);break;case 4:qt(s,s.stateNode.containerInfo);break;case 10:Ra(s,s.type,s.memoizedProps.value);break;case 13:var o=s.memoizedState;if(o!==null)return o.dehydrated!==null?(ka(s),s.flags|=128,null):(a&s.child.childLanes)!==0?F1(e,s,a):(ka(s),e=zn(e,s,a),e!==null?e.sibling:null);ka(s);break;case 19:var d=(e.flags&128)!==0;if(o=(a&s.childLanes)!==0,o||(qu(e,s,a,!1),o=(a&s.childLanes)!==0),d){if(o)return j1(e,s,a);s.flags|=128}if(d=s.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),W(De,De.current),o)break;return null;case 22:case 23:return s.lanes=0,z1(e,s,a);case 24:Ra(s,Re,e.memoizedState.cache)}return zn(e,s,a)}function G1(e,s,a){if(e!==null)if(e.memoizedProps!==s.pendingProps)He=!0;else{if(!O0(e,a)&&(s.flags&128)===0)return He=!1,TT(e,s,a);He=(e.flags&131072)!==0}else He=!1,jt&&(s.flags&1048576)!==0&&vA(s,Jf,s.index);switch(s.lanes=0,s.tag){case 16:t:{e=s.pendingProps;var o=s.elementType,d=o._init;if(o=d(o._payload),s.type=o,typeof o=="function")Um(o)?(e=el(o,e),s.tag=1,s=B1(null,s,o,e,a)):(s.tag=0,s=E0(null,s,o,e,a));else{if(o!=null){if(d=o.$$typeof,d===H){s.tag=11,s=O1(null,s,o,e,a);break t}else if(d===V){s.tag=14,s=L1(null,s,o,e,a);break t}}throw s=At(o)||o,Error(n(306,s,""))}}return s;case 0:return E0(e,s,s.type,s.pendingProps,a);case 1:return o=s.type,d=el(o,s.pendingProps),B1(e,s,o,d,a);case 3:t:{if(qt(s,s.stateNode.containerInfo),e===null)throw Error(n(387));o=s.pendingProps;var m=s.memoizedState;d=m.element,e0(e,s),Zu(s,o,null,a);var _=s.memoizedState;if(o=_.cache,Ra(s,Re,o),o!==m.cache&&Km(s,[Re],a,!0),Qu(),o=_.element,m.isDehydrated)if(m={element:o,isDehydrated:!1,cache:_.cache},s.updateQueue.baseState=m,s.memoizedState=m,s.flags&256){s=I1(e,s,o,a);break t}else if(o!==d){d=hs(Error(n(424)),s),Gu(d),s=I1(e,s,o,a);break t}else{switch(e=s.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(ge=Ns(e.firstChild),gi=s,jt=!0,Kr=null,Zs=!0,a=S1(s,null,o,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(ju(),o===d){s=zn(e,s,a);break t}Ye(e,s,o,a)}s=s.child}return s;case 26:return vg(e,s),e===null?(a=YS(s.type,null,s.pendingProps,null))?s.memoizedState=a:jt||(a=s.type,e=s.pendingProps,o=kg(gt.current).createElement(a),o[ai]=s,o[Ei]=e,Ke(o,a,e),Pe(o),s.stateNode=o):s.memoizedState=YS(s.type,e.memoizedProps,s.pendingProps,e.memoizedState),null;case 27:return Eu(s),e===null&&jt&&(o=s.stateNode=qS(s.type,s.pendingProps,gt.current),gi=s,Zs=!0,d=ge,qa(s.type)?(db=d,ge=Ns(o.firstChild)):ge=d),Ye(e,s,s.pendingProps.children,a),vg(e,s),e===null&&(s.flags|=4194304),s.child;case 5:return e===null&&jt&&((d=o=ge)&&(o=t2(o,s.type,s.pendingProps,Zs),o!==null?(s.stateNode=o,gi=s,ge=Ns(o.firstChild),Zs=!1,d=!0):d=!1),d||Qr(s)),Eu(s),d=s.type,m=s.pendingProps,_=e!==null?e.memoizedProps:null,o=m.children,ob(d,m)?o=null:_!==null&&ob(d,_)&&(s.flags|=32),s.memoizedState!==null&&(d=l0(e,s,yT,null,null,a),vh._currentValue=d),vg(e,s),Ye(e,s,o,a),s.child;case 6:return e===null&&jt&&((e=a=ge)&&(a=e2(a,s.pendingProps,Zs),a!==null?(s.stateNode=a,gi=s,ge=null,e=!0):e=!1),e||Qr(s)),null;case 13:return F1(e,s,a);case 4:return qt(s,s.stateNode.containerInfo),o=s.pendingProps,e===null?s.child=$o(s,null,o,a):Ye(e,s,o,a),s.child;case 11:return O1(e,s,s.type,s.pendingProps,a);case 7:return Ye(e,s,s.pendingProps,a),s.child;case 8:return Ye(e,s,s.pendingProps.children,a),s.child;case 12:return Ye(e,s,s.pendingProps.children,a),s.child;case 10:return o=s.pendingProps,Ra(s,s.type,o.value),Ye(e,s,o.children,a),s.child;case 9:return d=s.type._context,o=s.pendingProps.children,Wr(s),d=ri(d),o=o(d),s.flags|=1,Ye(e,s,o,a),s.child;case 14:return L1(e,s,s.type,s.pendingProps,a);case 15:return k1(e,s,s.type,s.pendingProps,a);case 19:return j1(e,s,a);case 31:return o=s.pendingProps,a=s.mode,o={mode:o.mode,children:o.children},e===null?(a=Ag(o,a),a.ref=s.ref,s.child=a,a.return=s,s=a):(a=Mn(e.child,o),a.ref=s.ref,s.child=a,a.return=s,s=a),s;case 22:return z1(e,s,a);case 24:return Wr(s),o=ri(Re),e===null?(d=Wm(),d===null&&(d=se,m=Qm(),d.pooledCache=m,m.refCount++,m!==null&&(d.pooledCacheLanes|=a),d=m),s.memoizedState={parent:o,cache:d},t0(s),Ra(s,Re,d)):((e.lanes&a)!==0&&(e0(e,s),Zu(s,null,null,a),Qu()),d=e.memoizedState,m=s.memoizedState,d.parent!==o?(d={parent:o,cache:o},s.memoizedState=d,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=d),Ra(s,Re,o)):(o=m.cache,Ra(s,Re,o),o!==d.cache&&Km(s,[Re],a,!0))),Ye(e,s,s.pendingProps.children,a),s.child;case 29:throw s.pendingProps}throw Error(n(156,s.tag))}function Pn(e){e.flags|=4}function q1(e,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!WS(s)){if(s=ps.current,s!==null&&((Ht&4194048)===Ht?Ws!==null:(Ht&62914560)!==Ht&&(Ht&536870912)===0||s!==Ws))throw $u=Jm,CA;e.flags|=8192}}function Sg(e,s){s!==null&&(e.flags|=4),e.flags&16384&&(s=e.tag!==22?_v():536870912,e.lanes|=s,Wo|=s)}function nh(e,s){if(!jt)switch(e.tailMode){case"hidden":s=e.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var o=null;a!==null;)a.alternate!==null&&(o=a),a=a.sibling;o===null?s||e.tail===null?e.tail=null:e.tail.sibling=null:o.sibling=null}}function he(e){var s=e.alternate!==null&&e.alternate.child===e.child,a=0,o=0;if(s)for(var d=e.child;d!==null;)a|=d.lanes|d.childLanes,o|=d.subtreeFlags&65011712,o|=d.flags&65011712,d.return=e,d=d.sibling;else for(d=e.child;d!==null;)a|=d.lanes|d.childLanes,o|=d.subtreeFlags,o|=d.flags,d.return=e,d=d.sibling;return e.subtreeFlags|=o,e.childLanes=a,s}function CT(e,s,a){var o=s.pendingProps;switch(Vm(s),s.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return he(s),null;case 1:return he(s),null;case 3:return a=s.stateNode,o=null,e!==null&&(o=e.memoizedState.cache),s.memoizedState.cache!==o&&(s.flags|=2048),On(Re),Ks(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(Uu(s)?Pn(s):e===null||e.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,_A())),he(s),null;case 26:return a=s.memoizedState,e===null?(Pn(s),a!==null?(he(s),q1(s,a)):(he(s),s.flags&=-16777217)):a?a!==e.memoizedState?(Pn(s),he(s),q1(s,a)):(he(s),s.flags&=-16777217):(e.memoizedProps!==o&&Pn(s),he(s),s.flags&=-16777217),null;case 27:Ea(s),a=gt.current;var d=s.type;if(e!==null&&s.stateNode!=null)e.memoizedProps!==o&&Pn(s);else{if(!o){if(s.stateNode===null)throw Error(n(166));return he(s),null}e=ut.current,Uu(s)?AA(s):(e=qS(d,o,a),s.stateNode=e,Pn(s))}return he(s),null;case 5:if(Ea(s),a=s.type,e!==null&&s.stateNode!=null)e.memoizedProps!==o&&Pn(s);else{if(!o){if(s.stateNode===null)throw Error(n(166));return he(s),null}if(e=ut.current,Uu(s))AA(s);else{switch(d=kg(gt.current),e){case 1:e=d.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:e=d.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":e=d.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":e=d.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":e=d.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof o.is=="string"?d.createElement("select",{is:o.is}):d.createElement("select"),o.multiple?e.multiple=!0:o.size&&(e.size=o.size);break;default:e=typeof o.is=="string"?d.createElement(a,{is:o.is}):d.createElement(a)}}e[ai]=s,e[Ei]=o;t:for(d=s.child;d!==null;){if(d.tag===5||d.tag===6)e.appendChild(d.stateNode);else if(d.tag!==4&&d.tag!==27&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===s)break t;for(;d.sibling===null;){if(d.return===null||d.return===s)break t;d=d.return}d.sibling.return=d.return,d=d.sibling}s.stateNode=e;t:switch(Ke(e,a,o),a){case"button":case"input":case"select":case"textarea":e=!!o.autoFocus;break t;case"img":e=!0;break t;default:e=!1}e&&Pn(s)}}return he(s),s.flags&=-16777217,null;case 6:if(e&&s.stateNode!=null)e.memoizedProps!==o&&Pn(s);else{if(typeof o!="string"&&s.stateNode===null)throw Error(n(166));if(e=gt.current,Uu(s)){if(e=s.stateNode,a=s.memoizedProps,o=null,d=gi,d!==null)switch(d.tag){case 27:case 5:o=d.memoizedProps}e[ai]=s,e=!!(e.nodeValue===a||o!==null&&o.suppressHydrationWarning===!0||HS(e.nodeValue,a)),e||Qr(s)}else e=kg(e).createTextNode(o),e[ai]=s,s.stateNode=e}return he(s),null;case 13:if(o=s.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(d=Uu(s),o!==null&&o.dehydrated!==null){if(e===null){if(!d)throw Error(n(318));if(d=s.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(n(317));d[ai]=s}else ju(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;he(s),d=!1}else d=_A(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=d),d=!0;if(!d)return s.flags&256?(kn(s),s):(kn(s),null)}if(kn(s),(s.flags&128)!==0)return s.lanes=a,s;if(a=o!==null,e=e!==null&&e.memoizedState!==null,a){o=s.child,d=null,o.alternate!==null&&o.alternate.memoizedState!==null&&o.alternate.memoizedState.cachePool!==null&&(d=o.alternate.memoizedState.cachePool.pool);var m=null;o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(m=o.memoizedState.cachePool.pool),m!==d&&(o.flags|=2048)}return a!==e&&a&&(s.child.flags|=8192),Sg(s,s.updateQueue),he(s),null;case 4:return Ks(),e===null&&sb(s.stateNode.containerInfo),he(s),null;case 10:return On(s.type),he(s),null;case 19:if(tt(De),d=s.memoizedState,d===null)return he(s),null;if(o=(s.flags&128)!==0,m=d.rendering,m===null)if(o)nh(d,!1);else{if(pe!==0||e!==null&&(e.flags&128)!==0)for(e=s.child;e!==null;){if(m=mg(e),m!==null){for(s.flags|=128,nh(d,!1),e=m.updateQueue,s.updateQueue=e,Sg(s,e),s.subtreeFlags=0,e=a,a=s.child;a!==null;)yA(a,e),a=a.sibling;return W(De,De.current&1|2),s.child}e=e.sibling}d.tail!==null&&Qs()>wg&&(s.flags|=128,o=!0,nh(d,!1),s.lanes=4194304)}else{if(!o)if(e=mg(m),e!==null){if(s.flags|=128,o=!0,e=e.updateQueue,s.updateQueue=e,Sg(s,e),nh(d,!0),d.tail===null&&d.tailMode==="hidden"&&!m.alternate&&!jt)return he(s),null}else 2*Qs()-d.renderingStartTime>wg&&a!==536870912&&(s.flags|=128,o=!0,nh(d,!1),s.lanes=4194304);d.isBackwards?(m.sibling=s.child,s.child=m):(e=d.last,e!==null?e.sibling=m:s.child=m,d.last=m)}return d.tail!==null?(s=d.tail,d.rendering=s,d.tail=s.sibling,d.renderingStartTime=Qs(),s.sibling=null,e=De.current,W(De,o?e&1|2:e&1),s):(he(s),null);case 22:case 23:return kn(s),a0(),o=s.memoizedState!==null,e!==null?e.memoizedState!==null!==o&&(s.flags|=8192):o&&(s.flags|=8192),o?(a&536870912)!==0&&(s.flags&128)===0&&(he(s),s.subtreeFlags&6&&(s.flags|=8192)):he(s),a=s.updateQueue,a!==null&&Sg(s,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),o=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(o=s.memoizedState.cachePool.pool),o!==a&&(s.flags|=2048),e!==null&&tt(Jr),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),s.memoizedState.cache!==a&&(s.flags|=2048),On(Re),he(s),null;case 25:return null;case 30:return null}throw Error(n(156,s.tag))}function MT(e,s){switch(Vm(s),s.tag){case 1:return e=s.flags,e&65536?(s.flags=e&-65537|128,s):null;case 3:return On(Re),Ks(),e=s.flags,(e&65536)!==0&&(e&128)===0?(s.flags=e&-65537|128,s):null;case 26:case 27:case 5:return Ea(s),null;case 13:if(kn(s),e=s.memoizedState,e!==null&&e.dehydrated!==null){if(s.alternate===null)throw Error(n(340));ju()}return e=s.flags,e&65536?(s.flags=e&-65537|128,s):null;case 19:return tt(De),null;case 4:return Ks(),null;case 10:return On(s.type),null;case 22:case 23:return kn(s),a0(),e!==null&&tt(Jr),e=s.flags,e&65536?(s.flags=e&-65537|128,s):null;case 24:return On(Re),null;case 25:return null;default:return null}}function V1(e,s){switch(Vm(s),s.tag){case 3:On(Re),Ks();break;case 26:case 27:case 5:Ea(s);break;case 4:Ks();break;case 13:kn(s);break;case 19:tt(De);break;case 10:On(s.type);break;case 22:case 23:kn(s),a0(),e!==null&&tt(Jr);break;case 24:On(Re)}}function ah(e,s){try{var a=s.updateQueue,o=a!==null?a.lastEffect:null;if(o!==null){var d=o.next;a=d;do{if((a.tag&e)===e){o=void 0;var m=a.create,_=a.inst;o=m(),_.destroy=o}a=a.next}while(a!==d)}}catch(C){ie(s,s.return,C)}}function Pa(e,s,a){try{var o=s.updateQueue,d=o!==null?o.lastEffect:null;if(d!==null){var m=d.next;o=m;do{if((o.tag&e)===e){var _=o.inst,C=_.destroy;if(C!==void 0){_.destroy=void 0,d=s;var D=a,U=C;try{U()}catch(Y){ie(d,D,Y)}}}o=o.next}while(o!==m)}}catch(Y){ie(s,s.return,Y)}}function X1(e){var s=e.updateQueue;if(s!==null){var a=e.stateNode;try{LA(s,a)}catch(o){ie(e,e.return,o)}}}function Y1(e,s,a){a.props=el(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(o){ie(e,s,o)}}function rh(e,s){try{var a=e.ref;if(a!==null){switch(e.tag){case 26:case 27:case 5:var o=e.stateNode;break;case 30:o=e.stateNode;break;default:o=e.stateNode}typeof a=="function"?e.refCleanup=a(o):a.current=o}}catch(d){ie(e,s,d)}}function Js(e,s){var a=e.ref,o=e.refCleanup;if(a!==null)if(typeof o=="function")try{o()}catch(d){ie(e,s,d)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(d){ie(e,s,d)}else a.current=null}function $1(e){var s=e.type,a=e.memoizedProps,o=e.stateNode;try{t:switch(s){case"button":case"input":case"select":case"textarea":a.autoFocus&&o.focus();break t;case"img":a.src?o.src=a.src:a.srcSet&&(o.srcset=a.srcSet)}}catch(d){ie(e,e.return,d)}}function L0(e,s,a){try{var o=e.stateNode;KT(o,e.type,a,s),o[Ei]=s}catch(d){ie(e,e.return,d)}}function K1(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&qa(e.type)||e.tag===4}function k0(e){t:for(;;){for(;e.sibling===null;){if(e.return===null||K1(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&qa(e.type)||e.flags&2||e.child===null||e.tag===4)continue t;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function z0(e,s,a){var o=e.tag;if(o===5||o===6)e=e.stateNode,s?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,s):(s=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,s.appendChild(e),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=Lg));else if(o!==4&&(o===27&&qa(e.type)&&(a=e.stateNode,s=null),e=e.child,e!==null))for(z0(e,s,a),e=e.sibling;e!==null;)z0(e,s,a),e=e.sibling}function _g(e,s,a){var o=e.tag;if(o===5||o===6)e=e.stateNode,s?a.insertBefore(e,s):a.appendChild(e);else if(o!==4&&(o===27&&qa(e.type)&&(a=e.stateNode),e=e.child,e!==null))for(_g(e,s,a),e=e.sibling;e!==null;)_g(e,s,a),e=e.sibling}function Q1(e){var s=e.stateNode,a=e.memoizedProps;try{for(var o=e.type,d=s.attributes;d.length;)s.removeAttributeNode(d[0]);Ke(s,o,a),s[ai]=e,s[Ei]=a}catch(m){ie(e,e.return,m)}}var Hn=!1,ye=!1,P0=!1,Z1=typeof WeakSet=="function"?WeakSet:Set,Be=null;function RT(e,s){if(e=e.containerInfo,rb=Fg,e=oA(e),km(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else t:{a=(a=e.ownerDocument)&&a.defaultView||window;var o=a.getSelection&&a.getSelection();if(o&&o.rangeCount!==0){a=o.anchorNode;var d=o.anchorOffset,m=o.focusNode;o=o.focusOffset;try{a.nodeType,m.nodeType}catch{a=null;break t}var _=0,C=-1,D=-1,U=0,Y=0,Q=e,j=null;e:for(;;){for(var q;Q!==a||d!==0&&Q.nodeType!==3||(C=_+d),Q!==m||o!==0&&Q.nodeType!==3||(D=_+o),Q.nodeType===3&&(_+=Q.nodeValue.length),(q=Q.firstChild)!==null;)j=Q,Q=q;for(;;){if(Q===e)break e;if(j===a&&++U===d&&(C=_),j===m&&++Y===o&&(D=_),(q=Q.nextSibling)!==null)break;Q=j,j=Q.parentNode}Q=q}a=C===-1||D===-1?null:{start:C,end:D}}else a=null}a=a||{start:0,end:0}}else a=null;for(lb={focusedElem:e,selectionRange:a},Fg=!1,Be=s;Be!==null;)if(s=Be,e=s.child,(s.subtreeFlags&1024)!==0&&e!==null)e.return=s,Be=e;else for(;Be!==null;){switch(s=Be,m=s.alternate,e=s.flags,s.tag){case 0:break;case 11:case 15:break;case 1:if((e&1024)!==0&&m!==null){e=void 0,a=s,d=m.memoizedProps,m=m.memoizedState,o=a.stateNode;try{var yt=el(a.type,d,a.elementType===a.type);e=o.getSnapshotBeforeUpdate(yt,m),o.__reactInternalSnapshotBeforeUpdate=e}catch(pt){ie(a,a.return,pt)}}break;case 3:if((e&1024)!==0){if(e=s.stateNode.containerInfo,a=e.nodeType,a===9)ub(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":ub(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(n(163))}if(e=s.sibling,e!==null){e.return=s.return,Be=e;break}Be=s.return}}function W1(e,s,a){var o=a.flags;switch(a.tag){case 0:case 11:case 15:Ha(e,a),o&4&&ah(5,a);break;case 1:if(Ha(e,a),o&4)if(e=a.stateNode,s===null)try{e.componentDidMount()}catch(_){ie(a,a.return,_)}else{var d=el(a.type,s.memoizedProps);s=s.memoizedState;try{e.componentDidUpdate(d,s,e.__reactInternalSnapshotBeforeUpdate)}catch(_){ie(a,a.return,_)}}o&64&&X1(a),o&512&&rh(a,a.return);break;case 3:if(Ha(e,a),o&64&&(e=a.updateQueue,e!==null)){if(s=null,a.child!==null)switch(a.child.tag){case 27:case 5:s=a.child.stateNode;break;case 1:s=a.child.stateNode}try{LA(e,s)}catch(_){ie(a,a.return,_)}}break;case 27:s===null&&o&4&&Q1(a);case 26:case 5:Ha(e,a),s===null&&o&4&&$1(a),o&512&&rh(a,a.return);break;case 12:Ha(e,a);break;case 13:Ha(e,a),o&4&&eS(e,a),o&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=BT.bind(null,a),i2(e,a))));break;case 22:if(o=a.memoizedState!==null||Hn,!o){s=s!==null&&s.memoizedState!==null||ye,d=Hn;var m=ye;Hn=o,(ye=s)&&!m?Ba(e,a,(a.subtreeFlags&8772)!==0):Ha(e,a),Hn=d,ye=m}break;case 30:break;default:Ha(e,a)}}function J1(e){var s=e.alternate;s!==null&&(e.alternate=null,J1(s)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(s=e.stateNode,s!==null&&pm(s)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var le=null,Mi=!1;function Bn(e,s,a){for(a=a.child;a!==null;)tS(e,s,a),a=a.sibling}function tS(e,s,a){if(Pi&&typeof Pi.onCommitFiberUnmount=="function")try{Pi.onCommitFiberUnmount(Cu,a)}catch{}switch(a.tag){case 26:ye||Js(a,s),Bn(e,s,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:ye||Js(a,s);var o=le,d=Mi;qa(a.type)&&(le=a.stateNode,Mi=!1),Bn(e,s,a),ph(a.stateNode),le=o,Mi=d;break;case 5:ye||Js(a,s);case 6:if(o=le,d=Mi,le=null,Bn(e,s,a),le=o,Mi=d,le!==null)if(Mi)try{(le.nodeType===9?le.body:le.nodeName==="HTML"?le.ownerDocument.body:le).removeChild(a.stateNode)}catch(m){ie(a,s,m)}else try{le.removeChild(a.stateNode)}catch(m){ie(a,s,m)}break;case 18:le!==null&&(Mi?(e=le,jS(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),xh(e)):jS(le,a.stateNode));break;case 4:o=le,d=Mi,le=a.stateNode.containerInfo,Mi=!0,Bn(e,s,a),le=o,Mi=d;break;case 0:case 11:case 14:case 15:ye||Pa(2,a,s),ye||Pa(4,a,s),Bn(e,s,a);break;case 1:ye||(Js(a,s),o=a.stateNode,typeof o.componentWillUnmount=="function"&&Y1(a,s,o)),Bn(e,s,a);break;case 21:Bn(e,s,a);break;case 22:ye=(o=ye)||a.memoizedState!==null,Bn(e,s,a),ye=o;break;default:Bn(e,s,a)}}function eS(e,s){if(s.memoizedState===null&&(e=s.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{xh(e)}catch(a){ie(s,s.return,a)}}function DT(e){switch(e.tag){case 13:case 19:var s=e.stateNode;return s===null&&(s=e.stateNode=new Z1),s;case 22:return e=e.stateNode,s=e._retryCache,s===null&&(s=e._retryCache=new Z1),s;default:throw Error(n(435,e.tag))}}function H0(e,s){var a=DT(e);s.forEach(function(o){var d=IT.bind(null,e,o);a.has(o)||(a.add(o),o.then(d,d))})}function Fi(e,s){var a=s.deletions;if(a!==null)for(var o=0;o<a.length;o++){var d=a[o],m=e,_=s,C=_;t:for(;C!==null;){switch(C.tag){case 27:if(qa(C.type)){le=C.stateNode,Mi=!1;break t}break;case 5:le=C.stateNode,Mi=!1;break t;case 3:case 4:le=C.stateNode.containerInfo,Mi=!0;break t}C=C.return}if(le===null)throw Error(n(160));tS(m,_,d),le=null,Mi=!1,m=d.alternate,m!==null&&(m.return=null),d.return=null}if(s.subtreeFlags&13878)for(s=s.child;s!==null;)iS(s,e),s=s.sibling}var Ds=null;function iS(e,s){var a=e.alternate,o=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Fi(s,e),Ui(e),o&4&&(Pa(3,e,e.return),ah(3,e),Pa(5,e,e.return));break;case 1:Fi(s,e),Ui(e),o&512&&(ye||a===null||Js(a,a.return)),o&64&&Hn&&(e=e.updateQueue,e!==null&&(o=e.callbacks,o!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?o:a.concat(o))));break;case 26:var d=Ds;if(Fi(s,e),Ui(e),o&512&&(ye||a===null||Js(a,a.return)),o&4){var m=a!==null?a.memoizedState:null;if(o=e.memoizedState,a===null)if(o===null)if(e.stateNode===null){t:{o=e.type,a=e.memoizedProps,d=d.ownerDocument||d;e:switch(o){case"title":m=d.getElementsByTagName("title")[0],(!m||m[Du]||m[ai]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=d.createElement(o),d.head.insertBefore(m,d.querySelector("head > title"))),Ke(m,o,a),m[ai]=e,Pe(m),o=m;break t;case"link":var _=QS("link","href",d).get(o+(a.href||""));if(_){for(var C=0;C<_.length;C++)if(m=_[C],m.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&m.getAttribute("rel")===(a.rel==null?null:a.rel)&&m.getAttribute("title")===(a.title==null?null:a.title)&&m.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){_.splice(C,1);break e}}m=d.createElement(o),Ke(m,o,a),d.head.appendChild(m);break;case"meta":if(_=QS("meta","content",d).get(o+(a.content||""))){for(C=0;C<_.length;C++)if(m=_[C],m.getAttribute("content")===(a.content==null?null:""+a.content)&&m.getAttribute("name")===(a.name==null?null:a.name)&&m.getAttribute("property")===(a.property==null?null:a.property)&&m.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&m.getAttribute("charset")===(a.charSet==null?null:a.charSet)){_.splice(C,1);break e}}m=d.createElement(o),Ke(m,o,a),d.head.appendChild(m);break;default:throw Error(n(468,o))}m[ai]=e,Pe(m),o=m}e.stateNode=o}else ZS(d,e.type,e.stateNode);else e.stateNode=KS(d,o,e.memoizedProps);else m!==o?(m===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):m.count--,o===null?ZS(d,e.type,e.stateNode):KS(d,o,e.memoizedProps)):o===null&&e.stateNode!==null&&L0(e,e.memoizedProps,a.memoizedProps)}break;case 27:Fi(s,e),Ui(e),o&512&&(ye||a===null||Js(a,a.return)),a!==null&&o&4&&L0(e,e.memoizedProps,a.memoizedProps);break;case 5:if(Fi(s,e),Ui(e),o&512&&(ye||a===null||Js(a,a.return)),e.flags&32){d=e.stateNode;try{Do(d,"")}catch(q){ie(e,e.return,q)}}o&4&&e.stateNode!=null&&(d=e.memoizedProps,L0(e,d,a!==null?a.memoizedProps:d)),o&1024&&(P0=!0);break;case 6:if(Fi(s,e),Ui(e),o&4){if(e.stateNode===null)throw Error(n(162));o=e.memoizedProps,a=e.stateNode;try{a.nodeValue=o}catch(q){ie(e,e.return,q)}}break;case 3:if(Hg=null,d=Ds,Ds=zg(s.containerInfo),Fi(s,e),Ds=d,Ui(e),o&4&&a!==null&&a.memoizedState.isDehydrated)try{xh(s.containerInfo)}catch(q){ie(e,e.return,q)}P0&&(P0=!1,sS(e));break;case 4:o=Ds,Ds=zg(e.stateNode.containerInfo),Fi(s,e),Ui(e),Ds=o;break;case 12:Fi(s,e),Ui(e);break;case 13:Fi(s,e),Ui(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(G0=Qs()),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,H0(e,o)));break;case 22:d=e.memoizedState!==null;var D=a!==null&&a.memoizedState!==null,U=Hn,Y=ye;if(Hn=U||d,ye=Y||D,Fi(s,e),ye=Y,Hn=U,Ui(e),o&8192)t:for(s=e.stateNode,s._visibility=d?s._visibility&-2:s._visibility|1,d&&(a===null||D||Hn||ye||il(e)),a=null,s=e;;){if(s.tag===5||s.tag===26){if(a===null){D=a=s;try{if(m=D.stateNode,d)_=m.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{C=D.stateNode;var Q=D.memoizedProps.style,j=Q!=null&&Q.hasOwnProperty("display")?Q.display:null;C.style.display=j==null||typeof j=="boolean"?"":(""+j).trim()}}catch(q){ie(D,D.return,q)}}}else if(s.tag===6){if(a===null){D=s;try{D.stateNode.nodeValue=d?"":D.memoizedProps}catch(q){ie(D,D.return,q)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===e)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===e)break t;for(;s.sibling===null;){if(s.return===null||s.return===e)break t;a===s&&(a=null),s=s.return}a===s&&(a=null),s.sibling.return=s.return,s=s.sibling}o&4&&(o=e.updateQueue,o!==null&&(a=o.retryQueue,a!==null&&(o.retryQueue=null,H0(e,a))));break;case 19:Fi(s,e),Ui(e),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,H0(e,o)));break;case 30:break;case 21:break;default:Fi(s,e),Ui(e)}}function Ui(e){var s=e.flags;if(s&2){try{for(var a,o=e.return;o!==null;){if(K1(o)){a=o;break}o=o.return}if(a==null)throw Error(n(160));switch(a.tag){case 27:var d=a.stateNode,m=k0(e);_g(e,m,d);break;case 5:var _=a.stateNode;a.flags&32&&(Do(_,""),a.flags&=-33);var C=k0(e);_g(e,C,_);break;case 3:case 4:var D=a.stateNode.containerInfo,U=k0(e);z0(e,U,D);break;default:throw Error(n(161))}}catch(Y){ie(e,e.return,Y)}e.flags&=-3}s&4096&&(e.flags&=-4097)}function sS(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var s=e;sS(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),e=e.sibling}}function Ha(e,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)W1(e,s.alternate,s),s=s.sibling}function il(e){for(e=e.child;e!==null;){var s=e;switch(s.tag){case 0:case 11:case 14:case 15:Pa(4,s,s.return),il(s);break;case 1:Js(s,s.return);var a=s.stateNode;typeof a.componentWillUnmount=="function"&&Y1(s,s.return,a),il(s);break;case 27:ph(s.stateNode);case 26:case 5:Js(s,s.return),il(s);break;case 22:s.memoizedState===null&&il(s);break;case 30:il(s);break;default:il(s)}e=e.sibling}}function Ba(e,s,a){for(a=a&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var o=s.alternate,d=e,m=s,_=m.flags;switch(m.tag){case 0:case 11:case 15:Ba(d,m,a),ah(4,m);break;case 1:if(Ba(d,m,a),o=m,d=o.stateNode,typeof d.componentDidMount=="function")try{d.componentDidMount()}catch(U){ie(o,o.return,U)}if(o=m,d=o.updateQueue,d!==null){var C=o.stateNode;try{var D=d.shared.hiddenCallbacks;if(D!==null)for(d.shared.hiddenCallbacks=null,d=0;d<D.length;d++)OA(D[d],C)}catch(U){ie(o,o.return,U)}}a&&_&64&&X1(m),rh(m,m.return);break;case 27:Q1(m);case 26:case 5:Ba(d,m,a),a&&o===null&&_&4&&$1(m),rh(m,m.return);break;case 12:Ba(d,m,a);break;case 13:Ba(d,m,a),a&&_&4&&eS(d,m);break;case 22:m.memoizedState===null&&Ba(d,m,a),rh(m,m.return);break;case 30:break;default:Ba(d,m,a)}s=s.sibling}}function B0(e,s){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(e=s.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&Vu(a))}function I0(e,s){e=null,s.alternate!==null&&(e=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==e&&(s.refCount++,e!=null&&Vu(e))}function tn(e,s,a,o){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)nS(e,s,a,o),s=s.sibling}function nS(e,s,a,o){var d=s.flags;switch(s.tag){case 0:case 11:case 15:tn(e,s,a,o),d&2048&&ah(9,s);break;case 1:tn(e,s,a,o);break;case 3:tn(e,s,a,o),d&2048&&(e=null,s.alternate!==null&&(e=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==e&&(s.refCount++,e!=null&&Vu(e)));break;case 12:if(d&2048){tn(e,s,a,o),e=s.stateNode;try{var m=s.memoizedProps,_=m.id,C=m.onPostCommit;typeof C=="function"&&C(_,s.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(D){ie(s,s.return,D)}}else tn(e,s,a,o);break;case 13:tn(e,s,a,o);break;case 23:break;case 22:m=s.stateNode,_=s.alternate,s.memoizedState!==null?m._visibility&2?tn(e,s,a,o):lh(e,s):m._visibility&2?tn(e,s,a,o):(m._visibility|=2,Ko(e,s,a,o,(s.subtreeFlags&10256)!==0)),d&2048&&B0(_,s);break;case 24:tn(e,s,a,o),d&2048&&I0(s.alternate,s);break;default:tn(e,s,a,o)}}function Ko(e,s,a,o,d){for(d=d&&(s.subtreeFlags&10256)!==0,s=s.child;s!==null;){var m=e,_=s,C=a,D=o,U=_.flags;switch(_.tag){case 0:case 11:case 15:Ko(m,_,C,D,d),ah(8,_);break;case 23:break;case 22:var Y=_.stateNode;_.memoizedState!==null?Y._visibility&2?Ko(m,_,C,D,d):lh(m,_):(Y._visibility|=2,Ko(m,_,C,D,d)),d&&U&2048&&B0(_.alternate,_);break;case 24:Ko(m,_,C,D,d),d&&U&2048&&I0(_.alternate,_);break;default:Ko(m,_,C,D,d)}s=s.sibling}}function lh(e,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var a=e,o=s,d=o.flags;switch(o.tag){case 22:lh(a,o),d&2048&&B0(o.alternate,o);break;case 24:lh(a,o),d&2048&&I0(o.alternate,o);break;default:lh(a,o)}s=s.sibling}}var oh=8192;function Qo(e){if(e.subtreeFlags&oh)for(e=e.child;e!==null;)aS(e),e=e.sibling}function aS(e){switch(e.tag){case 26:Qo(e),e.flags&oh&&e.memoizedState!==null&&p2(Ds,e.memoizedState,e.memoizedProps);break;case 5:Qo(e);break;case 3:case 4:var s=Ds;Ds=zg(e.stateNode.containerInfo),Qo(e),Ds=s;break;case 22:e.memoizedState===null&&(s=e.alternate,s!==null&&s.memoizedState!==null?(s=oh,oh=16777216,Qo(e),oh=s):Qo(e));break;default:Qo(e)}}function rS(e){var s=e.alternate;if(s!==null&&(e=s.child,e!==null)){s.child=null;do s=e.sibling,e.sibling=null,e=s;while(e!==null)}}function ch(e){var s=e.deletions;if((e.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var o=s[a];Be=o,oS(o,e)}rS(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)lS(e),e=e.sibling}function lS(e){switch(e.tag){case 0:case 11:case 15:ch(e),e.flags&2048&&Pa(9,e,e.return);break;case 3:ch(e);break;case 12:ch(e);break;case 22:var s=e.stateNode;e.memoizedState!==null&&s._visibility&2&&(e.return===null||e.return.tag!==13)?(s._visibility&=-3,xg(e)):ch(e);break;default:ch(e)}}function xg(e){var s=e.deletions;if((e.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var o=s[a];Be=o,oS(o,e)}rS(e)}for(e=e.child;e!==null;){switch(s=e,s.tag){case 0:case 11:case 15:Pa(8,s,s.return),xg(s);break;case 22:a=s.stateNode,a._visibility&2&&(a._visibility&=-3,xg(s));break;default:xg(s)}e=e.sibling}}function oS(e,s){for(;Be!==null;){var a=Be;switch(a.tag){case 0:case 11:case 15:Pa(8,a,s);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var o=a.memoizedState.cachePool.pool;o!=null&&o.refCount++}break;case 24:Vu(a.memoizedState.cache)}if(o=a.child,o!==null)o.return=a,Be=o;else t:for(a=e;Be!==null;){o=Be;var d=o.sibling,m=o.return;if(J1(o),o===a){Be=null;break t}if(d!==null){d.return=m,Be=d;break t}Be=m}}}var NT={getCacheForType:function(e){var s=ri(Re),a=s.data.get(e);return a===void 0&&(a=e(),s.data.set(e,a)),a}},OT=typeof WeakMap=="function"?WeakMap:Map,Xt=0,se=null,Nt=null,Ht=0,Yt=0,ji=null,Ia=!1,Zo=!1,F0=!1,In=0,pe=0,Fa=0,sl=0,U0=0,ms=0,Wo=0,uh=null,Ri=null,j0=!1,G0=0,wg=1/0,Eg=null,Ua=null,$e=0,ja=null,Jo=null,tc=0,q0=0,V0=null,cS=null,hh=0,X0=null;function Gi(){if((Xt&2)!==0&&Ht!==0)return Ht&-Ht;if(B.T!==null){var e=Uo;return e!==0?e:J0()}return Ev()}function uS(){ms===0&&(ms=(Ht&536870912)===0||jt?Sv():536870912);var e=ps.current;return e!==null&&(e.flags|=32),ms}function qi(e,s,a){(e===se&&(Yt===2||Yt===9)||e.cancelPendingCommit!==null)&&(ec(e,0),Ga(e,Ht,ms,!1)),Ru(e,a),((Xt&2)===0||e!==se)&&(e===se&&((Xt&2)===0&&(sl|=a),pe===4&&Ga(e,Ht,ms,!1)),en(e))}function hS(e,s,a){if((Xt&6)!==0)throw Error(n(327));var o=!a&&(s&124)===0&&(s&e.expiredLanes)===0||Mu(e,s),d=o?zT(e,s):K0(e,s,!0),m=o;do{if(d===0){Zo&&!o&&Ga(e,s,0,!1);break}else{if(a=e.current.alternate,m&&!LT(a)){d=K0(e,s,!1),m=!1;continue}if(d===2){if(m=s,e.errorRecoveryDisabledLanes&m)var _=0;else _=e.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){s=_;t:{var C=e;d=uh;var D=C.current.memoizedState.isDehydrated;if(D&&(ec(C,_).flags|=256),_=K0(C,_,!1),_!==2){if(F0&&!D){C.errorRecoveryDisabledLanes|=m,sl|=m,d=4;break t}m=Ri,Ri=d,m!==null&&(Ri===null?Ri=m:Ri.push.apply(Ri,m))}d=_}if(m=!1,d!==2)continue}}if(d===1){ec(e,0),Ga(e,s,0,!0);break}t:{switch(o=e,m=d,m){case 0:case 1:throw Error(n(345));case 4:if((s&4194048)!==s)break;case 6:Ga(o,s,ms,!Ia);break t;case 2:Ri=null;break;case 3:case 5:break;default:throw Error(n(329))}if((s&62914560)===s&&(d=G0+300-Qs(),10<d)){if(Ga(o,s,ms,!Ia),Pf(o,0,!0)!==0)break t;o.timeoutHandle=FS(dS.bind(null,o,a,Ri,Eg,j0,s,ms,sl,Wo,Ia,m,2,-0,0),d);break t}dS(o,a,Ri,Eg,j0,s,ms,sl,Wo,Ia,m,0,-0,0)}}break}while(!0);en(e)}function dS(e,s,a,o,d,m,_,C,D,U,Y,Q,j,q){if(e.timeoutHandle=-1,Q=s.subtreeFlags,(Q&8192||(Q&16785408)===16785408)&&(yh={stylesheets:null,count:0,unsuspend:g2},aS(s),Q=m2(),Q!==null)){e.cancelPendingCommit=Q(vS.bind(null,e,s,m,a,o,d,_,C,D,Y,1,j,q)),Ga(e,m,_,!U);return}vS(e,s,m,a,o,d,_,C,D)}function LT(e){for(var s=e;;){var a=s.tag;if((a===0||a===11||a===15)&&s.flags&16384&&(a=s.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var o=0;o<a.length;o++){var d=a[o],m=d.getSnapshot;d=d.value;try{if(!Bi(m(),d))return!1}catch{return!1}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===e)break;for(;s.sibling===null;){if(s.return===null||s.return===e)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Ga(e,s,a,o){s&=~U0,s&=~sl,e.suspendedLanes|=s,e.pingedLanes&=~s,o&&(e.warmLanes|=s),o=e.expirationTimes;for(var d=s;0<d;){var m=31-Hi(d),_=1<<m;o[m]=-1,d&=~_}a!==0&&xv(e,a,s)}function Tg(){return(Xt&6)===0?(dh(0),!1):!0}function Y0(){if(Nt!==null){if(Yt===0)var e=Nt.return;else e=Nt,Nn=Zr=null,u0(e),Yo=null,ih=0,e=Nt;for(;e!==null;)V1(e.alternate,e),e=e.return;Nt=null}}function ec(e,s){var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,ZT(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),Y0(),se=e,Nt=a=Mn(e.current,null),Ht=s,Yt=0,ji=null,Ia=!1,Zo=Mu(e,s),F0=!1,Wo=ms=U0=sl=Fa=pe=0,Ri=uh=null,j0=!1,(s&8)!==0&&(s|=s&32);var o=e.entangledLanes;if(o!==0)for(e=e.entanglements,o&=s;0<o;){var d=31-Hi(o),m=1<<d;s|=e[d],o&=~m}return In=s,$f(),a}function fS(e,s){Ct=null,B.H=fg,s===Yu||s===sg?(s=DA(),Yt=3):s===CA?(s=DA(),Yt=4):Yt=s===N1?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,ji=s,Nt===null&&(pe=1,yg(e,hs(s,e.current)))}function gS(){var e=B.H;return B.H=fg,e===null?fg:e}function pS(){var e=B.A;return B.A=NT,e}function $0(){pe=4,Ia||(Ht&4194048)!==Ht&&ps.current!==null||(Zo=!0),(Fa&134217727)===0&&(sl&134217727)===0||se===null||Ga(se,Ht,ms,!1)}function K0(e,s,a){var o=Xt;Xt|=2;var d=gS(),m=pS();(se!==e||Ht!==s)&&(Eg=null,ec(e,s)),s=!1;var _=pe;t:do try{if(Yt!==0&&Nt!==null){var C=Nt,D=ji;switch(Yt){case 8:Y0(),_=6;break t;case 3:case 2:case 9:case 6:ps.current===null&&(s=!0);var U=Yt;if(Yt=0,ji=null,ic(e,C,D,U),a&&Zo){_=0;break t}break;default:U=Yt,Yt=0,ji=null,ic(e,C,D,U)}}kT(),_=pe;break}catch(Y){fS(e,Y)}while(!0);return s&&e.shellSuspendCounter++,Nn=Zr=null,Xt=o,B.H=d,B.A=m,Nt===null&&(se=null,Ht=0,$f()),_}function kT(){for(;Nt!==null;)mS(Nt)}function zT(e,s){var a=Xt;Xt|=2;var o=gS(),d=pS();se!==e||Ht!==s?(Eg=null,wg=Qs()+500,ec(e,s)):Zo=Mu(e,s);t:do try{if(Yt!==0&&Nt!==null){s=Nt;var m=ji;e:switch(Yt){case 1:Yt=0,ji=null,ic(e,s,m,1);break;case 2:case 9:if(MA(m)){Yt=0,ji=null,bS(s);break}s=function(){Yt!==2&&Yt!==9||se!==e||(Yt=7),en(e)},m.then(s,s);break t;case 3:Yt=7;break t;case 4:Yt=5;break t;case 7:MA(m)?(Yt=0,ji=null,bS(s)):(Yt=0,ji=null,ic(e,s,m,7));break;case 5:var _=null;switch(Nt.tag){case 26:_=Nt.memoizedState;case 5:case 27:var C=Nt;if(!_||WS(_)){Yt=0,ji=null;var D=C.sibling;if(D!==null)Nt=D;else{var U=C.return;U!==null?(Nt=U,Cg(U)):Nt=null}break e}}Yt=0,ji=null,ic(e,s,m,5);break;case 6:Yt=0,ji=null,ic(e,s,m,6);break;case 8:Y0(),pe=6;break t;default:throw Error(n(462))}}PT();break}catch(Y){fS(e,Y)}while(!0);return Nn=Zr=null,B.H=o,B.A=d,Xt=a,Nt!==null?0:(se=null,Ht=0,$f(),pe)}function PT(){for(;Nt!==null&&!nE();)mS(Nt)}function mS(e){var s=G1(e.alternate,e,In);e.memoizedProps=e.pendingProps,s===null?Cg(e):Nt=s}function bS(e){var s=e,a=s.alternate;switch(s.tag){case 15:case 0:s=H1(a,s,s.pendingProps,s.type,void 0,Ht);break;case 11:s=H1(a,s,s.pendingProps,s.type.render,s.ref,Ht);break;case 5:u0(s);default:V1(a,s),s=Nt=yA(s,In),s=G1(a,s,In)}e.memoizedProps=e.pendingProps,s===null?Cg(e):Nt=s}function ic(e,s,a,o){Nn=Zr=null,u0(s),Yo=null,ih=0;var d=s.return;try{if(ET(e,d,s,a,Ht)){pe=1,yg(e,hs(a,e.current)),Nt=null;return}}catch(m){if(d!==null)throw Nt=d,m;pe=1,yg(e,hs(a,e.current)),Nt=null;return}s.flags&32768?(jt||o===1?e=!0:Zo||(Ht&536870912)!==0?e=!1:(Ia=e=!0,(o===2||o===9||o===3||o===6)&&(o=ps.current,o!==null&&o.tag===13&&(o.flags|=16384))),yS(s,e)):Cg(s)}function Cg(e){var s=e;do{if((s.flags&32768)!==0){yS(s,Ia);return}e=s.return;var a=CT(s.alternate,s,In);if(a!==null){Nt=a;return}if(s=s.sibling,s!==null){Nt=s;return}Nt=s=e}while(s!==null);pe===0&&(pe=5)}function yS(e,s){do{var a=MT(e.alternate,e);if(a!==null){a.flags&=32767,Nt=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!s&&(e=e.sibling,e!==null)){Nt=e;return}Nt=e=a}while(e!==null);pe=6,Nt=null}function vS(e,s,a,o,d,m,_,C,D){e.cancelPendingCommit=null;do Mg();while($e!==0);if((Xt&6)!==0)throw Error(n(327));if(s!==null){if(s===e.current)throw Error(n(177));if(m=s.lanes|s.childLanes,m|=Im,gE(e,a,m,_,C,D),e===se&&(Nt=se=null,Ht=0),Jo=s,ja=e,tc=a,q0=m,V0=d,cS=o,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,FT(Lf,function(){return wS(),null})):(e.callbackNode=null,e.callbackPriority=0),o=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||o){o=B.T,B.T=null,d=X.p,X.p=2,_=Xt,Xt|=4;try{RT(e,s,a)}finally{Xt=_,X.p=d,B.T=o}}$e=1,AS(),SS(),_S()}}function AS(){if($e===1){$e=0;var e=ja,s=Jo,a=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||a){a=B.T,B.T=null;var o=X.p;X.p=2;var d=Xt;Xt|=4;try{iS(s,e);var m=lb,_=oA(e.containerInfo),C=m.focusedElem,D=m.selectionRange;if(_!==C&&C&&C.ownerDocument&&lA(C.ownerDocument.documentElement,C)){if(D!==null&&km(C)){var U=D.start,Y=D.end;if(Y===void 0&&(Y=U),"selectionStart"in C)C.selectionStart=U,C.selectionEnd=Math.min(Y,C.value.length);else{var Q=C.ownerDocument||document,j=Q&&Q.defaultView||window;if(j.getSelection){var q=j.getSelection(),yt=C.textContent.length,pt=Math.min(D.start,yt),Zt=D.end===void 0?pt:Math.min(D.end,yt);!q.extend&&pt>Zt&&(_=Zt,Zt=pt,pt=_);var I=rA(C,pt),L=rA(C,Zt);if(I&&L&&(q.rangeCount!==1||q.anchorNode!==I.node||q.anchorOffset!==I.offset||q.focusNode!==L.node||q.focusOffset!==L.offset)){var F=Q.createRange();F.setStart(I.node,I.offset),q.removeAllRanges(),pt>Zt?(q.addRange(F),q.extend(L.node,L.offset)):(F.setEnd(L.node,L.offset),q.addRange(F))}}}}for(Q=[],q=C;q=q.parentNode;)q.nodeType===1&&Q.push({element:q,left:q.scrollLeft,top:q.scrollTop});for(typeof C.focus=="function"&&C.focus(),C=0;C<Q.length;C++){var $=Q[C];$.element.scrollLeft=$.left,$.element.scrollTop=$.top}}Fg=!!rb,lb=rb=null}finally{Xt=d,X.p=o,B.T=a}}e.current=s,$e=2}}function SS(){if($e===2){$e=0;var e=ja,s=Jo,a=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||a){a=B.T,B.T=null;var o=X.p;X.p=2;var d=Xt;Xt|=4;try{W1(e,s.alternate,s)}finally{Xt=d,X.p=o,B.T=a}}$e=3}}function _S(){if($e===4||$e===3){$e=0,aE();var e=ja,s=Jo,a=tc,o=cS;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?$e=5:($e=0,Jo=ja=null,xS(e,e.pendingLanes));var d=e.pendingLanes;if(d===0&&(Ua=null),fm(a),s=s.stateNode,Pi&&typeof Pi.onCommitFiberRoot=="function")try{Pi.onCommitFiberRoot(Cu,s,void 0,(s.current.flags&128)===128)}catch{}if(o!==null){s=B.T,d=X.p,X.p=2,B.T=null;try{for(var m=e.onRecoverableError,_=0;_<o.length;_++){var C=o[_];m(C.value,{componentStack:C.stack})}}finally{B.T=s,X.p=d}}(tc&3)!==0&&Mg(),en(e),d=e.pendingLanes,(a&4194090)!==0&&(d&42)!==0?e===X0?hh++:(hh=0,X0=e):hh=0,dh(0)}}function xS(e,s){(e.pooledCacheLanes&=s)===0&&(s=e.pooledCache,s!=null&&(e.pooledCache=null,Vu(s)))}function Mg(e){return AS(),SS(),_S(),wS()}function wS(){if($e!==5)return!1;var e=ja,s=q0;q0=0;var a=fm(tc),o=B.T,d=X.p;try{X.p=32>a?32:a,B.T=null,a=V0,V0=null;var m=ja,_=tc;if($e=0,Jo=ja=null,tc=0,(Xt&6)!==0)throw Error(n(331));var C=Xt;if(Xt|=4,lS(m.current),nS(m,m.current,_,a),Xt=C,dh(0,!1),Pi&&typeof Pi.onPostCommitFiberRoot=="function")try{Pi.onPostCommitFiberRoot(Cu,m)}catch{}return!0}finally{X.p=d,B.T=o,xS(e,s)}}function ES(e,s,a){s=hs(a,s),s=w0(e.stateNode,s,2),e=Oa(e,s,2),e!==null&&(Ru(e,2),en(e))}function ie(e,s,a){if(e.tag===3)ES(e,e,a);else for(;s!==null;){if(s.tag===3){ES(s,e,a);break}else if(s.tag===1){var o=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(Ua===null||!Ua.has(o))){e=hs(a,e),a=R1(2),o=Oa(s,a,2),o!==null&&(D1(a,o,s,e),Ru(o,2),en(o));break}}s=s.return}}function Q0(e,s,a){var o=e.pingCache;if(o===null){o=e.pingCache=new OT;var d=new Set;o.set(s,d)}else d=o.get(s),d===void 0&&(d=new Set,o.set(s,d));d.has(a)||(F0=!0,d.add(a),e=HT.bind(null,e,s,a),s.then(e,e))}function HT(e,s,a){var o=e.pingCache;o!==null&&o.delete(s),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,se===e&&(Ht&a)===a&&(pe===4||pe===3&&(Ht&62914560)===Ht&&300>Qs()-G0?(Xt&2)===0&&ec(e,0):U0|=a,Wo===Ht&&(Wo=0)),en(e)}function TS(e,s){s===0&&(s=_v()),e=Ho(e,s),e!==null&&(Ru(e,s),en(e))}function BT(e){var s=e.memoizedState,a=0;s!==null&&(a=s.retryLane),TS(e,a)}function IT(e,s){var a=0;switch(e.tag){case 13:var o=e.stateNode,d=e.memoizedState;d!==null&&(a=d.retryLane);break;case 19:o=e.stateNode;break;case 22:o=e.stateNode._retryCache;break;default:throw Error(n(314))}o!==null&&o.delete(s),TS(e,a)}function FT(e,s){return _o(e,s)}var Rg=null,sc=null,Z0=!1,Dg=!1,W0=!1,nl=0;function en(e){e!==sc&&e.next===null&&(sc===null?Rg=sc=e:sc=sc.next=e),Dg=!0,Z0||(Z0=!0,jT())}function dh(e,s){if(!W0&&Dg){W0=!0;do for(var a=!1,o=Rg;o!==null;){if(e!==0){var d=o.pendingLanes;if(d===0)var m=0;else{var _=o.suspendedLanes,C=o.pingedLanes;m=(1<<31-Hi(42|e)+1)-1,m&=d&~(_&~C),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(a=!0,DS(o,m))}else m=Ht,m=Pf(o,o===se?m:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),(m&3)===0||Mu(o,m)||(a=!0,DS(o,m));o=o.next}while(a);W0=!1}}function UT(){CS()}function CS(){Dg=Z0=!1;var e=0;nl!==0&&(QT()&&(e=nl),nl=0);for(var s=Qs(),a=null,o=Rg;o!==null;){var d=o.next,m=MS(o,s);m===0?(o.next=null,a===null?Rg=d:a.next=d,d===null&&(sc=a)):(a=o,(e!==0||(m&3)!==0)&&(Dg=!0)),o=d}dh(e)}function MS(e,s){for(var a=e.suspendedLanes,o=e.pingedLanes,d=e.expirationTimes,m=e.pendingLanes&-62914561;0<m;){var _=31-Hi(m),C=1<<_,D=d[_];D===-1?((C&a)===0||(C&o)!==0)&&(d[_]=fE(C,s)):D<=s&&(e.expiredLanes|=C),m&=~C}if(s=se,a=Ht,a=Pf(e,e===s?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),o=e.callbackNode,a===0||e===s&&(Yt===2||Yt===9)||e.cancelPendingCommit!==null)return o!==null&&o!==null&&Tu(o),e.callbackNode=null,e.callbackPriority=0;if((a&3)===0||Mu(e,a)){if(s=a&-a,s===e.callbackPriority)return s;switch(o!==null&&Tu(o),fm(a)){case 2:case 8:a=vv;break;case 32:a=Lf;break;case 268435456:a=Av;break;default:a=Lf}return o=RS.bind(null,e),a=_o(a,o),e.callbackPriority=s,e.callbackNode=a,s}return o!==null&&o!==null&&Tu(o),e.callbackPriority=2,e.callbackNode=null,2}function RS(e,s){if($e!==0&&$e!==5)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(Mg()&&e.callbackNode!==a)return null;var o=Ht;return o=Pf(e,e===se?o:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),o===0?null:(hS(e,o,s),MS(e,Qs()),e.callbackNode!=null&&e.callbackNode===a?RS.bind(null,e):null)}function DS(e,s){if(Mg())return null;hS(e,s,!0)}function jT(){WT(function(){(Xt&6)!==0?_o(yv,UT):CS()})}function J0(){return nl===0&&(nl=Sv()),nl}function NS(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Uf(""+e)}function OS(e,s){var a=s.ownerDocument.createElement("input");return a.name=s.name,a.value=s.value,e.id&&a.setAttribute("form",e.id),s.parentNode.insertBefore(a,s),e=new FormData(e),a.parentNode.removeChild(a),e}function GT(e,s,a,o,d){if(s==="submit"&&a&&a.stateNode===d){var m=NS((d[Ei]||null).action),_=o.submitter;_&&(s=(s=_[Ei]||null)?NS(s.formAction):_.getAttribute("formAction"),s!==null&&(m=s,_=null));var C=new Vf("action","action",null,o,d);e.push({event:C,listeners:[{instance:null,listener:function(){if(o.defaultPrevented){if(nl!==0){var D=_?OS(d,_):new FormData(d);v0(a,{pending:!0,data:D,method:d.method,action:m},null,D)}}else typeof m=="function"&&(C.preventDefault(),D=_?OS(d,_):new FormData(d),v0(a,{pending:!0,data:D,method:d.method,action:m},m,D))},currentTarget:d}]})}}for(var tb=0;tb<Bm.length;tb++){var eb=Bm[tb],qT=eb.toLowerCase(),VT=eb[0].toUpperCase()+eb.slice(1);Rs(qT,"on"+VT)}Rs(hA,"onAnimationEnd"),Rs(dA,"onAnimationIteration"),Rs(fA,"onAnimationStart"),Rs("dblclick","onDoubleClick"),Rs("focusin","onFocus"),Rs("focusout","onBlur"),Rs(oT,"onTransitionRun"),Rs(cT,"onTransitionStart"),Rs(uT,"onTransitionCancel"),Rs(gA,"onTransitionEnd"),Co("onMouseEnter",["mouseout","mouseover"]),Co("onMouseLeave",["mouseout","mouseover"]),Co("onPointerEnter",["pointerout","pointerover"]),Co("onPointerLeave",["pointerout","pointerover"]),jr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),jr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),jr("onBeforeInput",["compositionend","keypress","textInput","paste"]),jr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),jr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),jr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var fh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),XT=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(fh));function LS(e,s){s=(s&4)!==0;for(var a=0;a<e.length;a++){var o=e[a],d=o.event;o=o.listeners;t:{var m=void 0;if(s)for(var _=o.length-1;0<=_;_--){var C=o[_],D=C.instance,U=C.currentTarget;if(C=C.listener,D!==m&&d.isPropagationStopped())break t;m=C,d.currentTarget=U;try{m(d)}catch(Y){bg(Y)}d.currentTarget=null,m=D}else for(_=0;_<o.length;_++){if(C=o[_],D=C.instance,U=C.currentTarget,C=C.listener,D!==m&&d.isPropagationStopped())break t;m=C,d.currentTarget=U;try{m(d)}catch(Y){bg(Y)}d.currentTarget=null,m=D}}}}function Ot(e,s){var a=s[gm];a===void 0&&(a=s[gm]=new Set);var o=e+"__bubble";a.has(o)||(kS(s,e,2,!1),a.add(o))}function ib(e,s,a){var o=0;s&&(o|=4),kS(a,e,o,s)}var Ng="_reactListening"+Math.random().toString(36).slice(2);function sb(e){if(!e[Ng]){e[Ng]=!0,Cv.forEach(function(a){a!=="selectionchange"&&(XT.has(a)||ib(a,!1,e),ib(a,!0,e))});var s=e.nodeType===9?e:e.ownerDocument;s===null||s[Ng]||(s[Ng]=!0,ib("selectionchange",!1,s))}}function kS(e,s,a,o){switch(n_(s)){case 2:var d=v2;break;case 8:d=A2;break;default:d=bb}a=d.bind(null,s,a,e),d=void 0,!Em||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(d=!0),o?d!==void 0?e.addEventListener(s,a,{capture:!0,passive:d}):e.addEventListener(s,a,!0):d!==void 0?e.addEventListener(s,a,{passive:d}):e.addEventListener(s,a,!1)}function nb(e,s,a,o,d){var m=o;if((s&1)===0&&(s&2)===0&&o!==null)t:for(;;){if(o===null)return;var _=o.tag;if(_===3||_===4){var C=o.stateNode.containerInfo;if(C===d)break;if(_===4)for(_=o.return;_!==null;){var D=_.tag;if((D===3||D===4)&&_.stateNode.containerInfo===d)return;_=_.return}for(;C!==null;){if(_=wo(C),_===null)return;if(D=_.tag,D===5||D===6||D===26||D===27){o=m=_;continue t}C=C.parentNode}}o=o.return}Uv(function(){var U=m,Y=xm(a),Q=[];t:{var j=pA.get(e);if(j!==void 0){var q=Vf,yt=e;switch(e){case"keypress":if(Gf(a)===0)break t;case"keydown":case"keyup":q=FE;break;case"focusin":yt="focus",q=Rm;break;case"focusout":yt="blur",q=Rm;break;case"beforeblur":case"afterblur":q=Rm;break;case"click":if(a.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":q=qv;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":q=ME;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":q=GE;break;case hA:case dA:case fA:q=NE;break;case gA:q=VE;break;case"scroll":case"scrollend":q=TE;break;case"wheel":q=YE;break;case"copy":case"cut":case"paste":q=LE;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":q=Xv;break;case"toggle":case"beforetoggle":q=KE}var pt=(s&4)!==0,Zt=!pt&&(e==="scroll"||e==="scrollend"),I=pt?j!==null?j+"Capture":null:j;pt=[];for(var L=U,F;L!==null;){var $=L;if(F=$.stateNode,$=$.tag,$!==5&&$!==26&&$!==27||F===null||I===null||($=Ou(L,I),$!=null&&pt.push(gh(L,$,F))),Zt)break;L=L.return}0<pt.length&&(j=new q(j,yt,null,a,Y),Q.push({event:j,listeners:pt}))}}if((s&7)===0){t:{if(j=e==="mouseover"||e==="pointerover",q=e==="mouseout"||e==="pointerout",j&&a!==_m&&(yt=a.relatedTarget||a.fromElement)&&(wo(yt)||yt[xo]))break t;if((q||j)&&(j=Y.window===Y?Y:(j=Y.ownerDocument)?j.defaultView||j.parentWindow:window,q?(yt=a.relatedTarget||a.toElement,q=U,yt=yt?wo(yt):null,yt!==null&&(Zt=l(yt),pt=yt.tag,yt!==Zt||pt!==5&&pt!==27&&pt!==6)&&(yt=null)):(q=null,yt=U),q!==yt)){if(pt=qv,$="onMouseLeave",I="onMouseEnter",L="mouse",(e==="pointerout"||e==="pointerover")&&(pt=Xv,$="onPointerLeave",I="onPointerEnter",L="pointer"),Zt=q==null?j:Nu(q),F=yt==null?j:Nu(yt),j=new pt($,L+"leave",q,a,Y),j.target=Zt,j.relatedTarget=F,$=null,wo(Y)===U&&(pt=new pt(I,L+"enter",yt,a,Y),pt.target=F,pt.relatedTarget=Zt,$=pt),Zt=$,q&&yt)e:{for(pt=q,I=yt,L=0,F=pt;F;F=nc(F))L++;for(F=0,$=I;$;$=nc($))F++;for(;0<L-F;)pt=nc(pt),L--;for(;0<F-L;)I=nc(I),F--;for(;L--;){if(pt===I||I!==null&&pt===I.alternate)break e;pt=nc(pt),I=nc(I)}pt=null}else pt=null;q!==null&&zS(Q,j,q,pt,!1),yt!==null&&Zt!==null&&zS(Q,Zt,yt,pt,!0)}}t:{if(j=U?Nu(U):window,q=j.nodeName&&j.nodeName.toLowerCase(),q==="select"||q==="input"&&j.type==="file")var ot=tA;else if(Wv(j))if(eA)ot=aT;else{ot=sT;var Mt=iT}else q=j.nodeName,!q||q.toLowerCase()!=="input"||j.type!=="checkbox"&&j.type!=="radio"?U&&Sm(U.elementType)&&(ot=tA):ot=nT;if(ot&&(ot=ot(e,U))){Jv(Q,ot,a,Y);break t}Mt&&Mt(e,j,U),e==="focusout"&&U&&j.type==="number"&&U.memoizedProps.value!=null&&Am(j,"number",j.value)}switch(Mt=U?Nu(U):window,e){case"focusin":(Wv(Mt)||Mt.contentEditable==="true")&&(ko=Mt,zm=U,Fu=null);break;case"focusout":Fu=zm=ko=null;break;case"mousedown":Pm=!0;break;case"contextmenu":case"mouseup":case"dragend":Pm=!1,cA(Q,a,Y);break;case"selectionchange":if(lT)break;case"keydown":case"keyup":cA(Q,a,Y)}var dt;if(Nm)t:{switch(e){case"compositionstart":var bt="onCompositionStart";break t;case"compositionend":bt="onCompositionEnd";break t;case"compositionupdate":bt="onCompositionUpdate";break t}bt=void 0}else Lo?Qv(e,a)&&(bt="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(bt="onCompositionStart");bt&&(Yv&&a.locale!=="ko"&&(Lo||bt!=="onCompositionStart"?bt==="onCompositionEnd"&&Lo&&(dt=jv()):(Ma=Y,Tm="value"in Ma?Ma.value:Ma.textContent,Lo=!0)),Mt=Og(U,bt),0<Mt.length&&(bt=new Vv(bt,e,null,a,Y),Q.push({event:bt,listeners:Mt}),dt?bt.data=dt:(dt=Zv(a),dt!==null&&(bt.data=dt)))),(dt=ZE?WE(e,a):JE(e,a))&&(bt=Og(U,"onBeforeInput"),0<bt.length&&(Mt=new Vv("onBeforeInput","beforeinput",null,a,Y),Q.push({event:Mt,listeners:bt}),Mt.data=dt)),GT(Q,e,U,a,Y)}LS(Q,s)})}function gh(e,s,a){return{instance:e,listener:s,currentTarget:a}}function Og(e,s){for(var a=s+"Capture",o=[];e!==null;){var d=e,m=d.stateNode;if(d=d.tag,d!==5&&d!==26&&d!==27||m===null||(d=Ou(e,a),d!=null&&o.unshift(gh(e,d,m)),d=Ou(e,s),d!=null&&o.push(gh(e,d,m))),e.tag===3)return o;e=e.return}return[]}function nc(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function zS(e,s,a,o,d){for(var m=s._reactName,_=[];a!==null&&a!==o;){var C=a,D=C.alternate,U=C.stateNode;if(C=C.tag,D!==null&&D===o)break;C!==5&&C!==26&&C!==27||U===null||(D=U,d?(U=Ou(a,m),U!=null&&_.unshift(gh(a,U,D))):d||(U=Ou(a,m),U!=null&&_.push(gh(a,U,D)))),a=a.return}_.length!==0&&e.push({event:s,listeners:_})}var YT=/\r\n?/g,$T=/\u0000|\uFFFD/g;function PS(e){return(typeof e=="string"?e:""+e).replace(YT,`
`).replace($T,"")}function HS(e,s){return s=PS(s),PS(e)===s}function Lg(){}function Qt(e,s,a,o,d,m){switch(a){case"children":typeof o=="string"?s==="body"||s==="textarea"&&o===""||Do(e,o):(typeof o=="number"||typeof o=="bigint")&&s!=="body"&&Do(e,""+o);break;case"className":Bf(e,"class",o);break;case"tabIndex":Bf(e,"tabindex",o);break;case"dir":case"role":case"viewBox":case"width":case"height":Bf(e,a,o);break;case"style":Iv(e,o,m);break;case"data":if(s!=="object"){Bf(e,"data",o);break}case"src":case"href":if(o===""&&(s!=="a"||a!=="href")){e.removeAttribute(a);break}if(o==null||typeof o=="function"||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(a);break}o=Uf(""+o),e.setAttribute(a,o);break;case"action":case"formAction":if(typeof o=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(a==="formAction"?(s!=="input"&&Qt(e,s,"name",d.name,d,null),Qt(e,s,"formEncType",d.formEncType,d,null),Qt(e,s,"formMethod",d.formMethod,d,null),Qt(e,s,"formTarget",d.formTarget,d,null)):(Qt(e,s,"encType",d.encType,d,null),Qt(e,s,"method",d.method,d,null),Qt(e,s,"target",d.target,d,null)));if(o==null||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(a);break}o=Uf(""+o),e.setAttribute(a,o);break;case"onClick":o!=null&&(e.onclick=Lg);break;case"onScroll":o!=null&&Ot("scroll",e);break;case"onScrollEnd":o!=null&&Ot("scrollend",e);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(n(61));if(a=o.__html,a!=null){if(d.children!=null)throw Error(n(60));e.innerHTML=a}}break;case"multiple":e.multiple=o&&typeof o!="function"&&typeof o!="symbol";break;case"muted":e.muted=o&&typeof o!="function"&&typeof o!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(o==null||typeof o=="function"||typeof o=="boolean"||typeof o=="symbol"){e.removeAttribute("xlink:href");break}a=Uf(""+o),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(a,""+o):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":o&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":o===!0?e.setAttribute(a,""):o!==!1&&o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(a,o):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":o!=null&&typeof o!="function"&&typeof o!="symbol"&&!isNaN(o)&&1<=o?e.setAttribute(a,o):e.removeAttribute(a);break;case"rowSpan":case"start":o==null||typeof o=="function"||typeof o=="symbol"||isNaN(o)?e.removeAttribute(a):e.setAttribute(a,o);break;case"popover":Ot("beforetoggle",e),Ot("toggle",e),Hf(e,"popover",o);break;case"xlinkActuate":Tn(e,"http://www.w3.org/1999/xlink","xlink:actuate",o);break;case"xlinkArcrole":Tn(e,"http://www.w3.org/1999/xlink","xlink:arcrole",o);break;case"xlinkRole":Tn(e,"http://www.w3.org/1999/xlink","xlink:role",o);break;case"xlinkShow":Tn(e,"http://www.w3.org/1999/xlink","xlink:show",o);break;case"xlinkTitle":Tn(e,"http://www.w3.org/1999/xlink","xlink:title",o);break;case"xlinkType":Tn(e,"http://www.w3.org/1999/xlink","xlink:type",o);break;case"xmlBase":Tn(e,"http://www.w3.org/XML/1998/namespace","xml:base",o);break;case"xmlLang":Tn(e,"http://www.w3.org/XML/1998/namespace","xml:lang",o);break;case"xmlSpace":Tn(e,"http://www.w3.org/XML/1998/namespace","xml:space",o);break;case"is":Hf(e,"is",o);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=wE.get(a)||a,Hf(e,a,o))}}function ab(e,s,a,o,d,m){switch(a){case"style":Iv(e,o,m);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(n(61));if(a=o.__html,a!=null){if(d.children!=null)throw Error(n(60));e.innerHTML=a}}break;case"children":typeof o=="string"?Do(e,o):(typeof o=="number"||typeof o=="bigint")&&Do(e,""+o);break;case"onScroll":o!=null&&Ot("scroll",e);break;case"onScrollEnd":o!=null&&Ot("scrollend",e);break;case"onClick":o!=null&&(e.onclick=Lg);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Mv.hasOwnProperty(a))t:{if(a[0]==="o"&&a[1]==="n"&&(d=a.endsWith("Capture"),s=a.slice(2,d?a.length-7:void 0),m=e[Ei]||null,m=m!=null?m[a]:null,typeof m=="function"&&e.removeEventListener(s,m,d),typeof o=="function")){typeof m!="function"&&m!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(s,o,d);break t}a in e?e[a]=o:o===!0?e.setAttribute(a,""):Hf(e,a,o)}}}function Ke(e,s,a){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ot("error",e),Ot("load",e);var o=!1,d=!1,m;for(m in a)if(a.hasOwnProperty(m)){var _=a[m];if(_!=null)switch(m){case"src":o=!0;break;case"srcSet":d=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,s));default:Qt(e,s,m,_,a,null)}}d&&Qt(e,s,"srcSet",a.srcSet,a,null),o&&Qt(e,s,"src",a.src,a,null);return;case"input":Ot("invalid",e);var C=m=_=d=null,D=null,U=null;for(o in a)if(a.hasOwnProperty(o)){var Y=a[o];if(Y!=null)switch(o){case"name":d=Y;break;case"type":_=Y;break;case"checked":D=Y;break;case"defaultChecked":U=Y;break;case"value":m=Y;break;case"defaultValue":C=Y;break;case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(n(137,s));break;default:Qt(e,s,o,Y,a,null)}}zv(e,m,C,D,U,_,d,!1),If(e);return;case"select":Ot("invalid",e),o=_=m=null;for(d in a)if(a.hasOwnProperty(d)&&(C=a[d],C!=null))switch(d){case"value":m=C;break;case"defaultValue":_=C;break;case"multiple":o=C;default:Qt(e,s,d,C,a,null)}s=m,a=_,e.multiple=!!o,s!=null?Ro(e,!!o,s,!1):a!=null&&Ro(e,!!o,a,!0);return;case"textarea":Ot("invalid",e),m=d=o=null;for(_ in a)if(a.hasOwnProperty(_)&&(C=a[_],C!=null))switch(_){case"value":o=C;break;case"defaultValue":d=C;break;case"children":m=C;break;case"dangerouslySetInnerHTML":if(C!=null)throw Error(n(91));break;default:Qt(e,s,_,C,a,null)}Hv(e,o,d,m),If(e);return;case"option":for(D in a)if(a.hasOwnProperty(D)&&(o=a[D],o!=null))switch(D){case"selected":e.selected=o&&typeof o!="function"&&typeof o!="symbol";break;default:Qt(e,s,D,o,a,null)}return;case"dialog":Ot("beforetoggle",e),Ot("toggle",e),Ot("cancel",e),Ot("close",e);break;case"iframe":case"object":Ot("load",e);break;case"video":case"audio":for(o=0;o<fh.length;o++)Ot(fh[o],e);break;case"image":Ot("error",e),Ot("load",e);break;case"details":Ot("toggle",e);break;case"embed":case"source":case"link":Ot("error",e),Ot("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(U in a)if(a.hasOwnProperty(U)&&(o=a[U],o!=null))switch(U){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,s));default:Qt(e,s,U,o,a,null)}return;default:if(Sm(s)){for(Y in a)a.hasOwnProperty(Y)&&(o=a[Y],o!==void 0&&ab(e,s,Y,o,a,void 0));return}}for(C in a)a.hasOwnProperty(C)&&(o=a[C],o!=null&&Qt(e,s,C,o,a,null))}function KT(e,s,a,o){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var d=null,m=null,_=null,C=null,D=null,U=null,Y=null;for(q in a){var Q=a[q];if(a.hasOwnProperty(q)&&Q!=null)switch(q){case"checked":break;case"value":break;case"defaultValue":D=Q;default:o.hasOwnProperty(q)||Qt(e,s,q,null,o,Q)}}for(var j in o){var q=o[j];if(Q=a[j],o.hasOwnProperty(j)&&(q!=null||Q!=null))switch(j){case"type":m=q;break;case"name":d=q;break;case"checked":U=q;break;case"defaultChecked":Y=q;break;case"value":_=q;break;case"defaultValue":C=q;break;case"children":case"dangerouslySetInnerHTML":if(q!=null)throw Error(n(137,s));break;default:q!==Q&&Qt(e,s,j,q,o,Q)}}vm(e,_,C,D,U,Y,m,d);return;case"select":q=_=C=j=null;for(m in a)if(D=a[m],a.hasOwnProperty(m)&&D!=null)switch(m){case"value":break;case"multiple":q=D;default:o.hasOwnProperty(m)||Qt(e,s,m,null,o,D)}for(d in o)if(m=o[d],D=a[d],o.hasOwnProperty(d)&&(m!=null||D!=null))switch(d){case"value":j=m;break;case"defaultValue":C=m;break;case"multiple":_=m;default:m!==D&&Qt(e,s,d,m,o,D)}s=C,a=_,o=q,j!=null?Ro(e,!!a,j,!1):!!o!=!!a&&(s!=null?Ro(e,!!a,s,!0):Ro(e,!!a,a?[]:"",!1));return;case"textarea":q=j=null;for(C in a)if(d=a[C],a.hasOwnProperty(C)&&d!=null&&!o.hasOwnProperty(C))switch(C){case"value":break;case"children":break;default:Qt(e,s,C,null,o,d)}for(_ in o)if(d=o[_],m=a[_],o.hasOwnProperty(_)&&(d!=null||m!=null))switch(_){case"value":j=d;break;case"defaultValue":q=d;break;case"children":break;case"dangerouslySetInnerHTML":if(d!=null)throw Error(n(91));break;default:d!==m&&Qt(e,s,_,d,o,m)}Pv(e,j,q);return;case"option":for(var yt in a)if(j=a[yt],a.hasOwnProperty(yt)&&j!=null&&!o.hasOwnProperty(yt))switch(yt){case"selected":e.selected=!1;break;default:Qt(e,s,yt,null,o,j)}for(D in o)if(j=o[D],q=a[D],o.hasOwnProperty(D)&&j!==q&&(j!=null||q!=null))switch(D){case"selected":e.selected=j&&typeof j!="function"&&typeof j!="symbol";break;default:Qt(e,s,D,j,o,q)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var pt in a)j=a[pt],a.hasOwnProperty(pt)&&j!=null&&!o.hasOwnProperty(pt)&&Qt(e,s,pt,null,o,j);for(U in o)if(j=o[U],q=a[U],o.hasOwnProperty(U)&&j!==q&&(j!=null||q!=null))switch(U){case"children":case"dangerouslySetInnerHTML":if(j!=null)throw Error(n(137,s));break;default:Qt(e,s,U,j,o,q)}return;default:if(Sm(s)){for(var Zt in a)j=a[Zt],a.hasOwnProperty(Zt)&&j!==void 0&&!o.hasOwnProperty(Zt)&&ab(e,s,Zt,void 0,o,j);for(Y in o)j=o[Y],q=a[Y],!o.hasOwnProperty(Y)||j===q||j===void 0&&q===void 0||ab(e,s,Y,j,o,q);return}}for(var I in a)j=a[I],a.hasOwnProperty(I)&&j!=null&&!o.hasOwnProperty(I)&&Qt(e,s,I,null,o,j);for(Q in o)j=o[Q],q=a[Q],!o.hasOwnProperty(Q)||j===q||j==null&&q==null||Qt(e,s,Q,j,o,q)}var rb=null,lb=null;function kg(e){return e.nodeType===9?e:e.ownerDocument}function BS(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function IS(e,s){if(e===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&s==="foreignObject"?0:e}function ob(e,s){return e==="textarea"||e==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var cb=null;function QT(){var e=window.event;return e&&e.type==="popstate"?e===cb?!1:(cb=e,!0):(cb=null,!1)}var FS=typeof setTimeout=="function"?setTimeout:void 0,ZT=typeof clearTimeout=="function"?clearTimeout:void 0,US=typeof Promise=="function"?Promise:void 0,WT=typeof queueMicrotask=="function"?queueMicrotask:typeof US<"u"?function(e){return US.resolve(null).then(e).catch(JT)}:FS;function JT(e){setTimeout(function(){throw e})}function qa(e){return e==="head"}function jS(e,s){var a=s,o=0,d=0;do{var m=a.nextSibling;if(e.removeChild(a),m&&m.nodeType===8)if(a=m.data,a==="/$"){if(0<o&&8>o){a=o;var _=e.ownerDocument;if(a&1&&ph(_.documentElement),a&2&&ph(_.body),a&4)for(a=_.head,ph(a),_=a.firstChild;_;){var C=_.nextSibling,D=_.nodeName;_[Du]||D==="SCRIPT"||D==="STYLE"||D==="LINK"&&_.rel.toLowerCase()==="stylesheet"||a.removeChild(_),_=C}}if(d===0){e.removeChild(m),xh(s);return}d--}else a==="$"||a==="$?"||a==="$!"?d++:o=a.charCodeAt(0)-48;else o=0;a=m}while(a);xh(s)}function ub(e){var s=e.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var a=s;switch(s=s.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":ub(a),pm(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function t2(e,s,a,o){for(;e.nodeType===1;){var d=a;if(e.nodeName.toLowerCase()!==s.toLowerCase()){if(!o&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(o){if(!e[Du])switch(s){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(m=e.getAttribute("rel"),m==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(m!==d.rel||e.getAttribute("href")!==(d.href==null||d.href===""?null:d.href)||e.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin)||e.getAttribute("title")!==(d.title==null?null:d.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(m=e.getAttribute("src"),(m!==(d.src==null?null:d.src)||e.getAttribute("type")!==(d.type==null?null:d.type)||e.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin))&&m&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(s==="input"&&e.type==="hidden"){var m=d.name==null?null:""+d.name;if(d.type==="hidden"&&e.getAttribute("name")===m)return e}else return e;if(e=Ns(e.nextSibling),e===null)break}return null}function e2(e,s,a){if(s==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=Ns(e.nextSibling),e===null))return null;return e}function hb(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState==="complete"}function i2(e,s){var a=e.ownerDocument;if(e.data!=="$?"||a.readyState==="complete")s();else{var o=function(){s(),a.removeEventListener("DOMContentLoaded",o)};a.addEventListener("DOMContentLoaded",o),e._reactRetry=o}}function Ns(e){for(;e!=null;e=e.nextSibling){var s=e.nodeType;if(s===1||s===3)break;if(s===8){if(s=e.data,s==="$"||s==="$!"||s==="$?"||s==="F!"||s==="F")break;if(s==="/$")return null}}return e}var db=null;function GS(e){e=e.previousSibling;for(var s=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"){if(s===0)return e;s--}else a==="/$"&&s++}e=e.previousSibling}return null}function qS(e,s,a){switch(s=kg(a),e){case"html":if(e=s.documentElement,!e)throw Error(n(452));return e;case"head":if(e=s.head,!e)throw Error(n(453));return e;case"body":if(e=s.body,!e)throw Error(n(454));return e;default:throw Error(n(451))}}function ph(e){for(var s=e.attributes;s.length;)e.removeAttributeNode(s[0]);pm(e)}var bs=new Map,VS=new Set;function zg(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Fn=X.d;X.d={f:s2,r:n2,D:a2,C:r2,L:l2,m:o2,X:u2,S:c2,M:h2};function s2(){var e=Fn.f(),s=Tg();return e||s}function n2(e){var s=Eo(e);s!==null&&s.tag===5&&s.type==="form"?h1(s):Fn.r(e)}var ac=typeof document>"u"?null:document;function XS(e,s,a){var o=ac;if(o&&typeof s=="string"&&s){var d=us(s);d='link[rel="'+e+'"][href="'+d+'"]',typeof a=="string"&&(d+='[crossorigin="'+a+'"]'),VS.has(d)||(VS.add(d),e={rel:e,crossOrigin:a,href:s},o.querySelector(d)===null&&(s=o.createElement("link"),Ke(s,"link",e),Pe(s),o.head.appendChild(s)))}}function a2(e){Fn.D(e),XS("dns-prefetch",e,null)}function r2(e,s){Fn.C(e,s),XS("preconnect",e,s)}function l2(e,s,a){Fn.L(e,s,a);var o=ac;if(o&&e&&s){var d='link[rel="preload"][as="'+us(s)+'"]';s==="image"&&a&&a.imageSrcSet?(d+='[imagesrcset="'+us(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(d+='[imagesizes="'+us(a.imageSizes)+'"]')):d+='[href="'+us(e)+'"]';var m=d;switch(s){case"style":m=rc(e);break;case"script":m=lc(e)}bs.has(m)||(e=p({rel:"preload",href:s==="image"&&a&&a.imageSrcSet?void 0:e,as:s},a),bs.set(m,e),o.querySelector(d)!==null||s==="style"&&o.querySelector(mh(m))||s==="script"&&o.querySelector(bh(m))||(s=o.createElement("link"),Ke(s,"link",e),Pe(s),o.head.appendChild(s)))}}function o2(e,s){Fn.m(e,s);var a=ac;if(a&&e){var o=s&&typeof s.as=="string"?s.as:"script",d='link[rel="modulepreload"][as="'+us(o)+'"][href="'+us(e)+'"]',m=d;switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=lc(e)}if(!bs.has(m)&&(e=p({rel:"modulepreload",href:e},s),bs.set(m,e),a.querySelector(d)===null)){switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(bh(m)))return}o=a.createElement("link"),Ke(o,"link",e),Pe(o),a.head.appendChild(o)}}}function c2(e,s,a){Fn.S(e,s,a);var o=ac;if(o&&e){var d=To(o).hoistableStyles,m=rc(e);s=s||"default";var _=d.get(m);if(!_){var C={loading:0,preload:null};if(_=o.querySelector(mh(m)))C.loading=5;else{e=p({rel:"stylesheet",href:e,"data-precedence":s},a),(a=bs.get(m))&&fb(e,a);var D=_=o.createElement("link");Pe(D),Ke(D,"link",e),D._p=new Promise(function(U,Y){D.onload=U,D.onerror=Y}),D.addEventListener("load",function(){C.loading|=1}),D.addEventListener("error",function(){C.loading|=2}),C.loading|=4,Pg(_,s,o)}_={type:"stylesheet",instance:_,count:1,state:C},d.set(m,_)}}}function u2(e,s){Fn.X(e,s);var a=ac;if(a&&e){var o=To(a).hoistableScripts,d=lc(e),m=o.get(d);m||(m=a.querySelector(bh(d)),m||(e=p({src:e,async:!0},s),(s=bs.get(d))&&gb(e,s),m=a.createElement("script"),Pe(m),Ke(m,"link",e),a.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},o.set(d,m))}}function h2(e,s){Fn.M(e,s);var a=ac;if(a&&e){var o=To(a).hoistableScripts,d=lc(e),m=o.get(d);m||(m=a.querySelector(bh(d)),m||(e=p({src:e,async:!0,type:"module"},s),(s=bs.get(d))&&gb(e,s),m=a.createElement("script"),Pe(m),Ke(m,"link",e),a.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},o.set(d,m))}}function YS(e,s,a,o){var d=(d=gt.current)?zg(d):null;if(!d)throw Error(n(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(s=rc(a.href),a=To(d).hoistableStyles,o=a.get(s),o||(o={type:"style",instance:null,count:0,state:null},a.set(s,o)),o):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=rc(a.href);var m=To(d).hoistableStyles,_=m.get(e);if(_||(d=d.ownerDocument||d,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(e,_),(m=d.querySelector(mh(e)))&&!m._p&&(_.instance=m,_.state.loading=5),bs.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},bs.set(e,a),m||d2(d,e,a,_.state))),s&&o===null)throw Error(n(528,""));return _}if(s&&o!==null)throw Error(n(529,""));return null;case"script":return s=a.async,a=a.src,typeof a=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=lc(a),a=To(d).hoistableScripts,o=a.get(s),o||(o={type:"script",instance:null,count:0,state:null},a.set(s,o)),o):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,e))}}function rc(e){return'href="'+us(e)+'"'}function mh(e){return'link[rel="stylesheet"]['+e+"]"}function $S(e){return p({},e,{"data-precedence":e.precedence,precedence:null})}function d2(e,s,a,o){e.querySelector('link[rel="preload"][as="style"]['+s+"]")?o.loading=1:(s=e.createElement("link"),o.preload=s,s.addEventListener("load",function(){return o.loading|=1}),s.addEventListener("error",function(){return o.loading|=2}),Ke(s,"link",a),Pe(s),e.head.appendChild(s))}function lc(e){return'[src="'+us(e)+'"]'}function bh(e){return"script[async]"+e}function KS(e,s,a){if(s.count++,s.instance===null)switch(s.type){case"style":var o=e.querySelector('style[data-href~="'+us(a.href)+'"]');if(o)return s.instance=o,Pe(o),o;var d=p({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return o=(e.ownerDocument||e).createElement("style"),Pe(o),Ke(o,"style",d),Pg(o,a.precedence,e),s.instance=o;case"stylesheet":d=rc(a.href);var m=e.querySelector(mh(d));if(m)return s.state.loading|=4,s.instance=m,Pe(m),m;o=$S(a),(d=bs.get(d))&&fb(o,d),m=(e.ownerDocument||e).createElement("link"),Pe(m);var _=m;return _._p=new Promise(function(C,D){_.onload=C,_.onerror=D}),Ke(m,"link",o),s.state.loading|=4,Pg(m,a.precedence,e),s.instance=m;case"script":return m=lc(a.src),(d=e.querySelector(bh(m)))?(s.instance=d,Pe(d),d):(o=a,(d=bs.get(m))&&(o=p({},a),gb(o,d)),e=e.ownerDocument||e,d=e.createElement("script"),Pe(d),Ke(d,"link",o),e.head.appendChild(d),s.instance=d);case"void":return null;default:throw Error(n(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(o=s.instance,s.state.loading|=4,Pg(o,a.precedence,e));return s.instance}function Pg(e,s,a){for(var o=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),d=o.length?o[o.length-1]:null,m=d,_=0;_<o.length;_++){var C=o[_];if(C.dataset.precedence===s)m=C;else if(m!==d)break}m?m.parentNode.insertBefore(e,m.nextSibling):(s=a.nodeType===9?a.head:a,s.insertBefore(e,s.firstChild))}function fb(e,s){e.crossOrigin==null&&(e.crossOrigin=s.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=s.referrerPolicy),e.title==null&&(e.title=s.title)}function gb(e,s){e.crossOrigin==null&&(e.crossOrigin=s.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=s.referrerPolicy),e.integrity==null&&(e.integrity=s.integrity)}var Hg=null;function QS(e,s,a){if(Hg===null){var o=new Map,d=Hg=new Map;d.set(a,o)}else d=Hg,o=d.get(a),o||(o=new Map,d.set(a,o));if(o.has(e))return o;for(o.set(e,null),a=a.getElementsByTagName(e),d=0;d<a.length;d++){var m=a[d];if(!(m[Du]||m[ai]||e==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var _=m.getAttribute(s)||"";_=e+_;var C=o.get(_);C?C.push(m):o.set(_,[m])}}return o}function ZS(e,s,a){e=e.ownerDocument||e,e.head.insertBefore(a,s==="title"?e.querySelector("head > title"):null)}function f2(e,s,a){if(a===1||s.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return e=s.disabled,typeof s.precedence=="string"&&e==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function WS(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}var yh=null;function g2(){}function p2(e,s,a){if(yh===null)throw Error(n(475));var o=yh;if(s.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var d=rc(a.href),m=e.querySelector(mh(d));if(m){e=m._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(o.count++,o=Bg.bind(o),e.then(o,o)),s.state.loading|=4,s.instance=m,Pe(m);return}m=e.ownerDocument||e,a=$S(a),(d=bs.get(d))&&fb(a,d),m=m.createElement("link"),Pe(m);var _=m;_._p=new Promise(function(C,D){_.onload=C,_.onerror=D}),Ke(m,"link",a),s.instance=m}o.stylesheets===null&&(o.stylesheets=new Map),o.stylesheets.set(s,e),(e=s.state.preload)&&(s.state.loading&3)===0&&(o.count++,s=Bg.bind(o),e.addEventListener("load",s),e.addEventListener("error",s))}}function m2(){if(yh===null)throw Error(n(475));var e=yh;return e.stylesheets&&e.count===0&&pb(e,e.stylesheets),0<e.count?function(s){var a=setTimeout(function(){if(e.stylesheets&&pb(e,e.stylesheets),e.unsuspend){var o=e.unsuspend;e.unsuspend=null,o()}},6e4);return e.unsuspend=s,function(){e.unsuspend=null,clearTimeout(a)}}:null}function Bg(){if(this.count--,this.count===0){if(this.stylesheets)pb(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Ig=null;function pb(e,s){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Ig=new Map,s.forEach(b2,e),Ig=null,Bg.call(e))}function b2(e,s){if(!(s.state.loading&4)){var a=Ig.get(e);if(a)var o=a.get(null);else{a=new Map,Ig.set(e,a);for(var d=e.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<d.length;m++){var _=d[m];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(a.set(_.dataset.precedence,_),o=_)}o&&a.set(null,o)}d=s.instance,_=d.getAttribute("data-precedence"),m=a.get(_)||o,m===o&&a.set(null,d),a.set(_,d),this.count++,o=Bg.bind(this),d.addEventListener("load",o),d.addEventListener("error",o),m?m.parentNode.insertBefore(d,m.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(d,e.firstChild)),s.state.loading|=4}}var vh={$$typeof:O,Provider:null,Consumer:null,_currentValue:ct,_currentValue2:ct,_threadCount:0};function y2(e,s,a,o,d,m,_,C){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=hm(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=hm(0),this.hiddenUpdates=hm(null),this.identifierPrefix=o,this.onUncaughtError=d,this.onCaughtError=m,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=C,this.incompleteTransitions=new Map}function JS(e,s,a,o,d,m,_,C,D,U,Y,Q){return e=new y2(e,s,a,_,C,D,U,Q),s=1,m===!0&&(s|=24),m=Ii(3,null,null,s),e.current=m,m.stateNode=e,s=Qm(),s.refCount++,e.pooledCache=s,s.refCount++,m.memoizedState={element:o,isDehydrated:a,cache:s},t0(m),e}function t_(e){return e?(e=Bo,e):Bo}function e_(e,s,a,o,d,m){d=t_(d),o.context===null?o.context=d:o.pendingContext=d,o=Na(s),o.payload={element:a},m=m===void 0?null:m,m!==null&&(o.callback=m),a=Oa(e,o,s),a!==null&&(qi(a,e,s),Ku(a,e,s))}function i_(e,s){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<s?a:s}}function mb(e,s){i_(e,s),(e=e.alternate)&&i_(e,s)}function s_(e){if(e.tag===13){var s=Ho(e,67108864);s!==null&&qi(s,e,67108864),mb(e,67108864)}}var Fg=!0;function v2(e,s,a,o){var d=B.T;B.T=null;var m=X.p;try{X.p=2,bb(e,s,a,o)}finally{X.p=m,B.T=d}}function A2(e,s,a,o){var d=B.T;B.T=null;var m=X.p;try{X.p=8,bb(e,s,a,o)}finally{X.p=m,B.T=d}}function bb(e,s,a,o){if(Fg){var d=yb(o);if(d===null)nb(e,s,o,Ug,a),a_(e,o);else if(_2(d,e,s,a,o))o.stopPropagation();else if(a_(e,o),s&4&&-1<S2.indexOf(e)){for(;d!==null;){var m=Eo(d);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var _=Ur(m.pendingLanes);if(_!==0){var C=m;for(C.pendingLanes|=2,C.entangledLanes|=2;_;){var D=1<<31-Hi(_);C.entanglements[1]|=D,_&=~D}en(m),(Xt&6)===0&&(wg=Qs()+500,dh(0))}}break;case 13:C=Ho(m,2),C!==null&&qi(C,m,2),Tg(),mb(m,2)}if(m=yb(o),m===null&&nb(e,s,o,Ug,a),m===d)break;d=m}d!==null&&o.stopPropagation()}else nb(e,s,o,null,a)}}function yb(e){return e=xm(e),vb(e)}var Ug=null;function vb(e){if(Ug=null,e=wo(e),e!==null){var s=l(e);if(s===null)e=null;else{var a=s.tag;if(a===13){if(e=u(s),e!==null)return e;e=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;e=null}else s!==e&&(e=null)}}return Ug=e,null}function n_(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(rE()){case yv:return 2;case vv:return 8;case Lf:case lE:return 32;case Av:return 268435456;default:return 32}default:return 32}}var Ab=!1,Va=null,Xa=null,Ya=null,Ah=new Map,Sh=new Map,$a=[],S2="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function a_(e,s){switch(e){case"focusin":case"focusout":Va=null;break;case"dragenter":case"dragleave":Xa=null;break;case"mouseover":case"mouseout":Ya=null;break;case"pointerover":case"pointerout":Ah.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Sh.delete(s.pointerId)}}function _h(e,s,a,o,d,m){return e===null||e.nativeEvent!==m?(e={blockedOn:s,domEventName:a,eventSystemFlags:o,nativeEvent:m,targetContainers:[d]},s!==null&&(s=Eo(s),s!==null&&s_(s)),e):(e.eventSystemFlags|=o,s=e.targetContainers,d!==null&&s.indexOf(d)===-1&&s.push(d),e)}function _2(e,s,a,o,d){switch(s){case"focusin":return Va=_h(Va,e,s,a,o,d),!0;case"dragenter":return Xa=_h(Xa,e,s,a,o,d),!0;case"mouseover":return Ya=_h(Ya,e,s,a,o,d),!0;case"pointerover":var m=d.pointerId;return Ah.set(m,_h(Ah.get(m)||null,e,s,a,o,d)),!0;case"gotpointercapture":return m=d.pointerId,Sh.set(m,_h(Sh.get(m)||null,e,s,a,o,d)),!0}return!1}function r_(e){var s=wo(e.target);if(s!==null){var a=l(s);if(a!==null){if(s=a.tag,s===13){if(s=u(a),s!==null){e.blockedOn=s,pE(e.priority,function(){if(a.tag===13){var o=Gi();o=dm(o);var d=Ho(a,o);d!==null&&qi(d,a,o),mb(a,o)}});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function jg(e){if(e.blockedOn!==null)return!1;for(var s=e.targetContainers;0<s.length;){var a=yb(e.nativeEvent);if(a===null){a=e.nativeEvent;var o=new a.constructor(a.type,a);_m=o,a.target.dispatchEvent(o),_m=null}else return s=Eo(a),s!==null&&s_(s),e.blockedOn=a,!1;s.shift()}return!0}function l_(e,s,a){jg(e)&&a.delete(s)}function x2(){Ab=!1,Va!==null&&jg(Va)&&(Va=null),Xa!==null&&jg(Xa)&&(Xa=null),Ya!==null&&jg(Ya)&&(Ya=null),Ah.forEach(l_),Sh.forEach(l_)}function Gg(e,s){e.blockedOn===s&&(e.blockedOn=null,Ab||(Ab=!0,b.unstable_scheduleCallback(b.unstable_NormalPriority,x2)))}var qg=null;function o_(e){qg!==e&&(qg=e,b.unstable_scheduleCallback(b.unstable_NormalPriority,function(){qg===e&&(qg=null);for(var s=0;s<e.length;s+=3){var a=e[s],o=e[s+1],d=e[s+2];if(typeof o!="function"){if(vb(o||a)===null)continue;break}var m=Eo(a);m!==null&&(e.splice(s,3),s-=3,v0(m,{pending:!0,data:d,method:a.method,action:o},o,d))}}))}function xh(e){function s(D){return Gg(D,e)}Va!==null&&Gg(Va,e),Xa!==null&&Gg(Xa,e),Ya!==null&&Gg(Ya,e),Ah.forEach(s),Sh.forEach(s);for(var a=0;a<$a.length;a++){var o=$a[a];o.blockedOn===e&&(o.blockedOn=null)}for(;0<$a.length&&(a=$a[0],a.blockedOn===null);)r_(a),a.blockedOn===null&&$a.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(o=0;o<a.length;o+=3){var d=a[o],m=a[o+1],_=d[Ei]||null;if(typeof m=="function")_||o_(a);else if(_){var C=null;if(m&&m.hasAttribute("formAction")){if(d=m,_=m[Ei]||null)C=_.formAction;else if(vb(d)!==null)continue}else C=_.action;typeof C=="function"?a[o+1]=C:(a.splice(o,3),o-=3),o_(a)}}}function Sb(e){this._internalRoot=e}Vg.prototype.render=Sb.prototype.render=function(e){var s=this._internalRoot;if(s===null)throw Error(n(409));var a=s.current,o=Gi();e_(a,o,e,s,null,null)},Vg.prototype.unmount=Sb.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var s=e.containerInfo;e_(e.current,2,null,e,null,null),Tg(),s[xo]=null}};function Vg(e){this._internalRoot=e}Vg.prototype.unstable_scheduleHydration=function(e){if(e){var s=Ev();e={blockedOn:null,target:e,priority:s};for(var a=0;a<$a.length&&s!==0&&s<$a[a].priority;a++);$a.splice(a,0,e),a===0&&r_(e)}};var c_=t.version;if(c_!=="19.1.0")throw Error(n(527,c_,"19.1.0"));X.findDOMNode=function(e){var s=e._reactInternals;if(s===void 0)throw typeof e.render=="function"?Error(n(188)):(e=Object.keys(e).join(","),Error(n(268,e)));return e=f(s),e=e!==null?g(e):null,e=e===null?null:e.stateNode,e};var w2={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:B,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Xg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Xg.isDisabled&&Xg.supportsFiber)try{Cu=Xg.inject(w2),Pi=Xg}catch{}}return Eh.createRoot=function(e,s){if(!r(e))throw Error(n(299));var a=!1,o="",d=E1,m=T1,_=C1,C=null;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(o=s.identifierPrefix),s.onUncaughtError!==void 0&&(d=s.onUncaughtError),s.onCaughtError!==void 0&&(m=s.onCaughtError),s.onRecoverableError!==void 0&&(_=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(C=s.unstable_transitionCallbacks)),s=JS(e,1,!1,null,null,a,o,d,m,_,C,null),e[xo]=s.current,sb(e),new Sb(s)},Eh.hydrateRoot=function(e,s,a){if(!r(e))throw Error(n(299));var o=!1,d="",m=E1,_=T1,C=C1,D=null,U=null;return a!=null&&(a.unstable_strictMode===!0&&(o=!0),a.identifierPrefix!==void 0&&(d=a.identifierPrefix),a.onUncaughtError!==void 0&&(m=a.onUncaughtError),a.onCaughtError!==void 0&&(_=a.onCaughtError),a.onRecoverableError!==void 0&&(C=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(D=a.unstable_transitionCallbacks),a.formState!==void 0&&(U=a.formState)),s=JS(e,1,!0,s,a??null,o,d,m,_,C,D,U),s.context=t_(null),a=s.current,o=Gi(),o=dm(o),d=Na(o),d.callback=null,Oa(a,d,o),a=o,s.current.lanes=a,Ru(s,a),en(s),e[xo]=s.current,sb(e),new Vg(s)},Eh.version="19.1.0",Eh}var A_;function H2(){if(A_)return Eb.exports;A_=1;function b(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(b)}catch(t){console.error(t)}}return b(),Eb.exports=P2(),Eb.exports}var B2=H2();const I2=q_(B2);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F2=b=>b.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),U2=b=>b.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,i,n)=>n?n.toUpperCase():i.toLowerCase()),S_=b=>{const t=U2(b);return t.charAt(0).toUpperCase()+t.slice(1)},V_=(...b)=>b.filter((t,i,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===i).join(" ").trim(),j2=b=>{for(const t in b)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var G2={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q2=Xe.forwardRef(({color:b="currentColor",size:t=24,strokeWidth:i=2,absoluteStrokeWidth:n,className:r="",children:l,iconNode:u,...h},f)=>Xe.createElement("svg",{ref:f,...G2,width:t,height:t,stroke:b,strokeWidth:n?Number(i)*24/Number(t):i,className:V_("lucide",r),...!l&&!j2(h)&&{"aria-hidden":"true"},...h},[...u.map(([g,p])=>Xe.createElement(g,p)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const En=(b,t)=>{const i=Xe.forwardRef(({className:n,...r},l)=>Xe.createElement(q2,{ref:l,iconNode:t,className:V_(`lucide-${F2(S_(b))}`,`lucide-${b}`,n),...r}));return i.displayName=S_(b),i};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V2=[["path",{d:"M17 21a1 1 0 0 0 1-1v-5.35c0-.457.316-.844.727-1.041a4 4 0 0 0-2.134-7.589 5 5 0 0 0-9.186 0 4 4 0 0 0-2.134 7.588c.411.198.727.585.727 1.041V20a1 1 0 0 0 1 1Z",key:"1qvrer"}],["path",{d:"M6 17h12",key:"1jwigz"}]],X2=En("chef-hat",V2);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y2=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],$2=En("circle-alert",Y2);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K2=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],X_=En("dollar-sign",K2);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q2=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Z2=En("download",Q2);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W2=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],J2=En("file-text",W2);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tC=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],eC=En("mail",tC);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iC=[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]],sC=En("printer",iC);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nC=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],aC=En("shopping-cart",nC);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rC=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],lC=En("upload",rC);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oC=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Y_=En("users",oC),Si=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),Hb=[.001,0,0,.001,0,0],Rb=1.35,as={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},Za={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},cC="pdfjs_internal_editor_",St={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,SIGNATURE:101},Pt={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35,DRAW_STEP:41},uC={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},oi={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},tp={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},Ee={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},oc={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},am={ERRORS:0,WARNINGS:1,INFOS:5},Np={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},Yg={moveTo:0,lineTo:1,curveTo:2,closePath:3},hC={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let rm=am.WARNINGS;function dC(b){Number.isInteger(b)&&(rm=b)}function fC(){return rm}function lm(b){rm>=am.INFOS&&console.log(`Info: ${b}`)}function _t(b){rm>=am.WARNINGS&&console.log(`Warning: ${b}`)}function te(b){throw new Error(b)}function Ce(b,t){b||te(t)}function gC(b){switch(b==null?void 0:b.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function $_(b,t=null,i=null){if(!b)return null;if(i&&typeof b=="string"){if(i.addDefaultProtocol&&b.startsWith("www.")){const r=b.match(/\./g);(r==null?void 0:r.length)>=2&&(b=`http://${b}`)}if(i.tryConvertEncoding)try{b=vC(b)}catch{}}const n=t?URL.parse(b,t):URL.parse(b);return gC(n)?n:null}function K_(b,t,i=!1){const n=URL.parse(b);return n?(n.hash=t,n.href):i&&$_(b,"http://example.com")?b.split("#",1)[0]+`${t?`#${t}`:""}`:""}function zt(b,t,i,n=!1){return Object.defineProperty(b,t,{value:i,enumerable:!n,configurable:!0,writable:!1}),i}const Ao=function(){function t(i,n){this.message=i,this.name=n}return t.prototype=new Error,t.constructor=t,t}();class __ extends Ao{constructor(t,i){super(t,"PasswordException"),this.code=i}}class Db extends Ao{constructor(t,i){super(t,"UnknownErrorException"),this.details=i}}class Bb extends Ao{constructor(t){super(t,"InvalidPDFException")}}class Op extends Ao{constructor(t,i,n){super(t,"ResponseException"),this.status=i,this.missing=n}}class pC extends Ao{constructor(t){super(t,"FormatError")}}class zr extends Ao{constructor(t){super(t,"AbortException")}}function Q_(b){(typeof b!="object"||(b==null?void 0:b.length)===void 0)&&te("Invalid argument for bytesToString");const t=b.length,i=8192;if(t<i)return String.fromCharCode.apply(null,b);const n=[];for(let r=0;r<t;r+=i){const l=Math.min(r+i,t),u=b.subarray(r,l);n.push(String.fromCharCode.apply(null,u))}return n.join("")}function Tf(b){typeof b!="string"&&te("Invalid argument for stringToBytes");const t=b.length,i=new Uint8Array(t);for(let n=0;n<t;++n)i[n]=b.charCodeAt(n)&255;return i}function mC(b){return String.fromCharCode(b>>24&255,b>>16&255,b>>8&255,b&255)}function bC(){const b=new Uint8Array(4);return b[0]=1,new Uint32Array(b.buffer,0,1)[0]===1}function yC(){try{return new Function(""),!0}catch{return!1}}class ni{static get isLittleEndian(){return zt(this,"isLittleEndian",bC())}static get isEvalSupported(){return zt(this,"isEvalSupported",yC())}static get isOffscreenCanvasSupported(){return zt(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return zt(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){const{platform:t,userAgent:i}=navigator;return zt(this,"platform",{isAndroid:i.includes("Android"),isLinux:t.includes("Linux"),isMac:t.includes("Mac"),isWindows:t.includes("Win"),isFirefox:i.includes("Firefox")})}static get isCSSRoundSupported(){var t,i;return zt(this,"isCSSRoundSupported",(i=(t=globalThis.CSS)==null?void 0:t.supports)==null?void 0:i.call(t,"width: round(1.5px, 1px)"))}}const Nb=Array.from(Array(256).keys(),b=>b.toString(16).padStart(2,"0"));var _a,ep,Ib;class ft{static makeHexColor(t,i,n){return`#${Nb[t]}${Nb[i]}${Nb[n]}`}static scaleMinMax(t,i){let n;t[0]?(t[0]<0&&(n=i[0],i[0]=i[2],i[2]=n),i[0]*=t[0],i[2]*=t[0],t[3]<0&&(n=i[1],i[1]=i[3],i[3]=n),i[1]*=t[3],i[3]*=t[3]):(n=i[0],i[0]=i[1],i[1]=n,n=i[2],i[2]=i[3],i[3]=n,t[1]<0&&(n=i[1],i[1]=i[3],i[3]=n),i[1]*=t[1],i[3]*=t[1],t[2]<0&&(n=i[0],i[0]=i[2],i[2]=n),i[0]*=t[2],i[2]*=t[2]),i[0]+=t[4],i[1]+=t[5],i[2]+=t[4],i[3]+=t[5]}static transform(t,i){return[t[0]*i[0]+t[2]*i[1],t[1]*i[0]+t[3]*i[1],t[0]*i[2]+t[2]*i[3],t[1]*i[2]+t[3]*i[3],t[0]*i[4]+t[2]*i[5]+t[4],t[1]*i[4]+t[3]*i[5]+t[5]]}static applyTransform(t,i,n=0){const r=t[n],l=t[n+1];t[n]=r*i[0]+l*i[2]+i[4],t[n+1]=r*i[1]+l*i[3]+i[5]}static applyTransformToBezier(t,i,n=0){const r=i[0],l=i[1],u=i[2],h=i[3],f=i[4],g=i[5];for(let p=0;p<6;p+=2){const y=t[n+p],v=t[n+p+1];t[n+p]=y*r+v*u+f,t[n+p+1]=y*l+v*h+g}}static applyInverseTransform(t,i){const n=t[0],r=t[1],l=i[0]*i[3]-i[1]*i[2];t[0]=(n*i[3]-r*i[2]+i[2]*i[5]-i[4]*i[3])/l,t[1]=(-n*i[1]+r*i[0]+i[4]*i[1]-i[5]*i[0])/l}static axialAlignedBoundingBox(t,i,n){const r=i[0],l=i[1],u=i[2],h=i[3],f=i[4],g=i[5],p=t[0],y=t[1],v=t[2],S=t[3];let T=r*p+f,x=T,M=r*v+f,R=M,k=h*y+g,O=k,H=h*S+g,z=H;if(l!==0||u!==0){const G=l*p,V=l*v,Z=u*y,et=u*S;T+=Z,R+=Z,M+=et,x+=et,k+=G,z+=G,H+=V,O+=V}n[0]=Math.min(n[0],T,M,x,R),n[1]=Math.min(n[1],k,H,O,z),n[2]=Math.max(n[2],T,M,x,R),n[3]=Math.max(n[3],k,H,O,z)}static inverseTransform(t){const i=t[0]*t[3]-t[1]*t[2];return[t[3]/i,-t[1]/i,-t[2]/i,t[0]/i,(t[2]*t[5]-t[4]*t[3])/i,(t[4]*t[1]-t[5]*t[0])/i]}static singularValueDecompose2dScale(t,i){const n=t[0],r=t[1],l=t[2],u=t[3],h=n**2+r**2,f=n*l+r*u,g=l**2+u**2,p=(h+g)/2,y=Math.sqrt(p**2-(h*g-f**2));i[0]=Math.sqrt(p+y||1),i[1]=Math.sqrt(p-y||1)}static normalizeRect(t){const i=t.slice(0);return t[0]>t[2]&&(i[0]=t[2],i[2]=t[0]),t[1]>t[3]&&(i[1]=t[3],i[3]=t[1]),i}static intersect(t,i){const n=Math.max(Math.min(t[0],t[2]),Math.min(i[0],i[2])),r=Math.min(Math.max(t[0],t[2]),Math.max(i[0],i[2]));if(n>r)return null;const l=Math.max(Math.min(t[1],t[3]),Math.min(i[1],i[3])),u=Math.min(Math.max(t[1],t[3]),Math.max(i[1],i[3]));return l>u?null:[n,l,r,u]}static pointBoundingBox(t,i,n){n[0]=Math.min(n[0],t),n[1]=Math.min(n[1],i),n[2]=Math.max(n[2],t),n[3]=Math.max(n[3],i)}static rectBoundingBox(t,i,n,r,l){l[0]=Math.min(l[0],t,n),l[1]=Math.min(l[1],i,r),l[2]=Math.max(l[2],t,n),l[3]=Math.max(l[3],i,r)}static bezierBoundingBox(t,i,n,r,l,u,h,f,g){g[0]=Math.min(g[0],t,h),g[1]=Math.min(g[1],i,f),g[2]=Math.max(g[2],t,h),g[3]=Math.max(g[3],i,f),E(this,_a,Ib).call(this,t,n,l,h,i,r,u,f,3*(-t+3*(n-l)+h),6*(t-2*n+l),3*(n-t),g),E(this,_a,Ib).call(this,t,n,l,h,i,r,u,f,3*(-i+3*(r-u)+f),6*(i-2*r+u),3*(r-i),g)}}_a=new WeakSet,ep=function(t,i,n,r,l,u,h,f,g,p){if(g<=0||g>=1)return;const y=1-g,v=g*g,S=v*g,T=y*(y*(y*t+3*g*i)+3*v*n)+S*r,x=y*(y*(y*l+3*g*u)+3*v*h)+S*f;p[0]=Math.min(p[0],T),p[1]=Math.min(p[1],x),p[2]=Math.max(p[2],T),p[3]=Math.max(p[3],x)},Ib=function(t,i,n,r,l,u,h,f,g,p,y,v){if(Math.abs(g)<1e-12){Math.abs(p)>=1e-12&&E(this,_a,ep).call(this,t,i,n,r,l,u,h,f,-y/p,v);return}const S=p**2-4*y*g;if(S<0)return;const T=Math.sqrt(S),x=2*g;E(this,_a,ep).call(this,t,i,n,r,l,u,h,f,(-p+T)/x,v),E(this,_a,ep).call(this,t,i,n,r,l,u,h,f,(-p-T)/x,v)},w(ft,_a);function vC(b){return decodeURIComponent(escape(b))}let Ob=null,x_=null;function AC(b){return Ob||(Ob=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,x_=new Map([["","t"]])),b.replaceAll(Ob,(t,i,n)=>i?i.normalize("NFKC"):x_.get(n))}function Z_(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const b=new Uint8Array(32);return crypto.getRandomValues(b),Q_(b)}const iv="pdfjs_internal_id_";function SC(b,t,i){if(!Array.isArray(i)||i.length<2)return!1;const[n,r,...l]=i;if(!b(n)&&!Number.isInteger(n)||!t(r))return!1;const u=l.length;let h=!0;switch(r.name){case"XYZ":if(u<2||u>3)return!1;break;case"Fit":case"FitB":return u===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(u>1)return!1;break;case"FitR":if(u!==4)return!1;h=!1;break;default:return!1}for(const f of l)if(!(typeof f=="number"||h&&f===null))return!1;return!0}function _i(b,t,i){return Math.min(Math.max(b,t),i)}function W_(b){return Uint8Array.prototype.toBase64?b.toBase64():btoa(Q_(b))}function _C(b){return Uint8Array.fromBase64?Uint8Array.fromBase64(b):Tf(atob(b))}typeof Promise.try!="function"&&(Promise.try=function(b,...t){return new Promise(i=>{i(b(...t))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(b){return b.reduce((t,i)=>t+i,0)});const Un="http://www.w3.org/2000/svg",ol=class ol{};J(ol,"CSS",96),J(ol,"PDF",72),J(ol,"PDF_TO_CSS_UNITS",ol.CSS/ol.PDF);let Pr=ol;async function Cf(b,t="text"){if(Dh(b,document.baseURI)){const i=await fetch(b);if(!i.ok)throw new Error(i.statusText);switch(t){case"arraybuffer":return i.arrayBuffer();case"blob":return i.blob();case"json":return i.json()}return i.text()}return new Promise((i,n)=>{const r=new XMLHttpRequest;r.open("GET",b,!0),r.responseType=t,r.onreadystatechange=()=>{if(r.readyState===XMLHttpRequest.DONE){if(r.status===200||r.status===0){switch(t){case"arraybuffer":case"blob":case"json":i(r.response);return}i(r.responseText);return}n(new Error(r.statusText))}},r.send(null)})}class Mf{constructor({viewBox:t,userUnit:i,scale:n,rotation:r,offsetX:l=0,offsetY:u=0,dontFlip:h=!1}){this.viewBox=t,this.userUnit=i,this.scale=n,this.rotation=r,this.offsetX=l,this.offsetY=u,n*=i;const f=(t[2]+t[0])/2,g=(t[3]+t[1])/2;let p,y,v,S;switch(r%=360,r<0&&(r+=360),r){case 180:p=-1,y=0,v=0,S=1;break;case 90:p=0,y=1,v=1,S=0;break;case 270:p=0,y=-1,v=-1,S=0;break;case 0:p=1,y=0,v=0,S=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}h&&(v=-v,S=-S);let T,x,M,R;p===0?(T=Math.abs(g-t[1])*n+l,x=Math.abs(f-t[0])*n+u,M=(t[3]-t[1])*n,R=(t[2]-t[0])*n):(T=Math.abs(f-t[0])*n+l,x=Math.abs(g-t[1])*n+u,M=(t[2]-t[0])*n,R=(t[3]-t[1])*n),this.transform=[p*n,y*n,v*n,S*n,T-p*n*f-v*n*g,x-y*n*f-S*n*g],this.width=M,this.height=R}get rawDims(){const t=this.viewBox;return zt(this,"rawDims",{pageWidth:t[2]-t[0],pageHeight:t[3]-t[1],pageX:t[0],pageY:t[1]})}clone({scale:t=this.scale,rotation:i=this.rotation,offsetX:n=this.offsetX,offsetY:r=this.offsetY,dontFlip:l=!1}={}){return new Mf({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:t,rotation:i,offsetX:n,offsetY:r,dontFlip:l})}convertToViewportPoint(t,i){const n=[t,i];return ft.applyTransform(n,this.transform),n}convertToViewportRectangle(t){const i=[t[0],t[1]];ft.applyTransform(i,this.transform);const n=[t[2],t[3]];return ft.applyTransform(n,this.transform),[i[0],i[1],n[0],n[1]]}convertToPdfPoint(t,i){const n=[t,i];return ft.applyInverseTransform(n,this.transform),n}}class sv extends Ao{constructor(t,i=0){super(t,"RenderingCancelledException"),this.extraDelay=i}}function om(b){const t=b.length;let i=0;for(;i<t&&b[i].trim()==="";)i++;return b.substring(i,i+5).toLowerCase()==="data:"}function nv(b){return typeof b=="string"&&/\.pdf$/i.test(b)}function xC(b){return[b]=b.split(/[#?]/,1),b.substring(b.lastIndexOf("/")+1)}function wC(b,t="document.pdf"){if(typeof b!="string")return t;if(om(b))return _t('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;const i=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,n=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,r=i.exec(b);let l=n.exec(r[1])||n.exec(r[2])||n.exec(r[3]);if(l&&(l=l[0],l.includes("%")))try{l=n.exec(decodeURIComponent(l))[0]}catch{}return l||t}class w_{constructor(){J(this,"started",Object.create(null));J(this,"times",[])}time(t){t in this.started&&_t(`Timer is already running for ${t}`),this.started[t]=Date.now()}timeEnd(t){t in this.started||_t(`Timer has not been started for ${t}`),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){const t=[];let i=0;for(const{name:n}of this.times)i=Math.max(n.length,i);for(const{name:n,start:r,end:l}of this.times)t.push(`${n.padEnd(i)} ${l-r}ms
`);return t.join("")}}function Dh(b,t){const i=t?URL.parse(b,t):URL.parse(b);return(i==null?void 0:i.protocol)==="http:"||(i==null?void 0:i.protocol)==="https:"}function Ys(b){b.preventDefault()}function Te(b){b.preventDefault(),b.stopPropagation()}function EC(b){console.log("Deprecated API usage: "+b)}var Wh;class av{static toDateObject(t){if(!t||typeof t!="string")return null;c(this,Wh)||A(this,Wh,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const i=c(this,Wh).exec(t);if(!i)return null;const n=parseInt(i[1],10);let r=parseInt(i[2],10);r=r>=1&&r<=12?r-1:0;let l=parseInt(i[3],10);l=l>=1&&l<=31?l:1;let u=parseInt(i[4],10);u=u>=0&&u<=23?u:0;let h=parseInt(i[5],10);h=h>=0&&h<=59?h:0;let f=parseInt(i[6],10);f=f>=0&&f<=59?f:0;const g=i[7]||"Z";let p=parseInt(i[8],10);p=p>=0&&p<=23?p:0;let y=parseInt(i[9],10)||0;return y=y>=0&&y<=59?y:0,g==="-"?(u+=p,h+=y):g==="+"&&(u-=p,h-=y),new Date(Date.UTC(n,r,l,u,h,f))}}Wh=new WeakMap,w(av,Wh);function TC(b,{scale:t=1,rotation:i=0}){const{width:n,height:r}=b.attributes.style,l=[0,0,parseInt(n),parseInt(r)];return new Mf({viewBox:l,userUnit:1,scale:t,rotation:i})}function rv(b){if(b.startsWith("#")){const t=parseInt(b.slice(1),16);return[(t&16711680)>>16,(t&65280)>>8,t&255]}return b.startsWith("rgb(")?b.slice(4,-1).split(",").map(t=>parseInt(t)):b.startsWith("rgba(")?b.slice(5,-1).split(",").map(t=>parseInt(t)).slice(0,3):(_t(`Not a valid color format: "${b}"`),[0,0,0])}function CC(b){const t=document.createElement("span");t.style.visibility="hidden",t.style.colorScheme="only light",document.body.append(t);for(const i of b.keys()){t.style.color=i;const n=window.getComputedStyle(t).color;b.set(i,rv(n))}t.remove()}function fe(b){const{a:t,b:i,c:n,d:r,e:l,f:u}=b.getTransform();return[t,i,n,r,l,u]}function sn(b){const{a:t,b:i,c:n,d:r,e:l,f:u}=b.getTransform().invertSelf();return[t,i,n,r,l,u]}function bo(b,t,i=!1,n=!0){if(t instanceof Mf){const{pageWidth:r,pageHeight:l}=t.rawDims,{style:u}=b,h=ni.isCSSRoundSupported,f=`var(--total-scale-factor) * ${r}px`,g=`var(--total-scale-factor) * ${l}px`,p=h?`round(down, ${f}, var(--scale-round-x))`:`calc(${f})`,y=h?`round(down, ${g}, var(--scale-round-y))`:`calc(${g})`;!i||t.rotation%180===0?(u.width=p,u.height=y):(u.width=y,u.height=p)}n&&b.setAttribute("data-main-rotation",t.rotation)}class xn{constructor(){const{pixelRatio:t}=xn;this.sx=t,this.sy=t}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(t,i,n,r,l=-1){let u=1/0,h=1/0,f=1/0;n=xn.capPixels(n,l),n>0&&(u=Math.sqrt(n/(t*i))),r!==-1&&(h=r/t,f=r/i);const g=Math.min(u,h,f);return this.sx>g||this.sy>g?(this.sx=g,this.sy=g,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(t,i){if(i>=0){const n=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+i/100));return t>0?Math.min(t,n):n}return t}}const Fb=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];var Wa,ul,vs,Ja,Jh,vc,td,Fp,J_,si,tx,ex,Nh,ix,ip;const qn=class qn{constructor(t){w(this,si);w(this,Wa,null);w(this,ul,null);w(this,vs);w(this,Ja,null);w(this,Jh,null);w(this,vc,null);A(this,vs,t),c(qn,td)||A(qn,td,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"}))}render(){const t=A(this,Wa,document.createElement("div"));t.classList.add("editToolbar","hidden"),t.setAttribute("role","toolbar");const i=c(this,vs)._uiManager._signal;t.addEventListener("contextmenu",Ys,{signal:i}),t.addEventListener("pointerdown",E(qn,Fp,J_),{signal:i});const n=A(this,Ja,document.createElement("div"));n.className="buttons",t.append(n);const r=c(this,vs).toolbarPosition;if(r){const{style:l}=t,u=c(this,vs)._uiManager.direction==="ltr"?1-r[0]:r[0];l.insetInlineEnd=`${100*u}%`,l.top=`calc(${100*r[1]}% + var(--editor-toolbar-vert-offset))`}return E(this,si,ix).call(this),t}get div(){return c(this,Wa)}hide(){var t;c(this,Wa).classList.add("hidden"),(t=c(this,ul))==null||t.hideDropdown()}show(){var t;c(this,Wa).classList.remove("hidden"),(t=c(this,Jh))==null||t.shown()}async addAltText(t){const i=await t.render();E(this,si,Nh).call(this,i),c(this,Ja).prepend(i,c(this,si,ip)),A(this,Jh,t)}addColorPicker(t){A(this,ul,t);const i=t.renderButton();E(this,si,Nh).call(this,i),c(this,Ja).prepend(i,c(this,si,ip))}async addEditSignatureButton(t){const i=A(this,vc,await t.renderEditButton(c(this,vs)));E(this,si,Nh).call(this,i),c(this,Ja).prepend(i,c(this,si,ip))}updateEditSignatureButton(t){c(this,vc)&&(c(this,vc).title=t)}remove(){var t;c(this,Wa).remove(),(t=c(this,ul))==null||t.destroy(),A(this,ul,null)}};Wa=new WeakMap,ul=new WeakMap,vs=new WeakMap,Ja=new WeakMap,Jh=new WeakMap,vc=new WeakMap,td=new WeakMap,Fp=new WeakSet,J_=function(t){t.stopPropagation()},si=new WeakSet,tx=function(t){c(this,vs)._focusEventsAllowed=!1,Te(t)},ex=function(t){c(this,vs)._focusEventsAllowed=!0,Te(t)},Nh=function(t){const i=c(this,vs)._uiManager._signal;t.addEventListener("focusin",E(this,si,tx).bind(this),{capture:!0,signal:i}),t.addEventListener("focusout",E(this,si,ex).bind(this),{capture:!0,signal:i}),t.addEventListener("contextmenu",Ys,{signal:i})},ix=function(){const{editorType:t,_uiManager:i}=c(this,vs),n=document.createElement("button");n.className="delete",n.tabIndex=0,n.setAttribute("data-l10n-id",c(qn,td)[t]),E(this,si,Nh).call(this,n),n.addEventListener("click",r=>{i.delete()},{signal:i._signal}),c(this,Ja).append(n)},ip=function(){const t=document.createElement("div");return t.className="divider",t},w(qn,Fp),w(qn,td,null);let Ub=qn;var ed,hl,dl,Hr,sx,nx,ax;class MC{constructor(t){w(this,Hr);w(this,ed,null);w(this,hl,null);w(this,dl);A(this,dl,t)}show(t,i,n){const[r,l]=E(this,Hr,nx).call(this,i,n),{style:u}=c(this,hl)||A(this,hl,E(this,Hr,sx).call(this));t.append(c(this,hl)),u.insetInlineEnd=`${100*r}%`,u.top=`calc(${100*l}% + var(--editor-toolbar-vert-offset))`}hide(){c(this,hl).remove()}}ed=new WeakMap,hl=new WeakMap,dl=new WeakMap,Hr=new WeakSet,sx=function(){const t=A(this,hl,document.createElement("div"));t.className="editToolbar",t.setAttribute("role","toolbar"),t.addEventListener("contextmenu",Ys,{signal:c(this,dl)._signal});const i=A(this,ed,document.createElement("div"));return i.className="buttons",t.append(i),E(this,Hr,ax).call(this),t},nx=function(t,i){let n=0,r=0;for(const l of t){const u=l.y+l.height;if(u<n)continue;const h=l.x+(i?l.width:0);if(u>n){r=h,n=u;continue}i?h>r&&(r=h):h<r&&(r=h)}return[i?1-r:r,n]},ax=function(){const t=document.createElement("button");t.className="highlightButton",t.tabIndex=0,t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const i=document.createElement("span");t.append(i),i.className="visuallyHidden",i.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const n=c(this,dl)._signal;t.addEventListener("contextmenu",Ys,{signal:n}),t.addEventListener("click",()=>{c(this,dl).highlightSelection("floating_button")},{signal:n}),c(this,ed).append(t)};function rx(b,t,i){for(const n of i)t.addEventListener(n,b[n].bind(b))}var Up;class RC{constructor(){w(this,Up,0)}get id(){return`${cC}${pi(this,Up)._++}`}}Up=new WeakMap;var Ac,id,ui,Sc,sp;const fv=class fv{constructor(){w(this,Sc);w(this,Ac,Z_());w(this,id,0);w(this,ui,null)}static get _isSVGFittingCanvas(){const t='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',n=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),r=new Image;r.src=t;const l=r.decode().then(()=>(n.drawImage(r,0,0,1,1,0,0,1,3),new Uint32Array(n.getImageData(0,0,1,1).data.buffer)[0]===0));return zt(this,"_isSVGFittingCanvas",l)}async getFromFile(t){const{lastModified:i,name:n,size:r,type:l}=t;return E(this,Sc,sp).call(this,`${i}_${n}_${r}_${l}`,t)}async getFromUrl(t){return E(this,Sc,sp).call(this,t,t)}async getFromBlob(t,i){const n=await i;return E(this,Sc,sp).call(this,t,n)}async getFromId(t){c(this,ui)||A(this,ui,new Map);const i=c(this,ui).get(t);if(!i)return null;if(i.bitmap)return i.refCounter+=1,i;if(i.file)return this.getFromFile(i.file);if(i.blobPromise){const{blobPromise:n}=i;return delete i.blobPromise,this.getFromBlob(i.id,n)}return this.getFromUrl(i.url)}getFromCanvas(t,i){c(this,ui)||A(this,ui,new Map);let n=c(this,ui).get(t);if(n!=null&&n.bitmap)return n.refCounter+=1,n;const r=new OffscreenCanvas(i.width,i.height);return r.getContext("2d").drawImage(i,0,0),n={bitmap:r.transferToImageBitmap(),id:`image_${c(this,Ac)}_${pi(this,id)._++}`,refCounter:1,isSvg:!1},c(this,ui).set(t,n),c(this,ui).set(n.id,n),n}getSvgUrl(t){const i=c(this,ui).get(t);return i!=null&&i.isSvg?i.svgUrl:null}deleteId(t){var r;c(this,ui)||A(this,ui,new Map);const i=c(this,ui).get(t);if(!i||(i.refCounter-=1,i.refCounter!==0))return;const{bitmap:n}=i;if(!i.url&&!i.file){const l=new OffscreenCanvas(n.width,n.height);l.getContext("bitmaprenderer").transferFromImageBitmap(n),i.blobPromise=l.convertToBlob()}(r=n.close)==null||r.call(n),i.bitmap=null}isValidId(t){return t.startsWith(`image_${c(this,Ac)}_`)}};Ac=new WeakMap,id=new WeakMap,ui=new WeakMap,Sc=new WeakSet,sp=async function(t,i){c(this,ui)||A(this,ui,new Map);let n=c(this,ui).get(t);if(n===null)return null;if(n!=null&&n.bitmap)return n.refCounter+=1,n;try{n||(n={bitmap:null,id:`image_${c(this,Ac)}_${pi(this,id)._++}`,refCounter:0,isSvg:!1});let r;if(typeof i=="string"?(n.url=i,r=await Cf(i,"blob")):i instanceof File?r=n.file=i:i instanceof Blob&&(r=i),r.type==="image/svg+xml"){const l=fv._isSVGFittingCanvas,u=new FileReader,h=new Image,f=new Promise((g,p)=>{h.onload=()=>{n.bitmap=h,n.isSvg=!0,g()},u.onload=async()=>{const y=n.svgUrl=u.result;h.src=await l?`${y}#svgView(preserveAspectRatio(none))`:y},h.onerror=u.onerror=p});u.readAsDataURL(r),await f}else n.bitmap=await createImageBitmap(r);n.refCounter=1}catch(r){_t(r),n=null}return c(this,ui).set(t,n),n&&c(this,ui).set(n.id,n),n};let jb=fv;var ve,tr,sd,de;class DC{constructor(t=128){w(this,ve,[]);w(this,tr,!1);w(this,sd);w(this,de,-1);A(this,sd,t)}add({cmd:t,undo:i,post:n,mustExec:r,type:l=NaN,overwriteIfSameType:u=!1,keepUndo:h=!1}){if(r&&t(),c(this,tr))return;const f={cmd:t,undo:i,post:n,type:l};if(c(this,de)===-1){c(this,ve).length>0&&(c(this,ve).length=0),A(this,de,0),c(this,ve).push(f);return}if(u&&c(this,ve)[c(this,de)].type===l){h&&(f.undo=c(this,ve)[c(this,de)].undo),c(this,ve)[c(this,de)]=f;return}const g=c(this,de)+1;g===c(this,sd)?c(this,ve).splice(0,1):(A(this,de,g),g<c(this,ve).length&&c(this,ve).splice(g)),c(this,ve).push(f)}undo(){if(c(this,de)===-1)return;A(this,tr,!0);const{undo:t,post:i}=c(this,ve)[c(this,de)];t(),i==null||i(),A(this,tr,!1),A(this,de,c(this,de)-1)}redo(){if(c(this,de)<c(this,ve).length-1){A(this,de,c(this,de)+1),A(this,tr,!0);const{cmd:t,post:i}=c(this,ve)[c(this,de)];t(),i==null||i(),A(this,tr,!1)}}hasSomethingToUndo(){return c(this,de)!==-1}hasSomethingToRedo(){return c(this,de)<c(this,ve).length-1}cleanType(t){if(c(this,de)!==-1){for(let i=c(this,de);i>=0;i--)if(c(this,ve)[i].type!==t){c(this,ve).splice(i+1,c(this,de)-i),A(this,de,i);return}c(this,ve).length=0,A(this,de,-1)}}destroy(){A(this,ve,null)}}ve=new WeakMap,tr=new WeakMap,sd=new WeakMap,de=new WeakMap;var jp,lx;class Rf{constructor(t){w(this,jp);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:i}=ni.platform;for(const[n,r,l={}]of t)for(const u of n){const h=u.startsWith("mac+");i&&h?(this.callbacks.set(u.slice(4),{callback:r,options:l}),this.allKeys.add(u.split("+").at(-1))):!i&&!h&&(this.callbacks.set(u,{callback:r,options:l}),this.allKeys.add(u.split("+").at(-1)))}}exec(t,i){if(!this.allKeys.has(i.key))return;const n=this.callbacks.get(E(this,jp,lx).call(this,i));if(!n)return;const{callback:r,options:{bubbles:l=!1,args:u=[],checker:h=null}}=n;h&&!h(t,i)||(r.bind(t,...u,i)(),l||Te(i))}}jp=new WeakSet,lx=function(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);const i=this.buffer.join("+");return this.buffer.length=0,i};const Gp=class Gp{get _colors(){const t=new Map([["CanvasText",null],["Canvas",null]]);return CC(t),zt(this,"_colors",t)}convert(t){const i=rv(t);if(!window.matchMedia("(forced-colors: active)").matches)return i;for(const[n,r]of this._colors)if(r.every((l,u)=>l===i[u]))return Gp._colorsMapping.get(n);return i}getHexCode(t){const i=this._colors.get(t);return i?ft.makeHexColor(...i):t}};J(Gp,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let Gb=Gp;var _c,Xi,Le,Qe,xc,Xn,wc,As,er,ir,Ec,fl,rn,Ls,gl,nd,ad,Tc,rd,ln,sr,Cc,nr,on,qp,ar,ld,rr,pl,ml,lr,od,Fe,$t,Yn,or,bl,cd,ud,cr,cn,$n,hd,Ss,it,np,qb,ox,cx,ap,ux,hx,dx,Vb,fx,Xb,Yb,gx,mi,jn,px,mx,$b,bx,Oh,Kb;const mc=class mc{constructor(t,i,n,r,l,u,h,f,g,p,y,v,S,T){w(this,it);w(this,_c,new AbortController);w(this,Xi,null);w(this,Le,new Map);w(this,Qe,new Map);w(this,xc,null);w(this,Xn,null);w(this,wc,null);w(this,As,new DC);w(this,er,null);w(this,ir,null);w(this,Ec,0);w(this,fl,new Set);w(this,rn,null);w(this,Ls,null);w(this,gl,new Set);J(this,"_editorUndoBar",null);w(this,nd,!1);w(this,ad,!1);w(this,Tc,!1);w(this,rd,null);w(this,ln,null);w(this,sr,null);w(this,Cc,null);w(this,nr,!1);w(this,on,null);w(this,qp,new RC);w(this,ar,!1);w(this,ld,!1);w(this,rr,null);w(this,pl,null);w(this,ml,null);w(this,lr,null);w(this,od,null);w(this,Fe,St.NONE);w(this,$t,new Set);w(this,Yn,null);w(this,or,null);w(this,bl,null);w(this,cd,null);w(this,ud,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});w(this,cr,[0,0]);w(this,cn,null);w(this,$n,null);w(this,hd,null);w(this,Ss,null);const x=this._signal=c(this,_c).signal;A(this,$n,t),A(this,hd,i),A(this,xc,n),A(this,or,r),this._eventBus=l,l._on("editingaction",this.onEditingAction.bind(this),{signal:x}),l._on("pagechanging",this.onPageChanging.bind(this),{signal:x}),l._on("scalechanging",this.onScaleChanging.bind(this),{signal:x}),l._on("rotationchanging",this.onRotationChanging.bind(this),{signal:x}),l._on("setpreference",this.onSetPreference.bind(this),{signal:x}),l._on("switchannotationeditorparams",M=>this.updateParams(M.type,M.value),{signal:x}),E(this,it,ux).call(this),E(this,it,gx).call(this),E(this,it,Vb).call(this),A(this,Xn,u.annotationStorage),A(this,rd,u.filterFactory),A(this,bl,h),A(this,Cc,f||null),A(this,nd,g),A(this,ad,p),A(this,Tc,y),A(this,od,v||null),this.viewParameters={realScale:Pr.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=S||null,this._supportsPinchToZoom=T!==!1}static get _keyboardManager(){const t=mc.prototype,i=u=>c(u,$n).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&u.hasSomethingToControl(),n=(u,{target:h})=>{if(h instanceof HTMLInputElement){const{type:f}=h;return f!=="text"&&f!=="number"}return!0},r=this.TRANSLATE_SMALL,l=this.TRANSLATE_BIG;return zt(this,"_keyboardManager",new Rf([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:n}],[["ctrl+z","mac+meta+z"],t.undo,{checker:n}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:n}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:n}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(u,{target:h})=>!(h instanceof HTMLButtonElement)&&c(u,$n).contains(h)&&!u.isEnterHandled}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(u,{target:h})=>!(h instanceof HTMLButtonElement)&&c(u,$n).contains(document.activeElement)}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-r,0],checker:i}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-l,0],checker:i}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[r,0],checker:i}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[l,0],checker:i}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-r],checker:i}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-l],checker:i}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,r],checker:i}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,l],checker:i}]]))}destroy(){var t,i,n,r,l,u,h,f;(t=c(this,Ss))==null||t.resolve(),A(this,Ss,null),(i=c(this,_c))==null||i.abort(),A(this,_c,null),this._signal=null;for(const g of c(this,Qe).values())g.destroy();c(this,Qe).clear(),c(this,Le).clear(),c(this,gl).clear(),(n=c(this,lr))==null||n.clear(),A(this,Xi,null),c(this,$t).clear(),c(this,As).destroy(),(r=c(this,xc))==null||r.destroy(),(l=c(this,or))==null||l.destroy(),(u=c(this,on))==null||u.hide(),A(this,on,null),(h=c(this,ml))==null||h.destroy(),A(this,ml,null),c(this,ln)&&(clearTimeout(c(this,ln)),A(this,ln,null)),c(this,cn)&&(clearTimeout(c(this,cn)),A(this,cn,null)),(f=this._editorUndoBar)==null||f.destroy()}combinedSignal(t){return AbortSignal.any([this._signal,t.signal])}get mlManager(){return c(this,od)}get useNewAltTextFlow(){return c(this,ad)}get useNewAltTextWhenAddingImage(){return c(this,Tc)}get hcmFilter(){return zt(this,"hcmFilter",c(this,bl)?c(this,rd).addHCMFilter(c(this,bl).foreground,c(this,bl).background):"none")}get direction(){return zt(this,"direction",getComputedStyle(c(this,$n)).direction)}get highlightColors(){return zt(this,"highlightColors",c(this,Cc)?new Map(c(this,Cc).split(",").map(t=>t.split("=").map(i=>i.trim()))):null)}get highlightColorNames(){return zt(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,t=>t.reverse())):null)}setCurrentDrawingSession(t){t?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),A(this,ir,t)}setMainHighlightColorPicker(t){A(this,ml,t)}editAltText(t,i=!1){var n;(n=c(this,xc))==null||n.editAltText(this,t,i)}getSignature(t){var i;(i=c(this,or))==null||i.getSignature({uiManager:this,editor:t})}get signatureManager(){return c(this,or)}switchToMode(t,i){this._eventBus.on("annotationeditormodechanged",i,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:t})}setPreference(t,i){this._eventBus.dispatch("setpreference",{source:this,name:t,value:i})}onSetPreference({name:t,value:i}){switch(t){case"enableNewAltTextWhenAddingImage":A(this,Tc,i);break}}onPageChanging({pageNumber:t}){A(this,Ec,t-1)}focusMainContainer(){c(this,$n).focus()}findParent(t,i){for(const n of c(this,Qe).values()){const{x:r,y:l,width:u,height:h}=n.div.getBoundingClientRect();if(t>=r&&t<=r+u&&i>=l&&i<=l+h)return n}return null}disableUserSelect(t=!1){c(this,hd).classList.toggle("noUserSelect",t)}addShouldRescale(t){c(this,gl).add(t)}removeShouldRescale(t){c(this,gl).delete(t)}onScaleChanging({scale:t}){var i;this.commitOrRemove(),this.viewParameters.realScale=t*Pr.PDF_TO_CSS_UNITS;for(const n of c(this,gl))n.onScaleChanging();(i=c(this,ir))==null||i.onScaleChanging()}onRotationChanging({pagesRotation:t}){this.commitOrRemove(),this.viewParameters.rotation=t}highlightSelection(t=""){const i=document.getSelection();if(!i||i.isCollapsed)return;const{anchorNode:n,anchorOffset:r,focusNode:l,focusOffset:u}=i,h=i.toString(),g=E(this,it,np).call(this,i).closest(".textLayer"),p=this.getSelectionBoxes(g);if(!p)return;i.empty();const y=E(this,it,qb).call(this,g),v=c(this,Fe)===St.NONE,S=()=>{y==null||y.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:p,anchorNode:n,anchorOffset:r,focusNode:l,focusOffset:u,text:h}),v&&this.showAllEditors("highlight",!0,!0)};if(v){this.switchToMode(St.HIGHLIGHT,S);return}S()}addToAnnotationStorage(t){!t.isEmpty()&&c(this,Xn)&&!c(this,Xn).has(t.id)&&c(this,Xn).setValue(t.id,t)}blur(){if(this.isShiftKeyDown=!1,c(this,nr)&&(A(this,nr,!1),E(this,it,ap).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:t}=document;for(const i of c(this,$t))if(i.div.contains(t)){A(this,pl,[i,t]),i._focusEventsAllowed=!1;break}}focus(){if(!c(this,pl))return;const[t,i]=c(this,pl);A(this,pl,null),i.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this._signal}),i.focus()}addEditListeners(){E(this,it,Vb).call(this),E(this,it,Xb).call(this)}removeEditListeners(){E(this,it,fx).call(this),E(this,it,Yb).call(this)}dragOver(t){for(const{type:i}of t.dataTransfer.items)for(const n of c(this,Ls))if(n.isHandlingMimeForPasting(i)){t.dataTransfer.dropEffect="copy",t.preventDefault();return}}drop(t){for(const i of t.dataTransfer.items)for(const n of c(this,Ls))if(n.isHandlingMimeForPasting(i.type)){n.paste(i,this.currentLayer),t.preventDefault();return}}copy(t){var n;if(t.preventDefault(),(n=c(this,Xi))==null||n.commitOrRemove(),!this.hasSelection)return;const i=[];for(const r of c(this,$t)){const l=r.serialize(!0);l&&i.push(l)}i.length!==0&&t.clipboardData.setData("application/pdfjs",JSON.stringify(i))}cut(t){this.copy(t),this.delete()}async paste(t){t.preventDefault();const{clipboardData:i}=t;for(const l of i.items)for(const u of c(this,Ls))if(u.isHandlingMimeForPasting(l.type)){u.paste(l,this.currentLayer);return}let n=i.getData("application/pdfjs");if(!n)return;try{n=JSON.parse(n)}catch(l){_t(`paste: "${l.message}".`);return}if(!Array.isArray(n))return;this.unselectAll();const r=this.currentLayer;try{const l=[];for(const f of n){const g=await r.deserialize(f);if(!g)return;l.push(g)}const u=()=>{for(const f of l)E(this,it,$b).call(this,f);E(this,it,Kb).call(this,l)},h=()=>{for(const f of l)f.remove()};this.addCommands({cmd:u,undo:h,mustExec:!0})}catch(l){_t(`paste: "${l.message}".`)}}keydown(t){!this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!0),c(this,Fe)!==St.NONE&&!this.isEditorHandlingKeyboard&&mc._keyboardManager.exec(this,t)}keyup(t){this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!1,c(this,nr)&&(A(this,nr,!1),E(this,it,ap).call(this,"main_toolbar")))}onEditingAction({name:t}){switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}setEditingState(t){t?(E(this,it,hx).call(this),E(this,it,Xb).call(this),E(this,it,mi).call(this,{isEditing:c(this,Fe)!==St.NONE,isEmpty:E(this,it,Oh).call(this),hasSomethingToUndo:c(this,As).hasSomethingToUndo(),hasSomethingToRedo:c(this,As).hasSomethingToRedo(),hasSelectedEditor:!1})):(E(this,it,dx).call(this),E(this,it,Yb).call(this),E(this,it,mi).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!c(this,Ls)){A(this,Ls,t);for(const i of c(this,Ls))E(this,it,jn).call(this,i.defaultPropertiesToUpdate)}}getId(){return c(this,qp).id}get currentLayer(){return c(this,Qe).get(c(this,Ec))}getLayer(t){return c(this,Qe).get(t)}get currentPageIndex(){return c(this,Ec)}addLayer(t){c(this,Qe).set(t.pageIndex,t),c(this,ar)?t.enable():t.disable()}removeLayer(t){c(this,Qe).delete(t.pageIndex)}async updateMode(t,i=null,n=!1){var r,l,u;if(c(this,Fe)!==t&&!(c(this,Ss)&&(await c(this,Ss).promise,!c(this,Ss)))){if(A(this,Ss,Promise.withResolvers()),(r=c(this,ir))==null||r.commitOrRemove(),A(this,Fe,t),t===St.NONE){this.setEditingState(!1),E(this,it,mx).call(this),(l=this._editorUndoBar)==null||l.hide(),c(this,Ss).resolve();return}t===St.SIGNATURE&&await((u=c(this,or))==null?void 0:u.loadSignatures()),this.setEditingState(!0),await E(this,it,px).call(this),this.unselectAll();for(const h of c(this,Qe).values())h.updateMode(t);if(!i){n&&this.addNewEditorFromKeyboard(),c(this,Ss).resolve();return}for(const h of c(this,Le).values())h.annotationElementId===i||h.id===i?(this.setSelected(h),h.enterInEditMode()):h.unselect();c(this,Ss).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t.mode!==c(this,Fe)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...t})}updateParams(t,i){var n;if(c(this,Ls)){switch(t){case Pt.CREATE:this.currentLayer.addNewEditor(i);return;case Pt.HIGHLIGHT_DEFAULT_COLOR:(n=c(this,ml))==null||n.updateColor(i);break;case Pt.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(c(this,cd)||A(this,cd,new Map)).set(t,i),this.showAllEditors("highlight",i);break}for(const r of c(this,$t))r.updateParams(t,i);for(const r of c(this,Ls))r.updateDefaultParams(t,i)}}showAllEditors(t,i,n=!1){var l;for(const u of c(this,Le).values())u.editorType===t&&u.show(i);(((l=c(this,cd))==null?void 0:l.get(Pt.HIGHLIGHT_SHOW_ALL))??!0)!==i&&E(this,it,jn).call(this,[[Pt.HIGHLIGHT_SHOW_ALL,i]])}enableWaiting(t=!1){if(c(this,ld)!==t){A(this,ld,t);for(const i of c(this,Qe).values())t?i.disableClick():i.enableClick(),i.div.classList.toggle("waiting",t)}}getEditors(t){const i=[];for(const n of c(this,Le).values())n.pageIndex===t&&i.push(n);return i}getEditor(t){return c(this,Le).get(t)}addEditor(t){c(this,Le).set(t.id,t)}removeEditor(t){var i,n;t.div.contains(document.activeElement)&&(c(this,ln)&&clearTimeout(c(this,ln)),A(this,ln,setTimeout(()=>{this.focusMainContainer(),A(this,ln,null)},0))),c(this,Le).delete(t.id),t.annotationElementId&&((i=c(this,lr))==null||i.delete(t.annotationElementId)),this.unselect(t),(!t.annotationElementId||!c(this,fl).has(t.annotationElementId))&&((n=c(this,Xn))==null||n.remove(t.id))}addDeletedAnnotationElement(t){c(this,fl).add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return c(this,fl).has(t)}removeDeletedAnnotationElement(t){c(this,fl).delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}setActiveEditor(t){c(this,Xi)!==t&&(A(this,Xi,t),t&&E(this,it,jn).call(this,t.propertiesToUpdate))}updateUI(t){c(this,it,bx)===t&&E(this,it,jn).call(this,t.propertiesToUpdate)}updateUIForDefaultProperties(t){E(this,it,jn).call(this,t.defaultPropertiesToUpdate)}toggleSelected(t){if(c(this,$t).has(t)){c(this,$t).delete(t),t.unselect(),E(this,it,mi).call(this,{hasSelectedEditor:this.hasSelection});return}c(this,$t).add(t),t.select(),E(this,it,jn).call(this,t.propertiesToUpdate),E(this,it,mi).call(this,{hasSelectedEditor:!0})}setSelected(t){var i;(i=c(this,ir))==null||i.commitOrRemove();for(const n of c(this,$t))n!==t&&n.unselect();c(this,$t).clear(),c(this,$t).add(t),t.select(),E(this,it,jn).call(this,t.propertiesToUpdate),E(this,it,mi).call(this,{hasSelectedEditor:!0})}isSelected(t){return c(this,$t).has(t)}get firstSelectedEditor(){return c(this,$t).values().next().value}unselect(t){t.unselect(),c(this,$t).delete(t),E(this,it,mi).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return c(this,$t).size!==0}get isEnterHandled(){return c(this,$t).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){var t;c(this,As).undo(),E(this,it,mi).call(this,{hasSomethingToUndo:c(this,As).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:E(this,it,Oh).call(this)}),(t=this._editorUndoBar)==null||t.hide()}redo(){c(this,As).redo(),E(this,it,mi).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:c(this,As).hasSomethingToRedo(),isEmpty:E(this,it,Oh).call(this)})}addCommands(t){c(this,As).add(t),E(this,it,mi).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:E(this,it,Oh).call(this)})}cleanUndoStack(t){c(this,As).cleanType(t)}delete(){var l;this.commitOrRemove();const t=(l=this.currentLayer)==null?void 0:l.endDrawingSession(!0);if(!this.hasSelection&&!t)return;const i=t?[t]:[...c(this,$t)],n=()=>{var u;(u=this._editorUndoBar)==null||u.show(r,i.length===1?i[0].editorType:i.length);for(const h of i)h.remove()},r=()=>{for(const u of i)E(this,it,$b).call(this,u)};this.addCommands({cmd:n,undo:r,mustExec:!0})}commitOrRemove(){var t;(t=c(this,Xi))==null||t.commitOrRemove()}hasSomethingToControl(){return c(this,Xi)||this.hasSelection}selectAll(){for(const t of c(this,$t))t.commit();E(this,it,Kb).call(this,c(this,Le).values())}unselectAll(){var t;if(!(c(this,Xi)&&(c(this,Xi).commitOrRemove(),c(this,Fe)!==St.NONE))&&!((t=c(this,ir))!=null&&t.commitOrRemove())&&this.hasSelection){for(const i of c(this,$t))i.unselect();c(this,$t).clear(),E(this,it,mi).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(t,i,n=!1){if(n||this.commitOrRemove(),!this.hasSelection)return;c(this,cr)[0]+=t,c(this,cr)[1]+=i;const[r,l]=c(this,cr),u=[...c(this,$t)],h=1e3;c(this,cn)&&clearTimeout(c(this,cn)),A(this,cn,setTimeout(()=>{A(this,cn,null),c(this,cr)[0]=c(this,cr)[1]=0,this.addCommands({cmd:()=>{for(const f of u)c(this,Le).has(f.id)&&(f.translateInPage(r,l),f.translationDone())},undo:()=>{for(const f of u)c(this,Le).has(f.id)&&(f.translateInPage(-r,-l),f.translationDone())},mustExec:!1})},h));for(const f of u)f.translateInPage(t,i),f.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),A(this,rn,new Map);for(const t of c(this,$t))c(this,rn).set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!c(this,rn))return!1;this.disableUserSelect(!1);const t=c(this,rn);A(this,rn,null);let i=!1;for(const[{x:r,y:l,pageIndex:u},h]of t)h.newX=r,h.newY=l,h.newPageIndex=u,i||(i=r!==h.savedX||l!==h.savedY||u!==h.savedPageIndex);if(!i)return!1;const n=(r,l,u,h)=>{if(c(this,Le).has(r.id)){const f=c(this,Qe).get(h);f?r._setParentAndPosition(f,l,u):(r.pageIndex=h,r.x=l,r.y=u)}};return this.addCommands({cmd:()=>{for(const[r,{newX:l,newY:u,newPageIndex:h}]of t)n(r,l,u,h)},undo:()=>{for(const[r,{savedX:l,savedY:u,savedPageIndex:h}]of t)n(r,l,u,h)},mustExec:!0}),!0}dragSelectedEditors(t,i){if(c(this,rn))for(const n of c(this,rn).keys())n.drag(t,i)}rebuild(t){if(t.parent===null){const i=this.getLayer(t.pageIndex);i?(i.changeParent(t),i.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){var t;return((t=this.getActive())==null?void 0:t.shouldGetKeyboardEvents())||c(this,$t).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return c(this,Xi)===t}getActive(){return c(this,Xi)}getMode(){return c(this,Fe)}get imageManager(){return zt(this,"imageManager",new jb)}getSelectionBoxes(t){if(!t)return null;const i=document.getSelection();for(let g=0,p=i.rangeCount;g<p;g++)if(!t.contains(i.getRangeAt(g).commonAncestorContainer))return null;const{x:n,y:r,width:l,height:u}=t.getBoundingClientRect();let h;switch(t.getAttribute("data-main-rotation")){case"90":h=(g,p,y,v)=>({x:(p-r)/u,y:1-(g+y-n)/l,width:v/u,height:y/l});break;case"180":h=(g,p,y,v)=>({x:1-(g+y-n)/l,y:1-(p+v-r)/u,width:y/l,height:v/u});break;case"270":h=(g,p,y,v)=>({x:1-(p+v-r)/u,y:(g-n)/l,width:v/u,height:y/l});break;default:h=(g,p,y,v)=>({x:(g-n)/l,y:(p-r)/u,width:y/l,height:v/u});break}const f=[];for(let g=0,p=i.rangeCount;g<p;g++){const y=i.getRangeAt(g);if(!y.collapsed)for(const{x:v,y:S,width:T,height:x}of y.getClientRects())T===0||x===0||f.push(h(v,S,T,x))}return f.length===0?null:f}addChangedExistingAnnotation({annotationElementId:t,id:i}){(c(this,wc)||A(this,wc,new Map)).set(t,i)}removeChangedExistingAnnotation({annotationElementId:t}){var i;(i=c(this,wc))==null||i.delete(t)}renderAnnotationElement(t){var r;const i=(r=c(this,wc))==null?void 0:r.get(t.data.id);if(!i)return;const n=c(this,Xn).getRawValue(i);n&&(c(this,Fe)===St.NONE&&!n.hasBeenModified||n.renderAnnotationElement(t))}setMissingCanvas(t,i,n){var l;const r=(l=c(this,lr))==null?void 0:l.get(t);r&&(r.setCanvas(i,n),c(this,lr).delete(t))}addMissingCanvas(t,i){(c(this,lr)||A(this,lr,new Map)).set(t,i)}};_c=new WeakMap,Xi=new WeakMap,Le=new WeakMap,Qe=new WeakMap,xc=new WeakMap,Xn=new WeakMap,wc=new WeakMap,As=new WeakMap,er=new WeakMap,ir=new WeakMap,Ec=new WeakMap,fl=new WeakMap,rn=new WeakMap,Ls=new WeakMap,gl=new WeakMap,nd=new WeakMap,ad=new WeakMap,Tc=new WeakMap,rd=new WeakMap,ln=new WeakMap,sr=new WeakMap,Cc=new WeakMap,nr=new WeakMap,on=new WeakMap,qp=new WeakMap,ar=new WeakMap,ld=new WeakMap,rr=new WeakMap,pl=new WeakMap,ml=new WeakMap,lr=new WeakMap,od=new WeakMap,Fe=new WeakMap,$t=new WeakMap,Yn=new WeakMap,or=new WeakMap,bl=new WeakMap,cd=new WeakMap,ud=new WeakMap,cr=new WeakMap,cn=new WeakMap,$n=new WeakMap,hd=new WeakMap,Ss=new WeakMap,it=new WeakSet,np=function({anchorNode:t}){return t.nodeType===Node.TEXT_NODE?t.parentElement:t},qb=function(t){const{currentLayer:i}=this;if(i.hasTextLayer(t))return i;for(const n of c(this,Qe).values())if(n.hasTextLayer(t))return n;return null},ox=function(){const t=document.getSelection();if(!t||t.isCollapsed)return;const n=E(this,it,np).call(this,t).closest(".textLayer"),r=this.getSelectionBoxes(n);r&&(c(this,on)||A(this,on,new MC(this)),c(this,on).show(n,r,this.direction==="ltr"))},cx=function(){var l,u,h;const t=document.getSelection();if(!t||t.isCollapsed){c(this,Yn)&&((l=c(this,on))==null||l.hide(),A(this,Yn,null),E(this,it,mi).call(this,{hasSelectedText:!1}));return}const{anchorNode:i}=t;if(i===c(this,Yn))return;const r=E(this,it,np).call(this,t).closest(".textLayer");if(!r){c(this,Yn)&&((u=c(this,on))==null||u.hide(),A(this,Yn,null),E(this,it,mi).call(this,{hasSelectedText:!1}));return}if((h=c(this,on))==null||h.hide(),A(this,Yn,i),E(this,it,mi).call(this,{hasSelectedText:!0}),!(c(this,Fe)!==St.HIGHLIGHT&&c(this,Fe)!==St.NONE)&&(c(this,Fe)===St.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),A(this,nr,this.isShiftKeyDown),!this.isShiftKeyDown)){const f=c(this,Fe)===St.HIGHLIGHT?E(this,it,qb).call(this,r):null;f==null||f.toggleDrawing();const g=new AbortController,p=this.combinedSignal(g),y=v=>{v.type==="pointerup"&&v.button!==0||(g.abort(),f==null||f.toggleDrawing(!0),v.type==="pointerup"&&E(this,it,ap).call(this,"main_toolbar"))};window.addEventListener("pointerup",y,{signal:p}),window.addEventListener("blur",y,{signal:p})}},ap=function(t=""){c(this,Fe)===St.HIGHLIGHT?this.highlightSelection(t):c(this,nd)&&E(this,it,ox).call(this)},ux=function(){document.addEventListener("selectionchange",E(this,it,cx).bind(this),{signal:this._signal})},hx=function(){if(c(this,sr))return;A(this,sr,new AbortController);const t=this.combinedSignal(c(this,sr));window.addEventListener("focus",this.focus.bind(this),{signal:t}),window.addEventListener("blur",this.blur.bind(this),{signal:t})},dx=function(){var t;(t=c(this,sr))==null||t.abort(),A(this,sr,null)},Vb=function(){if(c(this,rr))return;A(this,rr,new AbortController);const t=this.combinedSignal(c(this,rr));window.addEventListener("keydown",this.keydown.bind(this),{signal:t}),window.addEventListener("keyup",this.keyup.bind(this),{signal:t})},fx=function(){var t;(t=c(this,rr))==null||t.abort(),A(this,rr,null)},Xb=function(){if(c(this,er))return;A(this,er,new AbortController);const t=this.combinedSignal(c(this,er));document.addEventListener("copy",this.copy.bind(this),{signal:t}),document.addEventListener("cut",this.cut.bind(this),{signal:t}),document.addEventListener("paste",this.paste.bind(this),{signal:t})},Yb=function(){var t;(t=c(this,er))==null||t.abort(),A(this,er,null)},gx=function(){const t=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:t}),document.addEventListener("drop",this.drop.bind(this),{signal:t})},mi=function(t){Object.entries(t).some(([n,r])=>c(this,ud)[n]!==r)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(c(this,ud),t)}),c(this,Fe)===St.HIGHLIGHT&&t.hasSelectedEditor===!1&&E(this,it,jn).call(this,[[Pt.HIGHLIGHT_FREE,!0]]))},jn=function(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})},px=async function(){if(!c(this,ar)){A(this,ar,!0);const t=[];for(const i of c(this,Qe).values())t.push(i.enable());await Promise.all(t);for(const i of c(this,Le).values())i.enable()}},mx=function(){if(this.unselectAll(),c(this,ar)){A(this,ar,!1);for(const t of c(this,Qe).values())t.disable();for(const t of c(this,Le).values())t.disable()}},$b=function(t){const i=c(this,Qe).get(t.pageIndex);i?i.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))},bx=function(){let t=null;for(t of c(this,$t));return t},Oh=function(){if(c(this,Le).size===0)return!0;if(c(this,Le).size===1)for(const t of c(this,Le).values())return t.isEmpty();return!1},Kb=function(t){for(const i of c(this,$t))i.unselect();c(this,$t).clear();for(const i of t)i.isEmpty()||(c(this,$t).add(i),i.select());E(this,it,mi).call(this,{hasSelectedEditor:this.hasSelection})},J(mc,"TRANSLATE_SMALL",1),J(mc,"TRANSLATE_BIG",10);let yo=mc;var Ue,un,ks,Mc,hn,Yi,Rc,dn,Oi,Kn,yl,fn,ur,Xs,Lh,rp;const bi=class bi{constructor(t){w(this,Xs);w(this,Ue,null);w(this,un,!1);w(this,ks,null);w(this,Mc,null);w(this,hn,null);w(this,Yi,null);w(this,Rc,!1);w(this,dn,null);w(this,Oi,null);w(this,Kn,null);w(this,yl,null);w(this,fn,!1);A(this,Oi,t),A(this,fn,t._uiManager.useNewAltTextFlow),c(bi,ur)||A(bi,ur,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(t){bi._l10n??(bi._l10n=t)}async render(){const t=A(this,ks,document.createElement("button"));t.className="altText",t.tabIndex="0";const i=A(this,Mc,document.createElement("span"));t.append(i),c(this,fn)?(t.classList.add("new"),t.setAttribute("data-l10n-id",c(bi,ur).missing),i.setAttribute("data-l10n-id",c(bi,ur)["missing-label"])):(t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),i.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const n=c(this,Oi)._uiManager._signal;t.addEventListener("contextmenu",Ys,{signal:n}),t.addEventListener("pointerdown",l=>l.stopPropagation(),{signal:n});const r=l=>{l.preventDefault(),c(this,Oi)._uiManager.editAltText(c(this,Oi)),c(this,fn)&&c(this,Oi)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:c(this,Xs,Lh)}})};return t.addEventListener("click",r,{capture:!0,signal:n}),t.addEventListener("keydown",l=>{l.target===t&&l.key==="Enter"&&(A(this,Rc,!0),r(l))},{signal:n}),await E(this,Xs,rp).call(this),t}finish(){c(this,ks)&&(c(this,ks).focus({focusVisible:c(this,Rc)}),A(this,Rc,!1))}isEmpty(){return c(this,fn)?c(this,Ue)===null:!c(this,Ue)&&!c(this,un)}hasData(){return c(this,fn)?c(this,Ue)!==null||!!c(this,Kn):this.isEmpty()}get guessedText(){return c(this,Kn)}async setGuessedText(t){c(this,Ue)===null&&(A(this,Kn,t),A(this,yl,await bi._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:t})),E(this,Xs,rp).call(this))}toggleAltTextBadge(t=!1){var i;if(!c(this,fn)||c(this,Ue)){(i=c(this,dn))==null||i.remove(),A(this,dn,null);return}if(!c(this,dn)){const n=A(this,dn,document.createElement("div"));n.className="noAltTextBadge",c(this,Oi).div.append(n)}c(this,dn).classList.toggle("hidden",!t)}serialize(t){let i=c(this,Ue);return!t&&c(this,Kn)===i&&(i=c(this,yl)),{altText:i,decorative:c(this,un),guessedText:c(this,Kn),textWithDisclaimer:c(this,yl)}}get data(){return{altText:c(this,Ue),decorative:c(this,un)}}set data({altText:t,decorative:i,guessedText:n,textWithDisclaimer:r,cancel:l=!1}){n&&(A(this,Kn,n),A(this,yl,r)),!(c(this,Ue)===t&&c(this,un)===i)&&(l||(A(this,Ue,t),A(this,un,i)),E(this,Xs,rp).call(this))}toggle(t=!1){c(this,ks)&&(!t&&c(this,Yi)&&(clearTimeout(c(this,Yi)),A(this,Yi,null)),c(this,ks).disabled=!t)}shown(){c(this,Oi)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:c(this,Xs,Lh)}})}destroy(){var t,i;(t=c(this,ks))==null||t.remove(),A(this,ks,null),A(this,Mc,null),A(this,hn,null),(i=c(this,dn))==null||i.remove(),A(this,dn,null)}};Ue=new WeakMap,un=new WeakMap,ks=new WeakMap,Mc=new WeakMap,hn=new WeakMap,Yi=new WeakMap,Rc=new WeakMap,dn=new WeakMap,Oi=new WeakMap,Kn=new WeakMap,yl=new WeakMap,fn=new WeakMap,ur=new WeakMap,Xs=new WeakSet,Lh=function(){return c(this,Ue)&&"added"||c(this,Ue)===null&&this.guessedText&&"review"||"missing"},rp=async function(){var r,l,u;const t=c(this,ks);if(!t)return;if(c(this,fn)){if(t.classList.toggle("done",!!c(this,Ue)),t.setAttribute("data-l10n-id",c(bi,ur)[c(this,Xs,Lh)]),(r=c(this,Mc))==null||r.setAttribute("data-l10n-id",c(bi,ur)[`${c(this,Xs,Lh)}-label`]),!c(this,Ue)){(l=c(this,hn))==null||l.remove();return}}else{if(!c(this,Ue)&&!c(this,un)){t.classList.remove("done"),(u=c(this,hn))==null||u.remove();return}t.classList.add("done"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let i=c(this,hn);if(!i){A(this,hn,i=document.createElement("span")),i.className="tooltip",i.setAttribute("role","tooltip"),i.id=`alt-text-tooltip-${c(this,Oi).id}`;const h=100,f=c(this,Oi)._uiManager._signal;f.addEventListener("abort",()=>{clearTimeout(c(this,Yi)),A(this,Yi,null)},{once:!0}),t.addEventListener("mouseenter",()=>{A(this,Yi,setTimeout(()=>{A(this,Yi,null),c(this,hn).classList.add("show"),c(this,Oi)._reportTelemetry({action:"alt_text_tooltip"})},h))},{signal:f}),t.addEventListener("mouseleave",()=>{var g;c(this,Yi)&&(clearTimeout(c(this,Yi)),A(this,Yi,null)),(g=c(this,hn))==null||g.classList.remove("show")},{signal:f})}c(this,un)?i.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(i.removeAttribute("data-l10n-id"),i.textContent=c(this,Ue)),i.parentNode||t.append(i);const n=c(this,Oi).getElementForAltText();n==null||n.setAttribute("aria-describedby",i.id)},w(bi,ur,null),J(bi,"_l10n",null);let Lp=bi;var Dc,vl,dd,fd,gd,pd,md,Qn,Al,Zn,Sl,Wn,Br,yx,vx,Ax;const gv=class gv{constructor({container:t,isPinchingDisabled:i=null,isPinchingStopped:n=null,onPinchStart:r=null,onPinching:l=null,onPinchEnd:u=null,signal:h}){w(this,Br);w(this,Dc);w(this,vl,!1);w(this,dd,null);w(this,fd);w(this,gd);w(this,pd);w(this,md);w(this,Qn,null);w(this,Al);w(this,Zn,null);w(this,Sl);w(this,Wn,null);A(this,Dc,t),A(this,dd,n),A(this,fd,i),A(this,gd,r),A(this,pd,l),A(this,md,u),A(this,Sl,new AbortController),A(this,Al,AbortSignal.any([h,c(this,Sl).signal])),t.addEventListener("touchstart",E(this,Br,yx).bind(this),{passive:!1,signal:c(this,Al)})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/xn.pixelRatio}destroy(){var t,i;(t=c(this,Sl))==null||t.abort(),A(this,Sl,null),(i=c(this,Qn))==null||i.abort(),A(this,Qn,null)}};Dc=new WeakMap,vl=new WeakMap,dd=new WeakMap,fd=new WeakMap,gd=new WeakMap,pd=new WeakMap,md=new WeakMap,Qn=new WeakMap,Al=new WeakMap,Zn=new WeakMap,Sl=new WeakMap,Wn=new WeakMap,Br=new WeakSet,yx=function(t){var r,l,u;if((r=c(this,fd))!=null&&r.call(this))return;if(t.touches.length===1){if(c(this,Qn))return;const h=A(this,Qn,new AbortController),f=AbortSignal.any([c(this,Al),h.signal]),g=c(this,Dc),p={capture:!0,signal:f,passive:!1},y=v=>{var S;v.pointerType==="touch"&&((S=c(this,Qn))==null||S.abort(),A(this,Qn,null))};g.addEventListener("pointerdown",v=>{v.pointerType==="touch"&&(Te(v),y(v))},p),g.addEventListener("pointerup",y,p),g.addEventListener("pointercancel",y,p);return}if(!c(this,Wn)){A(this,Wn,new AbortController);const h=AbortSignal.any([c(this,Al),c(this,Wn).signal]),f=c(this,Dc),g={signal:h,capture:!1,passive:!1};f.addEventListener("touchmove",E(this,Br,vx).bind(this),g);const p=E(this,Br,Ax).bind(this);f.addEventListener("touchend",p,g),f.addEventListener("touchcancel",p,g),g.capture=!0,f.addEventListener("pointerdown",Te,g),f.addEventListener("pointermove",Te,g),f.addEventListener("pointercancel",Te,g),f.addEventListener("pointerup",Te,g),(l=c(this,gd))==null||l.call(this)}if(Te(t),t.touches.length!==2||(u=c(this,dd))!=null&&u.call(this)){A(this,Zn,null);return}let[i,n]=t.touches;i.identifier>n.identifier&&([i,n]=[n,i]),A(this,Zn,{touch0X:i.screenX,touch0Y:i.screenY,touch1X:n.screenX,touch1Y:n.screenY})},vx=function(t){var H;if(!c(this,Zn)||t.touches.length!==2)return;Te(t);let[i,n]=t.touches;i.identifier>n.identifier&&([i,n]=[n,i]);const{screenX:r,screenY:l}=i,{screenX:u,screenY:h}=n,f=c(this,Zn),{touch0X:g,touch0Y:p,touch1X:y,touch1Y:v}=f,S=y-g,T=v-p,x=u-r,M=h-l,R=Math.hypot(x,M)||1,k=Math.hypot(S,T)||1;if(!c(this,vl)&&Math.abs(k-R)<=gv.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(f.touch0X=r,f.touch0Y=l,f.touch1X=u,f.touch1Y=h,!c(this,vl)){A(this,vl,!0);return}const O=[(r+u)/2,(l+h)/2];(H=c(this,pd))==null||H.call(this,O,k,R)},Ax=function(t){var i;t.touches.length>=2||(c(this,Wn)&&(c(this,Wn).abort(),A(this,Wn,null),(i=c(this,md))==null||i.call(this)),c(this,Zn)&&(Te(t),A(this,Zn,null),A(this,vl,!1)))};let kp=gv;var _l,zs,re,Nc,hr,bd,xl,Ze,wl,Jn,dr,yd,El,$i,vd,Tl,ta,gn,Oc,Lc,_s,Cl,Ad,Vp,mt,Qb,Sd,Zb,lp,Sx,_x,Wb,op,Jb,xx,wx,Ex,ty,Tx,ey,Cx,Mx,Rx,iy,kh;const Tt=class Tt{constructor(t){w(this,mt);w(this,_l,null);w(this,zs,null);w(this,re,null);w(this,Nc,!1);w(this,hr,null);w(this,bd,"");w(this,xl,!1);w(this,Ze,null);w(this,wl,null);w(this,Jn,null);w(this,dr,null);w(this,yd,"");w(this,El,!1);w(this,$i,null);w(this,vd,!1);w(this,Tl,!1);w(this,ta,!1);w(this,gn,null);w(this,Oc,0);w(this,Lc,0);w(this,_s,null);w(this,Cl,null);J(this,"isSelected",!1);J(this,"_isCopy",!1);J(this,"_editToolbar",null);J(this,"_initialOptions",Object.create(null));J(this,"_initialData",null);J(this,"_isVisible",!0);J(this,"_uiManager",null);J(this,"_focusEventsAllowed",!0);w(this,Ad,!1);w(this,Vp,Tt._zIndex++);this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null,this._uiManager=t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=t.isCentered,this._structTreeParentId=null;const{rotation:i,rawDims:{pageWidth:n,pageHeight:r,pageX:l,pageY:u}}=this.parent.viewport;this.rotation=i,this.pageRotation=(360+i-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[n,r],this.pageTranslation=[l,u];const[h,f]=this.parentDimensions;this.x=t.x/h,this.y=t.y/f,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const t=Tt.prototype._resizeWithKeyboard,i=yo.TRANSLATE_SMALL,n=yo.TRANSLATE_BIG;return zt(this,"_resizerKeyboardManager",new Rf([[["ArrowLeft","mac+ArrowLeft"],t,{args:[-i,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t,{args:[-n,0]}],[["ArrowRight","mac+ArrowRight"],t,{args:[i,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t,{args:[n,0]}],[["ArrowUp","mac+ArrowUp"],t,{args:[0,-i]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t,{args:[0,-n]}],[["ArrowDown","mac+ArrowDown"],t,{args:[0,i]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t,{args:[0,n]}],[["Escape","mac+Escape"],Tt.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get isDrawer(){return!1}static get _defaultLineColor(){return zt(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(t){const i=new NC({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});i.annotationElementId=t.annotationElementId,i.deleted=!0,i._uiManager.addToAnnotationStorage(i)}static initialize(t,i){if(Tt._l10n??(Tt._l10n=t),Tt._l10nResizer||(Tt._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),Tt._borderLineWidth!==-1)return;const n=getComputedStyle(document.documentElement);Tt._borderLineWidth=parseFloat(n.getPropertyValue("--outline-width"))||0}static updateDefaultParams(t,i){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(t){return!1}static paste(t,i){te("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return c(this,Ad)}set _isDraggable(t){var i;A(this,Ad,t),(i=this.div)==null||i.classList.toggle("draggable",t)}get isEnterHandled(){return!0}center(){const[t,i]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*i/(t*2),this.y+=this.width*t/(i*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*i/(t*2),this.y-=this.width*t/(i*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(t){this._uiManager.addCommands(t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=c(this,Vp)}setParent(t){t!==null?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):E(this,mt,kh).call(this),this.parent=t}focusin(t){this._focusEventsAllowed&&(c(this,El)?A(this,El,!1):this.parent.setSelected(this))}focusout(t){var n;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const i=t.relatedTarget;i!=null&&i.closest(`#${this.id}`)||(t.preventDefault(),(n=this.parent)!=null&&n.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(t,i,n,r){const[l,u]=this.parentDimensions;[n,r]=this.screenToPageTranslation(n,r),this.x=(t+n)/l,this.y=(i+r)/u,this.fixAndSetPosition()}_moveAfterPaste(t,i){const[n,r]=this.parentDimensions;this.setAt(t*n,i*r,this.width*n,this.height*r),this._onTranslated()}translate(t,i){E(this,mt,Qb).call(this,this.parentDimensions,t,i)}translateInPage(t,i){c(this,$i)||A(this,$i,[this.x,this.y,this.width,this.height]),E(this,mt,Qb).call(this,this.pageDimensions,t,i),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(t,i){c(this,$i)||A(this,$i,[this.x,this.y,this.width,this.height]);const{div:n,parentDimensions:[r,l]}=this;if(this.x+=t/r,this.y+=i/l,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:y,y:v}=this.div.getBoundingClientRect();this.parent.findNewParent(this,y,v)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:u,y:h}=this;const[f,g]=this.getBaseTranslation();u+=f,h+=g;const{style:p}=n;p.left=`${(100*u).toFixed(2)}%`,p.top=`${(100*h).toFixed(2)}%`,this._onTranslating(u,h),n.scrollIntoView({block:"nearest"})}_onTranslating(t,i){}_onTranslated(t,i){}get _hasBeenMoved(){return!!c(this,$i)&&(c(this,$i)[0]!==this.x||c(this,$i)[1]!==this.y)}get _hasBeenResized(){return!!c(this,$i)&&(c(this,$i)[2]!==this.width||c(this,$i)[3]!==this.height)}getBaseTranslation(){const[t,i]=this.parentDimensions,{_borderLineWidth:n}=Tt,r=n/t,l=n/i;switch(this.rotation){case 90:return[-r,l];case 180:return[r,l];case 270:return[r,-l];default:return[-r,-l]}}get _mustFixPosition(){return!0}fixAndSetPosition(t=this.rotation){const{div:{style:i},pageDimensions:[n,r]}=this;let{x:l,y:u,width:h,height:f}=this;if(h*=n,f*=r,l*=n,u*=r,this._mustFixPosition)switch(t){case 0:l=_i(l,0,n-h),u=_i(u,0,r-f);break;case 90:l=_i(l,0,n-f),u=_i(u,h,r);break;case 180:l=_i(l,h,n),u=_i(u,f,r);break;case 270:l=_i(l,f,n),u=_i(u,0,r-h);break}this.x=l/=n,this.y=u/=r;const[g,p]=this.getBaseTranslation();l+=g,u+=p,i.left=`${(100*l).toFixed(2)}%`,i.top=`${(100*u).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(t,i){var n;return E(n=Tt,Sd,Zb).call(n,t,i,this.parentRotation)}pageTranslationToScreen(t,i){var n;return E(n=Tt,Sd,Zb).call(n,t,i,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:t,pageDimensions:[i,n]}=this;return[i*t,n*t]}setDims(t,i){const[n,r]=this.parentDimensions,{style:l}=this.div;l.width=`${(100*t/n).toFixed(2)}%`,c(this,xl)||(l.height=`${(100*i/r).toFixed(2)}%`)}fixDims(){const{style:t}=this.div,{height:i,width:n}=t,r=n.endsWith("%"),l=!c(this,xl)&&i.endsWith("%");if(r&&l)return;const[u,h]=this.parentDimensions;r||(t.width=`${(100*parseFloat(n)/u).toFixed(2)}%`),!c(this,xl)&&!l&&(t.height=`${(100*parseFloat(i)/h).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}_onResized(){}static _round(t){return Math.round(t*1e4)/1e4}_onResizing(){}altTextFinish(){var t;(t=c(this,re))==null||t.finish()}async addEditToolbar(){return this._editToolbar||c(this,Tl)?this._editToolbar:(this._editToolbar=new Ub(this),this.div.append(this._editToolbar.render()),c(this,re)&&await this._editToolbar.addAltText(c(this,re)),this._editToolbar)}removeEditToolbar(){var t;this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,(t=c(this,re))==null||t.destroy())}addContainer(t){var n;const i=(n=this._editToolbar)==null?void 0:n.div;i?i.before(t):this.div.append(t)}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){c(this,re)||(Lp.initialize(Tt._l10n),A(this,re,new Lp(this)),c(this,_l)&&(c(this,re).data=c(this,_l),A(this,_l,null)),await this.addEditToolbar())}get altTextData(){var t;return(t=c(this,re))==null?void 0:t.data}set altTextData(t){c(this,re)&&(c(this,re).data=t)}get guessedAltText(){var t;return(t=c(this,re))==null?void 0:t.guessedText}async setGuessedAltText(t){var i;await((i=c(this,re))==null?void 0:i.setGuessedText(t))}serializeAltText(t){var i;return(i=c(this,re))==null?void 0:i.serialize(t)}hasAltText(){return!!c(this,re)&&!c(this,re).isEmpty()}hasAltTextData(){var t;return((t=c(this,re))==null?void 0:t.hasData())??!1}render(){var u;const t=this.div=document.createElement("div");t.setAttribute("data-editor-rotation",(360-this.rotation)%360),t.className=this.name,t.setAttribute("id",this.id),t.tabIndex=c(this,Nc)?-1:0,t.setAttribute("role","application"),this.defaultL10nId&&t.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||t.classList.add("hidden"),this.setInForeground(),E(this,mt,ey).call(this);const[i,n]=this.parentDimensions;this.parentRotation%180!==0&&(t.style.maxWidth=`${(100*n/i).toFixed(2)}%`,t.style.maxHeight=`${(100*i/n).toFixed(2)}%`);const[r,l]=this.getInitialTranslation();return this.translate(r,l),rx(this,t,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(c(this,Cl)||A(this,Cl,new kp({container:t,isPinchingDisabled:()=>!this.isSelected,onPinchStart:E(this,mt,xx).bind(this),onPinching:E(this,mt,wx).bind(this),onPinchEnd:E(this,mt,Ex).bind(this),signal:this._uiManager._signal}))),(u=this._uiManager._editorUndoBar)==null||u.hide(),t}pointerdown(t){const{isMac:i}=ni.platform;if(t.button!==0||t.ctrlKey&&i){t.preventDefault();return}if(A(this,El,!0),this._isDraggable){E(this,mt,Tx).call(this,t);return}E(this,mt,ty).call(this,t)}_onStartDragging(){}_onStopDragging(){}moveInDOM(){c(this,gn)&&clearTimeout(c(this,gn)),A(this,gn,setTimeout(()=>{var t;A(this,gn,null),(t=this.parent)==null||t.moveEditorInDOM(this)},0))}_setParentAndPosition(t,i,n){t.changeParent(this),this.x=i,this.y=n,this.fixAndSetPosition(),this._onTranslated()}getRect(t,i,n=this.rotation){const r=this.parentScale,[l,u]=this.pageDimensions,[h,f]=this.pageTranslation,g=t/r,p=i/r,y=this.x*l,v=this.y*u,S=this.width*l,T=this.height*u;switch(n){case 0:return[y+g+h,u-v-p-T+f,y+g+S+h,u-v-p+f];case 90:return[y+p+h,u-v+g+f,y+p+T+h,u-v+g+S+f];case 180:return[y-g-S+h,u-v+p+f,y-g+h,u-v+p+T+f];case 270:return[y-p-T+h,u-v-g-S+f,y-p+h,u-v-g+f];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,i){const[n,r,l,u]=t,h=l-n,f=u-r;switch(this.rotation){case 0:return[n,i-u,h,f];case 90:return[n,i-r,f,h];case 180:return[l,i-r,h,f];case 270:return[l,i-u,f,h];default:throw new Error("Invalid rotation")}}onceAdded(t){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),A(this,Tl,!0),!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),A(this,Tl,!1),!0):!1}isInEditMode(){return c(this,Tl)}shouldGetKeyboardEvents(){return c(this,ta)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:t,left:i,bottom:n,right:r}=this.getClientDimensions(),{innerHeight:l,innerWidth:u}=window;return i<u&&r>0&&t<l&&n>0}rebuild(){E(this,mt,ey).call(this)}rotate(t){}resize(){}serializeDeleted(){var t;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((t=this._initialData)==null?void 0:t.popupRef)||""}}serialize(t=!1,i=null){te("An editor must be serializable")}static async deserialize(t,i,n){const r=new this.prototype.constructor({parent:i,id:i.getNextId(),uiManager:n});r.rotation=t.rotation,A(r,_l,t.accessibilityData),r._isCopy=t.isCopy||!1;const[l,u]=r.pageDimensions,[h,f,g,p]=r.getRectInCurrentCoords(t.rect,u);return r.x=h/l,r.y=f/u,r.width=g/l,r.height=p/u,r}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var t,i;if((t=c(this,dr))==null||t.abort(),A(this,dr,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),c(this,gn)&&(clearTimeout(c(this,gn)),A(this,gn,null)),E(this,mt,kh).call(this),this.removeEditToolbar(),c(this,_s)){for(const n of c(this,_s).values())clearTimeout(n);A(this,_s,null)}this.parent=null,(i=c(this,Cl))==null||i.destroy(),A(this,Cl,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(E(this,mt,Sx).call(this),c(this,Ze).classList.remove("hidden"))}get toolbarPosition(){return null}keydown(t){if(!this.isResizable||t.target!==this.div||t.key!=="Enter")return;this._uiManager.setSelected(this),A(this,Jn,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const i=c(this,Ze).children;if(!c(this,zs)){A(this,zs,Array.from(i));const u=E(this,mt,Cx).bind(this),h=E(this,mt,Mx).bind(this),f=this._uiManager._signal;for(const g of c(this,zs)){const p=g.getAttribute("data-resizer-name");g.setAttribute("role","spinbutton"),g.addEventListener("keydown",u,{signal:f}),g.addEventListener("blur",h,{signal:f}),g.addEventListener("focus",E(this,mt,Rx).bind(this,p),{signal:f}),g.setAttribute("data-l10n-id",Tt._l10nResizer[p])}}const n=c(this,zs)[0];let r=0;for(const u of i){if(u===n)break;r++}const l=(360-this.rotation+this.parentRotation)%360/90*(c(this,zs).length/4);if(l!==r){if(l<r)for(let h=0;h<r-l;h++)c(this,Ze).append(c(this,Ze).firstChild);else if(l>r)for(let h=0;h<l-r;h++)c(this,Ze).firstChild.before(c(this,Ze).lastChild);let u=0;for(const h of i){const g=c(this,zs)[u++].getAttribute("data-resizer-name");h.setAttribute("data-l10n-id",Tt._l10nResizer[g])}}E(this,mt,iy).call(this,0),A(this,ta,!0),c(this,Ze).firstChild.focus({focusVisible:!0}),t.preventDefault(),t.stopImmediatePropagation()}_resizeWithKeyboard(t,i){c(this,ta)&&E(this,mt,Jb).call(this,c(this,yd),{deltaX:t,deltaY:i,fromKeyboard:!0})}_stopResizingWithKeyboard(){E(this,mt,kh).call(this),this.div.focus()}select(){var t,i,n;if(!(this.isSelected&&this._editToolbar)){if(this.isSelected=!0,this.makeResizable(),(t=this.div)==null||t.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var r,l;(r=this.div)!=null&&r.classList.contains("selectedEditor")&&((l=this._editToolbar)==null||l.show())});return}(i=this._editToolbar)==null||i.show(),(n=c(this,re))==null||n.toggleAltTextBadge(!1)}}unselect(){var t,i,n,r,l;this.isSelected&&(this.isSelected=!1,(t=c(this,Ze))==null||t.classList.add("hidden"),(i=this.div)==null||i.classList.remove("selectedEditor"),(n=this.div)!=null&&n.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(r=this._editToolbar)==null||r.hide(),(l=c(this,re))==null||l.toggleAltTextBadge(!0))}updateParams(t,i){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(t){this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.id})}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return c(this,vd)}set isEditing(t){A(this,vd,t),this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(t,i){A(this,xl,!0);const n=t/i,{style:r}=this.div;r.aspectRatio=n,r.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(t,i=!1){if(i){c(this,_s)||A(this,_s,new Map);const{action:n}=t;let r=c(this,_s).get(n);r&&clearTimeout(r),r=setTimeout(()=>{this._reportTelemetry(t),c(this,_s).delete(n),c(this,_s).size===0&&A(this,_s,null)},Tt._telemetryTimeout),c(this,_s).set(n,r);return}t.type||(t.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:t}})}show(t=this._isVisible){this.div.classList.toggle("hidden",!t),this._isVisible=t}enable(){this.div&&(this.div.tabIndex=0),A(this,Nc,!1)}disable(){this.div&&(this.div.tabIndex=-1),A(this,Nc,!0)}renderAnnotationElement(t){let i=t.container.querySelector(".annotationContent");if(!i)i=document.createElement("div"),i.classList.add("annotationContent",this.editorType),t.container.prepend(i);else if(i.nodeName==="CANVAS"){const n=i;i=document.createElement("div"),i.classList.add("annotationContent",this.editorType),n.before(i)}return i}resetAnnotationElement(t){const{firstChild:i}=t.container;(i==null?void 0:i.nodeName)==="DIV"&&i.classList.contains("annotationContent")&&i.remove()}};_l=new WeakMap,zs=new WeakMap,re=new WeakMap,Nc=new WeakMap,hr=new WeakMap,bd=new WeakMap,xl=new WeakMap,Ze=new WeakMap,wl=new WeakMap,Jn=new WeakMap,dr=new WeakMap,yd=new WeakMap,El=new WeakMap,$i=new WeakMap,vd=new WeakMap,Tl=new WeakMap,ta=new WeakMap,gn=new WeakMap,Oc=new WeakMap,Lc=new WeakMap,_s=new WeakMap,Cl=new WeakMap,Ad=new WeakMap,Vp=new WeakMap,mt=new WeakSet,Qb=function([t,i],n,r){[n,r]=this.screenToPageTranslation(n,r),this.x+=n/t,this.y+=r/i,this._onTranslating(this.x,this.y),this.fixAndSetPosition()},Sd=new WeakSet,Zb=function(t,i,n){switch(n){case 90:return[i,-t];case 180:return[-t,-i];case 270:return[-i,t];default:return[t,i]}},lp=function(t){switch(t){case 90:{const[i,n]=this.pageDimensions;return[0,-i/n,n/i,0]}case 180:return[-1,0,0,-1];case 270:{const[i,n]=this.pageDimensions;return[0,i/n,-n/i,0]}default:return[1,0,0,1]}},Sx=function(){if(c(this,Ze))return;A(this,Ze,document.createElement("div")),c(this,Ze).classList.add("resizers");const t=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],i=this._uiManager._signal;for(const n of t){const r=document.createElement("div");c(this,Ze).append(r),r.classList.add("resizer",n),r.setAttribute("data-resizer-name",n),r.addEventListener("pointerdown",E(this,mt,_x).bind(this,n),{signal:i}),r.addEventListener("contextmenu",Ys,{signal:i}),r.tabIndex=-1}this.div.prepend(c(this,Ze))},_x=function(t,i){var p;i.preventDefault();const{isMac:n}=ni.platform;if(i.button!==0||i.ctrlKey&&n)return;(p=c(this,re))==null||p.toggle(!1);const r=this._isDraggable;this._isDraggable=!1,A(this,wl,[i.screenX,i.screenY]);const l=new AbortController,u=this._uiManager.combinedSignal(l);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",E(this,mt,Jb).bind(this,t),{passive:!0,capture:!0,signal:u}),window.addEventListener("touchmove",Te,{passive:!1,signal:u}),window.addEventListener("contextmenu",Ys,{signal:u}),A(this,Jn,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const h=this.parent.div.style.cursor,f=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(i.target).cursor;const g=()=>{var y;l.abort(),this.parent.togglePointerEvents(!0),(y=c(this,re))==null||y.toggle(!0),this._isDraggable=r,this.parent.div.style.cursor=h,this.div.style.cursor=f,E(this,mt,op).call(this)};window.addEventListener("pointerup",g,{signal:u}),window.addEventListener("blur",g,{signal:u})},Wb=function(t,i,n,r){this.width=n,this.height=r,this.x=t,this.y=i;const[l,u]=this.parentDimensions;this.setDims(l*n,u*r),this.fixAndSetPosition(),this._onResized()},op=function(){if(!c(this,Jn))return;const{savedX:t,savedY:i,savedWidth:n,savedHeight:r}=c(this,Jn);A(this,Jn,null);const l=this.x,u=this.y,h=this.width,f=this.height;l===t&&u===i&&h===n&&f===r||this.addCommands({cmd:E(this,mt,Wb).bind(this,l,u,h,f),undo:E(this,mt,Wb).bind(this,t,i,n,r),mustExec:!0})},Jb=function(t,i){const[n,r]=this.parentDimensions,l=this.x,u=this.y,h=this.width,f=this.height,g=Tt.MIN_SIZE/n,p=Tt.MIN_SIZE/r,y=E(this,mt,lp).call(this,this.rotation),v=(B,X)=>[y[0]*B+y[2]*X,y[1]*B+y[3]*X],S=E(this,mt,lp).call(this,360-this.rotation),T=(B,X)=>[S[0]*B+S[2]*X,S[1]*B+S[3]*X];let x,M,R=!1,k=!1;switch(t){case"topLeft":R=!0,x=(B,X)=>[0,0],M=(B,X)=>[B,X];break;case"topMiddle":x=(B,X)=>[B/2,0],M=(B,X)=>[B/2,X];break;case"topRight":R=!0,x=(B,X)=>[B,0],M=(B,X)=>[0,X];break;case"middleRight":k=!0,x=(B,X)=>[B,X/2],M=(B,X)=>[0,X/2];break;case"bottomRight":R=!0,x=(B,X)=>[B,X],M=(B,X)=>[0,0];break;case"bottomMiddle":x=(B,X)=>[B/2,X],M=(B,X)=>[B/2,0];break;case"bottomLeft":R=!0,x=(B,X)=>[0,X],M=(B,X)=>[B,0];break;case"middleLeft":k=!0,x=(B,X)=>[0,X/2],M=(B,X)=>[B,X/2];break}const O=x(h,f),H=M(h,f);let z=v(...H);const G=Tt._round(l+z[0]),V=Tt._round(u+z[1]);let Z=1,et=1,rt,st;if(i.fromKeyboard)({deltaX:rt,deltaY:st}=i);else{const{screenX:B,screenY:X}=i,[ct,Dt]=c(this,wl);[rt,st]=this.screenToPageTranslation(B-ct,X-Dt),c(this,wl)[0]=B,c(this,wl)[1]=X}if([rt,st]=T(rt/n,st/r),R){const B=Math.hypot(h,f);Z=et=Math.max(Math.min(Math.hypot(H[0]-O[0]-rt,H[1]-O[1]-st)/B,1/h,1/f),g/h,p/f)}else k?Z=_i(Math.abs(H[0]-O[0]-rt),g,1)/h:et=_i(Math.abs(H[1]-O[1]-st),p,1)/f;const vt=Tt._round(h*Z),Lt=Tt._round(f*et);z=v(...M(vt,Lt));const At=G-z[0],Ft=V-z[1];c(this,$i)||A(this,$i,[this.x,this.y,this.width,this.height]),this.width=vt,this.height=Lt,this.x=At,this.y=Ft,this.setDims(n*vt,r*Lt),this.fixAndSetPosition(),this._onResizing()},xx=function(){var t;A(this,Jn,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),(t=c(this,re))==null||t.toggle(!1),this.parent.togglePointerEvents(!1)},wx=function(t,i,n){let l=.7*(n/i)+1-.7;if(l===1)return;const u=E(this,mt,lp).call(this,this.rotation),h=(G,V)=>[u[0]*G+u[2]*V,u[1]*G+u[3]*V],[f,g]=this.parentDimensions,p=this.x,y=this.y,v=this.width,S=this.height,T=Tt.MIN_SIZE/f,x=Tt.MIN_SIZE/g;l=Math.max(Math.min(l,1/v,1/S),T/v,x/S);const M=Tt._round(v*l),R=Tt._round(S*l);if(M===v&&R===S)return;c(this,$i)||A(this,$i,[p,y,v,S]);const k=h(v/2,S/2),O=Tt._round(p+k[0]),H=Tt._round(y+k[1]),z=h(M/2,R/2);this.x=O-z[0],this.y=H-z[1],this.width=M,this.height=R,this.setDims(f*M,g*R),this.fixAndSetPosition(),this._onResizing()},Ex=function(){var t;(t=c(this,re))==null||t.toggle(!0),this.parent.togglePointerEvents(!0),E(this,mt,op).call(this)},ty=function(t){const{isMac:i}=ni.platform;t.ctrlKey&&!i||t.shiftKey||t.metaKey&&i?this.parent.toggleSelected(this):this.parent.setSelected(this)},Tx=function(t){const{isSelected:i}=this;this._uiManager.setUpDragSession();let n=!1;const r=new AbortController,l=this._uiManager.combinedSignal(r),u={capture:!0,passive:!1,signal:l},h=g=>{r.abort(),A(this,hr,null),A(this,El,!1),this._uiManager.endDragSession()||E(this,mt,ty).call(this,g),n&&this._onStopDragging()};i&&(A(this,Oc,t.clientX),A(this,Lc,t.clientY),A(this,hr,t.pointerId),A(this,bd,t.pointerType),window.addEventListener("pointermove",g=>{n||(n=!0,this._onStartDragging());const{clientX:p,clientY:y,pointerId:v}=g;if(v!==c(this,hr)){Te(g);return}const[S,T]=this.screenToPageTranslation(p-c(this,Oc),y-c(this,Lc));A(this,Oc,p),A(this,Lc,y),this._uiManager.dragSelectedEditors(S,T)},u),window.addEventListener("touchmove",Te,u),window.addEventListener("pointerdown",g=>{g.pointerType===c(this,bd)&&(c(this,Cl)||g.isPrimary)&&h(g),Te(g)},u));const f=g=>{if(!c(this,hr)||c(this,hr)===g.pointerId){h(g);return}Te(g)};window.addEventListener("pointerup",f,{signal:l}),window.addEventListener("blur",f,{signal:l})},ey=function(){if(c(this,dr)||!this.div)return;A(this,dr,new AbortController);const t=this._uiManager.combinedSignal(c(this,dr));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:t}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:t})},Cx=function(t){Tt._resizerKeyboardManager.exec(this,t)},Mx=function(t){var i;c(this,ta)&&((i=t.relatedTarget)==null?void 0:i.parentNode)!==c(this,Ze)&&E(this,mt,kh).call(this)},Rx=function(t){A(this,yd,c(this,ta)?t:"")},iy=function(t){if(c(this,zs))for(const i of c(this,zs))i.tabIndex=t},kh=function(){A(this,ta,!1),E(this,mt,iy).call(this,-1),E(this,mt,op).call(this)},w(Tt,Sd),J(Tt,"_l10n",null),J(Tt,"_l10nResizer",null),J(Tt,"_borderLineWidth",-1),J(Tt,"_colorManager",new Gb),J(Tt,"_zIndex",1),J(Tt,"_telemetryTimeout",1e3);let ae=Tt;class NC extends ae{constructor(t){super(t),this.annotationElementId=t.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const E_=3285377520,ys=4294901760,nn=65535;class Dx{constructor(t){this.h1=t?t&4294967295:E_,this.h2=t?t&4294967295:E_}update(t){let i,n;if(typeof t=="string"){i=new Uint8Array(t.length*2),n=0;for(let x=0,M=t.length;x<M;x++){const R=t.charCodeAt(x);R<=255?i[n++]=R:(i[n++]=R>>>8,i[n++]=R&255)}}else if(ArrayBuffer.isView(t))i=t.slice(),n=i.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const r=n>>2,l=n-r*4,u=new Uint32Array(i.buffer,0,r);let h=0,f=0,g=this.h1,p=this.h2;const y=3432918353,v=461845907,S=y&nn,T=v&nn;for(let x=0;x<r;x++)x&1?(h=u[x],h=h*y&ys|h*S&nn,h=h<<15|h>>>17,h=h*v&ys|h*T&nn,g^=h,g=g<<13|g>>>19,g=g*5+3864292196):(f=u[x],f=f*y&ys|f*S&nn,f=f<<15|f>>>17,f=f*v&ys|f*T&nn,p^=f,p=p<<13|p>>>19,p=p*5+3864292196);switch(h=0,l){case 3:h^=i[r*4+2]<<16;case 2:h^=i[r*4+1]<<8;case 1:h^=i[r*4],h=h*y&ys|h*S&nn,h=h<<15|h>>>17,h=h*v&ys|h*T&nn,r&1?g^=h:p^=h}this.h1=g,this.h2=p}hexdigest(){let t=this.h1,i=this.h2;return t^=i>>>1,t=t*3981806797&ys|t*36045&nn,i=i*4283543511&ys|((i<<16|t>>>16)*2950163797&ys)>>>16,t^=i>>>1,t=t*444984403&ys|t*60499&nn,i=i*3301882366&ys|((i<<16|t>>>16)*3120437893&ys)>>>16,t^=i>>>1,(t>>>0).toString(16).padStart(8,"0")+(i>>>0).toString(16).padStart(8,"0")}}const sy=Object.freeze({map:null,hash:"",transfer:void 0});var Ml,Rl,We,Xp,Nx;class lv{constructor(){w(this,Xp);w(this,Ml,!1);w(this,Rl,null);w(this,We,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,i){const n=c(this,We).get(t);return n===void 0?i:Object.assign(i,n)}getRawValue(t){return c(this,We).get(t)}remove(t){if(c(this,We).delete(t),c(this,We).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const i of c(this,We).values())if(i instanceof ae)return;this.onAnnotationEditor(null)}}setValue(t,i){const n=c(this,We).get(t);let r=!1;if(n!==void 0)for(const[l,u]of Object.entries(i))n[l]!==u&&(r=!0,n[l]=u);else r=!0,c(this,We).set(t,i);r&&E(this,Xp,Nx).call(this),i instanceof ae&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(i.constructor._type)}has(t){return c(this,We).has(t)}get size(){return c(this,We).size}resetModified(){c(this,Ml)&&(A(this,Ml,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new Ox(this)}get serializable(){if(c(this,We).size===0)return sy;const t=new Map,i=new Dx,n=[],r=Object.create(null);let l=!1;for(const[u,h]of c(this,We)){const f=h instanceof ae?h.serialize(!1,r):h;f&&(t.set(u,f),i.update(`${u}:${JSON.stringify(f)}`),l||(l=!!f.bitmap))}if(l)for(const u of t.values())u.bitmap&&n.push(u.bitmap);return t.size>0?{map:t,hash:i.hexdigest(),transfer:n}:sy}get editorStats(){let t=null;const i=new Map;for(const n of c(this,We).values()){if(!(n instanceof ae))continue;const r=n.telemetryFinalData;if(!r)continue;const{type:l}=r;i.has(l)||i.set(l,Object.getPrototypeOf(n).constructor),t||(t=Object.create(null));const u=t[l]||(t[l]=new Map);for(const[h,f]of Object.entries(r)){if(h==="type")continue;let g=u.get(h);g||(g=new Map,u.set(h,g));const p=g.get(f)??0;g.set(f,p+1)}}for(const[n,r]of i)t[n]=r.computeTelemetryFinalData(t[n]);return t}resetModifiedIds(){A(this,Rl,null)}get modifiedIds(){if(c(this,Rl))return c(this,Rl);const t=[];for(const i of c(this,We).values())!(i instanceof ae)||!i.annotationElementId||!i.serialize()||t.push(i.annotationElementId);return A(this,Rl,{ids:new Set(t),hash:t.join(",")})}[Symbol.iterator](){return c(this,We).entries()}}Ml=new WeakMap,Rl=new WeakMap,We=new WeakMap,Xp=new WeakSet,Nx=function(){c(this,Ml)||(A(this,Ml,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var _d;class Ox extends lv{constructor(i){super();w(this,_d);const{map:n,hash:r,transfer:l}=i.serializable,u=structuredClone(n,l?{transfer:l}:null);A(this,_d,{map:u,hash:r,transfer:l})}get print(){te("Should not call PrintAnnotationStorage.print")}get serializable(){return c(this,_d)}get modifiedIds(){return zt(this,"modifiedIds",{ids:new Set,hash:""})}}_d=new WeakMap;var kc;class OC{constructor({ownerDocument:t=globalThis.document,styleElement:i=null}){w(this,kc,new Set);this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}removeNativeFontFace(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}insertRule(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const i=this.styleElement.sheet;i.insertRule(t,i.cssRules.length)}clear(){for(const t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.clear(),c(this,kc).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:t,disableFontFace:i,_inspectFont:n}){if(!(!t||c(this,kc).has(t.loadedName))){if(Ce(!i,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:r,src:l,style:u}=t,h=new FontFace(r,l,u);this.addNativeFontFace(h);try{await h.load(),c(this,kc).add(r),n==null||n(t)}catch{_t(`Cannot load system font: ${t.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(h)}return}te("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(t){if(t.attached||t.missingFile&&!t.systemFontInfo)return;if(t.attached=!0,t.systemFontInfo){await this.loadSystemFont(t);return}if(this.isFontLoadingAPISupported){const n=t.createNativeFontFace();if(n){this.addNativeFontFace(n);try{await n.loaded}catch(r){throw _t(`Failed to load font '${n.family}': '${r}'.`),t.disableFontFace=!0,r}}return}const i=t.createFontFaceRule();if(i){if(this.insertRule(i),this.isSyncFontLoadingSupported)return;await new Promise(n=>{const r=this._queueLoadingCallback(n);this._prepareFontLoadEvent(t,r)})}}get isFontLoadingAPISupported(){var i;const t=!!((i=this._document)!=null&&i.fonts);return zt(this,"isFontLoadingAPISupported",t)}get isSyncFontLoadingSupported(){return zt(this,"isSyncFontLoadingSupported",Si||ni.platform.isFirefox)}_queueLoadingCallback(t){function i(){for(Ce(!r.done,"completeRequest() cannot be called twice."),r.done=!0;n.length>0&&n[0].done;){const l=n.shift();setTimeout(l.callback,0)}}const{loadingRequests:n}=this,r={done:!1,complete:i,callback:t};return n.push(r),r}get _loadTestFont(){const t=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return zt(this,"_loadTestFont",t)}_prepareFontLoadEvent(t,i){function n(H,z){return H.charCodeAt(z)<<24|H.charCodeAt(z+1)<<16|H.charCodeAt(z+2)<<8|H.charCodeAt(z+3)&255}function r(H,z,G,V){const Z=H.substring(0,z),et=H.substring(z+G);return Z+V+et}let l,u;const h=this._document.createElement("canvas");h.width=1,h.height=1;const f=h.getContext("2d");let g=0;function p(H,z){if(++g>30){_t("Load test font never loaded."),z();return}if(f.font="30px "+H,f.fillText(".",0,20),f.getImageData(0,0,1,1).data[3]>0){z();return}setTimeout(p.bind(null,H,z))}const y=`lt${Date.now()}${this.loadTestFontId++}`;let v=this._loadTestFont;v=r(v,976,y.length,y);const T=16,x=1482184792;let M=n(v,T);for(l=0,u=y.length-3;l<u;l+=4)M=M-x+n(y,l)|0;l<y.length&&(M=M-x+n(y+"XXX",l)|0),v=r(v,T,4,mC(M));const R=`url(data:font/opentype;base64,${btoa(v)});`,k=`@font-face {font-family:"${y}";src:${R}}`;this.insertRule(k);const O=this._document.createElement("div");O.style.visibility="hidden",O.style.width=O.style.height="10px",O.style.position="absolute",O.style.top=O.style.left="0px";for(const H of[t.loadedName,y]){const z=this._document.createElement("span");z.textContent="Hi",z.style.fontFamily=H,O.append(z)}this._document.body.append(O),p(y,()=>{O.remove(),i.complete()})}}kc=new WeakMap;class LC{constructor(t,i=null){this.compiledGlyphs=Object.create(null);for(const n in t)this[n]=t[n];this._inspectFont=i}createNativeFontFace(){var i;if(!this.data||this.disableFontFace)return null;let t;if(!this.cssFontInfo)t=new FontFace(this.loadedName,this.data,{});else{const n={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(n.style=`oblique ${this.cssFontInfo.italicAngle}deg`),t=new FontFace(this.cssFontInfo.fontFamily,this.data,n)}return(i=this._inspectFont)==null||i.call(this,this),t}createFontFaceRule(){var n;if(!this.data||this.disableFontFace)return null;const t=`url(data:${this.mimetype};base64,${W_(this.data)});`;let i;if(!this.cssFontInfo)i=`@font-face {font-family:"${this.loadedName}";src:${t}}`;else{let r=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(r+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),i=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${r}src:${t}}`}return(n=this._inspectFont)==null||n.call(this,this,t),i}getPathGenerator(t,i){if(this.compiledGlyphs[i]!==void 0)return this.compiledGlyphs[i];const n=this.loadedName+"_path_"+i;let r;try{r=t.get(n)}catch(u){_t(`getPathGenerator - ignoring character: "${u}".`)}const l=new Path2D(r||"");return this.fontExtraProperties||t.delete(n),this.compiledGlyphs[i]=l}}function kC(b){if(b instanceof URL)return b.href;if(typeof b=="string"){if(Si)return b;const t=URL.parse(b,window.location);if(t)return t.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function zC(b){if(Si&&typeof Buffer<"u"&&b instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(b instanceof Uint8Array&&b.byteLength===b.buffer.byteLength)return b;if(typeof b=="string")return Tf(b);if(b instanceof ArrayBuffer||ArrayBuffer.isView(b)||typeof b=="object"&&!isNaN(b==null?void 0:b.length))return new Uint8Array(b);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function $g(b){if(typeof b!="string")return null;if(b.endsWith("/"))return b;throw new Error(`Invalid factory url: "${b}" must include trailing slash.`)}const ny=b=>typeof b=="object"&&Number.isInteger(b==null?void 0:b.num)&&b.num>=0&&Number.isInteger(b==null?void 0:b.gen)&&b.gen>=0,PC=b=>typeof b=="object"&&typeof(b==null?void 0:b.name)=="string",HC=SC.bind(null,ny,PC);var ea,Yp;class BC{constructor(){w(this,ea,new Map);w(this,Yp,Promise.resolve())}postMessage(t,i){const n={data:structuredClone(t,i?{transfer:i}:null)};c(this,Yp).then(()=>{for(const[r]of c(this,ea))r.call(this,n)})}addEventListener(t,i,n=null){let r=null;if((n==null?void 0:n.signal)instanceof AbortSignal){const{signal:l}=n;if(l.aborted){_t("LoopbackPort - cannot use an `aborted` signal.");return}const u=()=>this.removeEventListener(t,i);r=()=>l.removeEventListener("abort",u),l.addEventListener("abort",u)}c(this,ea).set(i,r)}removeEventListener(t,i){const n=c(this,ea).get(i);n==null||n(),c(this,ea).delete(i)}terminate(){for(const[,t]of c(this,ea))t==null||t();c(this,ea).clear()}}ea=new WeakMap,Yp=new WeakMap;const Kg={DATA:1,ERROR:2},we={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function T_(){}function Di(b){if(b instanceof zr||b instanceof Bb||b instanceof __||b instanceof Op||b instanceof Db)return b;switch(b instanceof Error||typeof b=="object"&&b!==null||te('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),b.name){case"AbortException":return new zr(b.message);case"InvalidPDFException":return new Bb(b.message);case"PasswordException":return new __(b.message,b.code);case"ResponseException":return new Op(b.message,b.status,b.missing);case"UnknownErrorException":return new Db(b.message,b.details)}return new Db(b.message,b.toString())}var zc,Ms,Lx,kx,zx,cp;class zh{constructor(t,i,n){w(this,Ms);w(this,zc,new AbortController);this.sourceName=t,this.targetName=i,this.comObj=n,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),n.addEventListener("message",E(this,Ms,Lx).bind(this),{signal:c(this,zc).signal})}on(t,i){const n=this.actionHandler;if(n[t])throw new Error(`There is already an actionName called "${t}"`);n[t]=i}send(t,i,n){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:i},n)}sendWithPromise(t,i,n){const r=this.callbackId++,l=Promise.withResolvers();this.callbackCapabilities[r]=l;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:r,data:i},n)}catch(u){l.reject(u)}return l.promise}sendWithStream(t,i,n,r){const l=this.streamId++,u=this.sourceName,h=this.targetName,f=this.comObj;return new ReadableStream({start:g=>{const p=Promise.withResolvers();return this.streamControllers[l]={controller:g,startCall:p,pullCall:null,cancelCall:null,isClosed:!1},f.postMessage({sourceName:u,targetName:h,action:t,streamId:l,data:i,desiredSize:g.desiredSize},r),p.promise},pull:g=>{const p=Promise.withResolvers();return this.streamControllers[l].pullCall=p,f.postMessage({sourceName:u,targetName:h,stream:we.PULL,streamId:l,desiredSize:g.desiredSize}),p.promise},cancel:g=>{Ce(g instanceof Error,"cancel must have a valid reason");const p=Promise.withResolvers();return this.streamControllers[l].cancelCall=p,this.streamControllers[l].isClosed=!0,f.postMessage({sourceName:u,targetName:h,stream:we.CANCEL,streamId:l,reason:Di(g)}),p.promise}},n)}destroy(){var t;(t=c(this,zc))==null||t.abort(),A(this,zc,null)}}zc=new WeakMap,Ms=new WeakSet,Lx=function({data:t}){if(t.targetName!==this.sourceName)return;if(t.stream){E(this,Ms,zx).call(this,t);return}if(t.callback){const n=t.callbackId,r=this.callbackCapabilities[n];if(!r)throw new Error(`Cannot resolve callback ${n}`);if(delete this.callbackCapabilities[n],t.callback===Kg.DATA)r.resolve(t.data);else if(t.callback===Kg.ERROR)r.reject(Di(t.reason));else throw new Error("Unexpected callback case");return}const i=this.actionHandler[t.action];if(!i)throw new Error(`Unknown action from worker: ${t.action}`);if(t.callbackId){const n=this.sourceName,r=t.sourceName,l=this.comObj;Promise.try(i,t.data).then(function(u){l.postMessage({sourceName:n,targetName:r,callback:Kg.DATA,callbackId:t.callbackId,data:u})},function(u){l.postMessage({sourceName:n,targetName:r,callback:Kg.ERROR,callbackId:t.callbackId,reason:Di(u)})});return}if(t.streamId){E(this,Ms,kx).call(this,t);return}i(t.data)},kx=function(t){const i=t.streamId,n=this.sourceName,r=t.sourceName,l=this.comObj,u=this,h=this.actionHandler[t.action],f={enqueue(g,p=1,y){if(this.isCancelled)return;const v=this.desiredSize;this.desiredSize-=p,v>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),l.postMessage({sourceName:n,targetName:r,stream:we.ENQUEUE,streamId:i,chunk:g},y)},close(){this.isCancelled||(this.isCancelled=!0,l.postMessage({sourceName:n,targetName:r,stream:we.CLOSE,streamId:i}),delete u.streamSinks[i])},error(g){Ce(g instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,l.postMessage({sourceName:n,targetName:r,stream:we.ERROR,streamId:i,reason:Di(g)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};f.sinkCapability.resolve(),f.ready=f.sinkCapability.promise,this.streamSinks[i]=f,Promise.try(h,t.data,f).then(function(){l.postMessage({sourceName:n,targetName:r,stream:we.START_COMPLETE,streamId:i,success:!0})},function(g){l.postMessage({sourceName:n,targetName:r,stream:we.START_COMPLETE,streamId:i,reason:Di(g)})})},zx=function(t){const i=t.streamId,n=this.sourceName,r=t.sourceName,l=this.comObj,u=this.streamControllers[i],h=this.streamSinks[i];switch(t.stream){case we.START_COMPLETE:t.success?u.startCall.resolve():u.startCall.reject(Di(t.reason));break;case we.PULL_COMPLETE:t.success?u.pullCall.resolve():u.pullCall.reject(Di(t.reason));break;case we.PULL:if(!h){l.postMessage({sourceName:n,targetName:r,stream:we.PULL_COMPLETE,streamId:i,success:!0});break}h.desiredSize<=0&&t.desiredSize>0&&h.sinkCapability.resolve(),h.desiredSize=t.desiredSize,Promise.try(h.onPull||T_).then(function(){l.postMessage({sourceName:n,targetName:r,stream:we.PULL_COMPLETE,streamId:i,success:!0})},function(g){l.postMessage({sourceName:n,targetName:r,stream:we.PULL_COMPLETE,streamId:i,reason:Di(g)})});break;case we.ENQUEUE:if(Ce(u,"enqueue should have stream controller"),u.isClosed)break;u.controller.enqueue(t.chunk);break;case we.CLOSE:if(Ce(u,"close should have stream controller"),u.isClosed)break;u.isClosed=!0,u.controller.close(),E(this,Ms,cp).call(this,u,i);break;case we.ERROR:Ce(u,"error should have stream controller"),u.controller.error(Di(t.reason)),E(this,Ms,cp).call(this,u,i);break;case we.CANCEL_COMPLETE:t.success?u.cancelCall.resolve():u.cancelCall.reject(Di(t.reason)),E(this,Ms,cp).call(this,u,i);break;case we.CANCEL:if(!h)break;const f=Di(t.reason);Promise.try(h.onCancel||T_,f).then(function(){l.postMessage({sourceName:n,targetName:r,stream:we.CANCEL_COMPLETE,streamId:i,success:!0})},function(g){l.postMessage({sourceName:n,targetName:r,stream:we.CANCEL_COMPLETE,streamId:i,reason:Di(g)})}),h.sinkCapability.reject(f),h.isCancelled=!0,delete this.streamSinks[i];break;default:throw new Error("Unexpected stream case")}},cp=async function(t,i){var n,r,l;await Promise.allSettled([(n=t.startCall)==null?void 0:n.promise,(r=t.pullCall)==null?void 0:r.promise,(l=t.cancelCall)==null?void 0:l.promise]),delete this.streamControllers[i]};var xd;class Px{constructor({enableHWA:t=!1}){w(this,xd,!1);A(this,xd,t)}create(t,i){if(t<=0||i<=0)throw new Error("Invalid canvas size");const n=this._createCanvas(t,i);return{canvas:n,context:n.getContext("2d",{willReadFrequently:!c(this,xd)})}}reset(t,i,n){if(!t.canvas)throw new Error("Canvas is not specified");if(i<=0||n<=0)throw new Error("Invalid canvas size");t.canvas.width=i,t.canvas.height=n}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,i){te("Abstract method `_createCanvas` called.")}}xd=new WeakMap;class IC extends Px{constructor({ownerDocument:t=globalThis.document,enableHWA:i=!1}){super({enableHWA:i}),this._document=t}_createCanvas(t,i){const n=this._document.createElement("canvas");return n.width=t,n.height=i,n}}class Hx{constructor({baseUrl:t=null,isCompressed:i=!0}){this.baseUrl=t,this.isCompressed=i}async fetch({name:t}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!t)throw new Error("CMap name must be specified.");const i=this.baseUrl+t+(this.isCompressed?".bcmap":"");return this._fetch(i).then(n=>({cMapData:n,isCompressed:this.isCompressed})).catch(n=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${i}`)})}async _fetch(t){te("Abstract method `_fetch` called.")}}class C_ extends Hx{async _fetch(t){const i=await Cf(t,this.isCompressed?"arraybuffer":"text");return i instanceof ArrayBuffer?new Uint8Array(i):Tf(i)}}class Bx{addFilter(t){return"none"}addHCMFilter(t,i){return"none"}addAlphaFilter(t){return"none"}addLuminosityFilter(t){return"none"}addHighlightHCMFilter(t,i,n,r,l){return"none"}destroy(t=!1){}}var Dl,Pc,ia,sa,hi,Nl,Ol,nt,ci,Ph,cc,up,uc,Ix,ay,hc,Hh,Bh,ry,Ih;class FC extends Bx{constructor({docId:i,ownerDocument:n=globalThis.document}){super();w(this,nt);w(this,Dl);w(this,Pc);w(this,ia);w(this,sa);w(this,hi);w(this,Nl);w(this,Ol,0);A(this,sa,i),A(this,hi,n)}addFilter(i){if(!i)return"none";let n=c(this,nt,ci).get(i);if(n)return n;const[r,l,u]=E(this,nt,up).call(this,i),h=i.length===1?r:`${r}${l}${u}`;if(n=c(this,nt,ci).get(h),n)return c(this,nt,ci).set(i,n),n;const f=`g_${c(this,sa)}_transfer_map_${pi(this,Ol)._++}`,g=E(this,nt,uc).call(this,f);c(this,nt,ci).set(i,g),c(this,nt,ci).set(h,g);const p=E(this,nt,hc).call(this,f);return E(this,nt,Bh).call(this,r,l,u,p),g}addHCMFilter(i,n){var T;const r=`${i}-${n}`,l="base";let u=c(this,nt,Ph).get(l);if((u==null?void 0:u.key)===r||(u?((T=u.filter)==null||T.remove(),u.key=r,u.url="none",u.filter=null):(u={key:r,url:"none",filter:null},c(this,nt,Ph).set(l,u)),!i||!n))return u.url;const h=E(this,nt,Ih).call(this,i);i=ft.makeHexColor(...h);const f=E(this,nt,Ih).call(this,n);if(n=ft.makeHexColor(...f),c(this,nt,cc).style.color="",i==="#000000"&&n==="#ffffff"||i===n)return u.url;const g=new Array(256);for(let x=0;x<=255;x++){const M=x/255;g[x]=M<=.03928?M/12.92:((M+.055)/1.055)**2.4}const p=g.join(","),y=`g_${c(this,sa)}_hcm_filter`,v=u.filter=E(this,nt,hc).call(this,y);E(this,nt,Bh).call(this,p,p,p,v),E(this,nt,ay).call(this,v);const S=(x,M)=>{const R=h[x]/255,k=f[x]/255,O=new Array(M+1);for(let H=0;H<=M;H++)O[H]=R+H/M*(k-R);return O.join(",")};return E(this,nt,Bh).call(this,S(0,5),S(1,5),S(2,5),v),u.url=E(this,nt,uc).call(this,y),u.url}addAlphaFilter(i){let n=c(this,nt,ci).get(i);if(n)return n;const[r]=E(this,nt,up).call(this,[i]),l=`alpha_${r}`;if(n=c(this,nt,ci).get(l),n)return c(this,nt,ci).set(i,n),n;const u=`g_${c(this,sa)}_alpha_map_${pi(this,Ol)._++}`,h=E(this,nt,uc).call(this,u);c(this,nt,ci).set(i,h),c(this,nt,ci).set(l,h);const f=E(this,nt,hc).call(this,u);return E(this,nt,ry).call(this,r,f),h}addLuminosityFilter(i){let n=c(this,nt,ci).get(i||"luminosity");if(n)return n;let r,l;if(i?([r]=E(this,nt,up).call(this,[i]),l=`luminosity_${r}`):l="luminosity",n=c(this,nt,ci).get(l),n)return c(this,nt,ci).set(i,n),n;const u=`g_${c(this,sa)}_luminosity_map_${pi(this,Ol)._++}`,h=E(this,nt,uc).call(this,u);c(this,nt,ci).set(i,h),c(this,nt,ci).set(l,h);const f=E(this,nt,hc).call(this,u);return E(this,nt,Ix).call(this,f),i&&E(this,nt,ry).call(this,r,f),h}addHighlightHCMFilter(i,n,r,l,u){var k;const h=`${n}-${r}-${l}-${u}`;let f=c(this,nt,Ph).get(i);if((f==null?void 0:f.key)===h||(f?((k=f.filter)==null||k.remove(),f.key=h,f.url="none",f.filter=null):(f={key:h,url:"none",filter:null},c(this,nt,Ph).set(i,f)),!n||!r))return f.url;const[g,p]=[n,r].map(E(this,nt,Ih).bind(this));let y=Math.round(.2126*g[0]+.7152*g[1]+.0722*g[2]),v=Math.round(.2126*p[0]+.7152*p[1]+.0722*p[2]),[S,T]=[l,u].map(E(this,nt,Ih).bind(this));v<y&&([y,v,S,T]=[v,y,T,S]),c(this,nt,cc).style.color="";const x=(O,H,z)=>{const G=new Array(256),V=(v-y)/z,Z=O/255,et=(H-O)/(255*z);let rt=0;for(let st=0;st<=z;st++){const vt=Math.round(y+st*V),Lt=Z+st*et;for(let At=rt;At<=vt;At++)G[At]=Lt;rt=vt+1}for(let st=rt;st<256;st++)G[st]=G[rt-1];return G.join(",")},M=`g_${c(this,sa)}_hcm_${i}_filter`,R=f.filter=E(this,nt,hc).call(this,M);return E(this,nt,ay).call(this,R),E(this,nt,Bh).call(this,x(S[0],T[0],5),x(S[1],T[1],5),x(S[2],T[2],5),R),f.url=E(this,nt,uc).call(this,M),f.url}destroy(i=!1){var n,r,l,u;i&&((n=c(this,Nl))!=null&&n.size)||((r=c(this,ia))==null||r.parentNode.parentNode.remove(),A(this,ia,null),(l=c(this,Pc))==null||l.clear(),A(this,Pc,null),(u=c(this,Nl))==null||u.clear(),A(this,Nl,null),A(this,Ol,0))}}Dl=new WeakMap,Pc=new WeakMap,ia=new WeakMap,sa=new WeakMap,hi=new WeakMap,Nl=new WeakMap,Ol=new WeakMap,nt=new WeakSet,ci=function(){return c(this,Pc)||A(this,Pc,new Map)},Ph=function(){return c(this,Nl)||A(this,Nl,new Map)},cc=function(){if(!c(this,ia)){const i=c(this,hi).createElement("div"),{style:n}=i;n.visibility="hidden",n.contain="strict",n.width=n.height=0,n.position="absolute",n.top=n.left=0,n.zIndex=-1;const r=c(this,hi).createElementNS(Un,"svg");r.setAttribute("width",0),r.setAttribute("height",0),A(this,ia,c(this,hi).createElementNS(Un,"defs")),i.append(r),r.append(c(this,ia)),c(this,hi).body.append(i)}return c(this,ia)},up=function(i){if(i.length===1){const g=i[0],p=new Array(256);for(let v=0;v<256;v++)p[v]=g[v]/255;const y=p.join(",");return[y,y,y]}const[n,r,l]=i,u=new Array(256),h=new Array(256),f=new Array(256);for(let g=0;g<256;g++)u[g]=n[g]/255,h[g]=r[g]/255,f[g]=l[g]/255;return[u.join(","),h.join(","),f.join(",")]},uc=function(i){if(c(this,Dl)===void 0){A(this,Dl,"");const n=c(this,hi).URL;n!==c(this,hi).baseURI&&(om(n)?_t('#createUrl: ignore "data:"-URL for performance reasons.'):A(this,Dl,K_(n,"")))}return`url(${c(this,Dl)}#${i})`},Ix=function(i){const n=c(this,hi).createElementNS(Un,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),i.append(n)},ay=function(i){const n=c(this,hi).createElementNS(Un,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),i.append(n)},hc=function(i){const n=c(this,hi).createElementNS(Un,"filter");return n.setAttribute("color-interpolation-filters","sRGB"),n.setAttribute("id",i),c(this,nt,cc).append(n),n},Hh=function(i,n,r){const l=c(this,hi).createElementNS(Un,n);l.setAttribute("type","discrete"),l.setAttribute("tableValues",r),i.append(l)},Bh=function(i,n,r,l){const u=c(this,hi).createElementNS(Un,"feComponentTransfer");l.append(u),E(this,nt,Hh).call(this,u,"feFuncR",i),E(this,nt,Hh).call(this,u,"feFuncG",n),E(this,nt,Hh).call(this,u,"feFuncB",r)},ry=function(i,n){const r=c(this,hi).createElementNS(Un,"feComponentTransfer");n.append(r),E(this,nt,Hh).call(this,r,"feFuncA",i)},Ih=function(i){return c(this,nt,cc).style.color=i,rv(getComputedStyle(c(this,nt,cc)).getPropertyValue("color"))};class Fx{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!t)throw new Error("Font filename must be specified.");const i=`${this.baseUrl}${t}`;return this._fetch(i).catch(n=>{throw new Error(`Unable to load font data at: ${i}`)})}async _fetch(t){te("Abstract method `_fetch` called.")}}class M_ extends Fx{async _fetch(t){const i=await Cf(t,"arraybuffer");return new Uint8Array(i)}}class Ux{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!t)throw new Error("Wasm filename must be specified.");const i=`${this.baseUrl}${t}`;return this._fetch(i).catch(n=>{throw new Error(`Unable to load wasm data at: ${i}`)})}async _fetch(t){te("Abstract method `_fetch` called.")}}class R_ extends Ux{async _fetch(t){const i=await Cf(t,"arraybuffer");return new Uint8Array(i)}}Si&&_t("Please use the `legacy` build in Node.js environments.");async function ov(b){const i=await process.getBuiltinModule("fs").promises.readFile(b);return new Uint8Array(i)}class UC extends Bx{}class jC extends Px{_createCanvas(t,i){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(t,i)}}class GC extends Hx{async _fetch(t){return ov(t)}}class qC extends Fx{async _fetch(t){return ov(t)}}class VC extends Ux{async _fetch(t){return ov(t)}}const ei={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function ly(b,t){if(!t)return;const i=t[2]-t[0],n=t[3]-t[1],r=new Path2D;r.rect(t[0],t[1],i,n),b.clip(r)}class cv{isModifyingCurrentTransform(){return!1}getPattern(){te("Abstract method `getPattern` called.")}}class XC extends cv{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}_createGradient(t){let i;this._type==="axial"?i=t.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(i=t.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const n of this._colorStops)i.addColorStop(n[0],n[1]);return i}getPattern(t,i,n,r){let l;if(r===ei.STROKE||r===ei.FILL){const u=i.current.getClippedPathBoundingBox(r,fe(t))||[0,0,0,0],h=Math.ceil(u[2]-u[0])||1,f=Math.ceil(u[3]-u[1])||1,g=i.cachedCanvases.getCanvas("pattern",h,f),p=g.context;p.clearRect(0,0,p.canvas.width,p.canvas.height),p.beginPath(),p.rect(0,0,p.canvas.width,p.canvas.height),p.translate(-u[0],-u[1]),n=ft.transform(n,[1,0,0,1,u[0],u[1]]),p.transform(...i.baseTransform),this.matrix&&p.transform(...this.matrix),ly(p,this._bbox),p.fillStyle=this._createGradient(p),p.fill(),l=t.createPattern(g.canvas,"no-repeat");const y=new DOMMatrix(n);l.setTransform(y)}else ly(t,this._bbox),l=this._createGradient(t);return l}}function Lb(b,t,i,n,r,l,u,h){const f=t.coords,g=t.colors,p=b.data,y=b.width*4;let v;f[i+1]>f[n+1]&&(v=i,i=n,n=v,v=l,l=u,u=v),f[n+1]>f[r+1]&&(v=n,n=r,r=v,v=u,u=h,h=v),f[i+1]>f[n+1]&&(v=i,i=n,n=v,v=l,l=u,u=v);const S=(f[i]+t.offsetX)*t.scaleX,T=(f[i+1]+t.offsetY)*t.scaleY,x=(f[n]+t.offsetX)*t.scaleX,M=(f[n+1]+t.offsetY)*t.scaleY,R=(f[r]+t.offsetX)*t.scaleX,k=(f[r+1]+t.offsetY)*t.scaleY;if(T>=k)return;const O=g[l],H=g[l+1],z=g[l+2],G=g[u],V=g[u+1],Z=g[u+2],et=g[h],rt=g[h+1],st=g[h+2],vt=Math.round(T),Lt=Math.round(k);let At,Ft,B,X,ct,Dt,N,K;for(let tt=vt;tt<=Lt;tt++){if(tt<M){const kt=tt<T?0:(T-tt)/(T-M);At=S-(S-x)*kt,Ft=O-(O-G)*kt,B=H-(H-V)*kt,X=z-(z-Z)*kt}else{let kt;tt>k?kt=1:M===k?kt=0:kt=(M-tt)/(M-k),At=x-(x-R)*kt,Ft=G-(G-et)*kt,B=V-(V-rt)*kt,X=Z-(Z-st)*kt}let W;tt<T?W=0:tt>k?W=1:W=(T-tt)/(T-k),ct=S-(S-R)*W,Dt=O-(O-et)*W,N=H-(H-rt)*W,K=z-(z-st)*W;const ut=Math.round(Math.min(At,ct)),wt=Math.round(Math.max(At,ct));let gt=y*tt+ut*4;for(let kt=ut;kt<=wt;kt++)W=(At-kt)/(At-ct),W<0?W=0:W>1&&(W=1),p[gt++]=Ft-(Ft-Dt)*W|0,p[gt++]=B-(B-N)*W|0,p[gt++]=X-(X-K)*W|0,p[gt++]=255}}function YC(b,t,i){const n=t.coords,r=t.colors;let l,u;switch(t.type){case"lattice":const h=t.verticesPerRow,f=Math.floor(n.length/h)-1,g=h-1;for(l=0;l<f;l++){let p=l*h;for(let y=0;y<g;y++,p++)Lb(b,i,n[p],n[p+1],n[p+h],r[p],r[p+1],r[p+h]),Lb(b,i,n[p+h+1],n[p+1],n[p+h],r[p+h+1],r[p+1],r[p+h])}break;case"triangles":for(l=0,u=n.length;l<u;l+=3)Lb(b,i,n[l],n[l+1],n[l+2],r[l],r[l+1],r[l+2]);break;default:throw new Error("illegal figure")}}class $C extends cv{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[6],this._background=t[7],this.matrix=null}_createMeshCanvas(t,i,n){const h=Math.floor(this._bounds[0]),f=Math.floor(this._bounds[1]),g=Math.ceil(this._bounds[2])-h,p=Math.ceil(this._bounds[3])-f,y=Math.min(Math.ceil(Math.abs(g*t[0]*1.1)),3e3),v=Math.min(Math.ceil(Math.abs(p*t[1]*1.1)),3e3),S=g/y,T=p/v,x={coords:this._coords,colors:this._colors,offsetX:-h,offsetY:-f,scaleX:1/S,scaleY:1/T},M=y+2*2,R=v+2*2,k=n.getCanvas("mesh",M,R),O=k.context,H=O.createImageData(y,v);if(i){const G=H.data;for(let V=0,Z=G.length;V<Z;V+=4)G[V]=i[0],G[V+1]=i[1],G[V+2]=i[2],G[V+3]=255}for(const G of this._figures)YC(H,G,x);return O.putImageData(H,2,2),{canvas:k.canvas,offsetX:h-2*S,offsetY:f-2*T,scaleX:S,scaleY:T}}isModifyingCurrentTransform(){return!0}getPattern(t,i,n,r){ly(t,this._bbox);const l=new Float32Array(2);if(r===ei.SHADING)ft.singularValueDecompose2dScale(fe(t),l);else if(this.matrix){ft.singularValueDecompose2dScale(this.matrix,l);const[h,f]=l;ft.singularValueDecompose2dScale(i.baseTransform,l),l[0]*=h,l[1]*=f}else ft.singularValueDecompose2dScale(i.baseTransform,l);const u=this._createMeshCanvas(l,r===ei.SHADING?null:this._background,i.cachedCanvases);return r!==ei.SHADING&&(t.setTransform(...i.baseTransform),this.matrix&&t.transform(...this.matrix)),t.translate(u.offsetX,u.offsetY),t.scale(u.scaleX,u.scaleY),t.createPattern(u.canvas,"no-repeat")}}class KC extends cv{getPattern(){return"hotpink"}}function QC(b){switch(b[0]){case"RadialAxial":return new XC(b);case"Mesh":return new $C(b);case"Dummy":return new KC}throw new Error(`Unknown IR type: ${b[0]}`)}const D_={COLORED:1,UNCOLORED:2},$p=class $p{constructor(t,i,n,r){this.color=t[1],this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.ctx=i,this.canvasGraphicsFactory=n,this.baseTransform=r}createPatternCanvas(t){const{bbox:i,operatorList:n,paintType:r,tilingType:l,color:u,canvasGraphicsFactory:h}=this;let{xstep:f,ystep:g}=this;f=Math.abs(f),g=Math.abs(g),lm("TilingType: "+l);const p=i[0],y=i[1],v=i[2],S=i[3],T=v-p,x=S-y,M=new Float32Array(2);ft.singularValueDecompose2dScale(this.matrix,M);const[R,k]=M;ft.singularValueDecompose2dScale(this.baseTransform,M);const O=R*M[0],H=k*M[1];let z=T,G=x,V=!1,Z=!1;const et=Math.ceil(f*O),rt=Math.ceil(g*H),st=Math.ceil(T*O),vt=Math.ceil(x*H);et>=st?z=f:V=!0,rt>=vt?G=g:Z=!0;const Lt=this.getSizeAndScale(z,this.ctx.canvas.width,O),At=this.getSizeAndScale(G,this.ctx.canvas.height,H),Ft=t.cachedCanvases.getCanvas("pattern",Lt.size,At.size),B=Ft.context,X=h.createCanvasGraphics(B);if(X.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(X,r,u),B.translate(-Lt.scale*p,-At.scale*y),X.transform(Lt.scale,0,0,At.scale,0,0),B.save(),this.clipBbox(X,p,y,v,S),X.baseTransform=fe(X.ctx),X.executeOperatorList(n),X.endDrawing(),B.restore(),V||Z){const ct=Ft.canvas;V&&(z=f),Z&&(G=g);const Dt=this.getSizeAndScale(z,this.ctx.canvas.width,O),N=this.getSizeAndScale(G,this.ctx.canvas.height,H),K=Dt.size,tt=N.size,W=t.cachedCanvases.getCanvas("pattern-workaround",K,tt),ut=W.context,wt=V?Math.floor(T/f):0,gt=Z?Math.floor(x/g):0;for(let kt=0;kt<=wt;kt++)for(let qt=0;qt<=gt;qt++)ut.drawImage(ct,K*kt,tt*qt,K,tt,0,0,K,tt);return{canvas:W.canvas,scaleX:Dt.scale,scaleY:N.scale,offsetX:p,offsetY:y}}return{canvas:Ft.canvas,scaleX:Lt.scale,scaleY:At.scale,offsetX:p,offsetY:y}}getSizeAndScale(t,i,n){const r=Math.max($p.MAX_PATTERN_SIZE,i);let l=Math.ceil(t*n);return l>=r?l=r:n=l/t,{scale:n,size:l}}clipBbox(t,i,n,r,l){const u=r-i,h=l-n;t.ctx.rect(i,n,u,h),ft.axialAlignedBoundingBox([i,n,r,l],fe(t.ctx),t.current.minMax),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,i,n){const r=t.ctx,l=t.current;switch(i){case D_.COLORED:const{fillStyle:u,strokeStyle:h}=this.ctx;r.fillStyle=l.fillColor=u,r.strokeStyle=l.strokeColor=h;break;case D_.UNCOLORED:r.fillStyle=r.strokeStyle=n,l.fillColor=l.strokeColor=n;break;default:throw new pC(`Unsupported paint type: ${i}`)}}isModifyingCurrentTransform(){return!1}getPattern(t,i,n,r){let l=n;r!==ei.SHADING&&(l=ft.transform(l,i.baseTransform),this.matrix&&(l=ft.transform(l,this.matrix)));const u=this.createPatternCanvas(i);let h=new DOMMatrix(l);h=h.translate(u.offsetX,u.offsetY),h=h.scale(1/u.scaleX,1/u.scaleY);const f=t.createPattern(u.canvas,"repeat");return f.setTransform(h),f}};J($p,"MAX_PATTERN_SIZE",3e3);let oy=$p;function ZC({src:b,srcPos:t=0,dest:i,width:n,height:r,nonBlackColor:l=4294967295,inverseDecode:u=!1}){const h=ni.isLittleEndian?4278190080:255,[f,g]=u?[l,h]:[h,l],p=n>>3,y=n&7,v=b.length;i=new Uint32Array(i.buffer);let S=0;for(let T=0;T<r;T++){for(const M=t+p;t<M;t++){const R=t<v?b[t]:255;i[S++]=R&128?g:f,i[S++]=R&64?g:f,i[S++]=R&32?g:f,i[S++]=R&16?g:f,i[S++]=R&8?g:f,i[S++]=R&4?g:f,i[S++]=R&2?g:f,i[S++]=R&1?g:f}if(y===0)continue;const x=t<v?b[t++]:255;for(let M=0;M<y;M++)i[S++]=x&1<<7-M?g:f}return{srcPos:t,destPos:S}}const N_=16,O_=100,WC=15,L_=10,zi=16,kb=new DOMMatrix,rs=new Float32Array(2),pc=new Float32Array([1/0,1/0,-1/0,-1/0]);function JC(b,t){if(b._removeMirroring)throw new Error("Context is already forwarding operations.");b.__originalSave=b.save,b.__originalRestore=b.restore,b.__originalRotate=b.rotate,b.__originalScale=b.scale,b.__originalTranslate=b.translate,b.__originalTransform=b.transform,b.__originalSetTransform=b.setTransform,b.__originalResetTransform=b.resetTransform,b.__originalClip=b.clip,b.__originalMoveTo=b.moveTo,b.__originalLineTo=b.lineTo,b.__originalBezierCurveTo=b.bezierCurveTo,b.__originalRect=b.rect,b.__originalClosePath=b.closePath,b.__originalBeginPath=b.beginPath,b._removeMirroring=()=>{b.save=b.__originalSave,b.restore=b.__originalRestore,b.rotate=b.__originalRotate,b.scale=b.__originalScale,b.translate=b.__originalTranslate,b.transform=b.__originalTransform,b.setTransform=b.__originalSetTransform,b.resetTransform=b.__originalResetTransform,b.clip=b.__originalClip,b.moveTo=b.__originalMoveTo,b.lineTo=b.__originalLineTo,b.bezierCurveTo=b.__originalBezierCurveTo,b.rect=b.__originalRect,b.closePath=b.__originalClosePath,b.beginPath=b.__originalBeginPath,delete b._removeMirroring},b.save=function(){t.save(),this.__originalSave()},b.restore=function(){t.restore(),this.__originalRestore()},b.translate=function(i,n){t.translate(i,n),this.__originalTranslate(i,n)},b.scale=function(i,n){t.scale(i,n),this.__originalScale(i,n)},b.transform=function(i,n,r,l,u,h){t.transform(i,n,r,l,u,h),this.__originalTransform(i,n,r,l,u,h)},b.setTransform=function(i,n,r,l,u,h){t.setTransform(i,n,r,l,u,h),this.__originalSetTransform(i,n,r,l,u,h)},b.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},b.rotate=function(i){t.rotate(i),this.__originalRotate(i)},b.clip=function(i){t.clip(i),this.__originalClip(i)},b.moveTo=function(i,n){t.moveTo(i,n),this.__originalMoveTo(i,n)},b.lineTo=function(i,n){t.lineTo(i,n),this.__originalLineTo(i,n)},b.bezierCurveTo=function(i,n,r,l,u,h){t.bezierCurveTo(i,n,r,l,u,h),this.__originalBezierCurveTo(i,n,r,l,u,h)},b.rect=function(i,n,r,l){t.rect(i,n,r,l),this.__originalRect(i,n,r,l)},b.closePath=function(){t.closePath(),this.__originalClosePath()},b.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}class tM{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,i,n){let r;return this.cache[t]!==void 0?(r=this.cache[t],this.canvasFactory.reset(r,i,n)):(r=this.canvasFactory.create(i,n),this.cache[t]=r),r}delete(t){delete this.cache[t]}clear(){for(const t in this.cache){const i=this.cache[t];this.canvasFactory.destroy(i),delete this.cache[t]}}}function Qg(b,t,i,n,r,l,u,h,f,g){const[p,y,v,S,T,x]=fe(b);if(y===0&&v===0){const k=u*p+T,O=Math.round(k),H=h*S+x,z=Math.round(H),G=(u+f)*p+T,V=Math.abs(Math.round(G)-O)||1,Z=(h+g)*S+x,et=Math.abs(Math.round(Z)-z)||1;return b.setTransform(Math.sign(p),0,0,Math.sign(S),O,z),b.drawImage(t,i,n,r,l,0,0,V,et),b.setTransform(p,y,v,S,T,x),[V,et]}if(p===0&&S===0){const k=h*v+T,O=Math.round(k),H=u*y+x,z=Math.round(H),G=(h+g)*v+T,V=Math.abs(Math.round(G)-O)||1,Z=(u+f)*y+x,et=Math.abs(Math.round(Z)-z)||1;return b.setTransform(0,Math.sign(y),Math.sign(v),0,O,z),b.drawImage(t,i,n,r,l,0,0,et,V),b.setTransform(p,y,v,S,T,x),[et,V]}b.drawImage(t,i,n,r,l,u,h,f,g);const M=Math.hypot(p,y),R=Math.hypot(v,S);return[M*f,R*g]}class k_{constructor(t,i){J(this,"alphaIsShape",!1);J(this,"fontSize",0);J(this,"fontSizeScale",1);J(this,"textMatrix",null);J(this,"textMatrixScale",1);J(this,"fontMatrix",Hb);J(this,"leading",0);J(this,"x",0);J(this,"y",0);J(this,"lineX",0);J(this,"lineY",0);J(this,"charSpacing",0);J(this,"wordSpacing",0);J(this,"textHScale",1);J(this,"textRenderingMode",oi.FILL);J(this,"textRise",0);J(this,"fillColor","#000000");J(this,"strokeColor","#000000");J(this,"patternFill",!1);J(this,"patternStroke",!1);J(this,"fillAlpha",1);J(this,"strokeAlpha",1);J(this,"lineWidth",1);J(this,"activeSMask",null);J(this,"transferMaps","none");this.clipBox=new Float32Array([0,0,t,i]),this.minMax=pc.slice()}clone(){const t=Object.create(this);return t.clipBox=this.clipBox.slice(),t.minMax=this.minMax.slice(),t}getPathBoundingBox(t=ei.FILL,i=null){const n=this.minMax.slice();if(t===ei.STROKE){i||te("Stroke bounding box must include transform."),ft.singularValueDecompose2dScale(i,rs);const r=rs[0]*this.lineWidth/2,l=rs[1]*this.lineWidth/2;n[0]-=r,n[1]-=l,n[2]+=r,n[3]+=l}return n}updateClipFromPath(){const t=ft.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(t){this.clipBox.set(t,0),this.minMax.set(pc,0)}getClippedPathBoundingBox(t=ei.FILL,i=null){return ft.intersect(this.clipBox,this.getPathBoundingBox(t,i))}}function z_(b,t){if(t instanceof ImageData){b.putImageData(t,0,0);return}const i=t.height,n=t.width,r=i%zi,l=(i-r)/zi,u=r===0?l:l+1,h=b.createImageData(n,zi);let f=0,g;const p=t.data,y=h.data;let v,S,T,x;if(t.kind===tp.GRAYSCALE_1BPP){const M=p.byteLength,R=new Uint32Array(y.buffer,0,y.byteLength>>2),k=R.length,O=n+7>>3,H=4294967295,z=ni.isLittleEndian?4278190080:255;for(v=0;v<u;v++){for(T=v<l?zi:r,g=0,S=0;S<T;S++){const G=M-f;let V=0;const Z=G>O?n:G*8-7,et=Z&-8;let rt=0,st=0;for(;V<et;V+=8)st=p[f++],R[g++]=st&128?H:z,R[g++]=st&64?H:z,R[g++]=st&32?H:z,R[g++]=st&16?H:z,R[g++]=st&8?H:z,R[g++]=st&4?H:z,R[g++]=st&2?H:z,R[g++]=st&1?H:z;for(;V<Z;V++)rt===0&&(st=p[f++],rt=128),R[g++]=st&rt?H:z,rt>>=1}for(;g<k;)R[g++]=0;b.putImageData(h,0,v*zi)}}else if(t.kind===tp.RGBA_32BPP){for(S=0,x=n*zi*4,v=0;v<l;v++)y.set(p.subarray(f,f+x)),f+=x,b.putImageData(h,0,S),S+=zi;v<u&&(x=n*r*4,y.set(p.subarray(f,f+x)),b.putImageData(h,0,S))}else if(t.kind===tp.RGB_24BPP)for(T=zi,x=n*T,v=0;v<u;v++){for(v>=l&&(T=r,x=n*T),g=0,S=x;S--;)y[g++]=p[f++],y[g++]=p[f++],y[g++]=p[f++],y[g++]=255;b.putImageData(h,0,v*zi)}else throw new Error(`bad image kind: ${t.kind}`)}function P_(b,t){if(t.bitmap){b.drawImage(t.bitmap,0,0);return}const i=t.height,n=t.width,r=i%zi,l=(i-r)/zi,u=r===0?l:l+1,h=b.createImageData(n,zi);let f=0;const g=t.data,p=h.data;for(let y=0;y<u;y++){const v=y<l?zi:r;({srcPos:f}=ZC({src:g,srcPos:f,dest:p,width:n,height:v,nonBlackColor:0})),b.putImageData(h,0,y*zi)}}function Th(b,t){const i=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const n of i)b[n]!==void 0&&(t[n]=b[n]);b.setLineDash!==void 0&&(t.setLineDash(b.getLineDash()),t.lineDashOffset=b.lineDashOffset)}function Zg(b){b.strokeStyle=b.fillStyle="#000000",b.fillRule="nonzero",b.globalAlpha=1,b.lineWidth=1,b.lineCap="butt",b.lineJoin="miter",b.miterLimit=10,b.globalCompositeOperation="source-over",b.font="10px sans-serif",b.setLineDash!==void 0&&(b.setLineDash([]),b.lineDashOffset=0);const{filter:t}=b;t!=="none"&&t!==""&&(b.filter="none")}function H_(b,t){if(t)return!0;ft.singularValueDecompose2dScale(b,rs);const i=Math.fround(xn.pixelRatio*Pr.PDF_TO_CSS_UNITS);return rs[0]<=i&&rs[1]<=i}const eM=["butt","round","square"],iM=["miter","round","bevel"],sM={},B_={};var $s,cy,uy,hy;const pv=class pv{constructor(t,i,n,r,l,{optionalContentConfig:u,markedContentStack:h=null},f,g){w(this,$s);this.ctx=t,this.current=new k_(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=i,this.objs=n,this.canvasFactory=r,this.filterFactory=l,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=h||[],this.optionalContentConfig=u,this.cachedCanvases=new tM(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=f,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=g,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(t,i=null){return typeof t=="string"?t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t):i}beginDrawing({transform:t,viewport:i,transparency:n=!1,background:r=null}){const l=this.ctx.canvas.width,u=this.ctx.canvas.height,h=this.ctx.fillStyle;if(this.ctx.fillStyle=r||"#ffffff",this.ctx.fillRect(0,0,l,u),this.ctx.fillStyle=h,n){const f=this.cachedCanvases.getCanvas("transparent",l,u);this.compositeCtx=this.ctx,this.transparentCanvas=f.canvas,this.ctx=f.context,this.ctx.save(),this.ctx.transform(...fe(this.compositeCtx))}this.ctx.save(),Zg(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...i.transform),this.viewportScale=i.scale,this.baseTransform=fe(this.ctx)}executeOperatorList(t,i,n,r){const l=t.argsArray,u=t.fnArray;let h=i||0;const f=l.length;if(f===h)return h;const g=f-h>L_&&typeof n=="function",p=g?Date.now()+WC:0;let y=0;const v=this.commonObjs,S=this.objs;let T;for(;;){if(r!==void 0&&h===r.nextBreakPoint)return r.breakIt(h,n),h;if(T=u[h],T!==Np.dependency)this[T].apply(this,l[h]);else for(const x of l[h]){const M=x.startsWith("g_")?v:S;if(!M.has(x))return M.get(x,n),h}if(h++,h===f)return h;if(g&&++y>L_){if(Date.now()>p)return n(),h;y=0}}}endDrawing(){E(this,$s,cy).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const t of this._cachedBitmapsMap.values()){for(const i of t.values())typeof HTMLCanvasElement<"u"&&i instanceof HTMLCanvasElement&&(i.width=i.height=0);t.clear()}this._cachedBitmapsMap.clear(),E(this,$s,uy).call(this)}_scaleImage(t,i){const n=t.width??t.displayWidth,r=t.height??t.displayHeight;let l=Math.max(Math.hypot(i[0],i[1]),1),u=Math.max(Math.hypot(i[2],i[3]),1),h=n,f=r,g="prescale1",p,y;for(;l>2&&h>1||u>2&&f>1;){let v=h,S=f;l>2&&h>1&&(v=h>=16384?Math.floor(h/2)-1||1:Math.ceil(h/2),l/=h/v),u>2&&f>1&&(S=f>=16384?Math.floor(f/2)-1||1:Math.ceil(f)/2,u/=f/S),p=this.cachedCanvases.getCanvas(g,v,S),y=p.context,y.clearRect(0,0,v,S),y.drawImage(t,0,0,h,f,0,0,v,S),t=p.canvas,h=v,f=S,g=g==="prescale1"?"prescale2":"prescale1"}return{img:t,paintWidth:h,paintHeight:f}}_createMaskCanvas(t){const i=this.ctx,{width:n,height:r}=t,l=this.current.fillColor,u=this.current.patternFill,h=fe(i);let f,g,p,y;if((t.bitmap||t.data)&&t.count>1){const et=t.bitmap||t.data.buffer;g=JSON.stringify(u?h:[h.slice(0,4),l]),f=this._cachedBitmapsMap.get(et),f||(f=new Map,this._cachedBitmapsMap.set(et,f));const rt=f.get(g);if(rt&&!u){const st=Math.round(Math.min(h[0],h[2])+h[4]),vt=Math.round(Math.min(h[1],h[3])+h[5]);return{canvas:rt,offsetX:st,offsetY:vt}}p=rt}p||(y=this.cachedCanvases.getCanvas("maskCanvas",n,r),P_(y.context,t));let v=ft.transform(h,[1/n,0,0,-1/r,0,0]);v=ft.transform(v,[1,0,0,1,0,-r]);const S=pc.slice();ft.axialAlignedBoundingBox([0,0,n,r],v,S);const[T,x,M,R]=S,k=Math.round(M-T)||1,O=Math.round(R-x)||1,H=this.cachedCanvases.getCanvas("fillCanvas",k,O),z=H.context,G=T,V=x;z.translate(-G,-V),z.transform(...v),p||(p=this._scaleImage(y.canvas,sn(z)),p=p.img,f&&u&&f.set(g,p)),z.imageSmoothingEnabled=H_(fe(z),t.interpolate),Qg(z,p,0,0,p.width,p.height,0,0,n,r),z.globalCompositeOperation="source-in";const Z=ft.transform(sn(z),[1,0,0,1,-G,-V]);return z.fillStyle=u?l.getPattern(i,this,Z,ei.FILL):l,z.fillRect(0,0,n,r),f&&!u&&(this.cachedCanvases.delete("fillCanvas"),f.set(g,H.canvas)),{canvas:H.canvas,offsetX:Math.round(G),offsetY:Math.round(V)}}setLineWidth(t){t!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=t,this.ctx.lineWidth=t}setLineCap(t){this.ctx.lineCap=eM[t]}setLineJoin(t){this.ctx.lineJoin=iM[t]}setMiterLimit(t){this.ctx.miterLimit=t}setDash(t,i){const n=this.ctx;n.setLineDash!==void 0&&(n.setLineDash(t),n.lineDashOffset=i)}setRenderingIntent(t){}setFlatness(t){}setGState(t){for(const[i,n]of t)switch(i){case"LW":this.setLineWidth(n);break;case"LC":this.setLineCap(n);break;case"LJ":this.setLineJoin(n);break;case"ML":this.setMiterLimit(n);break;case"D":this.setDash(n[0],n[1]);break;case"RI":this.setRenderingIntent(n);break;case"FL":this.setFlatness(n);break;case"Font":this.setFont(n[0],n[1]);break;case"CA":this.current.strokeAlpha=n;break;case"ca":this.ctx.globalAlpha=this.current.fillAlpha=n;break;case"BM":this.ctx.globalCompositeOperation=n;break;case"SMask":this.current.activeSMask=n?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(n);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const t=this.ctx.canvas.width,i=this.ctx.canvas.height,n="smaskGroupAt"+this.groupLevel,r=this.cachedCanvases.getCanvas(n,t,i);this.suspendedCtx=this.ctx;const l=this.ctx=r.context;l.setTransform(this.suspendedCtx.getTransform()),Th(this.suspendedCtx,l),JC(l,this.suspendedCtx),this.setGState([["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Th(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const i=this.current.activeSMask,n=this.suspendedCtx;this.composeSMask(n,i,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(t,i,n,r){const l=r[0],u=r[1],h=r[2]-l,f=r[3]-u;h===0||f===0||(this.genericComposeSMask(i.context,n,h,f,i.subtype,i.backdrop,i.transferMap,l,u,i.offsetX,i.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(n.canvas,0,0),t.restore())}genericComposeSMask(t,i,n,r,l,u,h,f,g,p,y){let v=t.canvas,S=f-p,T=g-y;if(u)if(S<0||T<0||S+n>v.width||T+r>v.height){const M=this.cachedCanvases.getCanvas("maskExtension",n,r),R=M.context;R.drawImage(v,-S,-T),R.globalCompositeOperation="destination-atop",R.fillStyle=u,R.fillRect(0,0,n,r),R.globalCompositeOperation="source-over",v=M.canvas,S=T=0}else{t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0);const M=new Path2D;M.rect(S,T,n,r),t.clip(M),t.globalCompositeOperation="destination-atop",t.fillStyle=u,t.fillRect(S,T,n,r),t.restore()}i.save(),i.globalAlpha=1,i.setTransform(1,0,0,1,0,0),l==="Alpha"&&h?i.filter=this.filterFactory.addAlphaFilter(h):l==="Luminosity"&&(i.filter=this.filterFactory.addLuminosityFilter(h));const x=new Path2D;x.rect(f,g,n,r),i.clip(x),i.globalCompositeOperation="destination-in",i.drawImage(v,S,T,n,r,f,g,n,r),i.restore()}save(){this.inSMaskMode&&Th(this.ctx,this.suspendedCtx),this.ctx.save();const t=this.current;this.stateStack.push(t),this.current=t.clone()}restore(){if(this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&Th(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(t,i,n,r,l,u){this.ctx.transform(t,i,n,r,l,u),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(t,i,n){let[r]=i;if(!n){r||(r=i[0]=new Path2D),this[t](r);return}if(!(r instanceof Path2D)){const l=i[0]=new Path2D;for(let u=0,h=r.length;u<h;)switch(r[u++]){case Yg.moveTo:l.moveTo(r[u++],r[u++]);break;case Yg.lineTo:l.lineTo(r[u++],r[u++]);break;case Yg.curveTo:l.bezierCurveTo(r[u++],r[u++],r[u++],r[u++],r[u++],r[u++]);break;case Yg.closePath:l.closePath();break;default:_t(`Unrecognized drawing path operator: ${r[u-1]}`);break}r=l}ft.axialAlignedBoundingBox(n,fe(this.ctx),this.current.minMax),this[t](r)}closePath(){this.ctx.closePath()}stroke(t,i=!0){const n=this.ctx,r=this.current.strokeColor;if(n.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof r=="object"&&(r!=null&&r.getPattern)){const l=r.isModifyingCurrentTransform()?n.getTransform():null;if(n.save(),n.strokeStyle=r.getPattern(n,this,sn(n),ei.STROKE),l){const u=new Path2D;u.addPath(t,n.getTransform().invertSelf().multiplySelf(l)),t=u}this.rescaleAndStroke(t,!1),n.restore()}else this.rescaleAndStroke(t,!0);i&&this.consumePath(t,this.current.getClippedPathBoundingBox(ei.STROKE,fe(this.ctx))),n.globalAlpha=this.current.fillAlpha}closeStroke(t){this.stroke(t)}fill(t,i=!0){const n=this.ctx,r=this.current.fillColor,l=this.current.patternFill;let u=!1;if(l){const f=r.isModifyingCurrentTransform()?n.getTransform():null;if(n.save(),n.fillStyle=r.getPattern(n,this,sn(n),ei.FILL),f){const g=new Path2D;g.addPath(t,n.getTransform().invertSelf().multiplySelf(f)),t=g}u=!0}const h=this.current.getClippedPathBoundingBox();this.contentVisible&&h!==null&&(this.pendingEOFill?(n.fill(t,"evenodd"),this.pendingEOFill=!1):n.fill(t)),u&&n.restore(),i&&this.consumePath(t,h)}eoFill(t){this.pendingEOFill=!0,this.fill(t)}fillStroke(t){this.fill(t,!1),this.stroke(t,!1),this.consumePath(t)}eoFillStroke(t){this.pendingEOFill=!0,this.fillStroke(t)}closeFillStroke(t){this.fillStroke(t)}closeEOFillStroke(t){this.pendingEOFill=!0,this.fillStroke(t)}endPath(t){this.consumePath(t)}rawFillPath(t){this.ctx.fill(t)}clip(){this.pendingClip=sM}eoClip(){this.pendingClip=B_}beginText(){this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const t=this.pendingTextPaths,i=this.ctx;if(t===void 0)return;const n=new Path2D,r=i.getTransform().invertSelf();for(const{transform:l,x:u,y:h,fontSize:f,path:g}of t)n.addPath(g,new DOMMatrix(l).preMultiplySelf(r).translate(u,h).scale(f,-f));i.clip(n),delete this.pendingTextPaths}setCharSpacing(t){this.current.charSpacing=t}setWordSpacing(t){this.current.wordSpacing=t}setHScale(t){this.current.textHScale=t/100}setLeading(t){this.current.leading=-t}setFont(t,i){var p;const n=this.commonObjs.get(t),r=this.current;if(!n)throw new Error(`Can't find font for ${t}`);if(r.fontMatrix=n.fontMatrix||Hb,(r.fontMatrix[0]===0||r.fontMatrix[3]===0)&&_t("Invalid font matrix for font "+t),i<0?(i=-i,r.fontDirection=-1):r.fontDirection=1,this.current.font=n,this.current.fontSize=i,n.isType3Font)return;const l=n.loadedName||"sans-serif",u=((p=n.systemFontInfo)==null?void 0:p.css)||`"${l}", ${n.fallbackName}`;let h="normal";n.black?h="900":n.bold&&(h="bold");const f=n.italic?"italic":"normal";let g=i;i<N_?g=N_:i>O_&&(g=O_),this.current.fontSizeScale=i/g,this.ctx.font=`${f} ${h} ${g}px ${u}`}setTextRenderingMode(t){this.current.textRenderingMode=t}setTextRise(t){this.current.textRise=t}moveText(t,i){this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=i}setLeadingMoveText(t,i){this.setLeading(-i),this.moveText(t,i)}setTextMatrix(t){const{current:i}=this;i.textMatrix=t,i.textMatrixScale=Math.hypot(t[0],t[1]),i.x=i.lineX=0,i.y=i.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(t,i,n,r,l){const u=this.ctx,h=this.current,f=h.font,g=h.textRenderingMode,p=h.fontSize/h.fontSizeScale,y=g&oi.FILL_STROKE_MASK,v=!!(g&oi.ADD_TO_PATH_FLAG),S=h.patternFill&&!f.missingFile,T=h.patternStroke&&!f.missingFile;let x;if((f.disableFontFace||v||S||T)&&(x=f.getPathGenerator(this.commonObjs,t)),f.disableFontFace||S||T){u.save(),u.translate(i,n),u.scale(p,-p);let M;if((y===oi.FILL||y===oi.FILL_STROKE)&&(r?(M=u.getTransform(),u.setTransform(...r),u.fill(E(this,$s,hy).call(this,x,M,r))):u.fill(x)),y===oi.STROKE||y===oi.FILL_STROKE)if(l){M||(M=u.getTransform()),u.setTransform(...l);const{a:R,b:k,c:O,d:H}=M,z=ft.inverseTransform(l),G=ft.transform([R,k,O,H,0,0],z);ft.singularValueDecompose2dScale(G,rs),u.lineWidth*=Math.max(rs[0],rs[1])/p,u.stroke(E(this,$s,hy).call(this,x,M,l))}else u.lineWidth/=p,u.stroke(x);u.restore()}else(y===oi.FILL||y===oi.FILL_STROKE)&&u.fillText(t,i,n),(y===oi.STROKE||y===oi.FILL_STROKE)&&u.strokeText(t,i,n);v&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:fe(u),x:i,y:n,fontSize:p,path:x})}get isFontSubpixelAAEnabled(){const{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);const i=t.getImageData(0,0,10,10).data;let n=!1;for(let r=3;r<i.length;r+=4)if(i[r]>0&&i[r]<255){n=!0;break}return zt(this,"isFontSubpixelAAEnabled",n)}showText(t){const i=this.current,n=i.font;if(n.isType3Font)return this.showType3Text(t);const r=i.fontSize;if(r===0)return;const l=this.ctx,u=i.fontSizeScale,h=i.charSpacing,f=i.wordSpacing,g=i.fontDirection,p=i.textHScale*g,y=t.length,v=n.vertical,S=v?1:-1,T=n.defaultVMetrics,x=r*i.fontMatrix[0],M=i.textRenderingMode===oi.FILL&&!n.disableFontFace&&!i.patternFill;l.save(),i.textMatrix&&l.transform(...i.textMatrix),l.translate(i.x,i.y+i.textRise),g>0?l.scale(p,-1):l.scale(p,1);let R,k;if(i.patternFill){l.save();const V=i.fillColor.getPattern(l,this,sn(l),ei.FILL);R=fe(l),l.restore(),l.fillStyle=V}if(i.patternStroke){l.save();const V=i.strokeColor.getPattern(l,this,sn(l),ei.STROKE);k=fe(l),l.restore(),l.strokeStyle=V}let O=i.lineWidth;const H=i.textMatrixScale;if(H===0||O===0){const V=i.textRenderingMode&oi.FILL_STROKE_MASK;(V===oi.STROKE||V===oi.FILL_STROKE)&&(O=this.getSinglePixelWidth())}else O/=H;if(u!==1&&(l.scale(u,u),O/=u),l.lineWidth=O,n.isInvalidPDFjsFont){const V=[];let Z=0;for(const et of t)V.push(et.unicode),Z+=et.width;l.fillText(V.join(""),0,0),i.x+=Z*x*p,l.restore(),this.compose();return}let z=0,G;for(G=0;G<y;++G){const V=t[G];if(typeof V=="number"){z+=S*V*r/1e3;continue}let Z=!1;const et=(V.isSpace?f:0)+h,rt=V.fontChar,st=V.accent;let vt,Lt,At=V.width;if(v){const B=V.vmetric||T,X=-(V.vmetric?B[1]:At*.5)*x,ct=B[2]*x;At=B?-B[0]:At,vt=X/u,Lt=(z+ct)/u}else vt=z/u,Lt=0;if(n.remeasure&&At>0){const B=l.measureText(rt).width*1e3/r*u;if(At<B&&this.isFontSubpixelAAEnabled){const X=At/B;Z=!0,l.save(),l.scale(X,1),vt/=X}else At!==B&&(vt+=(At-B)/2e3*r/u)}if(this.contentVisible&&(V.isInFont||n.missingFile)){if(M&&!st)l.fillText(rt,vt,Lt);else if(this.paintChar(rt,vt,Lt,R,k),st){const B=vt+r*st.offset.x/u,X=Lt-r*st.offset.y/u;this.paintChar(st.fontChar,B,X,R,k)}}const Ft=v?At*x-et*g:At*x+et*g;z+=Ft,Z&&l.restore()}v?i.y-=z:i.x+=z*p,l.restore(),this.compose()}showType3Text(t){const i=this.ctx,n=this.current,r=n.font,l=n.fontSize,u=n.fontDirection,h=r.vertical?1:-1,f=n.charSpacing,g=n.wordSpacing,p=n.textHScale*u,y=n.fontMatrix||Hb,v=t.length,S=n.textRenderingMode===oi.INVISIBLE;let T,x,M,R;if(!(S||l===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,i.save(),n.textMatrix&&i.transform(...n.textMatrix),i.translate(n.x,n.y+n.textRise),i.scale(p,u),T=0;T<v;++T){if(x=t[T],typeof x=="number"){R=h*x*l/1e3,this.ctx.translate(R,0),n.x+=R*p;continue}const k=(x.isSpace?g:0)+f,O=r.charProcOperatorList[x.operatorListId];O?this.contentVisible&&(this.save(),i.scale(l,l),i.transform(...y),this.executeOperatorList(O),this.restore()):_t(`Type3 character "${x.operatorListId}" is not available.`);const H=[x.width,0];ft.applyTransform(H,y),M=H[0]*l+k,i.translate(M,0),n.x+=M*p}i.restore()}}setCharWidth(t,i){}setCharWidthAndBounds(t,i,n,r,l,u){const h=new Path2D;h.rect(n,r,l-n,u-r),this.ctx.clip(h),this.endPath()}getColorN_Pattern(t){let i;if(t[0]==="TilingPattern"){const n=this.baseTransform||fe(this.ctx),r={createCanvasGraphics:l=>new pv(l,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};i=new oy(t,this.ctx,r,n)}else i=this._getPattern(t[1],t[2]);return i}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments),this.current.patternStroke=!0}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(t){this.ctx.strokeStyle=this.current.strokeColor=t,this.current.patternStroke=!1}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(t){this.ctx.fillStyle=this.current.fillColor=t,this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(t,i=null){let n;return this.cachedPatterns.has(t)?n=this.cachedPatterns.get(t):(n=QC(this.getObject(t)),this.cachedPatterns.set(t,n)),i&&(n.matrix=i),n}shadingFill(t){if(!this.contentVisible)return;const i=this.ctx;this.save();const n=this._getPattern(t);i.fillStyle=n.getPattern(i,this,sn(i),ei.SHADING);const r=sn(i);if(r){const{width:l,height:u}=i.canvas,h=pc.slice();ft.axialAlignedBoundingBox([0,0,l,u],r,h);const[f,g,p,y]=h;this.ctx.fillRect(f,g,p-f,y-g)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){te("Should not call beginInlineImage")}beginImageData(){te("Should not call beginImageData")}paintFormXObjectBegin(t,i){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),t&&this.transform(...t),this.baseTransform=fe(this.ctx),i)){ft.axialAlignedBoundingBox(i,this.baseTransform,this.current.minMax);const[n,r,l,u]=i,h=new Path2D;h.rect(n,r,l-n,u-r),this.ctx.clip(h),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const i=this.ctx;t.isolated||lm("TODO: Support non-isolated groups."),t.knockout&&_t("Knockout groups not supported.");const n=fe(i);if(t.matrix&&i.transform(...t.matrix),!t.bbox)throw new Error("Bounding box is required.");let r=pc.slice();ft.axialAlignedBoundingBox(t.bbox,fe(i),r);const l=[0,0,i.canvas.width,i.canvas.height];r=ft.intersect(r,l)||[0,0,0,0];const u=Math.floor(r[0]),h=Math.floor(r[1]),f=Math.max(Math.ceil(r[2])-u,1),g=Math.max(Math.ceil(r[3])-h,1);this.current.startNewPathAndClipBox([0,0,f,g]);let p="groupAt"+this.groupLevel;t.smask&&(p+="_smask_"+this.smaskCounter++%2);const y=this.cachedCanvases.getCanvas(p,f,g),v=y.context;v.translate(-u,-h),v.transform(...n);let S=new Path2D;const[T,x,M,R]=t.bbox;if(S.rect(T,x,M-T,R-x),t.matrix){const k=new Path2D;k.addPath(S,new DOMMatrix(t.matrix)),S=k}v.clip(S),t.smask?this.smaskStack.push({canvas:y.canvas,context:v,offsetX:u,offsetY:h,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}):(i.setTransform(1,0,0,1,0,0),i.translate(u,h),i.save()),Th(i,v),this.ctx=v,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(i),this.groupLevel++}endGroup(t){if(!this.contentVisible)return;this.groupLevel--;const i=this.ctx,n=this.groupStack.pop();if(this.ctx=n,this.ctx.imageSmoothingEnabled=!1,t.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const r=fe(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...r);const l=pc.slice();ft.axialAlignedBoundingBox([0,0,i.canvas.width,i.canvas.height],r,l),this.ctx.drawImage(i.canvas,0,0),this.ctx.restore(),this.compose(l)}}beginAnnotation(t,i,n,r,l){if(E(this,$s,cy).call(this),Zg(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),i){const u=i[2]-i[0],h=i[3]-i[1];if(l&&this.annotationCanvasMap){n=n.slice(),n[4]-=i[0],n[5]-=i[1],i=i.slice(),i[0]=i[1]=0,i[2]=u,i[3]=h,ft.singularValueDecompose2dScale(fe(this.ctx),rs);const{viewportScale:f}=this,g=Math.ceil(u*this.outputScaleX*f),p=Math.ceil(h*this.outputScaleY*f);this.annotationCanvas=this.canvasFactory.create(g,p);const{canvas:y,context:v}=this.annotationCanvas;this.annotationCanvasMap.set(t,y),this.annotationCanvas.savedCtx=this.ctx,this.ctx=v,this.ctx.save(),this.ctx.setTransform(rs[0],0,0,-rs[1],0,h*rs[1]),Zg(this.ctx)}else{Zg(this.ctx),this.endPath();const f=new Path2D;f.rect(i[0],i[1],u,h),this.ctx.clip(f)}}this.current=new k_(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...n),this.transform(...r)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),E(this,$s,uy).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t){if(!this.contentVisible)return;const i=t.count;t=this.getObject(t.data,t),t.count=i;const n=this.ctx,r=this._createMaskCanvas(t),l=r.canvas;n.save(),n.setTransform(1,0,0,1,0,0),n.drawImage(l,r.offsetX,r.offsetY),n.restore(),this.compose()}paintImageMaskXObjectRepeat(t,i,n=0,r=0,l,u){if(!this.contentVisible)return;t=this.getObject(t.data,t);const h=this.ctx;h.save();const f=fe(h);h.transform(i,n,r,l,0,0);const g=this._createMaskCanvas(t);h.setTransform(1,0,0,1,g.offsetX-f[4],g.offsetY-f[5]);for(let p=0,y=u.length;p<y;p+=2){const v=ft.transform(f,[i,n,r,l,u[p],u[p+1]]);h.drawImage(g.canvas,v[4],v[5])}h.restore(),this.compose()}paintImageMaskXObjectGroup(t){if(!this.contentVisible)return;const i=this.ctx,n=this.current.fillColor,r=this.current.patternFill;for(const l of t){const{data:u,width:h,height:f,transform:g}=l,p=this.cachedCanvases.getCanvas("maskCanvas",h,f),y=p.context;y.save();const v=this.getObject(u,l);P_(y,v),y.globalCompositeOperation="source-in",y.fillStyle=r?n.getPattern(y,this,sn(i),ei.FILL):n,y.fillRect(0,0,h,f),y.restore(),i.save(),i.transform(...g),i.scale(1,-1),Qg(i,p.canvas,0,0,h,f,0,-1,1,1),i.restore()}this.compose()}paintImageXObject(t){if(!this.contentVisible)return;const i=this.getObject(t);if(!i){_t("Dependent image isn't ready yet");return}this.paintInlineImageXObject(i)}paintImageXObjectRepeat(t,i,n,r){if(!this.contentVisible)return;const l=this.getObject(t);if(!l){_t("Dependent image isn't ready yet");return}const u=l.width,h=l.height,f=[];for(let g=0,p=r.length;g<p;g+=2)f.push({transform:[i,0,0,n,r[g],r[g+1]],x:0,y:0,w:u,h});this.paintInlineImageXObjectGroup(l,f)}applyTransferMapsToCanvas(t){return this.current.transferMaps!=="none"&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}applyTransferMapsToBitmap(t){if(this.current.transferMaps==="none")return t.bitmap;const{bitmap:i,width:n,height:r}=t,l=this.cachedCanvases.getCanvas("inlineImage",n,r),u=l.context;return u.filter=this.current.transferMaps,u.drawImage(i,0,0),u.filter="none",l.canvas}paintInlineImageXObject(t){if(!this.contentVisible)return;const i=t.width,n=t.height,r=this.ctx;this.save();const{filter:l}=r;l!=="none"&&l!==""&&(r.filter="none"),r.scale(1/i,-1/n);let u;if(t.bitmap)u=this.applyTransferMapsToBitmap(t);else if(typeof HTMLElement=="function"&&t instanceof HTMLElement||!t.data)u=t;else{const g=this.cachedCanvases.getCanvas("inlineImage",i,n).context;z_(g,t),u=this.applyTransferMapsToCanvas(g)}const h=this._scaleImage(u,sn(r));r.imageSmoothingEnabled=H_(fe(r),t.interpolate),Qg(r,h.img,0,0,h.paintWidth,h.paintHeight,0,-n,i,n),this.compose(),this.restore()}paintInlineImageXObjectGroup(t,i){if(!this.contentVisible)return;const n=this.ctx;let r;if(t.bitmap)r=t.bitmap;else{const l=t.width,u=t.height,f=this.cachedCanvases.getCanvas("inlineImage",l,u).context;z_(f,t),r=this.applyTransferMapsToCanvas(f)}for(const l of i)n.save(),n.transform(...l.transform),n.scale(1,-1),Qg(n,r,l.x,l.y,l.w,l.h,0,-1,1,1),n.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t){}markPointProps(t,i){}beginMarkedContent(t){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,i){t==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(i)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(t,i){const n=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(i);const r=this.ctx;this.pendingClip&&(n||(this.pendingClip===B_?r.clip(t,"evenodd"):r.clip(t)),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const t=fe(this.ctx);if(t[1]===0&&t[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{const i=Math.abs(t[0]*t[3]-t[2]*t[1]),n=Math.hypot(t[0],t[2]),r=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(n,r)/i}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:t}=this.current,{a:i,b:n,c:r,d:l}=this.ctx.getTransform();let u,h;if(n===0&&r===0){const f=Math.abs(i),g=Math.abs(l);if(f===g)if(t===0)u=h=1/f;else{const p=f*t;u=h=p<1?1/p:1}else if(t===0)u=1/f,h=1/g;else{const p=f*t,y=g*t;u=p<1?1/p:1,h=y<1?1/y:1}}else{const f=Math.abs(i*l-n*r),g=Math.hypot(i,n),p=Math.hypot(r,l);if(t===0)u=p/f,h=g/f;else{const y=t*f;u=p>y?p/y:1,h=g>y?g/y:1}}this._cachedScaleForStroking[0]=u,this._cachedScaleForStroking[1]=h}return this._cachedScaleForStroking}rescaleAndStroke(t,i){const{ctx:n,current:{lineWidth:r}}=this,[l,u]=this.getScaleForStroking();if(l===u){n.lineWidth=(r||1)*l,n.stroke(t);return}const h=n.getLineDash();i&&n.save(),n.scale(l,u),kb.a=1/l,kb.d=1/u;const f=new Path2D;if(f.addPath(t,kb),h.length>0){const g=Math.max(l,u);n.setLineDash(h.map(p=>p/g)),n.lineDashOffset/=g}n.lineWidth=r||1,n.stroke(f),i&&n.restore()}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}};$s=new WeakSet,cy=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},uy=function(){if(this.pageColors){const t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(t!=="none"){const i=this.ctx.filter;this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=i}}},hy=function(t,i,n){const r=new Path2D;return r.addPath(t,new DOMMatrix(n).invertSelf().multiplySelf(i)),r};let yc=pv;for(const b in Np)yc.prototype[b]!==void 0&&(yc.prototype[Np[b]]=yc.prototype[b]);var wd,Ed;class _n{static get workerPort(){return c(this,wd)}static set workerPort(t){if(!(typeof Worker<"u"&&t instanceof Worker)&&t!==null)throw new Error("Invalid `workerPort` type.");A(this,wd,t)}static get workerSrc(){return c(this,Ed)}static set workerSrc(t){if(typeof t!="string")throw new Error("Invalid `workerSrc` type.");A(this,Ed,t)}}wd=new WeakMap,Ed=new WeakMap,w(_n,wd,null),w(_n,Ed,"");var Hc,Td;class nM{constructor({parsedData:t,rawData:i}){w(this,Hc);w(this,Td);A(this,Hc,t),A(this,Td,i)}getRaw(){return c(this,Td)}get(t){return c(this,Hc).get(t)??null}[Symbol.iterator](){return c(this,Hc).entries()}}Hc=new WeakMap,Td=new WeakMap;const dc=Symbol("INTERNAL");var Cd,Md,Rd,Bc;class aM{constructor(t,{name:i,intent:n,usage:r,rbGroups:l}){w(this,Cd,!1);w(this,Md,!1);w(this,Rd,!1);w(this,Bc,!0);A(this,Cd,!!(t&as.DISPLAY)),A(this,Md,!!(t&as.PRINT)),this.name=i,this.intent=n,this.usage=r,this.rbGroups=l}get visible(){if(c(this,Rd))return c(this,Bc);if(!c(this,Bc))return!1;const{print:t,view:i}=this.usage;return c(this,Cd)?(i==null?void 0:i.viewState)!=="OFF":c(this,Md)?(t==null?void 0:t.printState)!=="OFF":!0}_setVisible(t,i,n=!1){t!==dc&&te("Internal method `_setVisible` called."),A(this,Rd,n),A(this,Bc,i)}}Cd=new WeakMap,Md=new WeakMap,Rd=new WeakMap,Bc=new WeakMap;var fr,Wt,Ic,Fc,Dd,dy;class rM{constructor(t,i=as.DISPLAY){w(this,Dd);w(this,fr,null);w(this,Wt,new Map);w(this,Ic,null);w(this,Fc,null);if(this.renderingIntent=i,this.name=null,this.creator=null,t!==null){this.name=t.name,this.creator=t.creator,A(this,Fc,t.order);for(const n of t.groups)c(this,Wt).set(n.id,new aM(i,n));if(t.baseState==="OFF")for(const n of c(this,Wt).values())n._setVisible(dc,!1);for(const n of t.on)c(this,Wt).get(n)._setVisible(dc,!0);for(const n of t.off)c(this,Wt).get(n)._setVisible(dc,!1);A(this,Ic,this.getHash())}}isVisible(t){if(c(this,Wt).size===0)return!0;if(!t)return lm("Optional content group not defined."),!0;if(t.type==="OCG")return c(this,Wt).has(t.id)?c(this,Wt).get(t.id).visible:(_t(`Optional content group not found: ${t.id}`),!0);if(t.type==="OCMD"){if(t.expression)return E(this,Dd,dy).call(this,t.expression);if(!t.policy||t.policy==="AnyOn"){for(const i of t.ids){if(!c(this,Wt).has(i))return _t(`Optional content group not found: ${i}`),!0;if(c(this,Wt).get(i).visible)return!0}return!1}else if(t.policy==="AllOn"){for(const i of t.ids){if(!c(this,Wt).has(i))return _t(`Optional content group not found: ${i}`),!0;if(!c(this,Wt).get(i).visible)return!1}return!0}else if(t.policy==="AnyOff"){for(const i of t.ids){if(!c(this,Wt).has(i))return _t(`Optional content group not found: ${i}`),!0;if(!c(this,Wt).get(i).visible)return!0}return!1}else if(t.policy==="AllOff"){for(const i of t.ids){if(!c(this,Wt).has(i))return _t(`Optional content group not found: ${i}`),!0;if(c(this,Wt).get(i).visible)return!1}return!0}return _t(`Unknown optional content policy ${t.policy}.`),!0}return _t(`Unknown group type ${t.type}.`),!0}setVisibility(t,i=!0,n=!0){var l;const r=c(this,Wt).get(t);if(!r){_t(`Optional content group not found: ${t}`);return}if(n&&i&&r.rbGroups.length)for(const u of r.rbGroups)for(const h of u)h!==t&&((l=c(this,Wt).get(h))==null||l._setVisible(dc,!1,!0));r._setVisible(dc,!!i,!0),A(this,fr,null)}setOCGState({state:t,preserveRB:i}){let n;for(const r of t){switch(r){case"ON":case"OFF":case"Toggle":n=r;continue}const l=c(this,Wt).get(r);if(l)switch(n){case"ON":this.setVisibility(r,!0,i);break;case"OFF":this.setVisibility(r,!1,i);break;case"Toggle":this.setVisibility(r,!l.visible,i);break}}A(this,fr,null)}get hasInitialVisibility(){return c(this,Ic)===null||this.getHash()===c(this,Ic)}getOrder(){return c(this,Wt).size?c(this,Fc)?c(this,Fc).slice():[...c(this,Wt).keys()]:null}getGroup(t){return c(this,Wt).get(t)||null}getHash(){if(c(this,fr)!==null)return c(this,fr);const t=new Dx;for(const[i,n]of c(this,Wt))t.update(`${i}:${n.visible}`);return A(this,fr,t.hexdigest())}[Symbol.iterator](){return c(this,Wt).entries()}}fr=new WeakMap,Wt=new WeakMap,Ic=new WeakMap,Fc=new WeakMap,Dd=new WeakSet,dy=function(t){const i=t.length;if(i<2)return!0;const n=t[0];for(let r=1;r<i;r++){const l=t[r];let u;if(Array.isArray(l))u=E(this,Dd,dy).call(this,l);else if(c(this,Wt).has(l))u=c(this,Wt).get(l).visible;else return _t(`Optional content group not found: ${l}`),!0;switch(n){case"And":if(!u)return!1;break;case"Or":if(u)return!0;break;case"Not":return!u;default:return!0}}return n==="And"};class lM{constructor(t,{disableRange:i=!1,disableStream:n=!1}){Ce(t,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:r,initialData:l,progressiveDone:u,contentDispositionFilename:h}=t;if(this._queuedChunks=[],this._progressiveDone=u,this._contentDispositionFilename=h,(l==null?void 0:l.length)>0){const f=l instanceof Uint8Array&&l.byteLength===l.buffer.byteLength?l.buffer:new Uint8Array(l).buffer;this._queuedChunks.push(f)}this._pdfDataRangeTransport=t,this._isStreamingSupported=!n,this._isRangeSupported=!i,this._contentLength=r,this._fullRequestReader=null,this._rangeReaders=[],t.addRangeListener((f,g)=>{this._onReceiveData({begin:f,chunk:g})}),t.addProgressListener((f,g)=>{this._onProgress({loaded:f,total:g})}),t.addProgressiveReadListener(f=>{this._onReceiveData({chunk:f})}),t.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),t.transportReady()}_onReceiveData({begin:t,chunk:i}){const n=i instanceof Uint8Array&&i.byteLength===i.buffer.byteLength?i.buffer:new Uint8Array(i).buffer;if(t===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(n):this._queuedChunks.push(n);else{const r=this._rangeReaders.some(function(l){return l._begin!==t?!1:(l._enqueue(n),!0)});Ce(r,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}_onProgress(t){var i,n,r,l;t.total===void 0?(n=(i=this._rangeReaders[0])==null?void 0:i.onProgress)==null||n.call(i,{loaded:t.loaded}):(l=(r=this._fullRequestReader)==null?void 0:r.onProgress)==null||l.call(r,{loaded:t.loaded,total:t.total})}_onProgressiveDone(){var t;(t=this._fullRequestReader)==null||t.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(t){const i=this._rangeReaders.indexOf(t);i>=0&&this._rangeReaders.splice(i,1)}getFullReader(){Ce(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const t=this._queuedChunks;return this._queuedChunks=null,new oM(this,t,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(t,i){if(i<=this._progressiveDataLength)return null;const n=new cM(this,t,i);return this._pdfDataRangeTransport.requestDataRange(t,i),this._rangeReaders.push(n),n}cancelAllRequests(t){var i;(i=this._fullRequestReader)==null||i.cancel(t);for(const n of this._rangeReaders.slice(0))n.cancel(t);this._pdfDataRangeTransport.abort()}}class oM{constructor(t,i,n=!1,r=null){this._stream=t,this._done=n||!1,this._filename=nv(r)?r:null,this._queuedChunks=i||[],this._loaded=0;for(const l of this._queuedChunks)this._loaded+=l.byteLength;this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}_enqueue(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class cM{constructor(t,i,n){this._stream=t,this._begin=i,this._end=n,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(t){if(!this._done){if(this._requests.length===0)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const i=this._queuedChunk;return this._queuedChunk=null,{value:i,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function uM(b){let t=!0,i=n("filename\\*","i").exec(b);if(i){i=i[1];let p=h(i);return p=unescape(p),p=f(p),p=g(p),l(p)}if(i=u(b),i){const p=g(i);return l(p)}if(i=n("filename","i").exec(b),i){i=i[1];let p=h(i);return p=g(p),l(p)}function n(p,y){return new RegExp("(?:^|;)\\s*"+p+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',y)}function r(p,y){if(p){if(!/^[\x00-\xFF]+$/.test(y))return y;try{const v=new TextDecoder(p,{fatal:!0}),S=Tf(y);y=v.decode(S),t=!1}catch{}}return y}function l(p){return t&&/[\x80-\xff]/.test(p)&&(p=r("utf-8",p),t&&(p=r("iso-8859-1",p))),p}function u(p){const y=[];let v;const S=n("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(v=S.exec(p))!==null;){let[,x,M,R]=v;if(x=parseInt(x,10),x in y){if(x===0)break;continue}y[x]=[M,R]}const T=[];for(let x=0;x<y.length&&x in y;++x){let[M,R]=y[x];R=h(R),M&&(R=unescape(R),x===0&&(R=f(R))),T.push(R)}return T.join("")}function h(p){if(p.startsWith('"')){const y=p.slice(1).split('\\"');for(let v=0;v<y.length;++v){const S=y[v].indexOf('"');S!==-1&&(y[v]=y[v].slice(0,S),y.length=v+1),y[v]=y[v].replaceAll(/\\(.)/g,"$1")}p=y.join('"')}return p}function f(p){const y=p.indexOf("'");if(y===-1)return p;const v=p.slice(0,y),T=p.slice(y+1).replace(/^[^']*'/,"");return r(v,T)}function g(p){return!p.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(p)?p:p.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(y,v,S,T){if(S==="q"||S==="Q")return T=T.replaceAll("_"," "),T=T.replaceAll(/=([0-9a-fA-F]{2})/g,function(x,M){return String.fromCharCode(parseInt(M,16))}),r(v,T);try{T=atob(T)}catch{}return r(v,T)})}return""}function jx(b,t){const i=new Headers;if(!b||!t||typeof t!="object")return i;for(const n in t){const r=t[n];r!==void 0&&i.append(n,r)}return i}function cm(b){var t;return((t=URL.parse(b))==null?void 0:t.origin)??null}function Gx({responseHeaders:b,isHttp:t,rangeChunkSize:i,disableRange:n}){const r={allowRangeRequests:!1,suggestedLength:void 0},l=parseInt(b.get("Content-Length"),10);return!Number.isInteger(l)||(r.suggestedLength=l,l<=2*i)||n||!t||b.get("Accept-Ranges")!=="bytes"||(b.get("Content-Encoding")||"identity")!=="identity"||(r.allowRangeRequests=!0),r}function qx(b){const t=b.get("Content-Disposition");if(t){let i=uM(t);if(i.includes("%"))try{i=decodeURIComponent(i)}catch{}if(nv(i))return i}return null}function Df(b,t){return new Op(`Unexpected server response (${b}) while retrieving PDF "${t}".`,b,b===404||b===0&&t.startsWith("file:"))}function Vx(b){return b===200||b===206}function Xx(b,t,i){return{method:"GET",headers:b,signal:i.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function Yx(b){return b instanceof Uint8Array?b.buffer:b instanceof ArrayBuffer?b:(_t(`getArrayBuffer - unexpected data format: ${b}`),new Uint8Array(b).buffer)}class hM{constructor(t){J(this,"_responseOrigin",null);this.source=t,this.isHttp=/^https?:/i.test(t.url),this.headers=jx(this.isHttp,t.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}getFullReader(){return Ce(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new dM(this),this._fullRequestReader}getRangeReader(t,i){if(i<=this._progressiveDataLength)return null;const n=new fM(this,t,i);return this._rangeRequestReaders.push(n),n}cancelAllRequests(t){var i;(i=this._fullRequestReader)==null||i.cancel(t);for(const n of this._rangeRequestReaders.slice(0))n.cancel(t)}}class dM{constructor(t){this._stream=t,this._reader=null,this._loaded=0,this._filename=null;const i=t.source;this._withCredentials=i.withCredentials||!1,this._contentLength=i.length,this._headersCapability=Promise.withResolvers(),this._disableRange=i.disableRange||!1,this._rangeChunkSize=i.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!i.disableStream,this._isRangeSupported=!i.disableRange;const n=new Headers(t.headers),r=i.url;fetch(r,Xx(n,this._withCredentials,this._abortController)).then(l=>{if(t._responseOrigin=cm(l.url),!Vx(l.status))throw Df(l.status,r);this._reader=l.body.getReader(),this._headersCapability.resolve();const u=l.headers,{allowRangeRequests:h,suggestedLength:f}=Gx({responseHeaders:u,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=h,this._contentLength=f||this._contentLength,this._filename=qx(u),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new zr("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;await this._headersCapability.promise;const{value:t,done:i}=await this._reader.read();return i?{value:t,done:i}:(this._loaded+=t.byteLength,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded,total:this._contentLength}),{value:Yx(t),done:!1})}cancel(t){var i;(i=this._reader)==null||i.cancel(t),this._abortController.abort()}}class fM{constructor(t,i,n){this._stream=t,this._reader=null,this._loaded=0;const r=t.source;this._withCredentials=r.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!r.disableStream,this._abortController=new AbortController;const l=new Headers(t.headers);l.append("Range",`bytes=${i}-${n-1}`);const u=r.url;fetch(u,Xx(l,this._withCredentials,this._abortController)).then(h=>{const f=cm(h.url);if(f!==t._responseOrigin)throw new Error(`Expected range response-origin "${f}" to match "${t._responseOrigin}".`);if(!Vx(h.status))throw Df(h.status,u);this._readCapability.resolve(),this._reader=h.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;await this._readCapability.promise;const{value:t,done:i}=await this._reader.read();return i?{value:t,done:i}:(this._loaded+=t.byteLength,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded}),{value:Yx(t),done:!1})}cancel(t){var i;(i=this._reader)==null||i.cancel(t),this._abortController.abort()}}const zb=200,Pb=206;function gM(b){const t=b.response;return typeof t!="string"?t:Tf(t).buffer}class pM{constructor({url:t,httpHeaders:i,withCredentials:n}){J(this,"_responseOrigin",null);this.url=t,this.isHttp=/^https?:/i.test(t),this.headers=jx(this.isHttp,i),this.withCredentials=n||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(t){const i=new XMLHttpRequest,n=this.currXhrId++,r=this.pendingRequests[n]={xhr:i};i.open("GET",this.url),i.withCredentials=this.withCredentials;for(const[l,u]of this.headers)i.setRequestHeader(l,u);return this.isHttp&&"begin"in t&&"end"in t?(i.setRequestHeader("Range",`bytes=${t.begin}-${t.end-1}`),r.expectedStatus=Pb):r.expectedStatus=zb,i.responseType="arraybuffer",Ce(t.onError,"Expected `onError` callback to be provided."),i.onerror=()=>{t.onError(i.status)},i.onreadystatechange=this.onStateChange.bind(this,n),i.onprogress=this.onProgress.bind(this,n),r.onHeadersReceived=t.onHeadersReceived,r.onDone=t.onDone,r.onError=t.onError,r.onProgress=t.onProgress,i.send(null),n}onProgress(t,i){var r;const n=this.pendingRequests[t];n&&((r=n.onProgress)==null||r.call(n,i))}onStateChange(t,i){const n=this.pendingRequests[t];if(!n)return;const r=n.xhr;if(r.readyState>=2&&n.onHeadersReceived&&(n.onHeadersReceived(),delete n.onHeadersReceived),r.readyState!==4||!(t in this.pendingRequests))return;if(delete this.pendingRequests[t],r.status===0&&this.isHttp){n.onError(r.status);return}const l=r.status||zb;if(!(l===zb&&n.expectedStatus===Pb)&&l!==n.expectedStatus){n.onError(r.status);return}const h=gM(r);if(l===Pb){const f=r.getResponseHeader("Content-Range"),g=/bytes (\d+)-(\d+)\/(\d+)/.exec(f);g?n.onDone({begin:parseInt(g[1],10),chunk:h}):(_t('Missing or invalid "Content-Range" header.'),n.onError(0))}else h?n.onDone({begin:0,chunk:h}):n.onError(r.status)}getRequestXhr(t){return this.pendingRequests[t].xhr}isPendingRequest(t){return t in this.pendingRequests}abortRequest(t){const i=this.pendingRequests[t].xhr;delete this.pendingRequests[t],i.abort()}}class mM{constructor(t){this._source=t,this._manager=new pM(t),this._rangeChunkSize=t.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(t){const i=this._rangeRequestReaders.indexOf(t);i>=0&&this._rangeRequestReaders.splice(i,1)}getFullReader(){return Ce(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new bM(this._manager,this._source),this._fullRequestReader}getRangeReader(t,i){const n=new yM(this._manager,t,i);return n.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(n),n}cancelAllRequests(t){var i;(i=this._fullRequestReader)==null||i.cancel(t);for(const n of this._rangeRequestReaders.slice(0))n.cancel(t)}}class bM{constructor(t,i){this._manager=t,this._url=i.url,this._fullRequestId=t.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=i.disableRange||!1,this._contentLength=i.length,this._rangeChunkSize=i.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const t=this._fullRequestId,i=this._manager.getRequestXhr(t);this._manager._responseOrigin=cm(i.responseURL);const n=i.getAllResponseHeaders(),r=new Headers(n?n.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(h=>{const[f,...g]=h.split(": ");return[f,g.join(": ")]}):[]),{allowRangeRequests:l,suggestedLength:u}=Gx({responseHeaders:r,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});l&&(this._isRangeSupported=!0),this._contentLength=u||this._contentLength,this._filename=qx(r),this._isRangeSupported&&this._manager.abortRequest(t),this._headersCapability.resolve()}_onDone(t){if(t&&(this._requests.length>0?this._requests.shift().resolve({value:t.chunk,done:!1}):this._cachedChunks.push(t.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(t){this._storedError=Df(t,this._url),this._headersCapability.reject(this._storedError);for(const i of this._requests)i.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(t){var i;(i=this.onProgress)==null||i.call(this,{loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0,this._headersCapability.reject(t);for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class yM{constructor(t,i,n){this._manager=t,this._url=t.url,this._requestId=t.request({begin:i,end:n,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){var i;const t=cm((i=this._manager.getRequestXhr(this._requestId))==null?void 0:i.responseURL);t!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${t}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){var t;(t=this.onClosed)==null||t.call(this,this)}_onDone(t){const i=t.chunk;this._requests.length>0?this._requests.shift().resolve({value:i,done:!1}):this._queuedChunk=i,this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(t){this._storedError??(this._storedError=Df(t,this._url));for(const i of this._requests)i.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(t){var i;this.isStreamingSupported||(i=this.onProgress)==null||i.call(this,{loaded:t.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const i=this._queuedChunk;return this._queuedChunk=null,{value:i,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const vM=/^[a-z][a-z0-9\-+.]+:/i;function AM(b){if(vM.test(b))return new URL(b);const t=process.getBuiltinModule("url");return new URL(t.pathToFileURL(b))}class SM{constructor(t){this.source=t,this.url=AM(t.url),Ce(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}getFullReader(){return Ce(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new _M(this),this._fullRequestReader}getRangeReader(t,i){if(i<=this._progressiveDataLength)return null;const n=new xM(this,t,i);return this._rangeRequestReaders.push(n),n}cancelAllRequests(t){var i;(i=this._fullRequestReader)==null||i.cancel(t);for(const n of this._rangeRequestReaders.slice(0))n.cancel(t)}}class _M{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null;const i=t.source;this._contentLength=i.length,this._loaded=0,this._filename=null,this._disableRange=i.disableRange||!1,this._rangeChunkSize=i.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!i.disableStream,this._isRangeSupported=!i.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const n=process.getBuiltinModule("fs");n.promises.lstat(this._url).then(r=>{this._contentLength=r.size,this._setReadableStream(n.createReadStream(this._url)),this._headersCapability.resolve()},r=>{r.code==="ENOENT"&&(r=Df(0,this._url.href)),this._storedError=r,this._headersCapability.reject(r)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",i=>{this._error(i)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new zr("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class xM{constructor(t,i,n){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const r=t.source;this._isStreamingSupported=!r.disableStream;const l=process.getBuiltinModule("fs");this._setReadableStream(l.createReadStream(this._url,{start:i,end:n-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",i=>{this._error(i)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const Ch=Symbol("INITIAL_DATA");var Ki,Nd,fy;class $x{constructor(){w(this,Nd);w(this,Ki,Object.create(null))}get(t,i=null){if(i){const r=E(this,Nd,fy).call(this,t);return r.promise.then(()=>i(r.data)),null}const n=c(this,Ki)[t];if(!n||n.data===Ch)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return n.data}has(t){const i=c(this,Ki)[t];return!!i&&i.data!==Ch}delete(t){const i=c(this,Ki)[t];return!i||i.data===Ch?!1:(delete c(this,Ki)[t],!0)}resolve(t,i=null){const n=E(this,Nd,fy).call(this,t);n.data=i,n.resolve()}clear(){var t;for(const i in c(this,Ki)){const{data:n}=c(this,Ki)[i];(t=n==null?void 0:n.bitmap)==null||t.close()}A(this,Ki,Object.create(null))}*[Symbol.iterator](){for(const t in c(this,Ki)){const{data:i}=c(this,Ki)[t];i!==Ch&&(yield[t,i])}}}Ki=new WeakMap,Nd=new WeakSet,fy=function(t){var i;return(i=c(this,Ki))[t]||(i[t]={...Promise.withResolvers(),data:Ch})};const wM=1e5,I_=30;var G_,gr,Li,Od,Ld,Ll,na,kd,zd,kl,Uc,jc,pr,Gc,Pd,qc,zl,Hd,Bd,Vc,Pl,Id,mr,Xc,wa,Kx,Qx,gy,os,hp,py,Zx,Wx;const Ne=class Ne{constructor({textContentSource:t,container:i,viewport:n}){w(this,wa);w(this,gr,Promise.withResolvers());w(this,Li,null);w(this,Od,!1);w(this,Ld,!!((G_=globalThis.FontInspector)!=null&&G_.enabled));w(this,Ll,null);w(this,na,null);w(this,kd,0);w(this,zd,0);w(this,kl,null);w(this,Uc,null);w(this,jc,0);w(this,pr,0);w(this,Gc,Object.create(null));w(this,Pd,[]);w(this,qc,null);w(this,zl,[]);w(this,Hd,new WeakMap);w(this,Bd,null);var f;if(t instanceof ReadableStream)A(this,qc,t);else if(typeof t=="object")A(this,qc,new ReadableStream({start(g){g.enqueue(t),g.close()}}));else throw new Error('No "textContentSource" parameter specified.');A(this,Li,A(this,Uc,i)),A(this,pr,n.scale*xn.pixelRatio),A(this,jc,n.rotation),A(this,na,{div:null,properties:null,ctx:null});const{pageWidth:r,pageHeight:l,pageX:u,pageY:h}=n.rawDims;A(this,Bd,[1,0,0,-1,-u,h+l]),A(this,zd,r),A(this,kd,l),E(f=Ne,os,Zx).call(f),bo(i,n),c(this,gr).promise.finally(()=>{c(Ne,Xc).delete(this),A(this,na,null),A(this,Gc,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:t,isFirefox:i}=ni.platform;return zt(this,"fontFamilyMap",new Map([["sans-serif",`${t&&i?"Calibri, ":""}sans-serif`],["monospace",`${t&&i?"Lucida Console, ":""}monospace`]]))}render(){const t=()=>{c(this,kl).read().then(({value:i,done:n})=>{if(n){c(this,gr).resolve();return}c(this,Ll)??A(this,Ll,i.lang),Object.assign(c(this,Gc),i.styles),E(this,wa,Kx).call(this,i.items),t()},c(this,gr).reject)};return A(this,kl,c(this,qc).getReader()),c(Ne,Xc).add(this),t(),c(this,gr).promise}update({viewport:t,onBefore:i=null}){var l;const n=t.scale*xn.pixelRatio,r=t.rotation;if(r!==c(this,jc)&&(i==null||i(),A(this,jc,r),bo(c(this,Uc),{rotation:r})),n!==c(this,pr)){i==null||i(),A(this,pr,n);const u={div:null,properties:null,ctx:E(l=Ne,os,hp).call(l,c(this,Ll))};for(const h of c(this,zl))u.properties=c(this,Hd).get(h),u.div=h,E(this,wa,gy).call(this,u)}}cancel(){var i;const t=new zr("TextLayer task cancelled.");(i=c(this,kl))==null||i.cancel(t).catch(()=>{}),A(this,kl,null),c(this,gr).reject(t)}get textDivs(){return c(this,zl)}get textContentItemsStr(){return c(this,Pd)}static cleanup(){if(!(c(this,Xc).size>0)){c(this,Vc).clear();for(const{canvas:t}of c(this,Pl).values())t.remove();c(this,Pl).clear()}}};gr=new WeakMap,Li=new WeakMap,Od=new WeakMap,Ld=new WeakMap,Ll=new WeakMap,na=new WeakMap,kd=new WeakMap,zd=new WeakMap,kl=new WeakMap,Uc=new WeakMap,jc=new WeakMap,pr=new WeakMap,Gc=new WeakMap,Pd=new WeakMap,qc=new WeakMap,zl=new WeakMap,Hd=new WeakMap,Bd=new WeakMap,Vc=new WeakMap,Pl=new WeakMap,Id=new WeakMap,mr=new WeakMap,Xc=new WeakMap,wa=new WeakSet,Kx=function(t){var r,l;if(c(this,Od))return;(l=c(this,na)).ctx??(l.ctx=E(r=Ne,os,hp).call(r,c(this,Ll)));const i=c(this,zl),n=c(this,Pd);for(const u of t){if(i.length>wM){_t("Ignoring additional textDivs for performance reasons."),A(this,Od,!0);return}if(u.str===void 0){if(u.type==="beginMarkedContentProps"||u.type==="beginMarkedContent"){const h=c(this,Li);A(this,Li,document.createElement("span")),c(this,Li).classList.add("markedContent"),u.id!==null&&c(this,Li).setAttribute("id",`${u.id}`),h.append(c(this,Li))}else u.type==="endMarkedContent"&&A(this,Li,c(this,Li).parentNode);continue}n.push(u.str),E(this,wa,Qx).call(this,u)}},Qx=function(t){var x;const i=document.createElement("span"),n={angle:0,canvasWidth:0,hasText:t.str!=="",hasEOL:t.hasEOL,fontSize:0};c(this,zl).push(i);const r=ft.transform(c(this,Bd),t.transform);let l=Math.atan2(r[1],r[0]);const u=c(this,Gc)[t.fontName];u.vertical&&(l+=Math.PI/2);let h=c(this,Ld)&&u.fontSubstitution||u.fontFamily;h=Ne.fontFamilyMap.get(h)||h;const f=Math.hypot(r[2],r[3]),g=f*E(x=Ne,os,Wx).call(x,h,u,c(this,Ll));let p,y;l===0?(p=r[4],y=r[5]-g):(p=r[4]+g*Math.sin(l),y=r[5]-g*Math.cos(l));const v="calc(var(--total-scale-factor) *",S=i.style;c(this,Li)===c(this,Uc)?(S.left=`${(100*p/c(this,zd)).toFixed(2)}%`,S.top=`${(100*y/c(this,kd)).toFixed(2)}%`):(S.left=`${v}${p.toFixed(2)}px)`,S.top=`${v}${y.toFixed(2)}px)`),S.fontSize=`${v}${(c(Ne,mr)*f).toFixed(2)}px)`,S.fontFamily=h,n.fontSize=f,i.setAttribute("role","presentation"),i.textContent=t.str,i.dir=t.dir,c(this,Ld)&&(i.dataset.fontName=u.fontSubstitutionLoadedName||t.fontName),l!==0&&(n.angle=l*(180/Math.PI));let T=!1;if(t.str.length>1)T=!0;else if(t.str!==" "&&t.transform[0]!==t.transform[3]){const M=Math.abs(t.transform[0]),R=Math.abs(t.transform[3]);M!==R&&Math.max(M,R)/Math.min(M,R)>1.5&&(T=!0)}if(T&&(n.canvasWidth=u.vertical?t.height:t.width),c(this,Hd).set(i,n),c(this,na).div=i,c(this,na).properties=n,E(this,wa,gy).call(this,c(this,na)),n.hasText&&c(this,Li).append(i),n.hasEOL){const M=document.createElement("br");M.setAttribute("role","presentation"),c(this,Li).append(M)}},gy=function(t){var h;const{div:i,properties:n,ctx:r}=t,{style:l}=i;let u="";if(c(Ne,mr)>1&&(u=`scale(${1/c(Ne,mr)})`),n.canvasWidth!==0&&n.hasText){const{fontFamily:f}=l,{canvasWidth:g,fontSize:p}=n;E(h=Ne,os,py).call(h,r,p*c(this,pr),f);const{width:y}=r.measureText(i.textContent);y>0&&(u=`scaleX(${g*c(this,pr)/y}) ${u}`)}n.angle!==0&&(u=`rotate(${n.angle}deg) ${u}`),u.length>0&&(l.transform=u)},os=new WeakSet,hp=function(t=null){let i=c(this,Pl).get(t||(t=""));if(!i){const n=document.createElement("canvas");n.className="hiddenCanvasElement",n.lang=t,document.body.append(n),i=n.getContext("2d",{alpha:!1,willReadFrequently:!0}),c(this,Pl).set(t,i),c(this,Id).set(i,{size:0,family:""})}return i},py=function(t,i,n){const r=c(this,Id).get(t);i===r.size&&n===r.family||(t.font=`${i}px ${n}`,r.size=i,r.family=n)},Zx=function(){if(c(this,mr)!==null)return;const t=document.createElement("div");t.style.opacity=0,t.style.lineHeight=1,t.style.fontSize="1px",t.style.position="absolute",t.textContent="X",document.body.append(t),A(this,mr,t.getBoundingClientRect().height),t.remove()},Wx=function(t,i,n){const r=c(this,Vc).get(t);if(r)return r;const l=E(this,os,hp).call(this,n);l.canvas.width=l.canvas.height=I_,E(this,os,py).call(this,l,I_,t);const u=l.measureText(""),h=u.fontBoundingBoxAscent,f=Math.abs(u.fontBoundingBoxDescent);l.canvas.width=l.canvas.height=0;let g=.8;return h?g=h/(h+f):(ni.platform.isFirefox&&_t("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),i.ascent?g=i.ascent:i.descent&&(g=1+i.descent)),c(this,Vc).set(t,g),g},w(Ne,os),w(Ne,Vc,new Map),w(Ne,Pl,new Map),w(Ne,Id,new WeakMap),w(Ne,mr,null),w(Ne,Xc,new Set);let Kh=Ne;class Qh{static textContent(t){const i=[],n={items:i,styles:Object.create(null)};function r(l){var f;if(!l)return;let u=null;const h=l.name;if(h==="#text")u=l.value;else if(Qh.shouldBuildText(h))(f=l==null?void 0:l.attributes)!=null&&f.textContent?u=l.attributes.textContent:l.value&&(u=l.value);else return;if(u!==null&&i.push({str:u}),!!l.children)for(const g of l.children)r(g)}return r(t),n}static shouldBuildText(t){return!(t==="textarea"||t==="input"||t==="option"||t==="select")}}const EM=100;function Jx(b={}){typeof b=="string"||b instanceof URL?b={url:b}:(b instanceof ArrayBuffer||ArrayBuffer.isView(b))&&(b={data:b});const t=new my,{docId:i}=t,n=b.url?kC(b.url):null,r=b.data?zC(b.data):null,l=b.httpHeaders||null,u=b.withCredentials===!0,h=b.password??null,f=b.range instanceof tw?b.range:null,g=Number.isInteger(b.rangeChunkSize)&&b.rangeChunkSize>0?b.rangeChunkSize:2**16;let p=b.worker instanceof Zh?b.worker:null;const y=b.verbosity,v=typeof b.docBaseUrl=="string"&&!om(b.docBaseUrl)?b.docBaseUrl:null,S=$g(b.cMapUrl),T=b.cMapPacked!==!1,x=b.CMapReaderFactory||(Si?GC:C_),M=$g(b.iccUrl),R=$g(b.standardFontDataUrl),k=b.StandardFontDataFactory||(Si?qC:M_),O=$g(b.wasmUrl),H=b.WasmFactory||(Si?VC:R_),z=b.stopAtErrors!==!0,G=Number.isInteger(b.maxImageSize)&&b.maxImageSize>-1?b.maxImageSize:-1,V=b.isEvalSupported!==!1,Z=typeof b.isOffscreenCanvasSupported=="boolean"?b.isOffscreenCanvasSupported:!Si,et=typeof b.isImageDecoderSupported=="boolean"?b.isImageDecoderSupported:!Si&&(ni.platform.isFirefox||!globalThis.chrome),rt=Number.isInteger(b.canvasMaxAreaInBytes)?b.canvasMaxAreaInBytes:-1,st=typeof b.disableFontFace=="boolean"?b.disableFontFace:Si,vt=b.fontExtraProperties===!0,Lt=b.enableXfa===!0,At=b.ownerDocument||globalThis.document,Ft=b.disableRange===!0,B=b.disableStream===!0,X=b.disableAutoFetch===!0,ct=b.pdfBug===!0,Dt=b.CanvasFactory||(Si?jC:IC),N=b.FilterFactory||(Si?UC:FC),K=b.enableHWA===!0,tt=b.useWasm!==!1,W=f?f.length:b.length??NaN,ut=typeof b.useSystemFonts=="boolean"?b.useSystemFonts:!Si&&!st,wt=typeof b.useWorkerFetch=="boolean"?b.useWorkerFetch:!!(x===C_&&k===M_&&H===R_&&S&&R&&O&&Dh(S,document.baseURI)&&Dh(R,document.baseURI)&&Dh(O,document.baseURI)),gt=null;dC(y);const kt={canvasFactory:new Dt({ownerDocument:At,enableHWA:K}),filterFactory:new N({docId:i,ownerDocument:At}),cMapReaderFactory:wt?null:new x({baseUrl:S,isCompressed:T}),standardFontDataFactory:wt?null:new k({baseUrl:R}),wasmFactory:wt?null:new H({baseUrl:O})};p||(p=Zh.create({verbosity:y,port:_n.workerPort}),t._worker=p);const qt={docId:i,apiVersion:"5.3.31",data:r,password:h,disableAutoFetch:X,rangeChunkSize:g,length:W,docBaseUrl:v,enableXfa:Lt,evaluatorOptions:{maxImageSize:G,disableFontFace:st,ignoreErrors:z,isEvalSupported:V,isOffscreenCanvasSupported:Z,isImageDecoderSupported:et,canvasMaxAreaInBytes:rt,fontExtraProperties:vt,useSystemFonts:ut,useWasm:tt,useWorkerFetch:wt,cMapUrl:S,iccUrl:M,standardFontDataUrl:R,wasmUrl:O}},Ks={ownerDocument:At,pdfBug:ct,styleElement:gt,loadingParams:{disableAutoFetch:X,enableXfa:Lt}};return p.promise.then(function(){if(t.destroyed)throw new Error("Loading aborted");if(p.destroyed)throw new Error("Worker was destroyed");const Eu=p.messageHandler.sendWithPromise("GetDocRequest",qt,r?[r.buffer]:null);let Ea;if(f)Ea=new lM(f,{disableRange:Ft,disableStream:B});else if(!r){if(!n)throw new Error("getDocument - no `url` parameter provided.");const Fr=Dh(n)?hM:Si?SM:mM;Ea=new Fr({url:n,length:W,httpHeaders:l,withCredentials:u,rangeChunkSize:g,disableRange:Ft,disableStream:B})}return Eu.then(Fr=>{if(t.destroyed)throw new Error("Loading aborted");if(p.destroyed)throw new Error("Worker was destroyed");const _o=new zh(i,Fr,p.port),Tu=new MM(_o,t,Ea,Ks,kt);t._transport=Tu,_o.send("Ready",null)})}).catch(t._capability.reject),t}var Kp;const Qp=class Qp{constructor(){J(this,"_capability",Promise.withResolvers());J(this,"_transport",null);J(this,"_worker",null);J(this,"docId",`d${pi(Qp,Kp)._++}`);J(this,"destroyed",!1);J(this,"onPassword",null);J(this,"onProgress",null)}get promise(){return this._capability.promise}async destroy(){var t,i,n,r;this.destroyed=!0;try{(t=this._worker)!=null&&t.port&&(this._worker._pendingDestroy=!0),await((i=this._transport)==null?void 0:i.destroy())}catch(l){throw(n=this._worker)!=null&&n.port&&delete this._worker._pendingDestroy,l}this._transport=null,(r=this._worker)==null||r.destroy(),this._worker=null}async getData(){return this._transport.getData()}};Kp=new WeakMap,w(Qp,Kp,0);let my=Qp;var Hl,Fd,Ud,jd,Gd;class tw{constructor(t,i,n=!1,r=null){w(this,Hl,Promise.withResolvers());w(this,Fd,[]);w(this,Ud,[]);w(this,jd,[]);w(this,Gd,[]);this.length=t,this.initialData=i,this.progressiveDone=n,this.contentDispositionFilename=r}addRangeListener(t){c(this,Gd).push(t)}addProgressListener(t){c(this,jd).push(t)}addProgressiveReadListener(t){c(this,Ud).push(t)}addProgressiveDoneListener(t){c(this,Fd).push(t)}onDataRange(t,i){for(const n of c(this,Gd))n(t,i)}onDataProgress(t,i){c(this,Hl).promise.then(()=>{for(const n of c(this,jd))n(t,i)})}onDataProgressiveRead(t){c(this,Hl).promise.then(()=>{for(const i of c(this,Ud))i(t)})}onDataProgressiveDone(){c(this,Hl).promise.then(()=>{for(const t of c(this,Fd))t()})}transportReady(){c(this,Hl).resolve()}requestDataRange(t,i){te("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}Hl=new WeakMap,Fd=new WeakMap,Ud=new WeakMap,jd=new WeakMap,Gd=new WeakMap;class TM{constructor(t,i){this._pdfInfo=t,this._transport=i}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return zt(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:t="display"}={}){const{renderingIntent:i}=this._transport.getRenderingIntent(t);return this._transport.getOptionalContentConfig(i)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(t){return this._transport.cachedPageNumber(t)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var aa,Bl,Fh;class CM{constructor(t,i,n,r=!1){w(this,Bl);w(this,aa,!1);this._pageIndex=t,this._pageInfo=i,this._transport=n,this._stats=r?new w_:null,this._pdfBug=r,this.commonObjs=n.commonObjs,this.objs=new $x,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:i=this.rotate,offsetX:n=0,offsetY:r=0,dontFlip:l=!1}={}){return new Mf({viewBox:this.view,userUnit:this.userUnit,scale:t,rotation:i,offsetX:n,offsetY:r,dontFlip:l})}getAnnotations({intent:t="display"}={}){const{renderingIntent:i}=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,i)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return zt(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var t;return((t=this._transport._htmlForXfa)==null?void 0:t.children[this._pageIndex])||null}render({canvasContext:t,viewport:i,intent:n="display",annotationMode:r=Za.ENABLE,transform:l=null,background:u=null,optionalContentConfigPromise:h=null,annotationCanvasMap:f=null,pageColors:g=null,printAnnotationStorage:p=null,isEditing:y=!1}){var H,z;(H=this._stats)==null||H.time("Overall");const v=this._transport.getRenderingIntent(n,r,p,y),{renderingIntent:S,cacheKey:T}=v;A(this,aa,!1),h||(h=this._transport.getOptionalContentConfig(S));let x=this._intentStates.get(T);x||(x=Object.create(null),this._intentStates.set(T,x)),x.streamReaderCancelTimeout&&(clearTimeout(x.streamReaderCancelTimeout),x.streamReaderCancelTimeout=null);const M=!!(S&as.PRINT);x.displayReadyCapability||(x.displayReadyCapability=Promise.withResolvers(),x.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(z=this._stats)==null||z.time("Page Request"),this._pumpOperatorList(v));const R=G=>{var V;x.renderTasks.delete(k),M&&A(this,aa,!0),E(this,Bl,Fh).call(this),G?(k.capability.reject(G),this._abortOperatorList({intentState:x,reason:G instanceof Error?G:new Error(G)})):k.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(V=globalThis.Stats)!=null&&V.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},k=new by({callback:R,params:{canvasContext:t,viewport:i,transform:l,background:u},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:f,operatorList:x.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!M,pdfBug:this._pdfBug,pageColors:g});(x.renderTasks||(x.renderTasks=new Set)).add(k);const O=k.task;return Promise.all([x.displayReadyCapability.promise,h]).then(([G,V])=>{var Z;if(this.destroyed){R();return}if((Z=this._stats)==null||Z.time("Rendering"),!(V.renderingIntent&S))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");k.initializeGraphics({transparency:G,optionalContentConfig:V}),k.operatorListChanged()}).catch(R),O}getOperatorList({intent:t="display",annotationMode:i=Za.ENABLE,printAnnotationStorage:n=null,isEditing:r=!1}={}){var g;function l(){h.operatorList.lastChunk&&(h.opListReadCapability.resolve(h.operatorList),h.renderTasks.delete(f))}const u=this._transport.getRenderingIntent(t,i,n,r,!0);let h=this._intentStates.get(u.cacheKey);h||(h=Object.create(null),this._intentStates.set(u.cacheKey,h));let f;return h.opListReadCapability||(f=Object.create(null),f.operatorListChanged=l,h.opListReadCapability=Promise.withResolvers(),(h.renderTasks||(h.renderTasks=new Set)).add(f),h.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(g=this._stats)==null||g.time("Page Request"),this._pumpOperatorList(u)),h.opListReadCapability.promise}streamTextContent({includeMarkedContent:t=!1,disableNormalization:i=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:t===!0,disableNormalization:i===!0},{highWaterMark:100,size(r){return r.items.length}})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then(n=>Qh.textContent(n));const i=this.streamTextContent(t);return new Promise(function(n,r){function l(){u.read().then(function({value:f,done:g}){if(g){n(h);return}h.lang??(h.lang=f.lang),Object.assign(h.styles,f.styles),h.items.push(...f.items),l()},r)}const u=i.getReader(),h={items:[],styles:Object.create(null),lang:null};l()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const t=[];for(const i of this._intentStates.values())if(this._abortOperatorList({intentState:i,reason:new Error("Page was destroyed."),force:!0}),!i.opListReadCapability)for(const n of i.renderTasks)t.push(n.completed),n.cancel();return this.objs.clear(),A(this,aa,!1),Promise.all(t)}cleanup(t=!1){A(this,aa,!0);const i=E(this,Bl,Fh).call(this);return t&&i&&this._stats&&(this._stats=new w_),i}_startRenderPage(t,i){var r,l;const n=this._intentStates.get(i);n&&((r=this._stats)==null||r.timeEnd("Page Request"),(l=n.displayReadyCapability)==null||l.resolve(t))}_renderPageChunk(t,i){for(let n=0,r=t.length;n<r;n++)i.operatorList.fnArray.push(t.fnArray[n]),i.operatorList.argsArray.push(t.argsArray[n]);i.operatorList.lastChunk=t.lastChunk,i.operatorList.separateAnnots=t.separateAnnots;for(const n of i.renderTasks)n.operatorListChanged();t.lastChunk&&E(this,Bl,Fh).call(this)}_pumpOperatorList({renderingIntent:t,cacheKey:i,annotationStorageSerializable:n,modifiedIds:r}){const{map:l,transfer:u}=n,f=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:i,annotationStorage:l,modifiedIds:r},u).getReader(),g=this._intentStates.get(i);g.streamReader=f;const p=()=>{f.read().then(({value:y,done:v})=>{if(v){g.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(y,g),p())},y=>{if(g.streamReader=null,!this._transport.destroyed){if(g.operatorList){g.operatorList.lastChunk=!0;for(const v of g.renderTasks)v.operatorListChanged();E(this,Bl,Fh).call(this)}if(g.displayReadyCapability)g.displayReadyCapability.reject(y);else if(g.opListReadCapability)g.opListReadCapability.reject(y);else throw y}})};p()}_abortOperatorList({intentState:t,reason:i,force:n=!1}){if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!n){if(t.renderTasks.size>0)return;if(i instanceof sv){let r=EM;i.extraDelay>0&&i.extraDelay<1e3&&(r+=i.extraDelay),t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:i,force:!0})},r);return}}if(t.streamReader.cancel(new zr(i.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[r,l]of this._intentStates)if(l===t){this._intentStates.delete(r);break}this.cleanup()}}}get stats(){return this._stats}}aa=new WeakMap,Bl=new WeakSet,Fh=function(){if(!c(this,aa)||this.destroyed)return!1;for(const{renderTasks:t,operatorList:i}of this._intentStates.values())if(t.size>0||!i.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),A(this,aa,!1),!0};var br,Ps,ra,Il,Zp,Fl,Ul,xi,dp,ew,iw,Uh,Yc,fp;const oe=class oe{constructor({name:t=null,port:i=null,verbosity:n=fC()}={}){w(this,xi);w(this,br,Promise.withResolvers());w(this,Ps,null);w(this,ra,null);w(this,Il,null);if(this.name=t,this.destroyed=!1,this.verbosity=n,i){if(c(oe,Ul).has(i))throw new Error("Cannot use more than one PDFWorker per port.");c(oe,Ul).set(i,this),E(this,xi,ew).call(this,i)}else E(this,xi,iw).call(this)}get promise(){return c(this,br).promise}get port(){return c(this,ra)}get messageHandler(){return c(this,Ps)}destroy(){var t,i;this.destroyed=!0,(t=c(this,Il))==null||t.terminate(),A(this,Il,null),c(oe,Ul).delete(c(this,ra)),A(this,ra,null),(i=c(this,Ps))==null||i.destroy(),A(this,Ps,null)}static create(t){const i=c(this,Ul).get(t==null?void 0:t.port);if(i){if(i._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return i}return new oe(t)}static get workerSrc(){if(_n.workerSrc)return _n.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return zt(this,"_setupFakeWorkerGlobal",(async()=>c(this,Yc,fp)?c(this,Yc,fp):(await import(this.workerSrc)).WorkerMessageHandler)())}};br=new WeakMap,Ps=new WeakMap,ra=new WeakMap,Il=new WeakMap,Zp=new WeakMap,Fl=new WeakMap,Ul=new WeakMap,xi=new WeakSet,dp=function(){c(this,br).resolve(),c(this,Ps).send("configure",{verbosity:this.verbosity})},ew=function(t){A(this,ra,t),A(this,Ps,new zh("main","worker",t)),c(this,Ps).on("ready",()=>{}),E(this,xi,dp).call(this)},iw=function(){if(c(oe,Fl)||c(oe,Yc,fp)){E(this,xi,Uh).call(this);return}let{workerSrc:t}=oe;try{oe._isSameOrigin(window.location,t)||(t=oe._createCDNWrapper(new URL(t,window.location).href));const i=new Worker(t,{type:"module"}),n=new zh("main","worker",i),r=()=>{l.abort(),n.destroy(),i.terminate(),this.destroyed?c(this,br).reject(new Error("Worker was destroyed")):E(this,xi,Uh).call(this)},l=new AbortController;i.addEventListener("error",()=>{c(this,Il)||r()},{signal:l.signal}),n.on("test",h=>{if(l.abort(),this.destroyed||!h){r();return}A(this,Ps,n),A(this,ra,i),A(this,Il,i),E(this,xi,dp).call(this)}),n.on("ready",h=>{if(l.abort(),this.destroyed){r();return}try{u()}catch{E(this,xi,Uh).call(this)}});const u=()=>{const h=new Uint8Array;n.send("test",h,[h.buffer])};u();return}catch{lm("The worker has been disabled.")}E(this,xi,Uh).call(this)},Uh=function(){c(oe,Fl)||(_t("Setting up fake worker."),A(oe,Fl,!0)),oe._setupFakeWorkerGlobal.then(t=>{if(this.destroyed){c(this,br).reject(new Error("Worker was destroyed"));return}const i=new BC;A(this,ra,i);const n=`fake${pi(oe,Zp)._++}`,r=new zh(n+"_worker",n,i);t.setup(r,i),A(this,Ps,new zh(n,n+"_worker",i)),E(this,xi,dp).call(this)}).catch(t=>{c(this,br).reject(new Error(`Setting up fake worker failed: "${t.message}".`))})},Yc=new WeakSet,fp=function(){var t;try{return((t=globalThis.pdfjsWorker)==null?void 0:t.WorkerMessageHandler)||null}catch{return null}},w(oe,Yc),w(oe,Zp,0),w(oe,Fl,!1),w(oe,Ul,new WeakMap),Si&&(A(oe,Fl,!0),_n.workerSrc||(_n.workerSrc="./pdf.worker.mjs")),oe._isSameOrigin=(t,i)=>{const n=URL.parse(t);if(!(n!=null&&n.origin)||n.origin==="null")return!1;const r=new URL(i,n);return n.origin===r.origin},oe._createCDNWrapper=t=>{const i=`await import("${t}");`;return URL.createObjectURL(new Blob([i],{type:"text/javascript"}))},oe.fromPort=t=>{if(EC("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!(t!=null&&t.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return oe.create(t)};let Zh=oe;var la,pn,$c,Kc,oa,jl,jh;class MM{constructor(t,i,n,r,l){w(this,jl);w(this,la,new Map);w(this,pn,new Map);w(this,$c,new Map);w(this,Kc,new Map);w(this,oa,null);this.messageHandler=t,this.loadingTask=i,this.commonObjs=new $x,this.fontLoader=new OC({ownerDocument:r.ownerDocument,styleElement:r.styleElement}),this.loadingParams=r.loadingParams,this._params=r,this.canvasFactory=l.canvasFactory,this.filterFactory=l.filterFactory,this.cMapReaderFactory=l.cMapReaderFactory,this.standardFontDataFactory=l.standardFontDataFactory,this.wasmFactory=l.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=n,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}get annotationStorage(){return zt(this,"annotationStorage",new lv)}getRenderingIntent(t,i=Za.ENABLE,n=null,r=!1,l=!1){let u=as.DISPLAY,h=sy;switch(t){case"any":u=as.ANY;break;case"display":break;case"print":u=as.PRINT;break;default:_t(`getRenderingIntent - invalid intent: ${t}`)}const f=u&as.PRINT&&n instanceof Ox?n:this.annotationStorage;switch(i){case Za.DISABLE:u+=as.ANNOTATIONS_DISABLE;break;case Za.ENABLE:break;case Za.ENABLE_FORMS:u+=as.ANNOTATIONS_FORMS;break;case Za.ENABLE_STORAGE:u+=as.ANNOTATIONS_STORAGE,h=f.serializable;break;default:_t(`getRenderingIntent - invalid annotationMode: ${i}`)}r&&(u+=as.IS_EDITING),l&&(u+=as.OPLIST);const{ids:g,hash:p}=f.modifiedIds,y=[u,h.hash,p];return{renderingIntent:u,cacheKey:y.join("_"),annotationStorageSerializable:h,modifiedIds:g}}destroy(){var n;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(n=c(this,oa))==null||n.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const r of c(this,pn).values())t.push(r._destroy());c(this,pn).clear(),c(this,$c).clear(),c(this,Kc).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const i=this.messageHandler.sendWithPromise("Terminate",null);return t.push(i),Promise.all(t).then(()=>{var r,l;this.commonObjs.clear(),this.fontLoader.clear(),c(this,la).clear(),this.filterFactory.destroy(),Kh.cleanup(),(r=this._networkStream)==null||r.cancelAllRequests(new zr("Worker was terminated.")),(l=this.messageHandler)==null||l.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:i}=this;t.on("GetReader",(n,r)=>{Ce(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=l=>{this._lastProgress={loaded:l.loaded,total:l.total}},r.onPull=()=>{this._fullReader.read().then(function({value:l,done:u}){if(u){r.close();return}Ce(l instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(l),1,[l])}).catch(l=>{r.error(l)})},r.onCancel=l=>{this._fullReader.cancel(l),r.ready.catch(u=>{if(!this.destroyed)throw u})}}),t.on("ReaderHeadersReady",async n=>{var h;await this._fullReader.headersReady;const{isStreamingSupported:r,isRangeSupported:l,contentLength:u}=this._fullReader;return(!r||!l)&&(this._lastProgress&&((h=i.onProgress)==null||h.call(i,this._lastProgress)),this._fullReader.onProgress=f=>{var g;(g=i.onProgress)==null||g.call(i,{loaded:f.loaded,total:f.total})}),{isStreamingSupported:r,isRangeSupported:l,contentLength:u}}),t.on("GetRangeReader",(n,r)=>{Ce(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const l=this._networkStream.getRangeReader(n.begin,n.end);if(!l){r.close();return}r.onPull=()=>{l.read().then(function({value:u,done:h}){if(h){r.close();return}Ce(u instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(u),1,[u])}).catch(u=>{r.error(u)})},r.onCancel=u=>{l.cancel(u),r.ready.catch(h=>{if(!this.destroyed)throw h})}}),t.on("GetDoc",({pdfInfo:n})=>{this._numPages=n.numPages,this._htmlForXfa=n.htmlForXfa,delete n.htmlForXfa,i._capability.resolve(new TM(n,this))}),t.on("DocException",n=>{i._capability.reject(Di(n))}),t.on("PasswordRequest",n=>{A(this,oa,Promise.withResolvers());try{if(!i.onPassword)throw Di(n);const r=l=>{l instanceof Error?c(this,oa).reject(l):c(this,oa).resolve({password:l})};i.onPassword(r,n.code)}catch(r){c(this,oa).reject(r)}return c(this,oa).promise}),t.on("DataLoaded",n=>{var r;(r=i.onProgress)==null||r.call(i,{loaded:n.length,total:n.length}),this.downloadInfoCapability.resolve(n)}),t.on("StartRenderPage",n=>{if(this.destroyed)return;c(this,pn).get(n.pageIndex)._startRenderPage(n.transparency,n.cacheKey)}),t.on("commonobj",([n,r,l])=>{var u;if(this.destroyed||this.commonObjs.has(n))return null;switch(r){case"Font":if("error"in l){const p=l.error;_t(`Error during font loading: ${p}`),this.commonObjs.resolve(n,p);break}const h=this._params.pdfBug&&((u=globalThis.FontInspector)!=null&&u.enabled)?(p,y)=>globalThis.FontInspector.fontAdded(p,y):null,f=new LC(l,h);this.fontLoader.bind(f).catch(()=>t.sendWithPromise("FontFallback",{id:n})).finally(()=>{!f.fontExtraProperties&&f.data&&(f.data=null),this.commonObjs.resolve(n,f)});break;case"CopyLocalImage":const{imageRef:g}=l;Ce(g,"The imageRef must be defined.");for(const p of c(this,pn).values())for(const[,y]of p.objs)if((y==null?void 0:y.ref)===g)return y.dataLen?(this.commonObjs.resolve(n,structuredClone(y)),y.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(n,l);break;default:throw new Error(`Got unknown common object type ${r}`)}return null}),t.on("obj",([n,r,l,u])=>{var f;if(this.destroyed)return;const h=c(this,pn).get(r);if(!h.objs.has(n)){if(h._intentStates.size===0){(f=u==null?void 0:u.bitmap)==null||f.close();return}switch(l){case"Image":case"Pattern":h.objs.resolve(n,u);break;default:throw new Error(`Got unknown object type ${l}`)}}}),t.on("DocProgress",n=>{var r;this.destroyed||(r=i.onProgress)==null||r.call(i,{loaded:n.loaded,total:n.total})}),t.on("FetchBinaryData",async n=>{if(this.destroyed)throw new Error("Worker was destroyed.");const r=this[n.type];if(!r)throw new Error(`${n.type} not initialized, see the \`useWorkerFetch\` parameter.`);return r.fetch(n)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var n;this.annotationStorage.size<=0&&_t("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:t,transfer:i}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:t,filename:((n=this._fullReader)==null?void 0:n.filename)??null},i).finally(()=>{this.annotationStorage.resetModified()})}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));const i=t-1,n=c(this,$c).get(i);if(n)return n;const r=this.messageHandler.sendWithPromise("GetPage",{pageIndex:i}).then(l=>{if(this.destroyed)throw new Error("Transport destroyed");l.refStr&&c(this,Kc).set(l.refStr,t);const u=new CM(i,l,this,this._params.pdfBug);return c(this,pn).set(i,u),u});return c(this,$c).set(i,r),r}getPageIndex(t){return ny(t)?this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(t,i){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:i})}getFieldObjects(){return E(this,jl,jh).call(this,"GetFieldObjects")}hasJSActions(){return E(this,jl,jh).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return typeof t!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return E(this,jl,jh).call(this,"GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(t){return E(this,jl,jh).call(this,"GetOptionalContentConfig").then(i=>new rM(i,t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const t="GetMetadata",i=c(this,la).get(t);if(i)return i;const n=this.messageHandler.sendWithPromise(t,null).then(r=>{var l,u;return{info:r[0],metadata:r[1]?new nM(r[1]):null,contentDispositionFilename:((l=this._fullReader)==null?void 0:l.filename)??null,contentLength:((u=this._fullReader)==null?void 0:u.contentLength)??null}});return c(this,la).set(t,n),n}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(t=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const i of c(this,pn).values())if(!i.cleanup())throw new Error(`startCleanup: Page ${i.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),c(this,la).clear(),this.filterFactory.destroy(!0),Kh.cleanup()}}cachedPageNumber(t){if(!ny(t))return null;const i=t.gen===0?`${t.num}R`:`${t.num}R${t.gen}`;return c(this,Kc).get(i)??null}}la=new WeakMap,pn=new WeakMap,$c=new WeakMap,Kc=new WeakMap,oa=new WeakMap,jl=new WeakSet,jh=function(t,i=null){const n=c(this,la).get(t);if(n)return n;const r=this.messageHandler.sendWithPromise(t,i);return c(this,la).set(t,r),r};var yr;class RM{constructor(t){w(this,yr,null);J(this,"onContinue",null);J(this,"onError",null);A(this,yr,t)}get promise(){return c(this,yr).capability.promise}cancel(t=0){c(this,yr).cancel(null,t)}get separateAnnots(){const{separateAnnots:t}=c(this,yr).operatorList;if(!t)return!1;const{annotationCanvasMap:i}=c(this,yr);return t.form||t.canvas&&(i==null?void 0:i.size)>0}}yr=new WeakMap;var vr,Gl;const cl=class cl{constructor({callback:t,params:i,objs:n,commonObjs:r,annotationCanvasMap:l,operatorList:u,pageIndex:h,canvasFactory:f,filterFactory:g,useRequestAnimationFrame:p=!1,pdfBug:y=!1,pageColors:v=null}){w(this,vr,null);this.callback=t,this.params=i,this.objs=n,this.commonObjs=r,this.annotationCanvasMap=l,this.operatorListIdx=null,this.operatorList=u,this._pageIndex=h,this.canvasFactory=f,this.filterFactory=g,this._pdfBug=y,this.pageColors=v,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=p===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new RM(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=i.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:t=!1,optionalContentConfig:i}){var h,f;if(this.cancelled)return;if(this._canvas){if(c(cl,Gl).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");c(cl,Gl).add(this._canvas)}this._pdfBug&&((h=globalThis.StepperManager)!=null&&h.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:n,viewport:r,transform:l,background:u}=this.params;this.gfx=new yc(n,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:i},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:l,viewport:r,transparency:t,background:u}),this.operatorListIdx=0,this.graphicsReady=!0,(f=this.graphicsReadyCallback)==null||f.call(this)}cancel(t=null,i=0){var n,r,l;this.running=!1,this.cancelled=!0,(n=this.gfx)==null||n.endDrawing(),c(this,vr)&&(window.cancelAnimationFrame(c(this,vr)),A(this,vr,null)),c(cl,Gl).delete(this._canvas),t||(t=new sv(`Rendering cancelled, page ${this._pageIndex+1}`,i)),this.callback(t),(l=(r=this.task).onError)==null||l.call(r,t)}operatorListChanged(){var t;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(t=this.stepper)==null||t.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?A(this,vr,window.requestAnimationFrame(()=>{A(this,vr,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),c(cl,Gl).delete(this._canvas),this.callback())))}};vr=new WeakMap,Gl=new WeakMap,w(cl,Gl,new WeakSet);let by=cl;const DM="5.3.31",NM="47ad820d9";function F_(b){return Math.floor(Math.max(0,Math.min(1,b))*255).toString(16).padStart(2,"0")}function Mh(b){return Math.max(0,Math.min(255,255*b))}class U_{static CMYK_G([t,i,n,r]){return["G",1-Math.min(1,.3*t+.59*n+.11*i+r)]}static G_CMYK([t]){return["CMYK",0,0,0,1-t]}static G_RGB([t]){return["RGB",t,t,t]}static G_rgb([t]){return t=Mh(t),[t,t,t]}static G_HTML([t]){const i=F_(t);return`#${i}${i}${i}`}static RGB_G([t,i,n]){return["G",.3*t+.59*i+.11*n]}static RGB_rgb(t){return t.map(Mh)}static RGB_HTML(t){return`#${t.map(F_).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([t,i,n,r]){return["RGB",1-Math.min(1,t+r),1-Math.min(1,n+r),1-Math.min(1,i+r)]}static CMYK_rgb([t,i,n,r]){return[Mh(1-Math.min(1,t+r)),Mh(1-Math.min(1,n+r)),Mh(1-Math.min(1,i+r))]}static CMYK_HTML(t){const i=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(i)}static RGB_CMYK([t,i,n]){const r=1-t,l=1-i,u=1-n,h=Math.min(r,l,u);return["CMYK",r,l,u,h]}}class OM{create(t,i,n=!1){if(t<=0||i<=0)throw new Error("Invalid SVG dimensions");const r=this._createSVG("svg:svg");return r.setAttribute("version","1.1"),n||(r.setAttribute("width",`${t}px`),r.setAttribute("height",`${i}px`)),r.setAttribute("preserveAspectRatio","none"),r.setAttribute("viewBox",`0 0 ${t} ${i}`),r}createElement(t){if(typeof t!="string")throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){te("Abstract method `_createSVG` called.")}}class zp extends OM{_createSVG(t){return document.createElementNS(Un,t)}}class sw{static setupStorage(t,i,n,r,l){const u=r.getValue(i,{value:null});switch(n.name){case"textarea":if(u.value!==null&&(t.textContent=u.value),l==="print")break;t.addEventListener("input",h=>{r.setValue(i,{value:h.target.value})});break;case"input":if(n.attributes.type==="radio"||n.attributes.type==="checkbox"){if(u.value===n.attributes.xfaOn?t.setAttribute("checked",!0):u.value===n.attributes.xfaOff&&t.removeAttribute("checked"),l==="print")break;t.addEventListener("change",h=>{r.setValue(i,{value:h.target.checked?h.target.getAttribute("xfaOn"):h.target.getAttribute("xfaOff")})})}else{if(u.value!==null&&t.setAttribute("value",u.value),l==="print")break;t.addEventListener("input",h=>{r.setValue(i,{value:h.target.value})})}break;case"select":if(u.value!==null){t.setAttribute("value",u.value);for(const h of n.children)h.attributes.value===u.value?h.attributes.selected=!0:h.attributes.hasOwnProperty("selected")&&delete h.attributes.selected}t.addEventListener("input",h=>{const f=h.target.options,g=f.selectedIndex===-1?"":f[f.selectedIndex].value;r.setValue(i,{value:g})});break}}static setAttributes({html:t,element:i,storage:n=null,intent:r,linkService:l}){const{attributes:u}=i,h=t instanceof HTMLAnchorElement;u.type==="radio"&&(u.name=`${u.name}-${r}`);for(const[f,g]of Object.entries(u))if(g!=null)switch(f){case"class":g.length&&t.setAttribute(f,g.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",g);break;case"style":Object.assign(t.style,g);break;case"textContent":t.textContent=g;break;default:(!h||f!=="href"&&f!=="newWindow")&&t.setAttribute(f,g)}h&&l.addLinkAttributes(t,u.href,u.newWindow),n&&u.dataId&&this.setupStorage(t,u.dataId,i,n)}static render(t){var y,v;const i=t.annotationStorage,n=t.linkService,r=t.xfaHtml,l=t.intent||"display",u=document.createElement(r.name);r.attributes&&this.setAttributes({html:u,element:r,intent:l,linkService:n});const h=l!=="richText",f=t.div;if(f.append(u),t.viewport){const S=`matrix(${t.viewport.transform.join(",")})`;f.style.transform=S}h&&f.setAttribute("class","xfaLayer xfaFont");const g=[];if(r.children.length===0){if(r.value){const S=document.createTextNode(r.value);u.append(S),h&&Qh.shouldBuildText(r.name)&&g.push(S)}return{textDivs:g}}const p=[[r,-1,u]];for(;p.length>0;){const[S,T,x]=p.at(-1);if(T+1===S.children.length){p.pop();continue}const M=S.children[++p.at(-1)[1]];if(M===null)continue;const{name:R}=M;if(R==="#text"){const O=document.createTextNode(M.value);g.push(O),x.append(O);continue}const k=(y=M==null?void 0:M.attributes)!=null&&y.xmlns?document.createElementNS(M.attributes.xmlns,R):document.createElement(R);if(x.append(k),M.attributes&&this.setAttributes({html:k,element:M,storage:i,intent:l,linkService:n}),((v=M.children)==null?void 0:v.length)>0)p.push([M,-1,k]);else if(M.value){const O=document.createTextNode(M.value);h&&Qh.shouldBuildText(R)&&g.push(O),k.append(O)}}for(const S of f.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))S.setAttribute("readOnly",!0);return{textDivs:g}}static update(t){const i=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=i,t.div.hidden=!1}}const Nf=1e3,LM=9,vo=new WeakSet;class j_{static create(t){switch(t.data.annotationType){case Ee.LINK:return new nw(t);case Ee.TEXT:return new kM(t);case Ee.WIDGET:switch(t.data.fieldType){case"Tx":return new zM(t);case"Btn":return t.data.radioButton?new lw(t):t.data.checkBox?new HM(t):new BM(t);case"Ch":return new IM(t);case"Sig":return new PM(t)}return new So(t);case Ee.POPUP:return new vy(t);case Ee.FREETEXT:return new dw(t);case Ee.LINE:return new UM(t);case Ee.SQUARE:return new jM(t);case Ee.CIRCLE:return new GM(t);case Ee.POLYLINE:return new fw(t);case Ee.CARET:return new VM(t);case Ee.INK:return new uv(t);case Ee.POLYGON:return new qM(t);case Ee.HIGHLIGHT:return new gw(t);case Ee.UNDERLINE:return new XM(t);case Ee.SQUIGGLY:return new YM(t);case Ee.STRIKEOUT:return new $M(t);case Ee.STAMP:return new pw(t);case Ee.FILEATTACHMENT:return new KM(t);default:return new Se(t)}}}var ql,Qc,Zc,qd,yy;const mv=class mv{constructor(t,{isRenderable:i=!1,ignoreBorder:n=!1,createQuadrilaterals:r=!1}={}){w(this,qd);w(this,ql,null);w(this,Qc,!1);w(this,Zc,null);this.isRenderable=i,this.data=t.data,this.layer=t.layer,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this.parent=t.parent,i&&(this.container=this._createContainer(n)),r&&this._createQuadrilaterals()}static _hasPopupData({titleObj:t,contentsObj:i,richText:n}){return!!(t!=null&&t.str||i!=null&&i.str||n!=null&&n.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return mv._hasPopupData(this.data)}updateEdited(t){var n;if(!this.container)return;c(this,ql)||A(this,ql,{rect:this.data.rect.slice(0)});const{rect:i}=t;i&&E(this,qd,yy).call(this,i),(n=c(this,Zc))==null||n.popup.updateEdited(t)}resetEdited(){var t;c(this,ql)&&(E(this,qd,yy).call(this,c(this,ql).rect),(t=c(this,Zc))==null||t.popup.resetEdited(),A(this,ql,null))}_createContainer(t){const{data:i,parent:{page:n,viewport:r}}=this,l=document.createElement("section");l.setAttribute("data-annotation-id",i.id),this instanceof So||(l.tabIndex=Nf);const{style:u}=l;if(u.zIndex=this.parent.zIndex++,i.alternativeText&&(l.title=i.alternativeText),i.noRotate&&l.classList.add("norotate"),!i.rect||this instanceof vy){const{rotation:x}=i;return!i.hasOwnCanvas&&x!==0&&this.setRotation(x,l),l}const{width:h,height:f}=this;if(!t&&i.borderStyle.width>0){u.borderWidth=`${i.borderStyle.width}px`;const x=i.borderStyle.horizontalCornerRadius,M=i.borderStyle.verticalCornerRadius;if(x>0||M>0){const k=`calc(${x}px * var(--total-scale-factor)) / calc(${M}px * var(--total-scale-factor))`;u.borderRadius=k}else if(this instanceof lw){const k=`calc(${h}px * var(--total-scale-factor)) / calc(${f}px * var(--total-scale-factor))`;u.borderRadius=k}switch(i.borderStyle.style){case oc.SOLID:u.borderStyle="solid";break;case oc.DASHED:u.borderStyle="dashed";break;case oc.BEVELED:_t("Unimplemented border style: beveled");break;case oc.INSET:_t("Unimplemented border style: inset");break;case oc.UNDERLINE:u.borderBottomStyle="solid";break}const R=i.borderColor||null;R?(A(this,Qc,!0),u.borderColor=ft.makeHexColor(R[0]|0,R[1]|0,R[2]|0)):u.borderWidth=0}const g=ft.normalizeRect([i.rect[0],n.view[3]-i.rect[1]+n.view[1],i.rect[2],n.view[3]-i.rect[3]+n.view[1]]),{pageWidth:p,pageHeight:y,pageX:v,pageY:S}=r.rawDims;u.left=`${100*(g[0]-v)/p}%`,u.top=`${100*(g[1]-S)/y}%`;const{rotation:T}=i;return i.hasOwnCanvas||T===0?(u.width=`${100*h/p}%`,u.height=`${100*f/y}%`):this.setRotation(T,l),l}setRotation(t,i=this.container){if(!this.data.rect)return;const{pageWidth:n,pageHeight:r}=this.parent.viewport.rawDims;let{width:l,height:u}=this;t%180!==0&&([l,u]=[u,l]),i.style.width=`${100*l/n}%`,i.style.height=`${100*u/r}%`,i.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){const t=(i,n,r)=>{const l=r.detail[i],u=l[0],h=l.slice(1);r.target.style[n]=U_[`${u}_HTML`](h),this.annotationStorage.setValue(this.data.id,{[n]:U_[`${u}_rgb`](h)})};return zt(this,"_commonActions",{display:i=>{const{display:n}=i.detail,r=n%2===1;this.container.style.visibility=r?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:r,noPrint:n===1||n===2})},print:i=>{this.annotationStorage.setValue(this.data.id,{noPrint:!i.detail.print})},hidden:i=>{const{hidden:n}=i.detail;this.container.style.visibility=n?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:n,noView:n})},focus:i=>{setTimeout(()=>i.target.focus({preventScroll:!1}),0)},userName:i=>{i.target.title=i.detail.userName},readonly:i=>{i.target.disabled=i.detail.readonly},required:i=>{this._setRequired(i.target,i.detail.required)},bgColor:i=>{t("bgColor","backgroundColor",i)},fillColor:i=>{t("fillColor","backgroundColor",i)},fgColor:i=>{t("fgColor","color",i)},textColor:i=>{t("textColor","color",i)},borderColor:i=>{t("borderColor","borderColor",i)},strokeColor:i=>{t("strokeColor","borderColor",i)},rotation:i=>{const n=i.detail.rotation;this.setRotation(n),this.annotationStorage.setValue(this.data.id,{rotation:n})}})}_dispatchEventFromSandbox(t,i){const n=this._commonActions;for(const r of Object.keys(i.detail)){const l=t[r]||n[r];l==null||l(i)}}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const i=this.annotationStorage.getRawValue(this.data.id);if(!i)return;const n=this._commonActions;for(const[r,l]of Object.entries(i)){const u=n[r];if(u){const h={detail:{[r]:l},target:t};u(h),delete i[r]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:t}=this.data;if(!t)return;const[i,n,r,l]=this.data.rect.map(x=>Math.fround(x));if(t.length===8){const[x,M,R,k]=t.subarray(2,6);if(r===x&&l===M&&i===R&&n===k)return}const{style:u}=this.container;let h;if(c(this,Qc)){const{borderColor:x,borderWidth:M}=u;u.borderWidth=0,h=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${x}" stroke-width="${M}">`],this.container.classList.add("hasBorder")}const f=r-i,g=l-n,{svgFactory:p}=this,y=p.createElement("svg");y.classList.add("quadrilateralsContainer"),y.setAttribute("width",0),y.setAttribute("height",0);const v=p.createElement("defs");y.append(v);const S=p.createElement("clipPath"),T=`clippath_${this.data.id}`;S.setAttribute("id",T),S.setAttribute("clipPathUnits","objectBoundingBox"),v.append(S);for(let x=2,M=t.length;x<M;x+=8){const R=t[x],k=t[x+1],O=t[x+2],H=t[x+3],z=p.createElement("rect"),G=(O-i)/f,V=(l-k)/g,Z=(R-O)/f,et=(k-H)/g;z.setAttribute("x",G),z.setAttribute("y",V),z.setAttribute("width",Z),z.setAttribute("height",et),S.append(z),h==null||h.push(`<rect vector-effect="non-scaling-stroke" x="${G}" y="${V}" width="${Z}" height="${et}"/>`)}c(this,Qc)&&(h.push("</g></svg>')"),u.backgroundImage=h.join("")),this.container.append(y),this.container.style.clipPath=`url(#${T})`}_createPopup(){const{data:t}=this,i=A(this,Zc,new vy({data:{color:t.color,titleObj:t.titleObj,modificationDate:t.modificationDate,contentsObj:t.contentsObj,richText:t.richText,parentRect:t.rect,borderStyle:0,id:`popup_${t.id}`,rotation:t.rotation},parent:this.parent,elements:[this]}));this.parent.div.append(i.render())}render(){te("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,i=null){const n=[];if(this._fieldObjects){const r=this._fieldObjects[t];if(r)for(const{page:l,id:u,exportValues:h}of r){if(l===-1||u===i)continue;const f=typeof h=="string"?h:null,g=document.querySelector(`[data-element-id="${u}"]`);if(g&&!vo.has(g)){_t(`_getElementsByName - element not allowed: ${u}`);continue}n.push({id:u,exportValue:f,domElement:g})}return n}for(const r of document.getElementsByName(t)){const{exportValue:l}=r,u=r.getAttribute("data-element-id");u!==i&&vo.has(r)&&n.push({id:u,exportValue:l,domElement:r})}return n}show(){var t;this.container&&(this.container.hidden=!1),(t=this.popup)==null||t.maybeShow()}hide(){var t;this.container&&(this.container.hidden=!0),(t=this.popup)==null||t.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const t=this.getElementsToTriggerPopup();if(Array.isArray(t))for(const i of t)i.classList.add("highlightArea");else t.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:t,data:{id:i}}=this;this.container.addEventListener("dblclick",()=>{var n;(n=this.linkService.eventBus)==null||n.dispatch("switchannotationeditormode",{source:this,mode:t,editId:i})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}};ql=new WeakMap,Qc=new WeakMap,Zc=new WeakMap,qd=new WeakSet,yy=function(t){const{container:{style:i},data:{rect:n,rotation:r},parent:{viewport:{rawDims:{pageWidth:l,pageHeight:u,pageX:h,pageY:f}}}}=this;n==null||n.splice(0,4,...t),i.left=`${100*(t[0]-h)/l}%`,i.top=`${100*(u-t[3]+f)/u}%`,r===0?(i.width=`${100*(t[2]-t[0])/l}%`,i.height=`${100*(t[3]-t[1])/u}%`):this.setRotation(r)};let Se=mv;var ls,al,aw,rw;class nw extends Se{constructor(i,n=null){super(i,{isRenderable:!0,ignoreBorder:!!(n!=null&&n.ignoreBorder),createQuadrilaterals:!0});w(this,ls);this.isTooltipOnly=i.data.isTooltipOnly}render(){const{data:i,linkService:n}=this,r=document.createElement("a");r.setAttribute("data-element-id",i.id);let l=!1;return i.url?(n.addLinkAttributes(r,i.url,i.newWindow),l=!0):i.action?(this._bindNamedAction(r,i.action),l=!0):i.attachment?(E(this,ls,aw).call(this,r,i.attachment,i.attachmentDest),l=!0):i.setOCGState?(E(this,ls,rw).call(this,r,i.setOCGState),l=!0):i.dest?(this._bindLink(r,i.dest),l=!0):(i.actions&&(i.actions.Action||i.actions["Mouse Up"]||i.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(r,i),l=!0),i.resetForm?(this._bindResetFormAction(r,i.resetForm),l=!0):this.isTooltipOnly&&!l&&(this._bindLink(r,""),l=!0)),this.container.classList.add("linkAnnotation"),l&&this.container.append(r),this.container}_bindLink(i,n){i.href=this.linkService.getDestinationHash(n),i.onclick=()=>(n&&this.linkService.goToDestination(n),!1),(n||n==="")&&E(this,ls,al).call(this)}_bindNamedAction(i,n){i.href=this.linkService.getAnchorUrl(""),i.onclick=()=>(this.linkService.executeNamedAction(n),!1),E(this,ls,al).call(this)}_bindJSAction(i,n){i.href=this.linkService.getAnchorUrl("");const r=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const l of Object.keys(n.actions)){const u=r.get(l);u&&(i[u]=()=>{var h;return(h=this.linkService.eventBus)==null||h.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n.id,name:l}}),!1})}i.onclick||(i.onclick=()=>!1),E(this,ls,al).call(this)}_bindResetFormAction(i,n){const r=i.onclick;if(r||(i.href=this.linkService.getAnchorUrl("")),E(this,ls,al).call(this),!this._fieldObjects){_t('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),r||(i.onclick=()=>!1);return}i.onclick=()=>{var y;r==null||r();const{fields:l,refs:u,include:h}=n,f=[];if(l.length!==0||u.length!==0){const v=new Set(u);for(const S of l){const T=this._fieldObjects[S]||[];for(const{id:x}of T)v.add(x)}for(const S of Object.values(this._fieldObjects))for(const T of S)v.has(T.id)===h&&f.push(T)}else for(const v of Object.values(this._fieldObjects))f.push(...v);const g=this.annotationStorage,p=[];for(const v of f){const{id:S}=v;switch(p.push(S),v.type){case"text":{const x=v.defaultValue||"";g.setValue(S,{value:x});break}case"checkbox":case"radiobutton":{const x=v.defaultValue===v.exportValues;g.setValue(S,{value:x});break}case"combobox":case"listbox":{const x=v.defaultValue||"";g.setValue(S,{value:x});break}default:continue}const T=document.querySelector(`[data-element-id="${S}"]`);if(T){if(!vo.has(T)){_t(`_bindResetFormAction - element not allowed: ${S}`);continue}}else continue;T.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((y=this.linkService.eventBus)==null||y.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:p,name:"ResetForm"}})),!1}}}ls=new WeakSet,al=function(){this.container.setAttribute("data-internal-link","")},aw=function(i,n,r=null){i.href=this.linkService.getAnchorUrl(""),n.description&&(i.title=n.description),i.onclick=()=>{var l;return(l=this.downloadManager)==null||l.openOrDownloadData(n.content,n.filename,r),!1},E(this,ls,al).call(this)},rw=function(i,n){i.href=this.linkService.getAnchorUrl(""),i.onclick=()=>(this.linkService.executeSetOCGState(n),!1),E(this,ls,al).call(this)};class kM extends Se{constructor(t){super(t,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(t),this.container}}class So extends Se{render(){return this.container}showElementAndHideCanvas(t){var i;this.data.hasOwnCanvas&&(((i=t.previousSibling)==null?void 0:i.nodeName)==="CANVAS"&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){return ni.platform.isMac?t.metaKey:t.ctrlKey}_setEventListener(t,i,n,r,l){n.includes("mouse")?t.addEventListener(n,u=>{var h;(h=this.linkService.eventBus)==null||h.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:l(u),shift:u.shiftKey,modifier:this._getKeyModifier(u)}})}):t.addEventListener(n,u=>{var h;if(n==="blur"){if(!i.focused||!u.relatedTarget)return;i.focused=!1}else if(n==="focus"){if(i.focused)return;i.focused=!0}l&&((h=this.linkService.eventBus)==null||h.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:l(u)}}))})}_setEventListeners(t,i,n,r){var l,u,h;for(const[f,g]of n)(g==="Action"||(l=this.data.actions)!=null&&l[g])&&((g==="Focus"||g==="Blur")&&(i||(i={focused:!1})),this._setEventListener(t,i,f,g,r),g==="Focus"&&!((u=this.data.actions)!=null&&u.Blur)?this._setEventListener(t,i,"blur","Blur",null):g==="Blur"&&!((h=this.data.actions)!=null&&h.Focus)&&this._setEventListener(t,i,"focus","Focus",null))}_setBackgroundColor(t){const i=this.data.backgroundColor||null;t.style.backgroundColor=i===null?"transparent":ft.makeHexColor(i[0],i[1],i[2])}_setTextStyle(t){const i=["left","center","right"],{fontColor:n}=this.data.defaultAppearanceData,r=this.data.defaultAppearanceData.fontSize||LM,l=t.style;let u;const h=2,f=g=>Math.round(10*g)/10;if(this.data.multiLine){const g=Math.abs(this.data.rect[3]-this.data.rect[1]-h),p=Math.round(g/(Rb*r))||1,y=g/p;u=Math.min(r,f(y/Rb))}else{const g=Math.abs(this.data.rect[3]-this.data.rect[1]-h);u=Math.min(r,f(g/Rb))}l.fontSize=`calc(${u}px * var(--total-scale-factor))`,l.color=ft.makeHexColor(n[0],n[1],n[2]),this.data.textAlignment!==null&&(l.textAlign=i[this.data.textAlignment])}_setRequired(t,i){i?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",i)}}class zM extends So{constructor(t){const i=t.renderForms||t.data.hasOwnCanvas||!t.data.hasAppearance&&!!t.data.fieldValue;super(t,{isRenderable:i})}setPropertyOnSiblings(t,i,n,r){const l=this.annotationStorage;for(const u of this._getElementsByName(t.name,t.id))u.domElement&&(u.domElement[i]=n),l.setValue(u.id,{[r]:n})}render(){var r,l;const t=this.annotationStorage,i=this.data.id;this.container.classList.add("textWidgetAnnotation");let n=null;if(this.renderForms){const u=t.getValue(i,{value:this.data.fieldValue});let h=u.value||"";const f=t.getValue(i,{charLimit:this.data.maxLen}).charLimit;f&&h.length>f&&(h=h.slice(0,f));let g=u.formattedValue||((r=this.data.textContent)==null?void 0:r.join(`
`))||null;g&&this.data.comb&&(g=g.replaceAll(/\s+/g,""));const p={userValue:h,formattedValue:g,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(n=document.createElement("textarea"),n.textContent=g??h,this.data.doNotScroll&&(n.style.overflowY="hidden")):(n=document.createElement("input"),n.type=this.data.password?"password":"text",n.setAttribute("value",g??h),this.data.doNotScroll&&(n.style.overflowX="hidden")),this.data.hasOwnCanvas&&(n.hidden=!0),vo.add(n),n.setAttribute("data-element-id",i),n.disabled=this.data.readOnly,n.name=this.data.fieldName,n.tabIndex=Nf,this._setRequired(n,this.data.required),f&&(n.maxLength=f),n.addEventListener("input",v=>{t.setValue(i,{value:v.target.value}),this.setPropertyOnSiblings(n,"value",v.target.value,"value"),p.formattedValue=null}),n.addEventListener("resetform",v=>{const S=this.data.defaultFieldValue??"";n.value=p.userValue=S,p.formattedValue=null});let y=v=>{const{formattedValue:S}=p;S!=null&&(v.target.value=S),v.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){n.addEventListener("focus",S=>{var x;if(p.focused)return;const{target:T}=S;p.userValue&&(T.value=p.userValue),p.lastCommittedValue=T.value,p.commitKey=1,(x=this.data.actions)!=null&&x.Focus||(p.focused=!0)}),n.addEventListener("updatefromsandbox",S=>{this.showElementAndHideCanvas(S.target);const T={value(x){p.userValue=x.detail.value??"",t.setValue(i,{value:p.userValue.toString()}),x.target.value=p.userValue},formattedValue(x){const{formattedValue:M}=x.detail;p.formattedValue=M,M!=null&&x.target!==document.activeElement&&(x.target.value=M),t.setValue(i,{formattedValue:M})},selRange(x){x.target.setSelectionRange(...x.detail.selRange)},charLimit:x=>{var O;const{charLimit:M}=x.detail,{target:R}=x;if(M===0){R.removeAttribute("maxLength");return}R.setAttribute("maxLength",M);let k=p.userValue;!k||k.length<=M||(k=k.slice(0,M),R.value=p.userValue=k,t.setValue(i,{value:k}),(O=this.linkService.eventBus)==null||O.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i,name:"Keystroke",value:k,willCommit:!0,commitKey:1,selStart:R.selectionStart,selEnd:R.selectionEnd}}))}};this._dispatchEventFromSandbox(T,S)}),n.addEventListener("keydown",S=>{var M;p.commitKey=1;let T=-1;if(S.key==="Escape"?T=0:S.key==="Enter"&&!this.data.multiLine?T=2:S.key==="Tab"&&(p.commitKey=3),T===-1)return;const{value:x}=S.target;p.lastCommittedValue!==x&&(p.lastCommittedValue=x,p.userValue=x,(M=this.linkService.eventBus)==null||M.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i,name:"Keystroke",value:x,willCommit:!0,commitKey:T,selStart:S.target.selectionStart,selEnd:S.target.selectionEnd}}))});const v=y;y=null,n.addEventListener("blur",S=>{var x,M;if(!p.focused||!S.relatedTarget)return;(x=this.data.actions)!=null&&x.Blur||(p.focused=!1);const{value:T}=S.target;p.userValue=T,p.lastCommittedValue!==T&&((M=this.linkService.eventBus)==null||M.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i,name:"Keystroke",value:T,willCommit:!0,commitKey:p.commitKey,selStart:S.target.selectionStart,selEnd:S.target.selectionEnd}})),v(S)}),(l=this.data.actions)!=null&&l.Keystroke&&n.addEventListener("beforeinput",S=>{var z;p.lastCommittedValue=null;const{data:T,target:x}=S,{value:M,selectionStart:R,selectionEnd:k}=x;let O=R,H=k;switch(S.inputType){case"deleteWordBackward":{const G=M.substring(0,R).match(/\w*[^\w]*$/);G&&(O-=G[0].length);break}case"deleteWordForward":{const G=M.substring(R).match(/^[^\w]*\w*/);G&&(H+=G[0].length);break}case"deleteContentBackward":R===k&&(O-=1);break;case"deleteContentForward":R===k&&(H+=1);break}S.preventDefault(),(z=this.linkService.eventBus)==null||z.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i,name:"Keystroke",value:M,change:T||"",willCommit:!1,selStart:O,selEnd:H}})}),this._setEventListeners(n,p,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],S=>S.target.value)}if(y&&n.addEventListener("blur",y),this.data.comb){const S=(this.data.rect[2]-this.data.rect[0])/f;n.classList.add("comb"),n.style.letterSpacing=`calc(${S}px * var(--total-scale-factor) - 1ch)`}}else n=document.createElement("div"),n.textContent=this.data.fieldValue,n.style.verticalAlign="middle",n.style.display="table-cell",this.data.hasOwnCanvas&&(n.hidden=!0);return this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class PM extends So{constructor(t){super(t,{isRenderable:!!t.data.hasOwnCanvas})}}class HM extends So{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,i=this.data,n=i.id;let r=t.getValue(n,{value:i.exportValue===i.fieldValue}).value;typeof r=="string"&&(r=r!=="Off",t.setValue(n,{value:r})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const l=document.createElement("input");return vo.add(l),l.setAttribute("data-element-id",n),l.disabled=i.readOnly,this._setRequired(l,this.data.required),l.type="checkbox",l.name=i.fieldName,r&&l.setAttribute("checked",!0),l.setAttribute("exportValue",i.exportValue),l.tabIndex=Nf,l.addEventListener("change",u=>{const{name:h,checked:f}=u.target;for(const g of this._getElementsByName(h,n)){const p=f&&g.exportValue===i.exportValue;g.domElement&&(g.domElement.checked=p),t.setValue(g.id,{value:p})}t.setValue(n,{value:f})}),l.addEventListener("resetform",u=>{const h=i.defaultFieldValue||"Off";u.target.checked=h===i.exportValue}),this.enableScripting&&this.hasJSActions&&(l.addEventListener("updatefromsandbox",u=>{const h={value(f){f.target.checked=f.detail.value!=="Off",t.setValue(n,{value:f.target.checked})}};this._dispatchEventFromSandbox(h,u)}),this._setEventListeners(l,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],u=>u.target.checked)),this._setBackgroundColor(l),this._setDefaultPropertiesFromJS(l),this.container.append(l),this.container}}class lw extends So{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const t=this.annotationStorage,i=this.data,n=i.id;let r=t.getValue(n,{value:i.fieldValue===i.buttonValue}).value;if(typeof r=="string"&&(r=r!==i.buttonValue,t.setValue(n,{value:r})),r)for(const u of this._getElementsByName(i.fieldName,n))t.setValue(u.id,{value:!1});const l=document.createElement("input");if(vo.add(l),l.setAttribute("data-element-id",n),l.disabled=i.readOnly,this._setRequired(l,this.data.required),l.type="radio",l.name=i.fieldName,r&&l.setAttribute("checked",!0),l.tabIndex=Nf,l.addEventListener("change",u=>{const{name:h,checked:f}=u.target;for(const g of this._getElementsByName(h,n))t.setValue(g.id,{value:!1});t.setValue(n,{value:f})}),l.addEventListener("resetform",u=>{const h=i.defaultFieldValue;u.target.checked=h!=null&&h===i.buttonValue}),this.enableScripting&&this.hasJSActions){const u=i.buttonValue;l.addEventListener("updatefromsandbox",h=>{const f={value:g=>{const p=u===g.detail.value;for(const y of this._getElementsByName(g.target.name)){const v=p&&y.id===n;y.domElement&&(y.domElement.checked=v),t.setValue(y.id,{value:v})}}};this._dispatchEventFromSandbox(f,h)}),this._setEventListeners(l,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],h=>h.target.checked)}return this._setBackgroundColor(l),this._setDefaultPropertiesFromJS(l),this.container.append(l),this.container}}class BM extends nw{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton");const i=t.lastChild;return this.enableScripting&&this.hasJSActions&&i&&(this._setDefaultPropertiesFromJS(i),i.addEventListener("updatefromsandbox",n=>{this._dispatchEventFromSandbox({},n)})),t}}class IM extends So{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const t=this.annotationStorage,i=this.data.id,n=t.getValue(i,{value:this.data.fieldValue}),r=document.createElement("select");vo.add(r),r.setAttribute("data-element-id",i),r.disabled=this.data.readOnly,this._setRequired(r,this.data.required),r.name=this.data.fieldName,r.tabIndex=Nf;let l=this.data.combo&&this.data.options.length>0;this.data.combo||(r.size=this.data.options.length,this.data.multiSelect&&(r.multiple=!0)),r.addEventListener("resetform",p=>{const y=this.data.defaultFieldValue;for(const v of r.options)v.selected=v.value===y});for(const p of this.data.options){const y=document.createElement("option");y.textContent=p.displayValue,y.value=p.exportValue,n.value.includes(p.exportValue)&&(y.setAttribute("selected",!0),l=!1),r.append(y)}let u=null;if(l){const p=document.createElement("option");p.value=" ",p.setAttribute("hidden",!0),p.setAttribute("selected",!0),r.prepend(p),u=()=>{p.remove(),r.removeEventListener("input",u),u=null},r.addEventListener("input",u)}const h=p=>{const y=p?"value":"textContent",{options:v,multiple:S}=r;return S?Array.prototype.filter.call(v,T=>T.selected).map(T=>T[y]):v.selectedIndex===-1?null:v[v.selectedIndex][y]};let f=h(!1);const g=p=>{const y=p.target.options;return Array.prototype.map.call(y,v=>({displayValue:v.textContent,exportValue:v.value}))};return this.enableScripting&&this.hasJSActions?(r.addEventListener("updatefromsandbox",p=>{const y={value(v){u==null||u();const S=v.detail.value,T=new Set(Array.isArray(S)?S:[S]);for(const x of r.options)x.selected=T.has(x.value);t.setValue(i,{value:h(!0)}),f=h(!1)},multipleSelection(v){r.multiple=!0},remove(v){const S=r.options,T=v.detail.remove;S[T].selected=!1,r.remove(T),S.length>0&&Array.prototype.findIndex.call(S,M=>M.selected)===-1&&(S[0].selected=!0),t.setValue(i,{value:h(!0),items:g(v)}),f=h(!1)},clear(v){for(;r.length!==0;)r.remove(0);t.setValue(i,{value:null,items:[]}),f=h(!1)},insert(v){const{index:S,displayValue:T,exportValue:x}=v.detail.insert,M=r.children[S],R=document.createElement("option");R.textContent=T,R.value=x,M?M.before(R):r.append(R),t.setValue(i,{value:h(!0),items:g(v)}),f=h(!1)},items(v){const{items:S}=v.detail;for(;r.length!==0;)r.remove(0);for(const T of S){const{displayValue:x,exportValue:M}=T,R=document.createElement("option");R.textContent=x,R.value=M,r.append(R)}r.options.length>0&&(r.options[0].selected=!0),t.setValue(i,{value:h(!0),items:g(v)}),f=h(!1)},indices(v){const S=new Set(v.detail.indices);for(const T of v.target.options)T.selected=S.has(T.index);t.setValue(i,{value:h(!0)}),f=h(!1)},editable(v){v.target.disabled=!v.detail.editable}};this._dispatchEventFromSandbox(y,p)}),r.addEventListener("input",p=>{var S;const y=h(!0),v=h(!1);t.setValue(i,{value:y}),p.preventDefault(),(S=this.linkService.eventBus)==null||S.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i,name:"Keystroke",value:f,change:v,changeEx:y,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(r,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],p=>p.target.value)):r.addEventListener("input",function(p){t.setValue(i,{value:h(!0)})}),this.data.combo&&this._setTextStyle(r),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class vy extends Se{constructor(t){const{data:i,elements:n}=t;super(t,{isRenderable:Se._hasPopupData(i)}),this.elements=n,this.popup=null}render(){this.container.classList.add("popupAnnotation");const t=this.popup=new FM({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),i=[];for(const n of this.elements)n.popup=t,n.container.ariaHasPopup="dialog",i.push(n.data.id),n.addHighlightArea();return this.container.setAttribute("aria-controls",i.map(n=>`${iv}${n}`).join(",")),this.container}}var Wc,Wp,Jp,Jc,tu,me,ca,eu,Vd,Xd,iu,ua,Hs,ha,Yd,da,$d,Vl,Xl,ee,gp,Ay,ow,cw,uw,hw,pp,mp,Sy;class FM{constructor({container:t,color:i,elements:n,titleObj:r,modificationDate:l,contentsObj:u,richText:h,parent:f,rect:g,parentRect:p,open:y}){w(this,ee);w(this,Wc,E(this,ee,uw).bind(this));w(this,Wp,E(this,ee,Sy).bind(this));w(this,Jp,E(this,ee,mp).bind(this));w(this,Jc,E(this,ee,pp).bind(this));w(this,tu,null);w(this,me,null);w(this,ca,null);w(this,eu,null);w(this,Vd,null);w(this,Xd,null);w(this,iu,null);w(this,ua,!1);w(this,Hs,null);w(this,ha,null);w(this,Yd,null);w(this,da,null);w(this,$d,null);w(this,Vl,null);w(this,Xl,!1);var v;A(this,me,t),A(this,$d,r),A(this,ca,u),A(this,da,h),A(this,Xd,f),A(this,tu,i),A(this,Yd,g),A(this,iu,p),A(this,Vd,n),A(this,eu,av.toDateObject(l)),this.trigger=n.flatMap(S=>S.getElementsToTriggerPopup());for(const S of this.trigger)S.addEventListener("click",c(this,Jc)),S.addEventListener("mouseenter",c(this,Jp)),S.addEventListener("mouseleave",c(this,Wp)),S.classList.add("popupTriggerArea");for(const S of n)(v=S.container)==null||v.addEventListener("keydown",c(this,Wc));c(this,me).hidden=!0,y&&E(this,ee,pp).call(this)}render(){if(c(this,Hs))return;const t=A(this,Hs,document.createElement("div"));if(t.className="popup",c(this,tu)){const l=t.style.outlineColor=ft.makeHexColor(...c(this,tu));t.style.backgroundColor=`color-mix(in srgb, ${l} 30%, white)`}const i=document.createElement("span");i.className="header";const n=document.createElement("h1");if(i.append(n),{dir:n.dir,str:n.textContent}=c(this,$d),t.append(i),c(this,eu)){const l=document.createElement("span");l.classList.add("popupDate"),l.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),l.setAttribute("data-l10n-args",JSON.stringify({dateObj:c(this,eu).valueOf()})),i.append(l)}const r=c(this,ee,gp);if(r)sw.render({xfaHtml:r,intent:"richText",div:t}),t.lastChild.classList.add("richText","popupContent");else{const l=this._formatContents(c(this,ca));t.append(l)}c(this,me).append(t)}_formatContents({str:t,dir:i}){const n=document.createElement("p");n.classList.add("popupContent"),n.dir=i;const r=t.split(/(?:\r\n?|\n)/);for(let l=0,u=r.length;l<u;++l){const h=r[l];n.append(document.createTextNode(h)),l<u-1&&n.append(document.createElement("br"))}return n}updateEdited({rect:t,popupContent:i}){var n;c(this,Vl)||A(this,Vl,{contentsObj:c(this,ca),richText:c(this,da)}),t&&A(this,ha,null),i&&(A(this,da,E(this,ee,cw).call(this,i)),A(this,ca,null)),(n=c(this,Hs))==null||n.remove(),A(this,Hs,null)}resetEdited(){var t;c(this,Vl)&&({contentsObj:pi(this,ca)._,richText:pi(this,da)._}=c(this,Vl),A(this,Vl,null),(t=c(this,Hs))==null||t.remove(),A(this,Hs,null),A(this,ha,null))}forceHide(){A(this,Xl,this.isVisible),c(this,Xl)&&(c(this,me).hidden=!0)}maybeShow(){c(this,Xl)&&(c(this,Hs)||E(this,ee,mp).call(this),A(this,Xl,!1),c(this,me).hidden=!1)}get isVisible(){return c(this,me).hidden===!1}}Wc=new WeakMap,Wp=new WeakMap,Jp=new WeakMap,Jc=new WeakMap,tu=new WeakMap,me=new WeakMap,ca=new WeakMap,eu=new WeakMap,Vd=new WeakMap,Xd=new WeakMap,iu=new WeakMap,ua=new WeakMap,Hs=new WeakMap,ha=new WeakMap,Yd=new WeakMap,da=new WeakMap,$d=new WeakMap,Vl=new WeakMap,Xl=new WeakMap,ee=new WeakSet,gp=function(){const t=c(this,da),i=c(this,ca);return t!=null&&t.str&&(!(i!=null&&i.str)||i.str===t.str)&&c(this,da).html||null},Ay=function(){var t,i,n;return((n=(i=(t=c(this,ee,gp))==null?void 0:t.attributes)==null?void 0:i.style)==null?void 0:n.fontSize)||0},ow=function(){var t,i,n;return((n=(i=(t=c(this,ee,gp))==null?void 0:t.attributes)==null?void 0:i.style)==null?void 0:n.color)||null},cw=function(t){const i=[],n={str:t,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:i}]}},r={style:{color:c(this,ee,ow),fontSize:c(this,ee,Ay)?`calc(${c(this,ee,Ay)}px * var(--total-scale-factor))`:""}};for(const l of t.split(`
`))i.push({name:"span",value:l,attributes:r});return n},uw=function(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||(t.key==="Enter"||t.key==="Escape"&&c(this,ua))&&E(this,ee,pp).call(this)},hw=function(){if(c(this,ha)!==null)return;const{page:{view:t},viewport:{rawDims:{pageWidth:i,pageHeight:n,pageX:r,pageY:l}}}=c(this,Xd);let u=!!c(this,iu),h=u?c(this,iu):c(this,Yd);for(const T of c(this,Vd))if(!h||ft.intersect(T.data.rect,h)!==null){h=T.data.rect,u=!0;break}const f=ft.normalizeRect([h[0],t[3]-h[1]+t[1],h[2],t[3]-h[3]+t[1]]),p=u?h[2]-h[0]+5:0,y=f[0]+p,v=f[1];A(this,ha,[100*(y-r)/i,100*(v-l)/n]);const{style:S}=c(this,me);S.left=`${c(this,ha)[0]}%`,S.top=`${c(this,ha)[1]}%`},pp=function(){A(this,ua,!c(this,ua)),c(this,ua)?(E(this,ee,mp).call(this),c(this,me).addEventListener("click",c(this,Jc)),c(this,me).addEventListener("keydown",c(this,Wc))):(E(this,ee,Sy).call(this),c(this,me).removeEventListener("click",c(this,Jc)),c(this,me).removeEventListener("keydown",c(this,Wc)))},mp=function(){c(this,Hs)||this.render(),this.isVisible?c(this,ua)&&c(this,me).classList.add("focused"):(E(this,ee,hw).call(this),c(this,me).hidden=!1,c(this,me).style.zIndex=parseInt(c(this,me).style.zIndex)+1e3)},Sy=function(){c(this,me).classList.remove("focused"),!(c(this,ua)||!this.isVisible)&&(c(this,me).hidden=!0,c(this,me).style.zIndex=parseInt(c(this,me).style.zIndex)-1e3)};class dw extends Se{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.textContent=t.data.textContent,this.textPosition=t.data.textPosition,this.annotationEditorType=St.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const t=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(const i of this.textContent){const n=document.createElement("span");n.textContent=i,t.append(n)}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var Kd;class UM extends Se{constructor(i){super(i,{isRenderable:!0,ignoreBorder:!0});w(this,Kd,null)}render(){this.container.classList.add("lineAnnotation");const{data:i,width:n,height:r}=this,l=this.svgFactory.create(n,r,!0),u=A(this,Kd,this.svgFactory.createElement("svg:line"));return u.setAttribute("x1",i.rect[2]-i.lineCoordinates[0]),u.setAttribute("y1",i.rect[3]-i.lineCoordinates[1]),u.setAttribute("x2",i.rect[2]-i.lineCoordinates[2]),u.setAttribute("y2",i.rect[3]-i.lineCoordinates[3]),u.setAttribute("stroke-width",i.borderStyle.width||1),u.setAttribute("stroke","transparent"),u.setAttribute("fill","transparent"),l.append(u),this.container.append(l),!i.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return c(this,Kd)}addHighlightArea(){this.container.classList.add("highlightArea")}}Kd=new WeakMap;var Qd;class jM extends Se{constructor(i){super(i,{isRenderable:!0,ignoreBorder:!0});w(this,Qd,null)}render(){this.container.classList.add("squareAnnotation");const{data:i,width:n,height:r}=this,l=this.svgFactory.create(n,r,!0),u=i.borderStyle.width,h=A(this,Qd,this.svgFactory.createElement("svg:rect"));return h.setAttribute("x",u/2),h.setAttribute("y",u/2),h.setAttribute("width",n-u),h.setAttribute("height",r-u),h.setAttribute("stroke-width",u||1),h.setAttribute("stroke","transparent"),h.setAttribute("fill","transparent"),l.append(h),this.container.append(l),!i.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return c(this,Qd)}addHighlightArea(){this.container.classList.add("highlightArea")}}Qd=new WeakMap;var Zd;class GM extends Se{constructor(i){super(i,{isRenderable:!0,ignoreBorder:!0});w(this,Zd,null)}render(){this.container.classList.add("circleAnnotation");const{data:i,width:n,height:r}=this,l=this.svgFactory.create(n,r,!0),u=i.borderStyle.width,h=A(this,Zd,this.svgFactory.createElement("svg:ellipse"));return h.setAttribute("cx",n/2),h.setAttribute("cy",r/2),h.setAttribute("rx",n/2-u/2),h.setAttribute("ry",r/2-u/2),h.setAttribute("stroke-width",u||1),h.setAttribute("stroke","transparent"),h.setAttribute("fill","transparent"),l.append(h),this.container.append(l),!i.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return c(this,Zd)}addHighlightArea(){this.container.classList.add("highlightArea")}}Zd=new WeakMap;var Wd;class fw extends Se{constructor(i){super(i,{isRenderable:!0,ignoreBorder:!0});w(this,Wd,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:i,vertices:n,borderStyle:r,popupRef:l},width:u,height:h}=this;if(!n)return this.container;const f=this.svgFactory.create(u,h,!0);let g=[];for(let y=0,v=n.length;y<v;y+=2){const S=n[y]-i[0],T=i[3]-n[y+1];g.push(`${S},${T}`)}g=g.join(" ");const p=A(this,Wd,this.svgFactory.createElement(this.svgElementName));return p.setAttribute("points",g),p.setAttribute("stroke-width",r.width||1),p.setAttribute("stroke","transparent"),p.setAttribute("fill","transparent"),f.append(p),this.container.append(f),!l&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return c(this,Wd)}addHighlightArea(){this.container.classList.add("highlightArea")}}Wd=new WeakMap;class qM extends fw{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class VM extends Se{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var Jd,Yl,tf,_y;class uv extends Se{constructor(i){super(i,{isRenderable:!0,ignoreBorder:!0});w(this,tf);w(this,Jd,null);w(this,Yl,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?St.HIGHLIGHT:St.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:i,rotation:n,inkLists:r,borderStyle:l,popupRef:u}}=this,{transform:h,width:f,height:g}=E(this,tf,_y).call(this,n,i),p=this.svgFactory.create(f,g,!0),y=A(this,Jd,this.svgFactory.createElement("svg:g"));p.append(y),y.setAttribute("stroke-width",l.width||1),y.setAttribute("stroke-linecap","round"),y.setAttribute("stroke-linejoin","round"),y.setAttribute("stroke-miterlimit",10),y.setAttribute("stroke","transparent"),y.setAttribute("fill","transparent"),y.setAttribute("transform",h);for(let v=0,S=r.length;v<S;v++){const T=this.svgFactory.createElement(this.svgElementName);c(this,Yl).push(T),T.setAttribute("points",r[v].join(",")),y.append(T)}return!u&&this.hasPopupData&&this._createPopup(),this.container.append(p),this._editOnDoubleClick(),this.container}updateEdited(i){super.updateEdited(i);const{thickness:n,points:r,rect:l}=i,u=c(this,Jd);if(n>=0&&u.setAttribute("stroke-width",n||1),r)for(let h=0,f=c(this,Yl).length;h<f;h++)c(this,Yl)[h].setAttribute("points",r[h].join(","));if(l){const{transform:h,width:f,height:g}=E(this,tf,_y).call(this,this.data.rotation,l);u.parentElement.setAttribute("viewBox",`0 0 ${f} ${g}`),u.setAttribute("transform",h)}}getElementsToTriggerPopup(){return c(this,Yl)}addHighlightArea(){this.container.classList.add("highlightArea")}}Jd=new WeakMap,Yl=new WeakMap,tf=new WeakSet,_y=function(i,n){switch(i){case 90:return{transform:`rotate(90) translate(${-n[0]},${n[1]}) scale(1,-1)`,width:n[3]-n[1],height:n[2]-n[0]};case 180:return{transform:`rotate(180) translate(${-n[2]},${n[1]}) scale(1,-1)`,width:n[2]-n[0],height:n[3]-n[1]};case 270:return{transform:`rotate(270) translate(${-n[2]},${n[3]}) scale(1,-1)`,width:n[3]-n[1],height:n[2]-n[0]};default:return{transform:`translate(${-n[0]},${n[3]}) scale(1,-1)`,width:n[2]-n[0],height:n[3]-n[1]}}};class gw extends Se{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=St.HIGHLIGHT}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),this.container}}class XM extends Se{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class YM extends Se{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class $M extends Se{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class pw extends Se{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=St.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var ef,sf,xy;class KM extends Se{constructor(i){var r;super(i,{isRenderable:!0});w(this,sf);w(this,ef,null);const{file:n}=this.data;this.filename=n.filename,this.content=n.content,(r=this.linkService.eventBus)==null||r.dispatch("fileattachmentannotation",{source:this,...n})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:i,data:n}=this;let r;n.hasAppearance||n.fillAlpha===0?r=document.createElement("div"):(r=document.createElement("img"),r.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(n.name)?"paperclip":"pushpin"}.svg`,n.fillAlpha&&n.fillAlpha<1&&(r.style=`filter: opacity(${Math.round(n.fillAlpha*100)}%);`)),r.addEventListener("dblclick",E(this,sf,xy).bind(this)),A(this,ef,r);const{isMac:l}=ni.platform;return i.addEventListener("keydown",u=>{u.key==="Enter"&&(l?u.metaKey:u.ctrlKey)&&E(this,sf,xy).call(this)}),!n.popupRef&&this.hasPopupData?this._createPopup():r.classList.add("popupTriggerArea"),i.append(r),i}getElementsToTriggerPopup(){return c(this,ef)}addHighlightArea(){this.container.classList.add("highlightArea")}}ef=new WeakMap,sf=new WeakSet,xy=function(){var i;(i=this.downloadManager)==null||i.openOrDownloadData(this.content,this.filename)};var nf,$l,Ar,af,Ir,Ey,Ty;const bv=class bv{constructor({div:t,accessibilityManager:i,annotationCanvasMap:n,annotationEditorUIManager:r,page:l,viewport:u,structTreeLayer:h}){w(this,Ir);w(this,nf,null);w(this,$l,null);w(this,Ar,new Map);w(this,af,null);this.div=t,A(this,nf,i),A(this,$l,n),A(this,af,h||null),this.page=l,this.viewport=u,this.zIndex=0,this._annotationEditorUIManager=r}hasEditableAnnotations(){return c(this,Ar).size>0}async render(t){var u;const{annotations:i}=t,n=this.div;bo(n,this.viewport);const r=new Map,l={data:null,layer:n,linkService:t.linkService,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:t.renderForms!==!1,svgFactory:new zp,annotationStorage:t.annotationStorage||new lv,enableScripting:t.enableScripting===!0,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,parent:this,elements:null};for(const h of i){if(h.noHTML)continue;const f=h.annotationType===Ee.POPUP;if(f){const y=r.get(h.id);if(!y)continue;l.elements=y}else if(h.rect[2]===h.rect[0]||h.rect[3]===h.rect[1])continue;l.data=h;const g=j_.create(l);if(!g.isRenderable)continue;if(!f&&h.popupRef){const y=r.get(h.popupRef);y?y.push(g):r.set(h.popupRef,[g])}const p=g.render();h.hidden&&(p.style.visibility="hidden"),await E(this,Ir,Ey).call(this,p,h.id),g._isEditable&&(c(this,Ar).set(g.data.id,g),(u=this._annotationEditorUIManager)==null||u.renderAnnotationElement(g))}E(this,Ir,Ty).call(this)}async addLinkAnnotations(t,i){const n={data:null,layer:this.div,linkService:i,svgFactory:new zp,parent:this};for(const r of t){r.borderStyle||(r.borderStyle=bv._defaultBorderStyle),n.data=r;const l=j_.create(n);if(!l.isRenderable)continue;const u=l.render();await E(this,Ir,Ey).call(this,u,r.id)}}update({viewport:t}){const i=this.div;this.viewport=t,bo(i,{rotation:t.rotation}),E(this,Ir,Ty).call(this),i.hidden=!1}getEditableAnnotations(){return Array.from(c(this,Ar).values())}getEditableAnnotation(t){return c(this,Ar).get(t)}static get _defaultBorderStyle(){return zt(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:oc.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}};nf=new WeakMap,$l=new WeakMap,Ar=new WeakMap,af=new WeakMap,Ir=new WeakSet,Ey=async function(t,i){var u,h;const n=t.firstChild||t,r=n.id=`${iv}${i}`,l=await((u=c(this,af))==null?void 0:u.getAriaAttributes(r));if(l)for(const[f,g]of l)n.setAttribute(f,g);this.div.append(t),(h=c(this,nf))==null||h.moveElementInDOM(this.div,t,n,!1)},Ty=function(){var i;if(!c(this,$l))return;const t=this.div;for(const[n,r]of c(this,$l)){const l=t.querySelector(`[data-annotation-id="${n}"]`);if(!l)continue;r.className="annotationContent";const{firstChild:u}=l;u?u.nodeName==="CANVAS"?u.replaceWith(r):u.classList.contains("annotationContent")?u.after(r):u.before(r):l.append(r);const h=c(this,Ar).get(n);h&&(h._hasNoCanvas?((i=this._annotationEditorUIManager)==null||i.setMissingCanvas(n,l.id,r),h._hasNoCanvas=!1):h.canvas=r)}c(this,$l).clear()};let wy=bv;const Wg=/\r\n?|\n/g;var Bs,Qi,rf,Kl,Zi,Me,mw,bw,yw,bp,xa,yp,vp,vw,My,Aw;const ne=class ne extends ae{constructor(i){super({...i,name:"freeTextEditor"});w(this,Me);w(this,Bs);w(this,Qi,"");w(this,rf,`${this.id}-editor`);w(this,Kl,null);w(this,Zi);A(this,Bs,i.color||ne._defaultColor||ae._defaultLineColor),A(this,Zi,i.fontSize||ne._defaultFontSize)}static get _keyboardManager(){const i=ne.prototype,n=u=>u.isEmpty(),r=yo.TRANSLATE_SMALL,l=yo.TRANSLATE_BIG;return zt(this,"_keyboardManager",new Rf([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],i.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],i.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],i._translateEmpty,{args:[-r,0],checker:n}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],i._translateEmpty,{args:[-l,0],checker:n}],[["ArrowRight","mac+ArrowRight"],i._translateEmpty,{args:[r,0],checker:n}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],i._translateEmpty,{args:[l,0],checker:n}],[["ArrowUp","mac+ArrowUp"],i._translateEmpty,{args:[0,-r],checker:n}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],i._translateEmpty,{args:[0,-l],checker:n}],[["ArrowDown","mac+ArrowDown"],i._translateEmpty,{args:[0,r],checker:n}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],i._translateEmpty,{args:[0,l],checker:n}]]))}static initialize(i,n){ae.initialize(i,n);const r=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(r.getPropertyValue("--freetext-padding"))}static updateDefaultParams(i,n){switch(i){case Pt.FREETEXT_SIZE:ne._defaultFontSize=n;break;case Pt.FREETEXT_COLOR:ne._defaultColor=n;break}}updateParams(i,n){switch(i){case Pt.FREETEXT_SIZE:E(this,Me,mw).call(this,n);break;case Pt.FREETEXT_COLOR:E(this,Me,bw).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[Pt.FREETEXT_SIZE,ne._defaultFontSize],[Pt.FREETEXT_COLOR,ne._defaultColor||ae._defaultLineColor]]}get propertiesToUpdate(){return[[Pt.FREETEXT_SIZE,c(this,Zi)],[Pt.FREETEXT_COLOR,c(this,Bs)]]}_translateEmpty(i,n){this._uiManager.translateSelectedEditors(i,n,!0)}getInitialTranslation(){const i=this.parentScale;return[-ne._internalPadding*i,-(ne._internalPadding+c(this,Zi))*i]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),A(this,Kl,new AbortController);const i=this._uiManager.combinedSignal(c(this,Kl));return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:i}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:i}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:i}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:i}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:i}),!0}disableEditMode(){var i;return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",c(this,rf)),this._isDraggable=!0,(i=c(this,Kl))==null||i.abort(),A(this,Kl,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(i){this._focusEventsAllowed&&(super.focusin(i),i.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(i){var n;this.width||(this.enableEditMode(),i&&this.editorDiv.focus(),(n=this._initialOptions)!=null&&n.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const i=c(this,Qi),n=A(this,Qi,E(this,Me,yw).call(this).trimEnd());if(i===n)return;const r=l=>{if(A(this,Qi,l),!l){this.remove();return}E(this,Me,vp).call(this),this._uiManager.rebuild(this),E(this,Me,bp).call(this)};this.addCommands({cmd:()=>{r(n)},undo:()=>{r(i)},mustExec:!1}),E(this,Me,bp).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(i){i.target===this.div&&i.key==="Enter"&&(this.enterInEditMode(),i.preventDefault())}editorDivKeydown(i){ne._keyboardManager.exec(this,i)}editorDivFocus(i){this.isEditing=!0}editorDivBlur(i){this.isEditing=!1}editorDivInput(i){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let i,n;(this._isCopy||this.annotationElementId)&&(i=this.x,n=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",c(this,rf)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:r}=this.editorDiv;if(r.fontSize=`calc(${c(this,Zi)}px * var(--total-scale-factor))`,r.color=c(this,Bs),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[l,u]=this.parentDimensions;if(this.annotationElementId){const{position:h}=this._initialData;let[f,g]=this.getInitialTranslation();[f,g]=this.pageTranslationToScreen(f,g);const[p,y]=this.pageDimensions,[v,S]=this.pageTranslation;let T,x;switch(this.rotation){case 0:T=i+(h[0]-v)/p,x=n+this.height-(h[1]-S)/y;break;case 90:T=i+(h[0]-v)/p,x=n-(h[1]-S)/y,[f,g]=[g,-f];break;case 180:T=i-this.width+(h[0]-v)/p,x=n-(h[1]-S)/y,[f,g]=[-f,-g];break;case 270:T=i+(h[0]-v-this.height*y)/p,x=n+(h[1]-S-this.width*p)/y,[f,g]=[-g,f];break}this.setAt(T*l,x*u,f,g)}else this._moveAfterPaste(i,n);E(this,Me,vp).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(i){var T,x,M;const n=i.clipboardData||window.clipboardData,{types:r}=n;if(r.length===1&&r[0]==="text/plain")return;i.preventDefault();const l=E(T=ne,xa,My).call(T,n.getData("text")||"").replaceAll(Wg,`
`);if(!l)return;const u=window.getSelection();if(!u.rangeCount)return;this.editorDiv.normalize(),u.deleteFromDocument();const h=u.getRangeAt(0);if(!l.includes(`
`)){h.insertNode(document.createTextNode(l)),this.editorDiv.normalize(),u.collapseToStart();return}const{startContainer:f,startOffset:g}=h,p=[],y=[];if(f.nodeType===Node.TEXT_NODE){const R=f.parentElement;if(y.push(f.nodeValue.slice(g).replaceAll(Wg,"")),R!==this.editorDiv){let k=p;for(const O of this.editorDiv.childNodes){if(O===R){k=y;continue}k.push(E(x=ne,xa,yp).call(x,O))}}p.push(f.nodeValue.slice(0,g).replaceAll(Wg,""))}else if(f===this.editorDiv){let R=p,k=0;for(const O of this.editorDiv.childNodes)k++===g&&(R=y),R.push(E(M=ne,xa,yp).call(M,O))}A(this,Qi,`${p.join(`
`)}${l}${y.join(`
`)}`),E(this,Me,vp).call(this);const v=new Range;let S=Math.sumPrecise(p.map(R=>R.length));for(const{firstChild:R}of this.editorDiv.childNodes)if(R.nodeType===Node.TEXT_NODE){const k=R.nodeValue.length;if(S<=k){v.setStart(R,S),v.setEnd(R,S);break}S-=k}u.removeAllRanges(),u.addRange(v)}get contentDiv(){return this.editorDiv}static async deserialize(i,n,r){var h;let l=null;if(i instanceof dw){const{data:{defaultAppearanceData:{fontSize:f,fontColor:g},rect:p,rotation:y,id:v,popupRef:S},textContent:T,textPosition:x,parent:{page:{pageNumber:M}}}=i;if(!T||T.length===0)return null;l=i={annotationType:St.FREETEXT,color:Array.from(g),fontSize:f,value:T.join(`
`),position:x,pageIndex:M-1,rect:p.slice(0),rotation:y,id:v,deleted:!1,popupRef:S}}const u=await super.deserialize(i,n,r);return A(u,Zi,i.fontSize),A(u,Bs,ft.makeHexColor(...i.color)),A(u,Qi,E(h=ne,xa,My).call(h,i.value)),u.annotationElementId=i.id||null,u._initialData=l,u}serialize(i=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const n=ne._internalPadding*this.parentScale,r=this.getRect(n,n),l=ae._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:c(this,Bs)),u={annotationType:St.FREETEXT,color:l,fontSize:c(this,Zi),value:E(this,Me,vw).call(this),pageIndex:this.pageIndex,rect:r,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return i?(u.isCopy=!0,u):this.annotationElementId&&!E(this,Me,Aw).call(this,u)?null:(u.id=this.annotationElementId,u)}renderAnnotationElement(i){const n=super.renderAnnotationElement(i);if(this.deleted)return n;const{style:r}=n;r.fontSize=`calc(${c(this,Zi)}px * var(--total-scale-factor))`,r.color=c(this,Bs),n.replaceChildren();for(const u of c(this,Qi).split(`
`)){const h=document.createElement("div");h.append(u?document.createTextNode(u):document.createElement("br")),n.append(h)}const l=ne._internalPadding*this.parentScale;return i.updateEdited({rect:this.getRect(l,l),popupContent:c(this,Qi)}),n}resetAnnotationElement(i){super.resetAnnotationElement(i),i.resetEdited()}};Bs=new WeakMap,Qi=new WeakMap,rf=new WeakMap,Kl=new WeakMap,Zi=new WeakMap,Me=new WeakSet,mw=function(i){const n=l=>{this.editorDiv.style.fontSize=`calc(${l}px * var(--total-scale-factor))`,this.translate(0,-(l-c(this,Zi))*this.parentScale),A(this,Zi,l),E(this,Me,bp).call(this)},r=c(this,Zi);this.addCommands({cmd:n.bind(this,i),undo:n.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Pt.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},bw=function(i){const n=l=>{A(this,Bs,this.editorDiv.style.color=l)},r=c(this,Bs);this.addCommands({cmd:n.bind(this,i),undo:n.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Pt.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},yw=function(){var r;const i=[];this.editorDiv.normalize();let n=null;for(const l of this.editorDiv.childNodes)(n==null?void 0:n.nodeType)===Node.TEXT_NODE&&l.nodeName==="BR"||(i.push(E(r=ne,xa,yp).call(r,l)),n=l);return i.join(`
`)},bp=function(){const[i,n]=this.parentDimensions;let r;if(this.isAttachedToDOM)r=this.div.getBoundingClientRect();else{const{currentLayer:l,div:u}=this,h=u.style.display,f=u.classList.contains("hidden");u.classList.remove("hidden"),u.style.display="hidden",l.div.append(this.div),r=u.getBoundingClientRect(),u.remove(),u.style.display=h,u.classList.toggle("hidden",f)}this.rotation%180===this.parentRotation%180?(this.width=r.width/i,this.height=r.height/n):(this.width=r.height/i,this.height=r.width/n),this.fixAndSetPosition()},xa=new WeakSet,yp=function(i){return(i.nodeType===Node.TEXT_NODE?i.nodeValue:i.innerText).replaceAll(Wg,"")},vp=function(){if(this.editorDiv.replaceChildren(),!!c(this,Qi))for(const i of c(this,Qi).split(`
`)){const n=document.createElement("div");n.append(i?document.createTextNode(i):document.createElement("br")),this.editorDiv.append(n)}},vw=function(){return c(this,Qi).replaceAll(""," ")},My=function(i){return i.replaceAll(" ","")},Aw=function(i){const{value:n,fontSize:r,color:l,pageIndex:u}=this._initialData;return this._hasBeenMoved||i.value!==n||i.fontSize!==r||i.color.some((h,f)=>h!==l[f])||i.pageIndex!==u},w(ne,xa),J(ne,"_freeTextDefaultContent",""),J(ne,"_internalPadding",0),J(ne,"_defaultColor",null),J(ne,"_defaultFontSize",10),J(ne,"_type","freetext"),J(ne,"_editorType",St.FREETEXT);let Cy=ne;class at{toSVGPath(){te("Abstract method `toSVGPath` must be implemented.")}get box(){te("Abstract getter `box` must be implemented.")}serialize(t,i){te("Abstract method `serialize` must be implemented.")}static _rescale(t,i,n,r,l,u){u||(u=new Float32Array(t.length));for(let h=0,f=t.length;h<f;h+=2)u[h]=i+t[h]*r,u[h+1]=n+t[h+1]*l;return u}static _rescaleAndSwap(t,i,n,r,l,u){u||(u=new Float32Array(t.length));for(let h=0,f=t.length;h<f;h+=2)u[h]=i+t[h+1]*r,u[h+1]=n+t[h]*l;return u}static _translate(t,i,n,r){r||(r=new Float32Array(t.length));for(let l=0,u=t.length;l<u;l+=2)r[l]=i+t[l],r[l+1]=n+t[l+1];return r}static svgRound(t){return Math.round(t*1e4)}static _normalizePoint(t,i,n,r,l){switch(l){case 90:return[1-i/n,t/r];case 180:return[1-t/n,1-i/r];case 270:return[i/n,1-t/r];default:return[t/n,i/r]}}static _normalizePagePoint(t,i,n){switch(n){case 90:return[1-i,t];case 180:return[1-t,1-i];case 270:return[i,1-t];default:return[t,i]}}static createBezierPoints(t,i,n,r,l,u){return[(t+5*n)/6,(i+5*r)/6,(5*n+l)/6,(5*r+u)/6,(n+l)/2,(r+u)/2]}}J(at,"PRECISION",1e-4);var Wi,Is,su,nu,mn,Rt,Ql,Zl,lf,of,au,ru,Sr,cf,tm,em,ze,Gh,Sw,_w,xw,ww,Ew,Tw;const Vn=class Vn{constructor({x:t,y:i},n,r,l,u,h=0){w(this,ze);w(this,Wi);w(this,Is,[]);w(this,su);w(this,nu);w(this,mn,[]);w(this,Rt,new Float32Array(18));w(this,Ql);w(this,Zl);w(this,lf);w(this,of);w(this,au);w(this,ru);w(this,Sr,[]);A(this,Wi,n),A(this,ru,l*r),A(this,nu,u),c(this,Rt).set([NaN,NaN,NaN,NaN,t,i],6),A(this,su,h),A(this,of,c(Vn,cf)*r),A(this,lf,c(Vn,em)*r),A(this,au,r),c(this,Sr).push(t,i)}isEmpty(){return isNaN(c(this,Rt)[8])}add({x:t,y:i}){var et;A(this,Ql,t),A(this,Zl,i);const[n,r,l,u]=c(this,Wi);let[h,f,g,p]=c(this,Rt).subarray(8,12);const y=t-g,v=i-p,S=Math.hypot(y,v);if(S<c(this,lf))return!1;const T=S-c(this,of),x=T/S,M=x*y,R=x*v;let k=h,O=f;h=g,f=p,g+=M,p+=R,(et=c(this,Sr))==null||et.push(t,i);const H=-R/T,z=M/T,G=H*c(this,ru),V=z*c(this,ru);return c(this,Rt).set(c(this,Rt).subarray(2,8),0),c(this,Rt).set([g+G,p+V],4),c(this,Rt).set(c(this,Rt).subarray(14,18),12),c(this,Rt).set([g-G,p-V],16),isNaN(c(this,Rt)[6])?(c(this,mn).length===0&&(c(this,Rt).set([h+G,f+V],2),c(this,mn).push(NaN,NaN,NaN,NaN,(h+G-n)/l,(f+V-r)/u),c(this,Rt).set([h-G,f-V],14),c(this,Is).push(NaN,NaN,NaN,NaN,(h-G-n)/l,(f-V-r)/u)),c(this,Rt).set([k,O,h,f,g,p],6),!this.isEmpty()):(c(this,Rt).set([k,O,h,f,g,p],6),Math.abs(Math.atan2(O-f,k-h)-Math.atan2(R,M))<Math.PI/2?([h,f,g,p]=c(this,Rt).subarray(2,6),c(this,mn).push(NaN,NaN,NaN,NaN,((h+g)/2-n)/l,((f+p)/2-r)/u),[h,f,k,O]=c(this,Rt).subarray(14,18),c(this,Is).push(NaN,NaN,NaN,NaN,((k+h)/2-n)/l,((O+f)/2-r)/u),!0):([k,O,h,f,g,p]=c(this,Rt).subarray(0,6),c(this,mn).push(((k+5*h)/6-n)/l,((O+5*f)/6-r)/u,((5*h+g)/6-n)/l,((5*f+p)/6-r)/u,((h+g)/2-n)/l,((f+p)/2-r)/u),[g,p,h,f,k,O]=c(this,Rt).subarray(12,18),c(this,Is).push(((k+5*h)/6-n)/l,((O+5*f)/6-r)/u,((5*h+g)/6-n)/l,((5*f+p)/6-r)/u,((h+g)/2-n)/l,((f+p)/2-r)/u),!0))}toSVGPath(){if(this.isEmpty())return"";const t=c(this,mn),i=c(this,Is);if(isNaN(c(this,Rt)[6])&&!this.isEmpty())return E(this,ze,Sw).call(this);const n=[];n.push(`M${t[4]} ${t[5]}`);for(let r=6;r<t.length;r+=6)isNaN(t[r])?n.push(`L${t[r+4]} ${t[r+5]}`):n.push(`C${t[r]} ${t[r+1]} ${t[r+2]} ${t[r+3]} ${t[r+4]} ${t[r+5]}`);E(this,ze,xw).call(this,n);for(let r=i.length-6;r>=6;r-=6)isNaN(i[r])?n.push(`L${i[r+4]} ${i[r+5]}`):n.push(`C${i[r]} ${i[r+1]} ${i[r+2]} ${i[r+3]} ${i[r+4]} ${i[r+5]}`);return E(this,ze,_w).call(this,n),n.join(" ")}newFreeDrawOutline(t,i,n,r,l,u){return new Cw(t,i,n,r,l,u)}getOutlines(){var y;const t=c(this,mn),i=c(this,Is),n=c(this,Rt),[r,l,u,h]=c(this,Wi),f=new Float32Array((((y=c(this,Sr))==null?void 0:y.length)??0)+2);for(let v=0,S=f.length-2;v<S;v+=2)f[v]=(c(this,Sr)[v]-r)/u,f[v+1]=(c(this,Sr)[v+1]-l)/h;if(f[f.length-2]=(c(this,Ql)-r)/u,f[f.length-1]=(c(this,Zl)-l)/h,isNaN(n[6])&&!this.isEmpty())return E(this,ze,ww).call(this,f);const g=new Float32Array(c(this,mn).length+24+c(this,Is).length);let p=t.length;for(let v=0;v<p;v+=2){if(isNaN(t[v])){g[v]=g[v+1]=NaN;continue}g[v]=t[v],g[v+1]=t[v+1]}p=E(this,ze,Tw).call(this,g,p);for(let v=i.length-6;v>=6;v-=6)for(let S=0;S<6;S+=2){if(isNaN(i[v+S])){g[p]=g[p+1]=NaN,p+=2;continue}g[p]=i[v+S],g[p+1]=i[v+S+1],p+=2}return E(this,ze,Ew).call(this,g,p),this.newFreeDrawOutline(g,f,c(this,Wi),c(this,au),c(this,su),c(this,nu))}};Wi=new WeakMap,Is=new WeakMap,su=new WeakMap,nu=new WeakMap,mn=new WeakMap,Rt=new WeakMap,Ql=new WeakMap,Zl=new WeakMap,lf=new WeakMap,of=new WeakMap,au=new WeakMap,ru=new WeakMap,Sr=new WeakMap,cf=new WeakMap,tm=new WeakMap,em=new WeakMap,ze=new WeakSet,Gh=function(){const t=c(this,Rt).subarray(4,6),i=c(this,Rt).subarray(16,18),[n,r,l,u]=c(this,Wi);return[(c(this,Ql)+(t[0]-i[0])/2-n)/l,(c(this,Zl)+(t[1]-i[1])/2-r)/u,(c(this,Ql)+(i[0]-t[0])/2-n)/l,(c(this,Zl)+(i[1]-t[1])/2-r)/u]},Sw=function(){const[t,i,n,r]=c(this,Wi),[l,u,h,f]=E(this,ze,Gh).call(this);return`M${(c(this,Rt)[2]-t)/n} ${(c(this,Rt)[3]-i)/r} L${(c(this,Rt)[4]-t)/n} ${(c(this,Rt)[5]-i)/r} L${l} ${u} L${h} ${f} L${(c(this,Rt)[16]-t)/n} ${(c(this,Rt)[17]-i)/r} L${(c(this,Rt)[14]-t)/n} ${(c(this,Rt)[15]-i)/r} Z`},_w=function(t){const i=c(this,Is);t.push(`L${i[4]} ${i[5]} Z`)},xw=function(t){const[i,n,r,l]=c(this,Wi),u=c(this,Rt).subarray(4,6),h=c(this,Rt).subarray(16,18),[f,g,p,y]=E(this,ze,Gh).call(this);t.push(`L${(u[0]-i)/r} ${(u[1]-n)/l} L${f} ${g} L${p} ${y} L${(h[0]-i)/r} ${(h[1]-n)/l}`)},ww=function(t){const i=c(this,Rt),[n,r,l,u]=c(this,Wi),[h,f,g,p]=E(this,ze,Gh).call(this),y=new Float32Array(36);return y.set([NaN,NaN,NaN,NaN,(i[2]-n)/l,(i[3]-r)/u,NaN,NaN,NaN,NaN,(i[4]-n)/l,(i[5]-r)/u,NaN,NaN,NaN,NaN,h,f,NaN,NaN,NaN,NaN,g,p,NaN,NaN,NaN,NaN,(i[16]-n)/l,(i[17]-r)/u,NaN,NaN,NaN,NaN,(i[14]-n)/l,(i[15]-r)/u],0),this.newFreeDrawOutline(y,t,c(this,Wi),c(this,au),c(this,su),c(this,nu))},Ew=function(t,i){const n=c(this,Is);return t.set([NaN,NaN,NaN,NaN,n[4],n[5]],i),i+=6},Tw=function(t,i){const n=c(this,Rt).subarray(4,6),r=c(this,Rt).subarray(16,18),[l,u,h,f]=c(this,Wi),[g,p,y,v]=E(this,ze,Gh).call(this);return t.set([NaN,NaN,NaN,NaN,(n[0]-l)/h,(n[1]-u)/f,NaN,NaN,NaN,NaN,g,p,NaN,NaN,NaN,NaN,y,v,NaN,NaN,NaN,NaN,(r[0]-l)/h,(r[1]-u)/f],i),i+=24},w(Vn,cf,8),w(Vn,tm,2),w(Vn,em,c(Vn,cf)+c(Vn,tm));let Pp=Vn;var lu,Wl,fa,uf,Ji,hf,Ae,im,Mw;class Cw extends at{constructor(i,n,r,l,u,h){super();w(this,im);w(this,lu);w(this,Wl,new Float32Array(4));w(this,fa);w(this,uf);w(this,Ji);w(this,hf);w(this,Ae);A(this,Ae,i),A(this,Ji,n),A(this,lu,r),A(this,hf,l),A(this,fa,u),A(this,uf,h),this.lastPoint=[NaN,NaN],E(this,im,Mw).call(this,h);const[f,g,p,y]=c(this,Wl);for(let v=0,S=i.length;v<S;v+=2)i[v]=(i[v]-f)/p,i[v+1]=(i[v+1]-g)/y;for(let v=0,S=n.length;v<S;v+=2)n[v]=(n[v]-f)/p,n[v+1]=(n[v+1]-g)/y}toSVGPath(){const i=[`M${c(this,Ae)[4]} ${c(this,Ae)[5]}`];for(let n=6,r=c(this,Ae).length;n<r;n+=6){if(isNaN(c(this,Ae)[n])){i.push(`L${c(this,Ae)[n+4]} ${c(this,Ae)[n+5]}`);continue}i.push(`C${c(this,Ae)[n]} ${c(this,Ae)[n+1]} ${c(this,Ae)[n+2]} ${c(this,Ae)[n+3]} ${c(this,Ae)[n+4]} ${c(this,Ae)[n+5]}`)}return i.push("Z"),i.join(" ")}serialize([i,n,r,l],u){const h=r-i,f=l-n;let g,p;switch(u){case 0:g=at._rescale(c(this,Ae),i,l,h,-f),p=at._rescale(c(this,Ji),i,l,h,-f);break;case 90:g=at._rescaleAndSwap(c(this,Ae),i,n,h,f),p=at._rescaleAndSwap(c(this,Ji),i,n,h,f);break;case 180:g=at._rescale(c(this,Ae),r,n,-h,f),p=at._rescale(c(this,Ji),r,n,-h,f);break;case 270:g=at._rescaleAndSwap(c(this,Ae),r,l,-h,-f),p=at._rescaleAndSwap(c(this,Ji),r,l,-h,-f);break}return{outline:Array.from(g),points:[Array.from(p)]}}get box(){return c(this,Wl)}newOutliner(i,n,r,l,u,h=0){return new Pp(i,n,r,l,u,h)}getNewOutline(i,n){const[r,l,u,h]=c(this,Wl),[f,g,p,y]=c(this,lu),v=u*p,S=h*y,T=r*p+f,x=l*y+g,M=this.newOutliner({x:c(this,Ji)[0]*v+T,y:c(this,Ji)[1]*S+x},c(this,lu),c(this,hf),i,c(this,uf),n??c(this,fa));for(let R=2;R<c(this,Ji).length;R+=2)M.add({x:c(this,Ji)[R]*v+T,y:c(this,Ji)[R+1]*S+x});return M.getOutlines()}}lu=new WeakMap,Wl=new WeakMap,fa=new WeakMap,uf=new WeakMap,Ji=new WeakMap,hf=new WeakMap,Ae=new WeakMap,im=new WeakSet,Mw=function(i){const n=c(this,Ae);let r=n[4],l=n[5];const u=[r,l,r,l];let h=r,f=l;const g=i?Math.max:Math.min;for(let y=6,v=n.length;y<v;y+=6){const S=n[y+4],T=n[y+5];if(isNaN(n[y]))ft.pointBoundingBox(S,T,u),f<T?(h=S,f=T):f===T&&(h=g(h,S));else{const x=[1/0,1/0,-1/0,-1/0];ft.bezierBoundingBox(r,l,...n.slice(y,y+6),x),ft.rectBoundingBox(...x,u),f<x[3]?(h=x[2],f=x[3]):f===x[3]&&(h=g(h,x[2]))}r=S,l=T}const p=c(this,Wl);p[0]=u[0]-c(this,fa),p[1]=u[1]-c(this,fa),p[2]=u[2]-u[0]+2*c(this,fa),p[3]=u[3]-u[1]+2*c(this,fa),this.lastPoint=[h,f]};var df,ff,_r,Fs,wi,Rw,Ap,Dw,Nw,Dy;class Ry{constructor(t,i=0,n=0,r=!0){w(this,wi);w(this,df);w(this,ff);w(this,_r,[]);w(this,Fs,[]);const l=[1/0,1/0,-1/0,-1/0],u=10**-4;for(const{x:S,y:T,width:x,height:M}of t){const R=Math.floor((S-i)/u)*u,k=Math.ceil((S+x+i)/u)*u,O=Math.floor((T-i)/u)*u,H=Math.ceil((T+M+i)/u)*u,z=[R,O,H,!0],G=[k,O,H,!1];c(this,_r).push(z,G),ft.rectBoundingBox(R,O,k,H,l)}const h=l[2]-l[0]+2*n,f=l[3]-l[1]+2*n,g=l[0]-n,p=l[1]-n,y=c(this,_r).at(r?-1:-2),v=[y[0],y[2]];for(const S of c(this,_r)){const[T,x,M]=S;S[0]=(T-g)/h,S[1]=(x-p)/f,S[2]=(M-p)/f}A(this,df,new Float32Array([g,p,h,f])),A(this,ff,v)}getOutlines(){c(this,_r).sort((i,n)=>i[0]-n[0]||i[1]-n[1]||i[2]-n[2]);const t=[];for(const i of c(this,_r))i[3]?(t.push(...E(this,wi,Dy).call(this,i)),E(this,wi,Dw).call(this,i)):(E(this,wi,Nw).call(this,i),t.push(...E(this,wi,Dy).call(this,i)));return E(this,wi,Rw).call(this,t)}}df=new WeakMap,ff=new WeakMap,_r=new WeakMap,Fs=new WeakMap,wi=new WeakSet,Rw=function(t){const i=[],n=new Set;for(const u of t){const[h,f,g]=u;i.push([h,f,u],[h,g,u])}i.sort((u,h)=>u[1]-h[1]||u[0]-h[0]);for(let u=0,h=i.length;u<h;u+=2){const f=i[u][2],g=i[u+1][2];f.push(g),g.push(f),n.add(f),n.add(g)}const r=[];let l;for(;n.size>0;){const u=n.values().next().value;let[h,f,g,p,y]=u;n.delete(u);let v=h,S=f;for(l=[h,g],r.push(l);;){let T;if(n.has(p))T=p;else if(n.has(y))T=y;else break;n.delete(T),[h,f,g,p,y]=T,v!==h&&(l.push(v,S,h,S===f?f:g),v=h),S=S===f?g:f}l.push(v,S)}return new QM(r,c(this,df),c(this,ff))},Ap=function(t){const i=c(this,Fs);let n=0,r=i.length-1;for(;n<=r;){const l=n+r>>1,u=i[l][0];if(u===t)return l;u<t?n=l+1:r=l-1}return r+1},Dw=function([,t,i]){const n=E(this,wi,Ap).call(this,t);c(this,Fs).splice(n,0,[t,i])},Nw=function([,t,i]){const n=E(this,wi,Ap).call(this,t);for(let r=n;r<c(this,Fs).length;r++){const[l,u]=c(this,Fs)[r];if(l!==t)break;if(l===t&&u===i){c(this,Fs).splice(r,1);return}}for(let r=n-1;r>=0;r--){const[l,u]=c(this,Fs)[r];if(l!==t)break;if(l===t&&u===i){c(this,Fs).splice(r,1);return}}},Dy=function(t){const[i,n,r]=t,l=[[i,n,r]],u=E(this,wi,Ap).call(this,r);for(let h=0;h<u;h++){const[f,g]=c(this,Fs)[h];for(let p=0,y=l.length;p<y;p++){const[,v,S]=l[p];if(!(g<=v||S<=f)){if(v>=f){if(S>g)l[p][1]=g;else{if(y===1)return[];l.splice(p,1),p--,y--}continue}l[p][2]=f,S>g&&l.push([i,g,S])}}}return l};var gf,ou;class QM extends at{constructor(i,n,r){super();w(this,gf);w(this,ou);A(this,ou,i),A(this,gf,n),this.lastPoint=r}toSVGPath(){const i=[];for(const n of c(this,ou)){let[r,l]=n;i.push(`M${r} ${l}`);for(let u=2;u<n.length;u+=2){const h=n[u],f=n[u+1];h===r?(i.push(`V${f}`),l=f):f===l&&(i.push(`H${h}`),r=h)}i.push("Z")}return i.join(" ")}serialize([i,n,r,l],u){const h=[],f=r-i,g=l-n;for(const p of c(this,ou)){const y=new Array(p.length);for(let v=0;v<p.length;v+=2)y[v]=i+p[v]*f,y[v+1]=l-p[v+1]*g;h.push(y)}return h}get box(){return c(this,gf)}get classNamesForOutlining(){return["highlightOutline"]}}gf=new WeakMap,ou=new WeakMap;class Ny extends Pp{newFreeDrawOutline(t,i,n,r,l,u){return new ZM(t,i,n,r,l,u)}}class ZM extends Cw{newOutliner(t,i,n,r,l,u=0){return new Ny(t,i,n,r,l,u)}}var Us,Jl,cu,ke,pf,uu,mf,bf,xr,js,hu,yf,Jt,Oy,Ly,ky,rl,Ow,Qa;const Ni=class Ni{constructor({editor:t=null,uiManager:i=null}){w(this,Jt);w(this,Us,null);w(this,Jl,null);w(this,cu);w(this,ke,null);w(this,pf,!1);w(this,uu,!1);w(this,mf,null);w(this,bf);w(this,xr,null);w(this,js,null);w(this,hu);var n;t?(A(this,uu,!1),A(this,hu,Pt.HIGHLIGHT_COLOR),A(this,mf,t)):(A(this,uu,!0),A(this,hu,Pt.HIGHLIGHT_DEFAULT_COLOR)),A(this,js,(t==null?void 0:t._uiManager)||i),A(this,bf,c(this,js)._eventBus),A(this,cu,(t==null?void 0:t.color)||((n=c(this,js))==null?void 0:n.highlightColors.values().next().value)||"#FFFF98"),c(Ni,yf)||A(Ni,yf,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return zt(this,"_keyboardManager",new Rf([[["Escape","mac+Escape"],Ni.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],Ni.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],Ni.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],Ni.prototype._moveToPrevious],[["Home","mac+Home"],Ni.prototype._moveToBeginning],[["End","mac+End"],Ni.prototype._moveToEnd]]))}renderButton(){const t=A(this,Us,document.createElement("button"));t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.setAttribute("aria-haspopup",!0);const i=c(this,js)._signal;t.addEventListener("click",E(this,Jt,rl).bind(this),{signal:i}),t.addEventListener("keydown",E(this,Jt,ky).bind(this),{signal:i});const n=A(this,Jl,document.createElement("span"));return n.className="swatch",n.setAttribute("aria-hidden",!0),n.style.backgroundColor=c(this,cu),t.append(n),t}renderMainDropdown(){const t=A(this,ke,E(this,Jt,Oy).call(this));return t.setAttribute("aria-orientation","horizontal"),t.setAttribute("aria-labelledby","highlightColorPickerLabel"),t}_colorSelectFromKeyboard(t){if(t.target===c(this,Us)){E(this,Jt,rl).call(this,t);return}const i=t.target.getAttribute("data-color");i&&E(this,Jt,Ly).call(this,i,t)}_moveToNext(t){var i,n;if(!c(this,Jt,Qa)){E(this,Jt,rl).call(this,t);return}if(t.target===c(this,Us)){(i=c(this,ke).firstChild)==null||i.focus();return}(n=t.target.nextSibling)==null||n.focus()}_moveToPrevious(t){var i,n;if(t.target===((i=c(this,ke))==null?void 0:i.firstChild)||t.target===c(this,Us)){c(this,Jt,Qa)&&this._hideDropdownFromKeyboard();return}c(this,Jt,Qa)||E(this,Jt,rl).call(this,t),(n=t.target.previousSibling)==null||n.focus()}_moveToBeginning(t){var i;if(!c(this,Jt,Qa)){E(this,Jt,rl).call(this,t);return}(i=c(this,ke).firstChild)==null||i.focus()}_moveToEnd(t){var i;if(!c(this,Jt,Qa)){E(this,Jt,rl).call(this,t);return}(i=c(this,ke).lastChild)==null||i.focus()}hideDropdown(){var t,i;(t=c(this,ke))==null||t.classList.add("hidden"),(i=c(this,xr))==null||i.abort(),A(this,xr,null)}_hideDropdownFromKeyboard(){var t;if(!c(this,uu)){if(!c(this,Jt,Qa)){(t=c(this,mf))==null||t.unselect();return}this.hideDropdown(),c(this,Us).focus({preventScroll:!0,focusVisible:c(this,pf)})}}updateColor(t){if(c(this,Jl)&&(c(this,Jl).style.backgroundColor=t),!c(this,ke))return;const i=c(this,js).highlightColors.values();for(const n of c(this,ke).children)n.setAttribute("aria-selected",i.next().value===t)}destroy(){var t,i;(t=c(this,Us))==null||t.remove(),A(this,Us,null),A(this,Jl,null),(i=c(this,ke))==null||i.remove(),A(this,ke,null)}};Us=new WeakMap,Jl=new WeakMap,cu=new WeakMap,ke=new WeakMap,pf=new WeakMap,uu=new WeakMap,mf=new WeakMap,bf=new WeakMap,xr=new WeakMap,js=new WeakMap,hu=new WeakMap,yf=new WeakMap,Jt=new WeakSet,Oy=function(){const t=document.createElement("div"),i=c(this,js)._signal;t.addEventListener("contextmenu",Ys,{signal:i}),t.className="dropdown",t.role="listbox",t.setAttribute("aria-multiselectable",!1),t.setAttribute("aria-orientation","vertical"),t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(const[n,r]of c(this,js).highlightColors){const l=document.createElement("button");l.tabIndex="0",l.role="option",l.setAttribute("data-color",r),l.title=n,l.setAttribute("data-l10n-id",c(Ni,yf)[n]);const u=document.createElement("span");l.append(u),u.className="swatch",u.style.backgroundColor=r,l.setAttribute("aria-selected",r===c(this,cu)),l.addEventListener("click",E(this,Jt,Ly).bind(this,r),{signal:i}),t.append(l)}return t.addEventListener("keydown",E(this,Jt,ky).bind(this),{signal:i}),t},Ly=function(t,i){i.stopPropagation(),c(this,bf).dispatch("switchannotationeditorparams",{source:this,type:c(this,hu),value:t})},ky=function(t){Ni._keyboardManager.exec(this,t)},rl=function(t){if(c(this,Jt,Qa)){this.hideDropdown();return}if(A(this,pf,t.detail===0),c(this,xr)||(A(this,xr,new AbortController),window.addEventListener("pointerdown",E(this,Jt,Ow).bind(this),{signal:c(this,js).combinedSignal(c(this,xr))})),c(this,ke)){c(this,ke).classList.remove("hidden");return}const i=A(this,ke,E(this,Jt,Oy).call(this));c(this,Us).append(i)},Ow=function(t){var i;(i=c(this,ke))!=null&&i.contains(t.target)||this.hideDropdown()},Qa=function(){return c(this,ke)&&!c(this,ke).classList.contains("hidden")},w(Ni,yf,null);let Hp=Ni;var du,vf,ga,to,fu,ki,Af,Sf,eo,xs,ts,Je,gu,pa,di,pu,ws,_f,xt,zy,Sp,Lw,kw,zw,Py,ll,Cs,fc,Pw,_p,qh,Hw,Bw,Iw,Fw,Uw;const Gt=class Gt extends ae{constructor(i){super({...i,name:"highlightEditor"});w(this,xt);w(this,du,null);w(this,vf,0);w(this,ga);w(this,to,null);w(this,fu,null);w(this,ki,null);w(this,Af,null);w(this,Sf,0);w(this,eo,null);w(this,xs,null);w(this,ts,null);w(this,Je,!1);w(this,gu,null);w(this,pa);w(this,di,null);w(this,pu,"");w(this,ws);w(this,_f,"");this.color=i.color||Gt._defaultColor,A(this,ws,i.thickness||Gt._defaultThickness),A(this,pa,i.opacity||Gt._defaultOpacity),A(this,ga,i.boxes||null),A(this,_f,i.methodOfCreation||""),A(this,pu,i.text||""),this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",i.highlightId>-1?(A(this,Je,!0),E(this,xt,Sp).call(this,i),E(this,xt,ll).call(this)):c(this,ga)&&(A(this,du,i.anchorNode),A(this,vf,i.anchorOffset),A(this,Af,i.focusNode),A(this,Sf,i.focusOffset),E(this,xt,zy).call(this),E(this,xt,ll).call(this),this.rotate(this.rotation))}static get _keyboardManager(){const i=Gt.prototype;return zt(this,"_keyboardManager",new Rf([[["ArrowLeft","mac+ArrowLeft"],i._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],i._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],i._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],i._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:c(this,Je)?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:c(this,ws),methodOfCreation:c(this,_f)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(i){return{numberOfColors:i.get("color").size}}static initialize(i,n){var r;ae.initialize(i,n),Gt._defaultColor||(Gt._defaultColor=((r=n.highlightColors)==null?void 0:r.values().next().value)||"#fff066")}static updateDefaultParams(i,n){switch(i){case Pt.HIGHLIGHT_DEFAULT_COLOR:Gt._defaultColor=n;break;case Pt.HIGHLIGHT_THICKNESS:Gt._defaultThickness=n;break}}translateInPage(i,n){}get toolbarPosition(){return c(this,gu)}updateParams(i,n){switch(i){case Pt.HIGHLIGHT_COLOR:E(this,xt,Lw).call(this,n);break;case Pt.HIGHLIGHT_THICKNESS:E(this,xt,kw).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[Pt.HIGHLIGHT_DEFAULT_COLOR,Gt._defaultColor],[Pt.HIGHLIGHT_THICKNESS,Gt._defaultThickness]]}get propertiesToUpdate(){return[[Pt.HIGHLIGHT_COLOR,this.color||Gt._defaultColor],[Pt.HIGHLIGHT_THICKNESS,c(this,ws)||Gt._defaultThickness],[Pt.HIGHLIGHT_FREE,c(this,Je)]]}async addEditToolbar(){const i=await super.addEditToolbar();return i?(this._uiManager.highlightColors&&(A(this,fu,new Hp({editor:this})),i.addColorPicker(c(this,fu))),i):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(E(this,xt,qh).call(this))}getBaseTranslation(){return[0,0]}getRect(i,n){return super.getRect(i,n,E(this,xt,qh).call(this))}onceAdded(i){this.annotationElementId||this.parent.addUndoableEditor(this),i&&this.div.focus()}remove(){E(this,xt,Py).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(E(this,xt,ll).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(i){var r;let n=!1;this.parent&&!i?E(this,xt,Py).call(this):i&&(E(this,xt,ll).call(this,i),n=!this.parent&&((r=this.div)==null?void 0:r.classList.contains("selectedEditor"))),super.setParent(i),this.show(this._isVisible),n&&this.select()}rotate(i){var l,u,h;const{drawLayer:n}=this.parent;let r;c(this,Je)?(i=(i-this.rotation+360)%360,r=E(l=Gt,Cs,fc).call(l,c(this,xs).box,i)):r=E(u=Gt,Cs,fc).call(u,[this.x,this.y,this.width,this.height],i),n.updateProperties(c(this,ts),{bbox:r,root:{"data-main-rotation":i}}),n.updateProperties(c(this,di),{bbox:E(h=Gt,Cs,fc).call(h,c(this,ki).box,i),root:{"data-main-rotation":i}})}render(){if(this.div)return this.div;const i=super.render();c(this,pu)&&(i.setAttribute("aria-label",c(this,pu)),i.setAttribute("role","mark")),c(this,Je)?i.classList.add("free"):this.div.addEventListener("keydown",E(this,xt,Pw).bind(this),{signal:this._uiManager._signal});const n=A(this,eo,document.createElement("div"));i.append(n),n.setAttribute("aria-hidden","true"),n.className="internal",n.style.clipPath=c(this,to);const[r,l]=this.parentDimensions;return this.setDims(this.width*r,this.height*l),rx(this,c(this,eo),["pointerover","pointerleave"]),this.enableEditing(),i}pointerover(){var i;this.isSelected||(i=this.parent)==null||i.drawLayer.updateProperties(c(this,di),{rootClass:{hovered:!0}})}pointerleave(){var i;this.isSelected||(i=this.parent)==null||i.drawLayer.updateProperties(c(this,di),{rootClass:{hovered:!1}})}_moveCaret(i){switch(this.parent.unselect(this),i){case 0:case 2:E(this,xt,_p).call(this,!0);break;case 1:case 3:E(this,xt,_p).call(this,!1);break}}select(){var i;super.select(),c(this,di)&&((i=this.parent)==null||i.drawLayer.updateProperties(c(this,di),{rootClass:{hovered:!1,selected:!0}}))}unselect(){var i;super.unselect(),c(this,di)&&((i=this.parent)==null||i.drawLayer.updateProperties(c(this,di),{rootClass:{selected:!1}}),c(this,Je)||E(this,xt,_p).call(this,!1))}get _mustFixPosition(){return!c(this,Je)}show(i=this._isVisible){super.show(i),this.parent&&(this.parent.drawLayer.updateProperties(c(this,ts),{rootClass:{hidden:!i}}),this.parent.drawLayer.updateProperties(c(this,di),{rootClass:{hidden:!i}}))}static startHighlighting(i,n,{target:r,x:l,y:u}){const{x:h,y:f,width:g,height:p}=r.getBoundingClientRect(),y=new AbortController,v=i.combinedSignal(y),S=T=>{y.abort(),E(this,Cs,Fw).call(this,i,T)};window.addEventListener("blur",S,{signal:v}),window.addEventListener("pointerup",S,{signal:v}),window.addEventListener("pointerdown",Te,{capture:!0,passive:!1,signal:v}),window.addEventListener("contextmenu",Ys,{signal:v}),r.addEventListener("pointermove",E(this,Cs,Iw).bind(this,i),{signal:v}),this._freeHighlight=new Ny({x:l,y:u},[h,f,g,p],i.scale,this._defaultThickness/2,n,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=i.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static async deserialize(i,n,r){var x,M,R,k;let l=null;if(i instanceof gw){const{data:{quadPoints:O,rect:H,rotation:z,id:G,color:V,opacity:Z,popupRef:et},parent:{page:{pageNumber:rt}}}=i;l=i={annotationType:St.HIGHLIGHT,color:Array.from(V),opacity:Z,quadPoints:O,boxes:null,pageIndex:rt-1,rect:H.slice(0),rotation:z,id:G,deleted:!1,popupRef:et}}else if(i instanceof uv){const{data:{inkLists:O,rect:H,rotation:z,id:G,color:V,borderStyle:{rawWidth:Z},popupRef:et},parent:{page:{pageNumber:rt}}}=i;l=i={annotationType:St.HIGHLIGHT,color:Array.from(V),thickness:Z,inkLists:O,boxes:null,pageIndex:rt-1,rect:H.slice(0),rotation:z,id:G,deleted:!1,popupRef:et}}const{color:u,quadPoints:h,inkLists:f,opacity:g}=i,p=await super.deserialize(i,n,r);p.color=ft.makeHexColor(...u),A(p,pa,g||1),f&&A(p,ws,i.thickness),p.annotationElementId=i.id||null,p._initialData=l;const[y,v]=p.pageDimensions,[S,T]=p.pageTranslation;if(h){const O=A(p,ga,[]);for(let H=0;H<h.length;H+=8)O.push({x:(h[H]-S)/y,y:1-(h[H+1]-T)/v,width:(h[H+2]-h[H])/y,height:(h[H+1]-h[H+5])/v});E(x=p,xt,zy).call(x),E(M=p,xt,ll).call(M),p.rotate(p.rotation)}else if(f){A(p,Je,!0);const O=f[0],H={x:O[0]-S,y:v-(O[1]-T)},z=new Ny(H,[0,0,y,v],1,c(p,ws)/2,!0,.001);for(let Z=0,et=O.length;Z<et;Z+=2)H.x=O[Z]-S,H.y=v-(O[Z+1]-T),z.add(H);const{id:G,clipPathId:V}=n.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:p.color,"fill-opacity":p._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:z.toSVGPath()}},!0,!0);E(R=p,xt,Sp).call(R,{highlightOutlines:z.getOutlines(),highlightId:G,clipPathId:V}),E(k=p,xt,ll).call(k),p.rotate(p.parentRotation)}return p}serialize(i=!1){if(this.isEmpty()||i)return null;if(this.deleted)return this.serializeDeleted();const n=this.getRect(0,0),r=ae._colorManager.convert(this.color),l={annotationType:St.HIGHLIGHT,color:r,opacity:c(this,pa),thickness:c(this,ws),quadPoints:E(this,xt,Hw).call(this),outlines:E(this,xt,Bw).call(this,n),pageIndex:this.pageIndex,rect:n,rotation:E(this,xt,qh).call(this),structTreeParentId:this._structTreeParentId};return this.annotationElementId&&!E(this,xt,Uw).call(this,l)?null:(l.id=this.annotationElementId,l)}renderAnnotationElement(i){return i.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};du=new WeakMap,vf=new WeakMap,ga=new WeakMap,to=new WeakMap,fu=new WeakMap,ki=new WeakMap,Af=new WeakMap,Sf=new WeakMap,eo=new WeakMap,xs=new WeakMap,ts=new WeakMap,Je=new WeakMap,gu=new WeakMap,pa=new WeakMap,di=new WeakMap,pu=new WeakMap,ws=new WeakMap,_f=new WeakMap,xt=new WeakSet,zy=function(){const i=new Ry(c(this,ga),.001);A(this,xs,i.getOutlines()),[this.x,this.y,this.width,this.height]=c(this,xs).box;const n=new Ry(c(this,ga),.0025,.001,this._uiManager.direction==="ltr");A(this,ki,n.getOutlines());const{lastPoint:r}=c(this,ki);A(this,gu,[(r[0]-this.x)/this.width,(r[1]-this.y)/this.height])},Sp=function({highlightOutlines:i,highlightId:n,clipPathId:r}){var y,v;if(A(this,xs,i),A(this,ki,i.getNewOutline(c(this,ws)/2+1.5,.0025)),n>=0)A(this,ts,n),A(this,to,r),this.parent.drawLayer.finalizeDraw(n,{bbox:i.box,path:{d:i.toSVGPath()}}),A(this,di,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:c(this,ki).box,path:{d:c(this,ki).toSVGPath()}},!0));else if(this.parent){const S=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(c(this,ts),{bbox:E(y=Gt,Cs,fc).call(y,c(this,xs).box,(S-this.rotation+360)%360),path:{d:i.toSVGPath()}}),this.parent.drawLayer.updateProperties(c(this,di),{bbox:E(v=Gt,Cs,fc).call(v,c(this,ki).box,S),path:{d:c(this,ki).toSVGPath()}})}const[u,h,f,g]=i.box;switch(this.rotation){case 0:this.x=u,this.y=h,this.width=f,this.height=g;break;case 90:{const[S,T]=this.parentDimensions;this.x=h,this.y=1-u,this.width=f*T/S,this.height=g*S/T;break}case 180:this.x=1-u,this.y=1-h,this.width=f,this.height=g;break;case 270:{const[S,T]=this.parentDimensions;this.x=1-h,this.y=u,this.width=f*T/S,this.height=g*S/T;break}}const{lastPoint:p}=c(this,ki);A(this,gu,[(p[0]-u)/f,(p[1]-h)/g])},Lw=function(i){const n=(u,h)=>{var f,g;this.color=u,A(this,pa,h),(f=this.parent)==null||f.drawLayer.updateProperties(c(this,ts),{root:{fill:u,"fill-opacity":h}}),(g=c(this,fu))==null||g.updateColor(u)},r=this.color,l=c(this,pa);this.addCommands({cmd:n.bind(this,i,Gt._defaultOpacity),undo:n.bind(this,r,l),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Pt.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(i)},!0)},kw=function(i){const n=c(this,ws),r=l=>{A(this,ws,l),E(this,xt,zw).call(this,l)};this.addCommands({cmd:r.bind(this,i),undo:r.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Pt.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:i},!0)},zw=function(i){if(!c(this,Je))return;E(this,xt,Sp).call(this,{highlightOutlines:c(this,xs).getNewOutline(i/2)}),this.fixAndSetPosition();const[n,r]=this.parentDimensions;this.setDims(this.width*n,this.height*r)},Py=function(){c(this,ts)===null||!this.parent||(this.parent.drawLayer.remove(c(this,ts)),A(this,ts,null),this.parent.drawLayer.remove(c(this,di)),A(this,di,null))},ll=function(i=this.parent){c(this,ts)===null&&({id:pi(this,ts)._,clipPathId:pi(this,to)._}=i.drawLayer.draw({bbox:c(this,xs).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":c(this,pa)},rootClass:{highlight:!0,free:c(this,Je)},path:{d:c(this,xs).toSVGPath()}},!1,!0),A(this,di,i.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:c(this,Je)},bbox:c(this,ki).box,path:{d:c(this,ki).toSVGPath()}},c(this,Je))),c(this,eo)&&(c(this,eo).style.clipPath=c(this,to)))},Cs=new WeakSet,fc=function([i,n,r,l],u){switch(u){case 90:return[1-n-l,i,l,r];case 180:return[1-i-r,1-n-l,r,l];case 270:return[n,1-i-r,l,r]}return[i,n,r,l]},Pw=function(i){Gt._keyboardManager.exec(this,i)},_p=function(i){if(!c(this,du))return;const n=window.getSelection();i?n.setPosition(c(this,du),c(this,vf)):n.setPosition(c(this,Af),c(this,Sf))},qh=function(){return c(this,Je)?this.rotation:0},Hw=function(){if(c(this,Je))return null;const[i,n]=this.pageDimensions,[r,l]=this.pageTranslation,u=c(this,ga),h=new Float32Array(u.length*8);let f=0;for(const{x:g,y:p,width:y,height:v}of u){const S=g*i+r,T=(1-p)*n+l;h[f]=h[f+4]=S,h[f+1]=h[f+3]=T,h[f+2]=h[f+6]=S+y*i,h[f+5]=h[f+7]=T-v*n,f+=8}return h},Bw=function(i){return c(this,xs).serialize(i,E(this,xt,qh).call(this))},Iw=function(i,n){this._freeHighlight.add(n)&&i.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})},Fw=function(i,n){this._freeHighlight.isEmpty()?i.drawLayer.remove(this._freeHighlightId):i.createAndAddNewEditor(n,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},Uw=function(i){const{color:n}=this._initialData;return i.color.some((r,l)=>r!==n[l])},w(Gt,Cs),J(Gt,"_defaultColor",null),J(Gt,"_defaultOpacity",1),J(Gt,"_defaultThickness",12),J(Gt,"_type","highlight"),J(Gt,"_editorType",St.HIGHLIGHT),J(Gt,"_freeHighlightId",-1),J(Gt,"_freeHighlight",null),J(Gt,"_freeHighlightClipId","");let Bp=Gt;var io;class jw{constructor(){w(this,io,Object.create(null))}updateProperty(t,i){this[t]=i,this.updateSVGProperty(t,i)}updateProperties(t){if(t)for(const[i,n]of Object.entries(t))i.startsWith("_")||this.updateProperty(i,n)}updateSVGProperty(t,i){c(this,io)[t]=i}toSVGProperties(){const t=c(this,io);return A(this,io,Object.create(null)),{root:t}}reset(){A(this,io,Object.create(null))}updateAll(t=this){this.updateProperties(t)}clone(){te("Not implemented")}}io=new WeakMap;var es,mu,je,so,no,wr,Er,Tr,ao,Bt,Hy,By,Iy,Vh,Gw,xp,Xh,gc;const lt=class lt extends ae{constructor(i){super(i);w(this,Bt);w(this,es,null);w(this,mu);J(this,"_drawId",null);A(this,mu,i.mustBeCommitted||!1),this._addOutlines(i)}_addOutlines(i){i.drawOutlines&&(E(this,Bt,Hy).call(this,i),E(this,Bt,Vh).call(this))}static _mergeSVGProperties(i,n){const r=new Set(Object.keys(i));for(const[l,u]of Object.entries(n))r.has(l)?Object.assign(i[l],u):i[l]=u;return i}static getDefaultDrawingOptions(i){te("Not implemented")}static get typesMap(){te("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(i,n){const r=this.typesMap.get(i);r&&this._defaultDrawingOptions.updateProperty(r,n),this._currentParent&&(c(lt,je).updateProperty(r,n),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(i,n){const r=this.constructor.typesMap.get(i);r&&this._updateProperty(i,r,n)}static get defaultPropertiesToUpdate(){const i=[],n=this._defaultDrawingOptions;for(const[r,l]of this.typesMap)i.push([r,n[l]]);return i}get propertiesToUpdate(){const i=[],{_drawingOptions:n}=this;for(const[r,l]of this.constructor.typesMap)i.push([r,n[l]]);return i}_updateProperty(i,n,r){const l=this._drawingOptions,u=l[n],h=f=>{var p;l.updateProperty(n,f);const g=c(this,es).updateProperty(n,f);g&&E(this,Bt,Xh).call(this,g),(p=this.parent)==null||p.drawLayer.updateProperties(this._drawId,l.toSVGProperties())};this.addCommands({cmd:h.bind(this,r),undo:h.bind(this,u),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:i,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){var i;(i=this.parent)==null||i.drawLayer.updateProperties(this._drawId,lt._mergeSVGProperties(c(this,es).getPathResizingSVGProperties(E(this,Bt,xp).call(this)),{bbox:E(this,Bt,gc).call(this)}))}_onResized(){var i;(i=this.parent)==null||i.drawLayer.updateProperties(this._drawId,lt._mergeSVGProperties(c(this,es).getPathResizedSVGProperties(E(this,Bt,xp).call(this)),{bbox:E(this,Bt,gc).call(this)}))}_onTranslating(i,n){var r;(r=this.parent)==null||r.drawLayer.updateProperties(this._drawId,{bbox:E(this,Bt,gc).call(this)})}_onTranslated(){var i;(i=this.parent)==null||i.drawLayer.updateProperties(this._drawId,lt._mergeSVGProperties(c(this,es).getPathTranslatedSVGProperties(E(this,Bt,xp).call(this),this.parentDimensions),{bbox:E(this,Bt,gc).call(this)}))}_onStartDragging(){var i;(i=this.parent)==null||i.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){var i;(i=this.parent)==null||i.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(i){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,c(this,mu)&&(A(this,mu,!1),this.commit(),this.parent.setSelected(this),i&&this.isOnScreen&&this.div.focus())}remove(){E(this,Bt,Iy).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(E(this,Bt,Vh).call(this),E(this,Bt,Xh).call(this,c(this,es).box),this.isAttachedToDOM||this.parent.add(this)))}setParent(i){var r;let n=!1;this.parent&&!i?(this._uiManager.removeShouldRescale(this),E(this,Bt,Iy).call(this)):i&&(this._uiManager.addShouldRescale(this),E(this,Bt,Vh).call(this,i),n=!this.parent&&((r=this.div)==null?void 0:r.classList.contains("selectedEditor"))),super.setParent(i),n&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,lt._mergeSVGProperties({bbox:E(this,Bt,gc).call(this)},c(this,es).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&E(this,Bt,Xh).call(this,c(this,es).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let i,n;this._isCopy&&(i=this.x,n=this.y);const r=super.render();r.classList.add("draw");const l=document.createElement("div");r.append(l),l.setAttribute("aria-hidden","true"),l.className="internal";const[u,h]=this.parentDimensions;return this.setDims(this.width*u,this.height*h),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(i,n),r}static createDrawerInstance(i,n,r,l,u){te("Not implemented")}static startDrawing(i,n,r,l){var M;const{target:u,offsetX:h,offsetY:f,pointerId:g,pointerType:p}=l;if(c(lt,Er)&&c(lt,Er)!==p)return;const{viewport:{rotation:y}}=i,{width:v,height:S}=u.getBoundingClientRect(),T=A(lt,so,new AbortController),x=i.combinedSignal(T);if(c(lt,wr)||A(lt,wr,g),c(lt,Er)??A(lt,Er,p),window.addEventListener("pointerup",R=>{var k;c(lt,wr)===R.pointerId?this._endDraw(R):(k=c(lt,Tr))==null||k.delete(R.pointerId)},{signal:x}),window.addEventListener("pointercancel",R=>{var k;c(lt,wr)===R.pointerId?this._currentParent.endDrawingSession():(k=c(lt,Tr))==null||k.delete(R.pointerId)},{signal:x}),window.addEventListener("pointerdown",R=>{c(lt,Er)===R.pointerType&&((c(lt,Tr)||A(lt,Tr,new Set)).add(R.pointerId),c(lt,je).isCancellable()&&(c(lt,je).removeLastElement(),c(lt,je).isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:x}),window.addEventListener("contextmenu",Ys,{signal:x}),u.addEventListener("pointermove",this._drawMove.bind(this),{signal:x}),u.addEventListener("touchmove",R=>{R.timeStamp===c(lt,ao)&&Te(R)},{signal:x}),i.toggleDrawing(),(M=n._editorUndoBar)==null||M.hide(),c(lt,je)){i.drawLayer.updateProperties(this._currentDrawId,c(lt,je).startNew(h,f,v,S,y));return}n.updateUIForDefaultProperties(this),A(lt,je,this.createDrawerInstance(h,f,v,S,y)),A(lt,no,this.getDefaultDrawingOptions()),this._currentParent=i,{id:this._currentDrawId}=i.drawLayer.draw(this._mergeSVGProperties(c(lt,no).toSVGProperties(),c(lt,je).defaultSVGProperties),!0,!1)}static _drawMove(i){var u;if(A(lt,ao,-1),!c(lt,je))return;const{offsetX:n,offsetY:r,pointerId:l}=i;if(c(lt,wr)===l){if(((u=c(lt,Tr))==null?void 0:u.size)>=1){this._endDraw(i);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,c(lt,je).add(n,r)),A(lt,ao,i.timeStamp),Te(i)}}static _cleanup(i){i&&(this._currentDrawId=-1,this._currentParent=null,A(lt,je,null),A(lt,no,null),A(lt,Er,null),A(lt,ao,NaN)),c(lt,so)&&(c(lt,so).abort(),A(lt,so,null),A(lt,wr,NaN),A(lt,Tr,null))}static _endDraw(i){const n=this._currentParent;if(n){if(n.toggleDrawing(!0),this._cleanup(!1),(i==null?void 0:i.target)===n.div&&n.drawLayer.updateProperties(this._currentDrawId,c(lt,je).end(i.offsetX,i.offsetY)),this.supportMultipleDrawings){const r=c(lt,je),l=this._currentDrawId,u=r.getLastElement();n.addCommands({cmd:()=>{n.drawLayer.updateProperties(l,r.setLastElement(u))},undo:()=>{n.drawLayer.updateProperties(l,r.removeLastElement())},mustExec:!1,type:Pt.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(i){const n=this._currentParent;if(!n)return null;if(n.toggleDrawing(!0),n.cleanUndoStack(Pt.DRAW_STEP),!c(lt,je).isEmpty()){const{pageDimensions:[r,l],scale:u}=n,h=n.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:c(lt,je).getOutlines(r*u,l*u,u,this._INNER_MARGIN),drawingOptions:c(lt,no),mustBeCommitted:!i});return this._cleanup(!0),h}return n.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(i){}static deserializeDraw(i,n,r,l,u,h){te("Not implemented")}static async deserialize(i,n,r){var y,v;const{rawDims:{pageWidth:l,pageHeight:u,pageX:h,pageY:f}}=n.viewport,g=this.deserializeDraw(h,f,l,u,this._INNER_MARGIN,i),p=await super.deserialize(i,n,r);return p.createDrawingOptions(i),E(y=p,Bt,Hy).call(y,{drawOutlines:g}),E(v=p,Bt,Vh).call(v),p.onScaleChanging(),p.rotate(),p}serializeDraw(i){const[n,r]=this.pageTranslation,[l,u]=this.pageDimensions;return c(this,es).serialize([n,r,l,u],i)}renderAnnotationElement(i){return i.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};es=new WeakMap,mu=new WeakMap,je=new WeakMap,so=new WeakMap,no=new WeakMap,wr=new WeakMap,Er=new WeakMap,Tr=new WeakMap,ao=new WeakMap,Bt=new WeakSet,Hy=function({drawOutlines:i,drawId:n,drawingOptions:r}){A(this,es,i),this._drawingOptions||(this._drawingOptions=r),n>=0?(this._drawId=n,this.parent.drawLayer.finalizeDraw(n,i.defaultProperties)):this._drawId=E(this,Bt,By).call(this,i,this.parent),E(this,Bt,Xh).call(this,i.box)},By=function(i,n){const{id:r}=n.drawLayer.draw(lt._mergeSVGProperties(this._drawingOptions.toSVGProperties(),i.defaultSVGProperties),!1,!1);return r},Iy=function(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())},Vh=function(i=this.parent){if(!(this._drawId!==null&&this.parent===i)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,i.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=E(this,Bt,By).call(this,c(this,es),i)}},Gw=function([i,n,r,l]){const{parentDimensions:[u,h],rotation:f}=this;switch(f){case 90:return[n,1-i,r*(h/u),l*(u/h)];case 180:return[1-i,1-n,r,l];case 270:return[1-n,i,r*(h/u),l*(u/h)];default:return[i,n,r,l]}},xp=function(){const{x:i,y:n,width:r,height:l,parentDimensions:[u,h],rotation:f}=this;switch(f){case 90:return[1-n,i,r*(u/h),l*(h/u)];case 180:return[1-i,1-n,r,l];case 270:return[n,1-i,r*(u/h),l*(h/u)];default:return[i,n,r,l]}},Xh=function(i){if([this.x,this.y,this.width,this.height]=E(this,Bt,Gw).call(this,i),this.div){this.fixAndSetPosition();const[n,r]=this.parentDimensions;this.setDims(this.width*n,this.height*r)}this._onResized()},gc=function(){const{x:i,y:n,width:r,height:l,rotation:u,parentRotation:h,parentDimensions:[f,g]}=this;switch((u*4+h)/90){case 1:return[1-n-l,i,l,r];case 2:return[1-i-r,1-n-l,r,l];case 3:return[n,1-i-r,l,r];case 4:return[i,n-r*(f/g),l*(g/f),r*(f/g)];case 5:return[1-n,i,r*(f/g),l*(g/f)];case 6:return[1-i-l*(g/f),1-n,l*(g/f),r*(f/g)];case 7:return[n-r*(f/g),1-i-l*(g/f),r*(f/g),l*(g/f)];case 8:return[i-r,n-l,r,l];case 9:return[1-n,i-r,l,r];case 10:return[1-i,1-n,r,l];case 11:return[n-l,1-i,l,r];case 12:return[i-l*(g/f),n,l*(g/f),r*(f/g)];case 13:return[1-n-r*(f/g),i-l*(g/f),r*(f/g),l*(g/f)];case 14:return[1-i,1-n-r*(f/g),l*(g/f),r*(f/g)];case 15:return[n,1-i,r*(f/g),l*(g/f)];default:return[i,n,r,l]}},J(lt,"_currentDrawId",-1),J(lt,"_currentParent",null),w(lt,je,null),w(lt,so,null),w(lt,no,null),w(lt,wr,NaN),w(lt,Er,null),w(lt,Tr,null),w(lt,ao,NaN),J(lt,"_INNER_MARGIN",3);let Ip=lt;var bn,Ge,qe,ro,bu,yi,ti,Es,lo,oo,co,yu,wp;class WM{constructor(t,i,n,r,l,u){w(this,yu);w(this,bn,new Float64Array(6));w(this,Ge);w(this,qe);w(this,ro);w(this,bu);w(this,yi);w(this,ti,"");w(this,Es,0);w(this,lo,new Of);w(this,oo);w(this,co);A(this,oo,n),A(this,co,r),A(this,ro,l),A(this,bu,u),[t,i]=E(this,yu,wp).call(this,t,i);const h=A(this,Ge,[NaN,NaN,NaN,NaN,t,i]);A(this,yi,[t,i]),A(this,qe,[{line:h,points:c(this,yi)}]),c(this,bn).set(h,0)}updateProperty(t,i){t==="stroke-width"&&A(this,bu,i)}isEmpty(){return!c(this,qe)||c(this,qe).length===0}isCancellable(){return c(this,yi).length<=10}add(t,i){[t,i]=E(this,yu,wp).call(this,t,i);const[n,r,l,u]=c(this,bn).subarray(2,6),h=t-l,f=i-u;return Math.hypot(c(this,oo)*h,c(this,co)*f)<=2?null:(c(this,yi).push(t,i),isNaN(n)?(c(this,bn).set([l,u,t,i],2),c(this,Ge).push(NaN,NaN,NaN,NaN,t,i),{path:{d:this.toSVGPath()}}):(isNaN(c(this,bn)[0])&&c(this,Ge).splice(6,6),c(this,bn).set([n,r,l,u,t,i],0),c(this,Ge).push(...at.createBezierPoints(n,r,l,u,t,i)),{path:{d:this.toSVGPath()}}))}end(t,i){const n=this.add(t,i);return n||(c(this,yi).length===2?{path:{d:this.toSVGPath()}}:null)}startNew(t,i,n,r,l){A(this,oo,n),A(this,co,r),A(this,ro,l),[t,i]=E(this,yu,wp).call(this,t,i);const u=A(this,Ge,[NaN,NaN,NaN,NaN,t,i]);A(this,yi,[t,i]);const h=c(this,qe).at(-1);return h&&(h.line=new Float32Array(h.line),h.points=new Float32Array(h.points)),c(this,qe).push({line:u,points:c(this,yi)}),c(this,bn).set(u,0),A(this,Es,0),this.toSVGPath(),null}getLastElement(){return c(this,qe).at(-1)}setLastElement(t){return c(this,qe)?(c(this,qe).push(t),A(this,Ge,t.line),A(this,yi,t.points),A(this,Es,0),{path:{d:this.toSVGPath()}}):c(this,lo).setLastElement(t)}removeLastElement(){if(!c(this,qe))return c(this,lo).removeLastElement();c(this,qe).pop(),A(this,ti,"");for(let t=0,i=c(this,qe).length;t<i;t++){const{line:n,points:r}=c(this,qe)[t];A(this,Ge,n),A(this,yi,r),A(this,Es,0),this.toSVGPath()}return{path:{d:c(this,ti)}}}toSVGPath(){const t=at.svgRound(c(this,Ge)[4]),i=at.svgRound(c(this,Ge)[5]);if(c(this,yi).length===2)return A(this,ti,`${c(this,ti)} M ${t} ${i} Z`),c(this,ti);if(c(this,yi).length<=6){const r=c(this,ti).lastIndexOf("M");A(this,ti,`${c(this,ti).slice(0,r)} M ${t} ${i}`),A(this,Es,6)}if(c(this,yi).length===4){const r=at.svgRound(c(this,Ge)[10]),l=at.svgRound(c(this,Ge)[11]);return A(this,ti,`${c(this,ti)} L ${r} ${l}`),A(this,Es,12),c(this,ti)}const n=[];c(this,Es)===0&&(n.push(`M ${t} ${i}`),A(this,Es,6));for(let r=c(this,Es),l=c(this,Ge).length;r<l;r+=6){const[u,h,f,g,p,y]=c(this,Ge).slice(r,r+6).map(at.svgRound);n.push(`C${u} ${h} ${f} ${g} ${p} ${y}`)}return A(this,ti,c(this,ti)+n.join(" ")),A(this,Es,c(this,Ge).length),c(this,ti)}getOutlines(t,i,n,r){const l=c(this,qe).at(-1);return l.line=new Float32Array(l.line),l.points=new Float32Array(l.points),c(this,lo).build(c(this,qe),t,i,n,c(this,ro),c(this,bu),r),A(this,bn,null),A(this,Ge,null),A(this,qe,null),A(this,ti,null),c(this,lo)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}bn=new WeakMap,Ge=new WeakMap,qe=new WeakMap,ro=new WeakMap,bu=new WeakMap,yi=new WeakMap,ti=new WeakMap,Es=new WeakMap,lo=new WeakMap,oo=new WeakMap,co=new WeakMap,yu=new WeakSet,wp=function(t,i){return at._normalizePoint(t,i,c(this,oo),c(this,co),c(this,ro))};var vi,xf,wf,is,yn,vn,vu,Au,uo,ii,Gn,qw,Vw,Xw;class Of extends at{constructor(){super(...arguments);w(this,ii);w(this,vi);w(this,xf,0);w(this,wf);w(this,is);w(this,yn);w(this,vn);w(this,vu);w(this,Au);w(this,uo)}build(i,n,r,l,u,h,f){A(this,yn,n),A(this,vn,r),A(this,vu,l),A(this,Au,u),A(this,uo,h),A(this,wf,f??0),A(this,is,i),E(this,ii,Vw).call(this)}get thickness(){return c(this,uo)}setLastElement(i){return c(this,is).push(i),{path:{d:this.toSVGPath()}}}removeLastElement(){return c(this,is).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const i=[];for(const{line:n}of c(this,is)){if(i.push(`M${at.svgRound(n[4])} ${at.svgRound(n[5])}`),n.length===6){i.push("Z");continue}if(n.length===12&&isNaN(n[6])){i.push(`L${at.svgRound(n[10])} ${at.svgRound(n[11])}`);continue}for(let r=6,l=n.length;r<l;r+=6){const[u,h,f,g,p,y]=n.subarray(r,r+6).map(at.svgRound);i.push(`C${u} ${h} ${f} ${g} ${p} ${y}`)}}return i.join("")}serialize([i,n,r,l],u){const h=[],f=[],[g,p,y,v]=E(this,ii,qw).call(this);let S,T,x,M,R,k,O,H,z;switch(c(this,Au)){case 0:z=at._rescale,S=i,T=n+l,x=r,M=-l,R=i+g*r,k=n+(1-p-v)*l,O=i+(g+y)*r,H=n+(1-p)*l;break;case 90:z=at._rescaleAndSwap,S=i,T=n,x=r,M=l,R=i+p*r,k=n+g*l,O=i+(p+v)*r,H=n+(g+y)*l;break;case 180:z=at._rescale,S=i+r,T=n,x=-r,M=l,R=i+(1-g-y)*r,k=n+p*l,O=i+(1-g)*r,H=n+(p+v)*l;break;case 270:z=at._rescaleAndSwap,S=i+r,T=n+l,x=-r,M=-l,R=i+(1-p-v)*r,k=n+(1-g-y)*l,O=i+(1-p)*r,H=n+(1-g)*l;break}for(const{line:G,points:V}of c(this,is))h.push(z(G,S,T,x,M,u?new Array(G.length):null)),f.push(z(V,S,T,x,M,u?new Array(V.length):null));return{lines:h,points:f,rect:[R,k,O,H]}}static deserialize(i,n,r,l,u,{paths:{lines:h,points:f},rotation:g,thickness:p}){const y=[];let v,S,T,x,M;switch(g){case 0:M=at._rescale,v=-i/r,S=n/l+1,T=1/r,x=-1/l;break;case 90:M=at._rescaleAndSwap,v=-n/l,S=-i/r,T=1/l,x=1/r;break;case 180:M=at._rescale,v=i/r+1,S=-n/l,T=-1/r,x=1/l;break;case 270:M=at._rescaleAndSwap,v=n/l+1,S=i/r+1,T=-1/l,x=-1/r;break}if(!h){h=[];for(const k of f){const O=k.length;if(O===2){h.push(new Float32Array([NaN,NaN,NaN,NaN,k[0],k[1]]));continue}if(O===4){h.push(new Float32Array([NaN,NaN,NaN,NaN,k[0],k[1],NaN,NaN,NaN,NaN,k[2],k[3]]));continue}const H=new Float32Array(3*(O-2));h.push(H);let[z,G,V,Z]=k.subarray(0,4);H.set([NaN,NaN,NaN,NaN,z,G],0);for(let et=4;et<O;et+=2){const rt=k[et],st=k[et+1];H.set(at.createBezierPoints(z,G,V,Z,rt,st),(et-2)*3),[z,G,V,Z]=[V,Z,rt,st]}}}for(let k=0,O=h.length;k<O;k++)y.push({line:M(h[k].map(H=>H??NaN),v,S,T,x),points:M(f[k].map(H=>H??NaN),v,S,T,x)});const R=new this.prototype.constructor;return R.build(y,r,l,1,g,p,u),R}get box(){return c(this,vi)}updateProperty(i,n){return i==="stroke-width"?E(this,ii,Xw).call(this,n):null}updateParentDimensions([i,n],r){const[l,u]=E(this,ii,Gn).call(this);A(this,yn,i),A(this,vn,n),A(this,vu,r);const[h,f]=E(this,ii,Gn).call(this),g=h-l,p=f-u,y=c(this,vi);return y[0]-=g,y[1]-=p,y[2]+=2*g,y[3]+=2*p,y}updateRotation(i){return A(this,xf,i),{path:{transform:this.rotationTransform}}}get viewBox(){return c(this,vi).map(at.svgRound).join(" ")}get defaultProperties(){const[i,n]=c(this,vi);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${at.svgRound(i)} ${at.svgRound(n)}`}}}get rotationTransform(){const[,,i,n]=c(this,vi);let r=0,l=0,u=0,h=0,f=0,g=0;switch(c(this,xf)){case 90:l=n/i,u=-i/n,f=i;break;case 180:r=-1,h=-1,f=i,g=n;break;case 270:l=-n/i,u=i/n,g=n;break;default:return""}return`matrix(${r} ${l} ${u} ${h} ${at.svgRound(f)} ${at.svgRound(g)})`}getPathResizingSVGProperties([i,n,r,l]){const[u,h]=E(this,ii,Gn).call(this),[f,g,p,y]=c(this,vi);if(Math.abs(p-u)<=at.PRECISION||Math.abs(y-h)<=at.PRECISION){const M=i+r/2-(f+p/2),R=n+l/2-(g+y/2);return{path:{"transform-origin":`${at.svgRound(i)} ${at.svgRound(n)}`,transform:`${this.rotationTransform} translate(${M} ${R})`}}}const v=(r-2*u)/(p-2*u),S=(l-2*h)/(y-2*h),T=p/r,x=y/l;return{path:{"transform-origin":`${at.svgRound(f)} ${at.svgRound(g)}`,transform:`${this.rotationTransform} scale(${T} ${x}) translate(${at.svgRound(u)} ${at.svgRound(h)}) scale(${v} ${S}) translate(${at.svgRound(-u)} ${at.svgRound(-h)})`}}}getPathResizedSVGProperties([i,n,r,l]){const[u,h]=E(this,ii,Gn).call(this),f=c(this,vi),[g,p,y,v]=f;if(f[0]=i,f[1]=n,f[2]=r,f[3]=l,Math.abs(y-u)<=at.PRECISION||Math.abs(v-h)<=at.PRECISION){const R=i+r/2-(g+y/2),k=n+l/2-(p+v/2);for(const{line:O,points:H}of c(this,is))at._translate(O,R,k,O),at._translate(H,R,k,H);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${at.svgRound(i)} ${at.svgRound(n)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const S=(r-2*u)/(y-2*u),T=(l-2*h)/(v-2*h),x=-S*(g+u)+i+u,M=-T*(p+h)+n+h;if(S!==1||T!==1||x!==0||M!==0)for(const{line:R,points:k}of c(this,is))at._rescale(R,x,M,S,T,R),at._rescale(k,x,M,S,T,k);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${at.svgRound(i)} ${at.svgRound(n)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([i,n],r){const[l,u]=r,h=c(this,vi),f=i-h[0],g=n-h[1];if(c(this,yn)===l&&c(this,vn)===u)for(const{line:p,points:y}of c(this,is))at._translate(p,f,g,p),at._translate(y,f,g,y);else{const p=c(this,yn)/l,y=c(this,vn)/u;A(this,yn,l),A(this,vn,u);for(const{line:v,points:S}of c(this,is))at._rescale(v,f,g,p,y,v),at._rescale(S,f,g,p,y,S);h[2]*=p,h[3]*=y}return h[0]=i,h[1]=n,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${at.svgRound(i)} ${at.svgRound(n)}`}}}get defaultSVGProperties(){const i=c(this,vi);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${at.svgRound(i[0])} ${at.svgRound(i[1])}`,transform:this.rotationTransform||null},bbox:i}}}vi=new WeakMap,xf=new WeakMap,wf=new WeakMap,is=new WeakMap,yn=new WeakMap,vn=new WeakMap,vu=new WeakMap,Au=new WeakMap,uo=new WeakMap,ii=new WeakSet,Gn=function(i=c(this,uo)){const n=c(this,wf)+i/2*c(this,vu);return c(this,Au)%180===0?[n/c(this,yn),n/c(this,vn)]:[n/c(this,vn),n/c(this,yn)]},qw=function(){const[i,n,r,l]=c(this,vi),[u,h]=E(this,ii,Gn).call(this,0);return[i+u,n+h,r-2*u,l-2*h]},Vw=function(){const i=A(this,vi,new Float32Array([1/0,1/0,-1/0,-1/0]));for(const{line:l}of c(this,is)){if(l.length<=12){for(let f=4,g=l.length;f<g;f+=6)ft.pointBoundingBox(l[f],l[f+1],i);continue}let u=l[4],h=l[5];for(let f=6,g=l.length;f<g;f+=6){const[p,y,v,S,T,x]=l.subarray(f,f+6);ft.bezierBoundingBox(u,h,p,y,v,S,T,x,i),u=T,h=x}}const[n,r]=E(this,ii,Gn).call(this);i[0]=_i(i[0]-n,0,1),i[1]=_i(i[1]-r,0,1),i[2]=_i(i[2]+n,0,1),i[3]=_i(i[3]+r,0,1),i[2]-=i[0],i[3]-=i[1]},Xw=function(i){const[n,r]=E(this,ii,Gn).call(this);A(this,uo,i);const[l,u]=E(this,ii,Gn).call(this),[h,f]=[l-n,u-r],g=c(this,vi);return g[0]-=h,g[1]-=f,g[2]+=2*h,g[3]+=2*f,g};class um extends jw{constructor(t){super(),this._viewParameters=t,super.updateProperties({fill:"none",stroke:ae._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(t,i){t==="stroke-width"&&(i??(i=this["stroke-width"]),i*=this._viewParameters.realScale),super.updateSVGProperty(t,i)}clone(){const t=new um(this._viewParameters);return t.updateAll(this),t}}var sm,Yw;const bc=class bc extends Ip{constructor(i){super({...i,name:"inkEditor"});w(this,sm);this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(i,n){ae.initialize(i,n),this._defaultDrawingOptions=new um(n.viewParameters)}static getDefaultDrawingOptions(i){const n=this._defaultDrawingOptions.clone();return n.updateProperties(i),n}static get supportMultipleDrawings(){return!0}static get typesMap(){return zt(this,"typesMap",new Map([[Pt.INK_THICKNESS,"stroke-width"],[Pt.INK_COLOR,"stroke"],[Pt.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(i,n,r,l,u){return new WM(i,n,r,l,u,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(i,n,r,l,u,h){return Of.deserialize(i,n,r,l,u,h)}static async deserialize(i,n,r){let l=null;if(i instanceof uv){const{data:{inkLists:h,rect:f,rotation:g,id:p,color:y,opacity:v,borderStyle:{rawWidth:S},popupRef:T},parent:{page:{pageNumber:x}}}=i;l=i={annotationType:St.INK,color:Array.from(y),thickness:S,opacity:v,paths:{points:h},boxes:null,pageIndex:x-1,rect:f.slice(0),rotation:g,id:p,deleted:!1,popupRef:T}}const u=await super.deserialize(i,n,r);return u.annotationElementId=i.id||null,u._initialData=l,u}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:i,_drawingOptions:n,parent:r}=this;n.updateSVGProperty("stroke-width"),r.drawLayer.updateProperties(i,n.toSVGProperties())}static onScaleChangingWhenDrawing(){const i=this._currentParent;i&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),i.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:i,thickness:n,opacity:r}){this._drawingOptions=bc.getDefaultDrawingOptions({stroke:ft.makeHexColor(...i),"stroke-width":n,"stroke-opacity":r})}serialize(i=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:n,points:r,rect:l}=this.serializeDraw(i),{_drawingOptions:{stroke:u,"stroke-opacity":h,"stroke-width":f}}=this,g={annotationType:St.INK,color:ae._colorManager.convert(u),opacity:h,thickness:f,paths:{lines:n,points:r},pageIndex:this.pageIndex,rect:l,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return i?(g.isCopy=!0,g):this.annotationElementId&&!E(this,sm,Yw).call(this,g)?null:(g.id=this.annotationElementId,g)}renderAnnotationElement(i){const{points:n,rect:r}=this.serializeDraw(!1);return i.updateEdited({rect:r,thickness:this._drawingOptions["stroke-width"],points:n}),null}};sm=new WeakSet,Yw=function(i){const{color:n,thickness:r,opacity:l,pageIndex:u}=this._initialData;return this._hasBeenMoved||this._hasBeenResized||i.color.some((h,f)=>h!==n[f])||i.thickness!==r||i.opacity!==l||i.pageIndex!==u},J(bc,"_type","ink"),J(bc,"_editorType",St.INK),J(bc,"_defaultDrawingOptions",null);let Fy=bc;class Uy extends Of{toSVGPath(){let t=super.toSVGPath();return t.endsWith("Z")||(t+="Z"),t}}const Jg=8,Rh=3;var ho,Vt,jy,Gs,$w,Kw,Gy,Ep,Qw,Zw,Ww,qy,Vy,Jw;class Sa{static extractContoursFromText(t,{fontFamily:i,fontStyle:n,fontWeight:r},l,u,h,f){let g=new OffscreenCanvas(1,1),p=g.getContext("2d",{alpha:!1});const y=200,v=p.font=`${n} ${r} ${y}px ${i}`,{actualBoundingBoxLeft:S,actualBoundingBoxRight:T,actualBoundingBoxAscent:x,actualBoundingBoxDescent:M,fontBoundingBoxAscent:R,fontBoundingBoxDescent:k,width:O}=p.measureText(t),H=1.5,z=Math.ceil(Math.max(Math.abs(S)+Math.abs(T)||0,O)*H),G=Math.ceil(Math.max(Math.abs(x)+Math.abs(M)||y,Math.abs(R)+Math.abs(k)||y)*H);g=new OffscreenCanvas(z,G),p=g.getContext("2d",{alpha:!0,willReadFrequently:!0}),p.font=v,p.filter="grayscale(1)",p.fillStyle="white",p.fillRect(0,0,z,G),p.fillStyle="black",p.fillText(t,z*(H-1)/2,G*(3-H)/2);const V=E(this,Vt,qy).call(this,p.getImageData(0,0,z,G).data),Z=E(this,Vt,Ww).call(this,V),et=E(this,Vt,Vy).call(this,Z),rt=E(this,Vt,Gy).call(this,V,z,G,et);return this.processDrawnLines({lines:{curves:rt,width:z,height:G},pageWidth:l,pageHeight:u,rotation:h,innerMargin:f,mustSmooth:!0,areContours:!0})}static process(t,i,n,r,l){const[u,h,f]=E(this,Vt,Jw).call(this,t),[g,p]=E(this,Vt,Zw).call(this,u,h,f,Math.hypot(h,f)*c(this,ho).sigmaSFactor,c(this,ho).sigmaR,c(this,ho).kernelSize),y=E(this,Vt,Vy).call(this,p),v=E(this,Vt,Gy).call(this,g,h,f,y);return this.processDrawnLines({lines:{curves:v,width:h,height:f},pageWidth:i,pageHeight:n,rotation:r,innerMargin:l,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:t,pageWidth:i,pageHeight:n,rotation:r,innerMargin:l,mustSmooth:u,areContours:h}){r%180!==0&&([i,n]=[n,i]);const{curves:f,width:g,height:p}=t,y=t.thickness??0,v=[],S=Math.min(i/g,n/p),T=S/i,x=S/n,M=[];for(const{points:k}of f){const O=u?E(this,Vt,Qw).call(this,k):k;if(!O)continue;M.push(O);const H=O.length,z=new Float32Array(H),G=new Float32Array(3*(H===2?2:H-2));if(v.push({line:G,points:z}),H===2){z[0]=O[0]*T,z[1]=O[1]*x,G.set([NaN,NaN,NaN,NaN,z[0],z[1]],0);continue}let[V,Z,et,rt]=O;V*=T,Z*=x,et*=T,rt*=x,z.set([V,Z,et,rt],0),G.set([NaN,NaN,NaN,NaN,V,Z],0);for(let st=4;st<H;st+=2){const vt=z[st]=O[st]*T,Lt=z[st+1]=O[st+1]*x;G.set(at.createBezierPoints(V,Z,et,rt,vt,Lt),(st-2)*3),[V,Z,et,rt]=[et,rt,vt,Lt]}}if(v.length===0)return null;const R=h?new Uy:new Of;return R.build(v,i,n,1,r,h?0:y,l),{outline:R,newCurves:M,areContours:h,thickness:y,width:g,height:p}}static async compressSignature({outlines:t,areContours:i,thickness:n,width:r,height:l}){let u=1/0,h=-1/0,f=0;for(const O of t){f+=O.length;for(let H=2,z=O.length;H<z;H++){const G=O[H]-O[H-2];u=Math.min(u,G),h=Math.max(h,G)}}let g;u>=-128&&h<=127?g=Int8Array:u>=-32768&&h<=32767?g=Int16Array:g=Int32Array;const p=t.length,y=Jg+Rh*p,v=new Uint32Array(y);let S=0;v[S++]=y*Uint32Array.BYTES_PER_ELEMENT+(f-2*p)*g.BYTES_PER_ELEMENT,v[S++]=0,v[S++]=r,v[S++]=l,v[S++]=i?0:1,v[S++]=Math.max(0,Math.floor(n??0)),v[S++]=p,v[S++]=g.BYTES_PER_ELEMENT;for(const O of t)v[S++]=O.length-2,v[S++]=O[0],v[S++]=O[1];const T=new CompressionStream("deflate-raw"),x=T.writable.getWriter();await x.ready,x.write(v);const M=g.prototype.constructor;for(const O of t){const H=new M(O.length-2);for(let z=2,G=O.length;z<G;z++)H[z-2]=O[z]-O[z-2];x.write(H)}x.close();const R=await new Response(T.readable).arrayBuffer(),k=new Uint8Array(R);return W_(k)}static async decompressSignature(t){try{const i=_C(t),{readable:n,writable:r}=new DecompressionStream("deflate-raw"),l=r.getWriter();await l.ready,l.write(i).then(async()=>{await l.ready,await l.close()}).catch(()=>{});let u=null,h=0;for await(const O of n)u||(u=new Uint8Array(new Uint32Array(O.buffer,0,4)[0])),u.set(O,h),h+=O.length;const f=new Uint32Array(u.buffer,0,u.length>>2),g=f[1];if(g!==0)throw new Error(`Invalid version: ${g}`);const p=f[2],y=f[3],v=f[4]===0,S=f[5],T=f[6],x=f[7],M=[],R=(Jg+Rh*T)*Uint32Array.BYTES_PER_ELEMENT;let k;switch(x){case Int8Array.BYTES_PER_ELEMENT:k=new Int8Array(u.buffer,R);break;case Int16Array.BYTES_PER_ELEMENT:k=new Int16Array(u.buffer,R);break;case Int32Array.BYTES_PER_ELEMENT:k=new Int32Array(u.buffer,R);break}h=0;for(let O=0;O<T;O++){const H=f[Rh*O+Jg],z=new Float32Array(H+2);M.push(z);for(let G=0;G<Rh-1;G++)z[G]=f[Rh*O+Jg+G+1];for(let G=0;G<H;G++)z[G+2]=z[G]+k[h++]}return{areContours:v,thickness:S,outlines:M,width:p,height:y}}catch(i){return _t(`decompressSignature: ${i}`),null}}}ho=new WeakMap,Vt=new WeakSet,jy=function(t,i,n,r){return n-=t,r-=i,n===0?r>0?0:4:n===1?r+6:2-r},Gs=new WeakMap,$w=function(t,i,n,r,l,u,h){const f=E(this,Vt,jy).call(this,n,r,l,u);for(let g=0;g<8;g++){const p=(-g+f-h+16)%8,y=c(this,Gs)[2*p],v=c(this,Gs)[2*p+1];if(t[(n+y)*i+(r+v)]!==0)return p}return-1},Kw=function(t,i,n,r,l,u,h){const f=E(this,Vt,jy).call(this,n,r,l,u);for(let g=0;g<8;g++){const p=(g+f+h+16)%8,y=c(this,Gs)[2*p],v=c(this,Gs)[2*p+1];if(t[(n+y)*i+(r+v)]!==0)return p}return-1},Gy=function(t,i,n,r){const l=t.length,u=new Int32Array(l);for(let p=0;p<l;p++)u[p]=t[p]<=r?1:0;for(let p=1;p<n-1;p++)u[p*i]=u[p*i+i-1]=0;for(let p=0;p<i;p++)u[p]=u[i*n-1-p]=0;let h=1,f;const g=[];for(let p=1;p<n-1;p++){f=1;for(let y=1;y<i-1;y++){const v=p*i+y,S=u[v];if(S===0)continue;let T=p,x=y;if(S===1&&u[v-1]===0)h+=1,x-=1;else if(S>=1&&u[v+1]===0)h+=1,x+=1,S>1&&(f=S);else{S!==1&&(f=Math.abs(S));continue}const M=[y,p],R=x===y+1,k={isHole:R,points:M,id:h,parent:0};g.push(k);let O;for(const st of g)if(st.id===f){O=st;break}O?O.isHole?k.parent=R?O.parent:f:k.parent=R?f:O.parent:k.parent=R?f:0;const H=E(this,Vt,$w).call(this,u,i,p,y,T,x,0);if(H===-1){u[v]=-h,u[v]!==1&&(f=Math.abs(u[v]));continue}let z=c(this,Gs)[2*H],G=c(this,Gs)[2*H+1];const V=p+z,Z=y+G;T=V,x=Z;let et=p,rt=y;for(;;){const st=E(this,Vt,Kw).call(this,u,i,et,rt,T,x,1);z=c(this,Gs)[2*st],G=c(this,Gs)[2*st+1];const vt=et+z,Lt=rt+G;M.push(Lt,vt);const At=et*i+rt;if(u[At+1]===0?u[At]=-h:u[At]===1&&(u[At]=h),vt===p&&Lt===y&&et===V&&rt===Z){u[v]!==1&&(f=Math.abs(u[v]));break}else T=et,x=rt,et=vt,rt=Lt}}}return g},Ep=function(t,i,n,r){if(n-i<=4){for(let V=i;V<n-2;V+=2)r.push(t[V],t[V+1]);return}const l=t[i],u=t[i+1],h=t[n-4]-l,f=t[n-3]-u,g=Math.hypot(h,f),p=h/g,y=f/g,v=p*u-y*l,S=f/h,T=1/g,x=Math.atan(S),M=Math.cos(x),R=Math.sin(x),k=T*(Math.abs(M)+Math.abs(R)),O=T*(1-k+k**2),H=Math.max(Math.atan(Math.abs(R+M)*O),Math.atan(Math.abs(R-M)*O));let z=0,G=i;for(let V=i+2;V<n-2;V+=2){const Z=Math.abs(v-p*t[V+1]+y*t[V]);Z>z&&(G=V,z=Z)}z>(g*H)**2?(E(this,Vt,Ep).call(this,t,i,G+2,r),E(this,Vt,Ep).call(this,t,G,n,r)):r.push(l,u)},Qw=function(t){const i=[],n=t.length;return E(this,Vt,Ep).call(this,t,0,n,i),i.push(t[n-2],t[n-1]),i.length<=4?null:i},Zw=function(t,i,n,r,l,u){const h=new Float32Array(u**2),f=-2*r**2,g=u>>1;for(let x=0;x<u;x++){const M=(x-g)**2;for(let R=0;R<u;R++)h[x*u+R]=Math.exp((M+(R-g)**2)/f)}const p=new Float32Array(256),y=-2*l**2;for(let x=0;x<256;x++)p[x]=Math.exp(x**2/y);const v=t.length,S=new Uint8Array(v),T=new Uint32Array(256);for(let x=0;x<n;x++)for(let M=0;M<i;M++){const R=x*i+M,k=t[R];let O=0,H=0;for(let G=0;G<u;G++){const V=x+G-g;if(!(V<0||V>=n))for(let Z=0;Z<u;Z++){const et=M+Z-g;if(et<0||et>=i)continue;const rt=t[V*i+et],st=h[G*u+Z]*p[Math.abs(rt-k)];O+=rt*st,H+=st}}const z=S[R]=Math.round(O/H);T[z]++}return[S,T]},Ww=function(t){const i=new Uint32Array(256);for(const n of t)i[n]++;return i},qy=function(t){const i=t.length,n=new Uint8ClampedArray(i>>2);let r=-1/0,l=1/0;for(let h=0,f=n.length;h<f;h++){if(t[(h<<2)+3]===0){r=n[h]=255;continue}const p=n[h]=t[h<<2];p>r&&(r=p),p<l&&(l=p)}const u=255/(r-l);for(let h=0;h<i;h++)n[h]=(n[h]-l)*u;return n},Vy=function(t){let i,n=-1/0,r=-1/0;const l=t.findIndex(f=>f!==0);let u=l,h=l;for(i=l;i<256;i++){const f=t[i];f>n&&(i-u>r&&(r=i-u,h=i-1),n=f,u=i)}for(i=h-1;i>=0&&!(t[i]>t[i+1]);i--);return i},Jw=function(t){const i=t,{width:n,height:r}=t,{maxDim:l}=c(this,ho);let u=n,h=r;if(n>l||r>l){let v=n,S=r,T=Math.log2(Math.max(n,r)/l);const x=Math.floor(T);T=T===x?x-1:x;for(let R=0;R<T;R++){u=Math.ceil(v/2),h=Math.ceil(S/2);const k=new OffscreenCanvas(u,h);k.getContext("2d").drawImage(t,0,0,v,S,0,0,u,h),v=u,S=h,t!==i&&t.close(),t=k.transferToImageBitmap()}const M=Math.min(l/u,l/h);u=Math.round(u*M),h=Math.round(h*M)}const g=new OffscreenCanvas(u,h).getContext("2d",{willReadFrequently:!0});g.filter="grayscale(1)",g.drawImage(t,0,0,t.width,t.height,0,0,u,h);const p=g.getImageData(0,0,u,h).data;return[E(this,Vt,qy).call(this,p),u,h]},w(Sa,Vt),w(Sa,ho,{maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16}),w(Sa,Gs,new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]));class hv extends jw{constructor(){super(),super.updateProperties({fill:ae._defaultLineColor,"stroke-width":0})}clone(){const t=new hv;return t.updateAll(this),t}}class dv extends um{constructor(t){super(t),super.updateProperties({stroke:ae._defaultLineColor,"stroke-width":1})}clone(){const t=new dv(this._viewParameters);return t.updateAll(this),t}}var Cr,ss,Mr,Rr;const Vi=class Vi extends Ip{constructor(i){super({...i,mustBeCommitted:!0,name:"signatureEditor"});w(this,Cr,!1);w(this,ss,null);w(this,Mr,null);w(this,Rr,null);this._willKeepAspectRatio=!0,A(this,Mr,i.signatureData||null),A(this,ss,null),this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(i,n){ae.initialize(i,n),this._defaultDrawingOptions=new hv,this._defaultDrawnSignatureOptions=new dv(n.viewParameters)}static getDefaultDrawingOptions(i){const n=this._defaultDrawingOptions.clone();return n.updateProperties(i),n}static get supportMultipleDrawings(){return!1}static get typesMap(){return zt(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!c(this,ss)}}static computeTelemetryFinalData(i){const n=i.get("hasDescription");return{hasAltText:n.get(!0)??0,hasNoAltText:n.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let i,n;const{_isCopy:r}=this;if(r&&(this._isCopy=!1,i=this.x,n=this.y),super.render(),this._drawId===null)if(c(this,Mr)){const{lines:l,mustSmooth:u,areContours:h,description:f,uuid:g,heightInPage:p}=c(this,Mr),{rawDims:{pageWidth:y,pageHeight:v},rotation:S}=this.parent.viewport,T=Sa.processDrawnLines({lines:l,pageWidth:y,pageHeight:v,rotation:S,innerMargin:Vi._INNER_MARGIN,mustSmooth:u,areContours:h});this.addSignature(T,p,f,g)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);return r&&(this._isCopy=!0,this._moveAfterPaste(i,n)),this.div}setUuid(i){A(this,Rr,i),this.addEditToolbar()}getUuid(){return c(this,Rr)}get description(){return c(this,ss)}set description(i){A(this,ss,i),super.addEditToolbar().then(n=>{n==null||n.updateEditSignatureButton(i)})}getSignaturePreview(){const{newCurves:i,areContours:n,thickness:r,width:l,height:u}=c(this,Mr),h=Math.max(l,u),f=Sa.processDrawnLines({lines:{curves:i.map(g=>({points:g})),thickness:r,width:l,height:u},pageWidth:h,pageHeight:h,rotation:0,innerMargin:0,mustSmooth:!1,areContours:n});return{areContours:n,outline:f.outline}}async addEditToolbar(){const i=await super.addEditToolbar();return i?(this._uiManager.signatureManager&&c(this,ss)!==null&&(await i.addEditSignatureButton(this._uiManager.signatureManager,c(this,Rr),c(this,ss)),i.show()),i):null}addSignature(i,n,r,l){const{x:u,y:h}=this,{outline:f}=A(this,Mr,i);A(this,Cr,f instanceof Uy),A(this,ss,r),this.div.setAttribute("data-l10n-args",JSON.stringify({description:r}));let g;c(this,Cr)?g=Vi.getDefaultDrawingOptions():(g=Vi._defaultDrawnSignatureOptions.clone(),g.updateProperties({"stroke-width":f.thickness})),this._addOutlines({drawOutlines:f,drawingOptions:g});const[p,y]=this.parentDimensions,[,v]=this.pageDimensions;let S=n/v;S=S>=1?.5:S,this.width*=S/this.height,this.width>=1&&(S*=.9/this.width,this.width=.9),this.height=S,this.setDims(p*this.width,y*this.height),this.x=u,this.y=h,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(l),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!l,hasDescription:!!r}}),this.div.hidden=!1}getFromImage(i){const{rawDims:{pageWidth:n,pageHeight:r},rotation:l}=this.parent.viewport;return Sa.process(i,n,r,l,Vi._INNER_MARGIN)}getFromText(i,n){const{rawDims:{pageWidth:r,pageHeight:l},rotation:u}=this.parent.viewport;return Sa.extractContoursFromText(i,n,r,l,u,Vi._INNER_MARGIN)}getDrawnSignature(i){const{rawDims:{pageWidth:n,pageHeight:r},rotation:l}=this.parent.viewport;return Sa.processDrawnLines({lines:i,pageWidth:n,pageHeight:r,rotation:l,innerMargin:Vi._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:i,thickness:n}){i?this._drawingOptions=Vi.getDefaultDrawingOptions():(this._drawingOptions=Vi._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":n}))}serialize(i=!1){if(this.isEmpty())return null;const{lines:n,points:r,rect:l}=this.serializeDraw(i),{_drawingOptions:{"stroke-width":u}}=this,h={annotationType:St.SIGNATURE,isSignature:!0,areContours:c(this,Cr),color:[0,0,0],thickness:c(this,Cr)?0:u,pageIndex:this.pageIndex,rect:l,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return i?(h.paths={lines:n,points:r},h.uuid=c(this,Rr),h.isCopy=!0):h.lines=n,c(this,ss)&&(h.accessibilityData={type:"Figure",alt:c(this,ss)}),h}static deserializeDraw(i,n,r,l,u,h){return h.areContours?Uy.deserialize(i,n,r,l,u,h):Of.deserialize(i,n,r,l,u,h)}static async deserialize(i,n,r){var u;const l=await super.deserialize(i,n,r);return A(l,Cr,i.areContours),A(l,ss,((u=i.accessibilityData)==null?void 0:u.alt)||""),A(l,Rr,i.uuid),l}};Cr=new WeakMap,ss=new WeakMap,Mr=new WeakMap,Rr=new WeakMap,J(Vi,"_type","signature"),J(Vi,"_editorType",St.SIGNATURE),J(Vi,"_defaultDrawingOptions",null);let Xy=Vi;var ce,Ve,Dr,ma,Nr,Su,ba,fo,An,ns,_u,It,Yh,$h,Tp,Cp,Mp,$y,Rp,tE;class Yy extends ae{constructor(i){super({...i,name:"stampEditor"});w(this,It);w(this,ce,null);w(this,Ve,null);w(this,Dr,null);w(this,ma,null);w(this,Nr,null);w(this,Su,"");w(this,ba,null);w(this,fo,!1);w(this,An,null);w(this,ns,!1);w(this,_u,!1);A(this,ma,i.bitmapUrl),A(this,Nr,i.bitmapFile),this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(i,n){ae.initialize(i,n)}static isHandlingMimeForPasting(i){return Fb.includes(i)}static paste(i,n){n.pasteEditor({mode:St.STAMP},{bitmapFile:i.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var i;return{type:"stamp",hasAltText:!!((i=this.altTextData)!=null&&i.altText)}}static computeTelemetryFinalData(i){const n=i.get("hasAltText");return{hasAltText:n.get(!0)??0,hasNoAltText:n.get(!1)??0}}async mlGuessAltText(i=null,n=!0){if(this.hasAltTextData())return null;const{mlManager:r}=this._uiManager;if(!r)throw new Error("No ML.");if(!await r.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:l,width:u,height:h}=i||this.copyCanvas(null,null,!0).imageData,f=await r.guess({name:"altText",request:{data:l,width:u,height:h,channels:l.length/(u*h)}});if(!f)throw new Error("No response from the AI service.");if(f.error)throw new Error("Error from the AI service.");if(f.cancel)return null;if(!f.output)throw new Error("No valid response from the AI service.");const g=f.output;return await this.setGuessedAltText(g),n&&!this.hasAltTextData()&&(this.altTextData={alt:g,decorative:!1}),g}remove(){var i;c(this,Ve)&&(A(this,ce,null),this._uiManager.imageManager.deleteId(c(this,Ve)),(i=c(this,ba))==null||i.remove(),A(this,ba,null),c(this,An)&&(clearTimeout(c(this,An)),A(this,An,null))),super.remove()}rebuild(){if(!this.parent){c(this,Ve)&&E(this,It,Tp).call(this);return}super.rebuild(),this.div!==null&&(c(this,Ve)&&c(this,ba)===null&&E(this,It,Tp).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(i){this._isDraggable=!0,i&&this.div.focus()}isEmpty(){return!(c(this,Dr)||c(this,ce)||c(this,ma)||c(this,Nr)||c(this,Ve)||c(this,fo))}get isResizable(){return!0}render(){if(this.div)return this.div;let i,n;return this._isCopy&&(i=this.x,n=this.y),super.render(),this.div.hidden=!0,this.addAltTextButton(),c(this,fo)||(c(this,ce)?E(this,It,Cp).call(this):E(this,It,Tp).call(this)),this._isCopy&&this._moveAfterPaste(i,n),this._uiManager.addShouldRescale(this),this.div}setCanvas(i,n){const{id:r,bitmap:l}=this._uiManager.imageManager.getFromCanvas(i,n);n.remove(),r&&this._uiManager.imageManager.isValidId(r)&&(A(this,Ve,r),l&&A(this,ce,l),A(this,fo,!1),E(this,It,Cp).call(this))}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;c(this,An)!==null&&clearTimeout(c(this,An)),A(this,An,setTimeout(()=>{A(this,An,null),E(this,It,$y).call(this)},200))}copyCanvas(i,n,r=!1){var S;i||(i=224);const{width:l,height:u}=c(this,ce),h=new xn;let f=c(this,ce),g=l,p=u,y=null;if(n){if(l>n||u>n){const Z=Math.min(n/l,n/u);g=Math.floor(l*Z),p=Math.floor(u*Z)}y=document.createElement("canvas");const T=y.width=Math.ceil(g*h.sx),x=y.height=Math.ceil(p*h.sy);c(this,ns)||(f=E(this,It,Mp).call(this,T,x));const M=y.getContext("2d");M.filter=this._uiManager.hcmFilter;let R="white",k="#cfcfd8";this._uiManager.hcmFilter!=="none"?k="black":(S=window.matchMedia)!=null&&S.call(window,"(prefers-color-scheme: dark)").matches&&(R="#8f8f9d",k="#42414d");const O=15,H=O*h.sx,z=O*h.sy,G=new OffscreenCanvas(H*2,z*2),V=G.getContext("2d");V.fillStyle=R,V.fillRect(0,0,H*2,z*2),V.fillStyle=k,V.fillRect(0,0,H,z),V.fillRect(H,z,H,z),M.fillStyle=M.createPattern(G,"repeat"),M.fillRect(0,0,T,x),M.drawImage(f,0,0,f.width,f.height,0,0,T,x)}let v=null;if(r){let T,x;if(h.symmetric&&f.width<i&&f.height<i)T=f.width,x=f.height;else if(f=c(this,ce),l>i||u>i){const k=Math.min(i/l,i/u);T=Math.floor(l*k),x=Math.floor(u*k),c(this,ns)||(f=E(this,It,Mp).call(this,T,x))}const R=new OffscreenCanvas(T,x).getContext("2d",{willReadFrequently:!0});R.drawImage(f,0,0,f.width,f.height,0,0,T,x),v={width:T,height:x,data:R.getImageData(0,0,T,x).data}}return{canvas:y,width:g,height:p,imageData:v}}static async deserialize(i,n,r){var M;let l=null,u=!1;if(i instanceof pw){const{data:{rect:R,rotation:k,id:O,structParent:H,popupRef:z},container:G,parent:{page:{pageNumber:V}},canvas:Z}=i;let et,rt;Z?(delete i.canvas,{id:et,bitmap:rt}=r.imageManager.getFromCanvas(G.id,Z),Z.remove()):(u=!0,i._hasNoCanvas=!0);const st=((M=await n._structTree.getAriaAttributes(`${iv}${O}`))==null?void 0:M.get("aria-label"))||"";l=i={annotationType:St.STAMP,bitmapId:et,bitmap:rt,pageIndex:V-1,rect:R.slice(0),rotation:k,id:O,deleted:!1,accessibilityData:{decorative:!1,altText:st},isSvg:!1,structParent:H,popupRef:z}}const h=await super.deserialize(i,n,r),{rect:f,bitmap:g,bitmapUrl:p,bitmapId:y,isSvg:v,accessibilityData:S}=i;u?(r.addMissingCanvas(i.id,h),A(h,fo,!0)):y&&r.imageManager.isValidId(y)?(A(h,Ve,y),g&&A(h,ce,g)):A(h,ma,p),A(h,ns,v);const[T,x]=h.pageDimensions;return h.width=(f[2]-f[0])/T,h.height=(f[3]-f[1])/x,h.annotationElementId=i.id||null,S&&(h.altTextData=S),h._initialData=l,A(h,_u,!!l),h}serialize(i=!1,n=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const r={annotationType:St.STAMP,bitmapId:c(this,Ve),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:c(this,ns),structTreeParentId:this._structTreeParentId};if(i)return r.bitmapUrl=E(this,It,Rp).call(this,!0),r.accessibilityData=this.serializeAltText(!0),r.isCopy=!0,r;const{decorative:l,altText:u}=this.serializeAltText(!1);if(!l&&u&&(r.accessibilityData={type:"Figure",alt:u}),this.annotationElementId){const f=E(this,It,tE).call(this,r);if(f.isSame)return null;f.isSameAltText?delete r.accessibilityData:r.accessibilityData.structParent=this._initialData.structParent??-1}if(r.id=this.annotationElementId,n===null)return r;n.stamps||(n.stamps=new Map);const h=c(this,ns)?(r.rect[2]-r.rect[0])*(r.rect[3]-r.rect[1]):null;if(!n.stamps.has(c(this,Ve)))n.stamps.set(c(this,Ve),{area:h,serialized:r}),r.bitmap=E(this,It,Rp).call(this,!1);else if(c(this,ns)){const f=n.stamps.get(c(this,Ve));h>f.area&&(f.area=h,f.serialized.bitmap.close(),f.serialized.bitmap=E(this,It,Rp).call(this,!1))}return r}renderAnnotationElement(i){return i.updateEdited({rect:this.getRect(0,0)}),null}}ce=new WeakMap,Ve=new WeakMap,Dr=new WeakMap,ma=new WeakMap,Nr=new WeakMap,Su=new WeakMap,ba=new WeakMap,fo=new WeakMap,An=new WeakMap,ns=new WeakMap,_u=new WeakMap,It=new WeakSet,Yh=function(i,n=!1){if(!i){this.remove();return}A(this,ce,i.bitmap),n||(A(this,Ve,i.id),A(this,ns,i.isSvg)),i.file&&A(this,Su,i.file.name),E(this,It,Cp).call(this)},$h=function(){if(A(this,Dr,null),this._uiManager.enableWaiting(!1),!!c(this,ba)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&c(this,ce)){this._editToolbar.hide(),this._uiManager.editAltText(this,!0);return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&c(this,ce)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},Tp=function(){if(c(this,Ve)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(c(this,Ve)).then(r=>E(this,It,Yh).call(this,r,!0)).finally(()=>E(this,It,$h).call(this));return}if(c(this,ma)){const r=c(this,ma);A(this,ma,null),this._uiManager.enableWaiting(!0),A(this,Dr,this._uiManager.imageManager.getFromUrl(r).then(l=>E(this,It,Yh).call(this,l)).finally(()=>E(this,It,$h).call(this)));return}if(c(this,Nr)){const r=c(this,Nr);A(this,Nr,null),this._uiManager.enableWaiting(!0),A(this,Dr,this._uiManager.imageManager.getFromFile(r).then(l=>E(this,It,Yh).call(this,l)).finally(()=>E(this,It,$h).call(this)));return}const i=document.createElement("input");i.type="file",i.accept=Fb.join(",");const n=this._uiManager._signal;A(this,Dr,new Promise(r=>{i.addEventListener("change",async()=>{if(!i.files||i.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const l=await this._uiManager.imageManager.getFromFile(i.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),E(this,It,Yh).call(this,l)}r()},{signal:n}),i.addEventListener("cancel",()=>{this.remove(),r()},{signal:n})}).finally(()=>E(this,It,$h).call(this))),i.click()},Cp=function(){var y;const{div:i}=this;let{width:n,height:r}=c(this,ce);const[l,u]=this.pageDimensions,h=.75;if(this.width)n=this.width*l,r=this.height*u;else if(n>h*l||r>h*u){const v=Math.min(h*l/n,h*u/r);n*=v,r*=v}const[f,g]=this.parentDimensions;this.setDims(n*f/l,r*g/u),this._uiManager.enableWaiting(!1);const p=A(this,ba,document.createElement("canvas"));p.setAttribute("role","img"),this.addContainer(p),this.width=n/l,this.height=r/u,(y=this._initialOptions)!=null&&y.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(i.hidden=!1),E(this,It,$y).call(this),c(this,_u)||(this.parent.addUndoableEditor(this),A(this,_u,!0)),this._reportTelemetry({action:"inserted_image"}),c(this,Su)&&this.div.setAttribute("aria-description",c(this,Su))},Mp=function(i,n){const{width:r,height:l}=c(this,ce);let u=r,h=l,f=c(this,ce);for(;u>2*i||h>2*n;){const g=u,p=h;u>2*i&&(u=u>=16384?Math.floor(u/2)-1:Math.ceil(u/2)),h>2*n&&(h=h>=16384?Math.floor(h/2)-1:Math.ceil(h/2));const y=new OffscreenCanvas(u,h);y.getContext("2d").drawImage(f,0,0,g,p,0,0,u,h),f=y.transferToImageBitmap()}return f},$y=function(){const[i,n]=this.parentDimensions,{width:r,height:l}=this,u=new xn,h=Math.ceil(r*i*u.sx),f=Math.ceil(l*n*u.sy),g=c(this,ba);if(!g||g.width===h&&g.height===f)return;g.width=h,g.height=f;const p=c(this,ns)?c(this,ce):E(this,It,Mp).call(this,h,f),y=g.getContext("2d");y.filter=this._uiManager.hcmFilter,y.drawImage(p,0,0,p.width,p.height,0,0,h,f)},Rp=function(i){if(i){if(c(this,ns)){const l=this._uiManager.imageManager.getSvgUrl(c(this,Ve));if(l)return l}const n=document.createElement("canvas");return{width:n.width,height:n.height}=c(this,ce),n.getContext("2d").drawImage(c(this,ce),0,0),n.toDataURL()}if(c(this,ns)){const[n,r]=this.pageDimensions,l=Math.round(this.width*n*Pr.PDF_TO_CSS_UNITS),u=Math.round(this.height*r*Pr.PDF_TO_CSS_UNITS),h=new OffscreenCanvas(l,u);return h.getContext("2d").drawImage(c(this,ce),0,0,c(this,ce).width,c(this,ce).height,0,0,l,u),h.transferToImageBitmap()}return structuredClone(c(this,ce))},tE=function(i){var h;const{pageIndex:n,accessibilityData:{altText:r}}=this._initialData,l=i.pageIndex===n,u=(((h=i.accessibilityData)==null?void 0:h.alt)||"")===r;return{isSame:!this._hasBeenMoved&&!this._hasBeenResized&&l&&u,isSameAltText:u}},J(Yy,"_type","stamp"),J(Yy,"_editorType",St.STAMP);var go,xu,Sn,Or,ya,Ts,Lr,wu,po,qs,va,fi,Aa,ht,kr,ue,eE,an,Qy,Zy,Dp;const Os=class Os{constructor({uiManager:t,pageIndex:i,div:n,structTreeLayer:r,accessibilityManager:l,annotationLayer:u,drawLayer:h,textLayer:f,viewport:g,l10n:p}){w(this,ue);w(this,go);w(this,xu,!1);w(this,Sn,null);w(this,Or,null);w(this,ya,null);w(this,Ts,new Map);w(this,Lr,!1);w(this,wu,!1);w(this,po,!1);w(this,qs,null);w(this,va,null);w(this,fi,null);w(this,Aa,null);w(this,ht);const y=[...c(Os,kr).values()];if(!Os._initialized){Os._initialized=!0;for(const v of y)v.initialize(p,t)}t.registerEditorTypes(y),A(this,ht,t),this.pageIndex=i,this.div=n,A(this,go,l),A(this,Sn,u),this.viewport=g,A(this,fi,f),this.drawLayer=h,this._structTree=r,c(this,ht).addLayer(this)}get isEmpty(){return c(this,Ts).size===0}get isInvisible(){return this.isEmpty&&c(this,ht).getMode()===St.NONE}updateToolbar(t){c(this,ht).updateToolbar(t)}updateMode(t=c(this,ht).getMode()){switch(E(this,ue,Dp).call(this),t){case St.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case St.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case St.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:i}=this.div;for(const n of c(Os,kr).values())i.toggle(`${n._type}Editing`,t===n._editorType);this.div.hidden=!1}hasTextLayer(t){var i;return t===((i=c(this,fi))==null?void 0:i.div)}setEditingState(t){c(this,ht).setEditingState(t)}addCommands(t){c(this,ht).addCommands(t)}cleanUndoStack(t){c(this,ht).cleanUndoStack(t)}toggleDrawing(t=!1){this.div.classList.toggle("drawing",!t)}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(t=!1){var i;(i=c(this,Sn))==null||i.div.classList.toggle("disabled",!t)}async enable(){A(this,po,!0),this.div.tabIndex=0,this.togglePointerEvents(!0);const t=new Set;for(const n of c(this,Ts).values())n.enableEditing(),n.show(!0),n.annotationElementId&&(c(this,ht).removeChangedExistingAnnotation(n),t.add(n.annotationElementId));if(!c(this,Sn)){A(this,po,!1);return}const i=c(this,Sn).getEditableAnnotations();for(const n of i){if(n.hide(),c(this,ht).isDeletedAnnotationElement(n.data.id)||t.has(n.data.id))continue;const r=await this.deserialize(n);r&&(this.addOrRebuild(r),r.enableEditing())}A(this,po,!1)}disable(){var r;A(this,wu,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1);const t=new Map,i=new Map;for(const l of c(this,Ts).values())if(l.disableEditing(),!!l.annotationElementId){if(l.serialize()!==null){t.set(l.annotationElementId,l);continue}else i.set(l.annotationElementId,l);(r=this.getEditableAnnotation(l.annotationElementId))==null||r.show(),l.remove()}if(c(this,Sn)){const l=c(this,Sn).getEditableAnnotations();for(const u of l){const{id:h}=u.data;if(c(this,ht).isDeletedAnnotationElement(h))continue;let f=i.get(h);if(f){f.resetAnnotationElement(u),f.show(!1),u.show();continue}f=t.get(h),f&&(c(this,ht).addChangedExistingAnnotation(f),f.renderAnnotationElement(u)&&f.show(!1)),u.show()}}E(this,ue,Dp).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:n}=this.div;for(const l of c(Os,kr).values())n.remove(`${l._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),A(this,wu,!1)}getEditableAnnotation(t){var i;return((i=c(this,Sn))==null?void 0:i.getEditableAnnotation(t))||null}setActiveEditor(t){c(this,ht).getActive()!==t&&c(this,ht).setActiveEditor(t)}enableTextSelection(){var t;if(this.div.tabIndex=-1,(t=c(this,fi))!=null&&t.div&&!c(this,Aa)){A(this,Aa,new AbortController);const i=c(this,ht).combinedSignal(c(this,Aa));c(this,fi).div.addEventListener("pointerdown",E(this,ue,eE).bind(this),{signal:i}),c(this,fi).div.classList.add("highlighting")}}disableTextSelection(){var t;this.div.tabIndex=0,(t=c(this,fi))!=null&&t.div&&c(this,Aa)&&(c(this,Aa).abort(),A(this,Aa,null),c(this,fi).div.classList.remove("highlighting"))}enableClick(){if(c(this,Or))return;A(this,Or,new AbortController);const t=c(this,ht).combinedSignal(c(this,Or));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:t});const i=this.pointerup.bind(this);this.div.addEventListener("pointerup",i,{signal:t}),this.div.addEventListener("pointercancel",i,{signal:t})}disableClick(){var t;(t=c(this,Or))==null||t.abort(),A(this,Or,null)}attach(t){c(this,Ts).set(t.id,t);const{annotationElementId:i}=t;i&&c(this,ht).isDeletedAnnotationElement(i)&&c(this,ht).removeDeletedAnnotationElement(t)}detach(t){var i;c(this,Ts).delete(t.id),(i=c(this,go))==null||i.removePointerInTextLayer(t.contentDiv),!c(this,wu)&&t.annotationElementId&&c(this,ht).addDeletedAnnotationElement(t)}remove(t){this.detach(t),c(this,ht).removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1}changeParent(t){var i;t.parent!==this&&(t.parent&&t.annotationElementId&&(c(this,ht).addDeletedAnnotationElement(t.annotationElementId),ae.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),(i=t.parent)==null||i.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(!(t.parent===this&&t.isAttachedToDOM)){if(this.changeParent(t),c(this,ht).addEditor(t),this.attach(t),!t.isAttachedToDOM){const i=t.render();this.div.append(i),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(!c(this,po)),c(this,ht).addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){var n;if(!t.isAttachedToDOM)return;const{activeElement:i}=document;t.div.contains(i)&&!c(this,ya)&&(t._focusEventsAllowed=!1,A(this,ya,setTimeout(()=>{A(this,ya,null),t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:c(this,ht)._signal}),i.focus())},0))),t._structTreeParentId=(n=c(this,go))==null?void 0:n.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||(t.parent=this),t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){const i=()=>t._uiManager.rebuild(t),n=()=>{t.remove()};this.addCommands({cmd:i,undo:n,mustExec:!1})}getNextId(){return c(this,ht).getId()}combinedSignal(t){return c(this,ht).combinedSignal(t)}canCreateNewEmptyEditor(){var t;return(t=c(this,ue,an))==null?void 0:t.canCreateNewEmptyEditor()}async pasteEditor(t,i){this.updateToolbar(t),await c(this,ht).updateMode(t.mode);const{offsetX:n,offsetY:r}=E(this,ue,Zy).call(this),l=this.getNextId(),u=E(this,ue,Qy).call(this,{parent:this,id:l,x:n,y:r,uiManager:c(this,ht),isCentered:!0,...i});u&&this.add(u)}async deserialize(t){var i;return await((i=c(Os,kr).get(t.annotationType??t.annotationEditorType))==null?void 0:i.deserialize(t,this,c(this,ht)))||null}createAndAddNewEditor(t,i,n={}){const r=this.getNextId(),l=E(this,ue,Qy).call(this,{parent:this,id:r,x:t.offsetX,y:t.offsetY,uiManager:c(this,ht),isCentered:i,...n});return l&&this.add(l),l}addNewEditor(t={}){this.createAndAddNewEditor(E(this,ue,Zy).call(this),!0,t)}setSelected(t){c(this,ht).setSelected(t)}toggleSelected(t){c(this,ht).toggleSelected(t)}unselect(t){c(this,ht).unselect(t)}pointerup(t){var r;const{isMac:i}=ni.platform;if(t.button!==0||t.ctrlKey&&i||t.target!==this.div||!c(this,Lr)||(A(this,Lr,!1),(r=c(this,ue,an))!=null&&r.isDrawer&&c(this,ue,an).supportMultipleDrawings))return;if(!c(this,xu)){A(this,xu,!0);return}const n=c(this,ht).getMode();if(n===St.STAMP||n===St.SIGNATURE){c(this,ht).unselectAll();return}this.createAndAddNewEditor(t,!1)}pointerdown(t){var r;if(c(this,ht).getMode()===St.HIGHLIGHT&&this.enableTextSelection(),c(this,Lr)){A(this,Lr,!1);return}const{isMac:i}=ni.platform;if(t.button!==0||t.ctrlKey&&i||t.target!==this.div)return;if(A(this,Lr,!0),(r=c(this,ue,an))!=null&&r.isDrawer){this.startDrawingSession(t);return}const n=c(this,ht).getActive();A(this,xu,!n||n.isEmpty())}startDrawingSession(t){if(this.div.focus({preventScroll:!0}),c(this,qs)){c(this,ue,an).startDrawing(this,c(this,ht),!1,t);return}c(this,ht).setCurrentDrawingSession(this),A(this,qs,new AbortController);const i=c(this,ht).combinedSignal(c(this,qs));this.div.addEventListener("blur",({relatedTarget:n})=>{n&&!this.div.contains(n)&&(A(this,va,null),this.commitOrRemove())},{signal:i}),c(this,ue,an).startDrawing(this,c(this,ht),!1,t)}pause(t){if(t){const{activeElement:i}=document;this.div.contains(i)&&A(this,va,i);return}c(this,va)&&setTimeout(()=>{var i;(i=c(this,va))==null||i.focus(),A(this,va,null)},0)}endDrawingSession(t=!1){return c(this,qs)?(c(this,ht).setCurrentDrawingSession(null),c(this,qs).abort(),A(this,qs,null),A(this,va,null),c(this,ue,an).endDrawing(t)):null}findNewParent(t,i,n){const r=c(this,ht).findParent(i,n);return r===null||r===this?!1:(r.changeParent(t),!0)}commitOrRemove(){return c(this,qs)?(this.endDrawingSession(),!0):!1}onScaleChanging(){c(this,qs)&&c(this,ue,an).onScaleChangingWhenDrawing(this)}destroy(){var t,i;this.commitOrRemove(),((t=c(this,ht).getActive())==null?void 0:t.parent)===this&&(c(this,ht).commitOrRemove(),c(this,ht).setActiveEditor(null)),c(this,ya)&&(clearTimeout(c(this,ya)),A(this,ya,null));for(const n of c(this,Ts).values())(i=c(this,go))==null||i.removePointerInTextLayer(n.contentDiv),n.setParent(null),n.isAttachedToDOM=!1,n.div.remove();this.div=null,c(this,Ts).clear(),c(this,ht).removeLayer(this)}render({viewport:t}){this.viewport=t,bo(this.div,t);for(const i of c(this,ht).getEditors(this.pageIndex))this.add(i),i.rebuild();this.updateMode()}update({viewport:t}){c(this,ht).commitOrRemove(),E(this,ue,Dp).call(this);const i=this.viewport.rotation,n=t.rotation;if(this.viewport=t,bo(this.div,{rotation:n}),i!==n)for(const r of c(this,Ts).values())r.rotate(n)}get pageDimensions(){const{pageWidth:t,pageHeight:i}=this.viewport.rawDims;return[t,i]}get scale(){return c(this,ht).viewParameters.realScale}};go=new WeakMap,xu=new WeakMap,Sn=new WeakMap,Or=new WeakMap,ya=new WeakMap,Ts=new WeakMap,Lr=new WeakMap,wu=new WeakMap,po=new WeakMap,qs=new WeakMap,va=new WeakMap,fi=new WeakMap,Aa=new WeakMap,ht=new WeakMap,kr=new WeakMap,ue=new WeakSet,eE=function(t){c(this,ht).unselectAll();const{target:i}=t;if(i===c(this,fi).div||(i.getAttribute("role")==="img"||i.classList.contains("endOfContent"))&&c(this,fi).div.contains(i)){const{isMac:n}=ni.platform;if(t.button!==0||t.ctrlKey&&n)return;c(this,ht).showAllEditors("highlight",!0,!0),c(this,fi).div.classList.add("free"),this.toggleDrawing(),Bp.startHighlighting(this,c(this,ht).direction==="ltr",{target:c(this,fi).div,x:t.x,y:t.y}),c(this,fi).div.addEventListener("pointerup",()=>{c(this,fi).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:c(this,ht)._signal}),t.preventDefault()}},an=function(){return c(Os,kr).get(c(this,ht).getMode())},Qy=function(t){const i=c(this,ue,an);return i?new i.prototype.constructor(t):null},Zy=function(){const{x:t,y:i,width:n,height:r}=this.div.getBoundingClientRect(),l=Math.max(0,t),u=Math.max(0,i),h=Math.min(window.innerWidth,t+n),f=Math.min(window.innerHeight,i+r),g=(l+h)/2-t,p=(u+f)/2-i,[y,v]=this.viewport.rotation%180===0?[g,p]:[p,g];return{offsetX:y,offsetY:v}},Dp=function(){for(const t of c(this,Ts).values())t.isEmpty()&&t.remove()},J(Os,"_initialized",!1),w(Os,kr,new Map([Cy,Fy,Yy,Bp,Xy].map(t=>[t._editorType,t])));let Ky=Os;var Vs,Ai,mo,Ef,nm,iE,wn,Jy,sE,tv;const Oe=class Oe{constructor({pageIndex:t}){w(this,wn);w(this,Vs,null);w(this,Ai,new Map);w(this,mo,new Map);this.pageIndex=t}setParent(t){if(!c(this,Vs)){A(this,Vs,t);return}if(c(this,Vs)!==t){if(c(this,Ai).size>0)for(const i of c(this,Ai).values())i.remove(),t.append(i);A(this,Vs,t)}}static get _svgFactory(){return zt(this,"_svgFactory",new zp)}draw(t,i=!1,n=!1){const r=pi(Oe,Ef)._++,l=E(this,wn,Jy).call(this),u=Oe._svgFactory.createElement("defs");l.append(u);const h=Oe._svgFactory.createElement("path");u.append(h);const f=`path_p${this.pageIndex}_${r}`;h.setAttribute("id",f),h.setAttribute("vector-effect","non-scaling-stroke"),i&&c(this,mo).set(r,h);const g=n?E(this,wn,sE).call(this,u,f):null,p=Oe._svgFactory.createElement("use");return l.append(p),p.setAttribute("href",`#${f}`),this.updateProperties(l,t),c(this,Ai).set(r,l),{id:r,clipPathId:`url(#${g})`}}drawOutline(t,i){const n=pi(Oe,Ef)._++,r=E(this,wn,Jy).call(this),l=Oe._svgFactory.createElement("defs");r.append(l);const u=Oe._svgFactory.createElement("path");l.append(u);const h=`path_p${this.pageIndex}_${n}`;u.setAttribute("id",h),u.setAttribute("vector-effect","non-scaling-stroke");let f;if(i){const y=Oe._svgFactory.createElement("mask");l.append(y),f=`mask_p${this.pageIndex}_${n}`,y.setAttribute("id",f),y.setAttribute("maskUnits","objectBoundingBox");const v=Oe._svgFactory.createElement("rect");y.append(v),v.setAttribute("width","1"),v.setAttribute("height","1"),v.setAttribute("fill","white");const S=Oe._svgFactory.createElement("use");y.append(S),S.setAttribute("href",`#${h}`),S.setAttribute("stroke","none"),S.setAttribute("fill","black"),S.setAttribute("fill-rule","nonzero"),S.classList.add("mask")}const g=Oe._svgFactory.createElement("use");r.append(g),g.setAttribute("href",`#${h}`),f&&g.setAttribute("mask",`url(#${f})`);const p=g.cloneNode();return r.append(p),g.classList.add("mainOutline"),p.classList.add("secondaryOutline"),this.updateProperties(r,t),c(this,Ai).set(n,r),n}finalizeDraw(t,i){c(this,mo).delete(t),this.updateProperties(t,i)}updateProperties(t,i){var f;if(!i)return;const{root:n,bbox:r,rootClass:l,path:u}=i,h=typeof t=="number"?c(this,Ai).get(t):t;if(h){if(n&&E(this,wn,tv).call(this,h,n),r&&E(f=Oe,nm,iE).call(f,h,r),l){const{classList:g}=h;for(const[p,y]of Object.entries(l))g.toggle(p,y)}if(u){const p=h.firstChild.firstChild;E(this,wn,tv).call(this,p,u)}}}updateParent(t,i){if(i===this)return;const n=c(this,Ai).get(t);n&&(c(i,Vs).append(n),c(this,Ai).delete(t),c(i,Ai).set(t,n))}remove(t){c(this,mo).delete(t),c(this,Vs)!==null&&(c(this,Ai).get(t).remove(),c(this,Ai).delete(t))}destroy(){A(this,Vs,null);for(const t of c(this,Ai).values())t.remove();c(this,Ai).clear(),c(this,mo).clear()}};Vs=new WeakMap,Ai=new WeakMap,mo=new WeakMap,Ef=new WeakMap,nm=new WeakSet,iE=function(t,[i,n,r,l]){const{style:u}=t;u.top=`${100*n}%`,u.left=`${100*i}%`,u.width=`${100*r}%`,u.height=`${100*l}%`},wn=new WeakSet,Jy=function(){const t=Oe._svgFactory.create(1,1,!0);return c(this,Vs).append(t),t.setAttribute("aria-hidden",!0),t},sE=function(t,i){const n=Oe._svgFactory.createElement("clipPath");t.append(n);const r=`clip_${i}`;n.setAttribute("id",r),n.setAttribute("clipPathUnits","objectBoundingBox");const l=Oe._svgFactory.createElement("use");return n.append(l),l.setAttribute("href",`#${i}`),l.classList.add("clip"),r},tv=function(t,i){for(const[n,r]of Object.entries(i))r===null?t.removeAttribute(n):t.setAttribute(n,r)},w(Oe,nm),w(Oe,Ef,0);let Wy=Oe;globalThis._pdfjsTestingUtils={HighlightOutliner:Ry};globalThis.pdfjsLib={AbortException:zr,AnnotationEditorLayer:Ky,AnnotationEditorParamsType:Pt,AnnotationEditorType:St,AnnotationEditorUIManager:yo,AnnotationLayer:wy,AnnotationMode:Za,AnnotationType:Ee,build:NM,ColorPicker:Hp,createValidAbsoluteUrl:$_,DOMSVGFactory:zp,DrawLayer:Wy,FeatureTest:ni,fetchData:Cf,getDocument:Jx,getFilenameFromUrl:xC,getPdfFilenameFromUrl:wC,getUuid:Z_,getXfaPageViewport:TC,GlobalWorkerOptions:_n,ImageKind:tp,InvalidPDFException:Bb,isDataScheme:om,isPdfFile:nv,isValidExplicitDest:HC,MathClamp:_i,noContextMenu:Ys,normalizeUnicode:AC,OPS:Np,OutputScale:xn,PasswordResponses:hC,PDFDataRangeTransport:tw,PDFDateString:av,PDFWorker:Zh,PermissionFlag:uC,PixelsPerInch:Pr,RenderingCancelledException:sv,ResponseException:Op,setLayerDimensions:bo,shadow:zt,SignatureExtractor:Sa,stopEvent:Te,SupportedImageMimeTypes:Fb,TextLayer:Kh,TouchManager:kp,updateUrlHash:K_,Util:ft,VerbosityLevel:am,version:DM,XfaLayer:sw};typeof window<"u"&&(_n.workerSrc="./pdf.worker.min.js");class JM{constructor(){J(this,"logCallback")}setLogCallback(t){this.logCallback=t}log(t){console.log(`[PDF Parser] ${t}`),this.logCallback&&this.logCallback(`[PDF Parser] ${t}`)}async extractMenuFromPDF(t){try{this.log(`Starting PDF parsing for file: ${t.name} (${(t.size/1024/1024).toFixed(2)} MB)`),this.log("Converting file to array buffer...");const i=await t.arrayBuffer();this.log(`Array buffer created: ${i.byteLength} bytes`),this.log("Loading PDF document...");const n=await Jx({data:i,useWorkerFetch:!1,isEvalSupported:!1}).promise;this.log(`PDF loaded successfully. Pages: ${n.numPages}`);let r="",l=[];const u=[];for(let g=1;g<=n.numPages;g++){this.log(`Processing page ${g}/${n.numPages}...`);const p=await n.getPage(g);this.log(`Page ${g} loaded, extracting text content...`);const y=await p.getTextContent();this.log(`Page ${g}: Found ${y.items.length} text items`);const S=p.getViewport({scale:1}).height,T=y.items.map(M=>({text:M.str,x:M.transform[4],y:M.transform[5],width:M.width,height:M.height,fontSize:M.height,fontName:M.fontName||"unknown"}));u.push({textItems:T,pageNum:g,pageHeight:S}),l.push(...T);const x=y.items.map(M=>M.str).join(" ");r+=x+`
`,this.log(`Page ${g}: Extracted ${x.length} characters`)}this.log(`Text extraction complete. Total characters: ${r.length}`),this.log(`Total text items collected: ${l.length}`),this.log("Starting topological region analysis...");const h=this.detectMenuRegions(u);this.log(`Found ${h.length} potential menu regions`),this.log("Extracting menu items with PDF region images...");const f=await this.extractMenuItemsWithRegions(h,r,n);return this.log(`Menu parsing complete. Found ${f.length} items`),f}catch(i){const n=i instanceof Error?i.message:"Unknown error";throw this.log(`ERROR: ${n}`),console.error("Error parsing PDF:",i),new Error(`Failed to parse PDF: ${n}`)}}detectMenuRegions(t){this.log("Applying spatial clustering algorithm...");const i=[];for(const r of t){const l=r.textItems.filter(f=>f.text.trim().length>0&&f.width>0&&f.height>0);this.log(`Page ${r.pageNum}: Filtered ${l.length} valid text items from ${r.textItems.length} total`);const u=[...l].sort((f,g)=>g.y-f.y),h=this.groupIntoHorizontalBands(u);this.log(`Page ${r.pageNum}: Created ${h.length} horizontal bands`);for(let f=0;f<h.length;f++){const g=h[f],p=this.clusterBandIntoRegions(g,r.pageNum,r.pageHeight);i.push(...p),f%10===0&&this.log(`Page ${r.pageNum}: Processed band ${f}/${h.length}, found ${p.length} regions`)}}const n=this.filterAndValidateRegions(i);return this.log(`Filtered to ${n.length} valid menu regions across all pages`),n}groupIntoHorizontalBands(t){const i=[];for(const r of t){let l=!1;for(const u of i){const h=u[0].y;if(Math.abs(r.y-h)<=5){u.push(r),l=!0;break}}l||i.push([r])}return i}clusterBandIntoRegions(t,i,n){if(t.length===0)return[];const r=[...t].sort((f,g)=>f.x-g.x),l=[],u=20;let h=[r[0]];for(let f=1;f<r.length;f++){const g=r[f],p=h[h.length-1];g.x-(p.x+p.width)<=u?h.push(g):(h.length>0&&l.push(this.createRegionFromItems(h,i,n)),h=[g])}return h.length>0&&l.push(this.createRegionFromItems(h,i,n)),l}createRegionFromItems(t,i,n){const r=Math.min(...t.map(p=>p.x)),l=Math.max(...t.map(p=>p.x+p.width)),u=Math.min(...t.map(p=>p.y)),h=Math.max(...t.map(p=>p.y+p.height)),f={x:r,y:u,width:l-r,height:h-u},g=this.calculateRegionConfidence(t,f);return{items:t,boundingBox:f,confidence:g,pageNumber:i,pageHeight:n}}calculateRegionConfidence(t,i){let n=.5;t.some(g=>/\$?\d+\.?\d*/.test(g.text))&&(n+=.3);const l=t.map(g=>g.text).join(" ").trim();l.length>=10&&l.length<=200&&(n+=.2),t.length>=2&&t.length<=5&&(n+=.1);const u=t.map(g=>g.fontSize||12),h=u.reduce((g,p)=>g+p,0)/u.length;return u.reduce((g,p)=>g+Math.pow(p-h,2),0)/u.length<4&&(n+=.1),Math.min(n,1)}filterAndValidateRegions(t){return t.filter(l=>{const u=l.items.map(h=>h.text).join(" ").trim();return l.confidence>=.6&&l.boundingBox.width>=50&&u.length>=5})}async extractMenuItemsWithRegions(t,i,n){this.log("Extracting menu items with PDF region images...");const r=[];for(let l=0;l<t.length;l++){const u=t[l],h=u.items.map(g=>g.text).join(" ").trim();l%20===0&&this.log(`Processing region ${l}/${t.length}: "${h.substring(0,50)}..."`);const f=await this.parseMenuItemFromRegionWithImage(u,n);f&&r.push(f)}if(r.length<5){this.log("Low yield from topological parsing, applying fallback text analysis...");const l=this.parseMenuItems(i,[]);r.push(...l)}return this.deduplicateItems(r)}extractMenuItemsFromRegions(t,i){this.log("Extracting menu items from topological regions...");const n=[];for(let r=0;r<t.length;r++){const l=t[r],u=l.items.map(f=>f.text).join(" ").trim();r%20===0&&this.log(`Processing region ${r}/${t.length}: "${u.substring(0,50)}..."`);const h=this.parseMenuItemFromRegion(l);h&&n.push(h)}if(n.length<5){this.log("Low yield from topological parsing, applying fallback text analysis...");const r=this.parseMenuItems(i,[]);n.push(...r)}return this.deduplicateItems(n)}async parseMenuItemFromRegionWithImage(t,i){const r=t.items.sort((v,S)=>v.x-S.x).map(v=>v.text).join(" ").trim(),l=await this.extractRegionImage(t,i);let u=0,h=r;const f=r.match(/\$?(\d+\.?\d*)/);f&&(u=parseFloat(f[1]),f[0],h=r.replace(f[0],"").trim());let g=h,p="";const y=[" - ","  "," | ","  ",`
`];for(const v of y){const S=h.split(v);if(S.length>=2){g=S[0].trim(),p=S.slice(1).join(v).trim();break}}return!g||g.length<2||u<=0?null:{id:`region-${t.boundingBox.x}-${t.boundingBox.y}`,name:this.cleanItemName(g),price:u,description:p||void 0,category:this.categorizeItem(g,p),servingSize:this.estimateServingSize(g,p),regionImage:l,confidence:t.confidence}}async extractRegionImage(t,i){try{const n=await i.getPage(t.pageNumber),r=2,l=n.getViewport({scale:r}),u=document.createElement("canvas"),h=u.getContext("2d");if(!h)return;u.height=l.height,u.width=l.width;const f={canvasContext:h,viewport:l};await n.render(f).promise;const g=t.boundingBox.x*r,p=(t.pageHeight-t.boundingBox.y-t.boundingBox.height)*r,y=t.boundingBox.width*r,v=t.boundingBox.height*r,S=10*r,T=Math.max(0,g-S),x=Math.max(0,p-S),M=Math.min(u.width-T,y+2*S),R=Math.min(u.height-x,v+2*S),k=h.getImageData(T,x,M,R),O=document.createElement("canvas"),H=O.getContext("2d");return H?(O.width=M,O.height=R,H.putImageData(k,0,0),O.toDataURL("image/png",.9)):void 0}catch(n){this.log(`Failed to extract region image: ${n instanceof Error?n.message:"Unknown error"}`);return}}parseMenuItemFromRegion(t){const n=t.items.sort((p,y)=>p.x-y.x).map(p=>p.text).join(" ").trim();let r=0,l=n;const u=n.match(/\$?(\d+\.?\d*)/);u&&(r=parseFloat(u[1]),u[0],l=n.replace(u[0],"").trim());let h=l,f="";const g=[" - ","  "," | ","  ",`
`];for(const p of g){const y=l.split(p);if(y.length>=2){h=y[0].trim(),f=y.slice(1).join(p).trim();break}}return!h||h.length<2||r<=0?null:{id:`region-${t.boundingBox.x}-${t.boundingBox.y}`,name:this.cleanItemName(h),price:r,description:f||void 0,category:this.categorizeItem(h,f),servingSize:this.estimateServingSize(h,f)}}parseMenuItems(t,i){this.log("Starting menu item pattern matching...");const n=[],r=t.split(`
`).filter(l=>l.trim());this.log(`Split text into ${r.length} lines for processing`);for(let l=0;l<r.length;l++){const u=r[l].trim();if(!u)continue;l%50===0&&this.log(`Processing line ${l}/${r.length}: "${u.substring(0,50)}..."`);const h=[/^(.+?)\s+\$?(\d+\.?\d*)\s*$/,/^(.+?)\s*-\s*(.+?)\s+\$?(\d+\.?\d*)\s*$/,/^\$?(\d+\.?\d*)\s+(.+)$/,/^(.{10,})\s*$/];for(const f of h){const g=u.match(f);if(g){let p="",y=0,v="";if(f===h[0])p=g[1].trim(),y=parseFloat(g[2]);else if(f===h[1])p=g[1].trim(),v=g[2].trim(),y=parseFloat(g[3]);else if(f===h[2])y=parseFloat(g[1]),p=g[2].trim();else if(f===h[3]&&(p=g[1].trim(),l+1<r.length)){const T=r[l+1].trim().match(/^\$?(\d+\.?\d*)\s*$/);T&&(y=parseFloat(T[1]),l++)}if(p&&y>0){this.log(`Found menu item: "${p}" - $${y}`);const S=this.categorizeItem(p,v),T=this.estimateServingSize(p,v);n.push({id:`item-${n.length+1}`,name:this.cleanItemName(p),price:y,description:v||void 0,category:S,servingSize:T});break}}}}return this.deduplicateItems(n)}categorizeItem(t,i){const n=(t+" "+i).toLowerCase(),r={Appetizers:["appetizer","starter","wings","nachos","dip","bread","bruschetta","calamari"],Salads:["salad","caesar","greens","lettuce"],Soups:["soup","bisque","chowder","broth"],Mains:["entree","main","chicken","beef","pork","fish","salmon","steak","pasta","pizza","burger","sandwich"],Sides:["side","fries","rice","potato","vegetable","beans"],Desserts:["dessert","cake","pie","ice cream","chocolate","cookie","tiramisu"],Beverages:["drink","coffee","tea","soda","juice","beer","wine","cocktail","water"]};for(const[l,u]of Object.entries(r))if(u.some(h=>n.includes(h)))return l;return"Other"}estimateServingSize(t,i){const n=(t+" "+i).toLowerCase();if(n.includes("family")||n.includes("large"))return 4;if(n.includes("sharing")||n.includes("platter"))return 6;if(n.includes("individual")||n.includes("personal"))return 1;if(n.includes("pizza")&&n.includes("large"))return 4;if(n.includes("pizza")&&n.includes("medium"))return 3;if(n.includes("pizza")&&n.includes("small"))return 2;switch(this.categorizeItem(t,i)){case"Appetizers":return 2;case"Salads":return 1;case"Soups":return 1;case"Mains":return 1;case"Sides":return 2;case"Desserts":return 1;case"Beverages":return 1;default:return 1}}cleanItemName(t){return t.replace(/^\d+\.\s*/,"").replace(/\s*\.\.\.*\s*$/,"").replace(/\s+/g," ").trim()}deduplicateItems(t){const i=new Set;return t.filter(n=>{const r=n.name.toLowerCase()+n.price;return i.has(r)?!1:(i.add(r),!0)})}}const tR=({onMenuExtracted:b})=>{const[t,i]=Xe.useState(!1),[n,r]=Xe.useState(null),[l,u]=Xe.useState(!1),[h,f]=Xe.useState([]),g=x=>{f(M=>[...M,`${new Date().toLocaleTimeString()}: ${x}`])},p=async x=>{if(x.type!=="application/pdf"){r("Please upload a PDF file");return}i(!0),r(null),f([]),g("Starting PDF upload process...");try{const M=new JM;M.setLogCallback(g);const R=await M.extractMenuFromPDF(x);if(R.length===0){g("No menu items found in PDF"),r("No menu items found in the PDF. Please ensure the PDF contains a restaurant menu with prices.");return}g(`Successfully extracted ${R.length} menu items!`),b(R)}catch(M){const R=M instanceof Error?M.message:"Failed to process PDF";g(`ERROR: ${R}`),r(R)}finally{i(!1)}},y=x=>{x.preventDefault(),u(!1);const M=Array.from(x.dataTransfer.files);M.length>0&&p(M[0])},v=x=>{x.preventDefault(),u(!0)},S=x=>{x.preventDefault(),u(!1)},T=x=>{const M=x.target.files;M&&M.length>0&&p(M[0])};return P.jsxs("div",{className:"w-full max-w-md mx-auto",children:[P.jsxs("div",{className:`border-2 border-dashed rounded-lg p-8 text-center transition-colors ${l?"border-blue-500 bg-blue-50":"border-gray-300 hover:border-gray-400"}`,onDrop:y,onDragOver:v,onDragLeave:S,children:[P.jsx("input",{type:"file",id:"pdf-upload",accept:".pdf",onChange:T,className:"hidden",disabled:t}),P.jsx("label",{htmlFor:"pdf-upload",className:"cursor-pointer",children:P.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[t?P.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"}):P.jsx(lC,{className:"h-12 w-12 text-gray-400"}),P.jsxs("div",{children:[P.jsx("p",{className:"text-lg font-medium text-gray-700",children:t?"Processing PDF...":"Upload Restaurant Menu PDF"}),P.jsx("p",{className:"text-sm text-gray-500 mt-1",children:t?"Extracting menu items and prices...":"Drag and drop or click to browse"})]}),!t&&P.jsxs("div",{className:"flex items-center space-x-2 text-xs text-gray-400",children:[P.jsx(J2,{className:"h-4 w-4"}),P.jsx("span",{children:"PDF files only"})]})]})})]}),h.length>0&&P.jsxs("div",{className:"mt-4 p-3 bg-gray-50 border border-gray-200 rounded-md",children:[P.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Processing Log:"}),P.jsx("div",{className:"max-h-40 overflow-y-auto text-xs font-mono",children:h.map((x,M)=>P.jsx("div",{className:"text-gray-600 mb-1",children:x},M))}),t&&P.jsx("div",{className:"mt-2 text-xs text-blue-600",children:"Processing... Check logs above for current status"})]}),n&&P.jsx("div",{className:"mt-4 p-3 bg-red-50 border border-red-200 rounded-md",children:P.jsxs("div",{className:"flex items-center space-x-2",children:[P.jsx($2,{className:"h-5 w-5 text-red-500"}),P.jsx("p",{className:"text-sm text-red-700",children:n})]})}),P.jsxs("div",{className:"mt-4 text-xs text-gray-500 text-center",children:[P.jsx("p",{children:"Best results with PDFs exported from restaurant websites or digital menus"}),P.jsx("p",{className:"mt-1",children:"Processing logs will appear above to help debug any issues"})]})]})},eR=({menuItems:b,onOrderGenerated:t})=>{const[i,n]=Xe.useState(10),[r,l]=Xe.useState({}),u=Xe.useMemo(()=>b.reduce((S,T)=>(S[T.category]||(S[T.category]=[]),S[T.category].push(T),S),{}),[b]),h=S=>{const T=S.servingSize||1,x=Math.ceil(i/T);return S.category.toLowerCase().includes("appetizer")||S.category.toLowerCase().includes("starter")?Math.ceil(x*1.5):S.category.toLowerCase().includes("dessert")?Math.ceil(x*.8):x},f=(S,T)=>{l(x=>({...x,[S]:Math.max(0,T)}))},g=Xe.useMemo(()=>b.map(S=>{const T=r[S.id]||0;return T===0?null:{...S,quantity:T,totalPrice:S.price*T}}).filter(S=>S!==null),[b,r]),p=Xe.useMemo(()=>g.reduce((S,T)=>S+T.totalPrice,0),[g]),y=()=>{t({guestCount:i,items:g,totalCost:p})},v=()=>{const S={};b.forEach(T=>{S[T.id]=h(T)}),l(S)};return P.jsxs("div",{className:"w-full max-w-4xl mx-auto space-y-6",children:[P.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[P.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[P.jsx(Y_,{className:"h-6 w-6 text-blue-500"}),P.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Guest Count"})]}),P.jsxs("div",{className:"flex items-center space-x-4",children:[P.jsx("label",{htmlFor:"guest-count",className:"text-sm font-medium text-gray-700",children:"Number of Guests:"}),P.jsx("input",{id:"guest-count",type:"number",min:"1",value:i,onChange:S=>n(parseInt(S.target.value)||1),className:"w-20 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),P.jsx("button",{onClick:v,className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-colors text-sm",children:"Auto-fill Recommended"})]})]}),P.jsx("div",{className:"space-y-6",children:Object.entries(u).map(([S,T])=>P.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[P.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:S}),P.jsx("div",{className:"grid gap-4",children:T.map(x=>{const M=r[x.id]||0,R=h(x),k=x.price*M;return P.jsxs("div",{className:"flex items-start gap-4 p-4 bg-gray-50 rounded-md",children:[x.regionImage&&P.jsxs("div",{className:"flex-shrink-0",children:[P.jsx("div",{className:"w-32 h-20 border border-gray-300 rounded overflow-hidden bg-white",children:P.jsx("img",{src:x.regionImage,alt:`PDF region for ${x.name}`,className:"w-full h-full object-contain"})}),x.confidence&&P.jsxs("div",{className:"text-xs text-gray-500 mt-1 text-center",children:[Math.round(x.confidence*100),"%"]})]}),P.jsxs("div",{className:"flex-1 flex items-center justify-between",children:[P.jsxs("div",{className:"flex-1",children:[P.jsx("h4",{className:"font-medium text-gray-800",children:x.name}),x.description&&P.jsx("p",{className:"text-sm text-gray-600 mt-1",children:x.description}),P.jsxs("div",{className:"flex items-center space-x-4 mt-2 text-sm text-gray-500",children:[P.jsxs("span",{children:["$",x.price.toFixed(2)," each"]}),x.servingSize&&x.servingSize>1&&P.jsxs("span",{children:["Serves ",x.servingSize]}),P.jsxs("span",{className:"text-blue-600",children:["Suggested: ",R]})]})]}),P.jsxs("div",{className:"flex items-center space-x-4",children:[P.jsxs("div",{className:"flex items-center space-x-2",children:[P.jsx("button",{onClick:()=>f(x.id,M-1),className:"w-8 h-8 flex items-center justify-center bg-gray-200 hover:bg-gray-300 rounded-md text-gray-600",disabled:M===0,children:"-"}),P.jsx("input",{type:"number",min:"0",value:M,onChange:O=>f(x.id,parseInt(O.target.value)||0),className:"w-16 px-2 py-1 text-center border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),P.jsx("button",{onClick:()=>f(x.id,M+1),className:"w-8 h-8 flex items-center justify-center bg-gray-200 hover:bg-gray-300 rounded-md text-gray-600",children:"+"})]}),P.jsx("div",{className:"w-20 text-right",children:P.jsxs("span",{className:"font-medium text-gray-800",children:["$",k.toFixed(2)]})})]})]})]},x.id)})})]},S))}),g.length>0&&P.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[P.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[P.jsx(aC,{className:"h-6 w-6 text-green-500"}),P.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Order Summary"})]}),P.jsx("div",{className:"space-y-2 mb-4",children:g.map(S=>P.jsxs("div",{className:"flex justify-between text-sm",children:[P.jsxs("span",{children:[S.name," (",S.quantity,")"]}),P.jsxs("span",{children:["$",S.totalPrice.toFixed(2)]})]},S.id))}),P.jsxs("div",{className:"border-t pt-4",children:[P.jsxs("div",{className:"flex justify-between items-center mb-2",children:[P.jsx("span",{className:"text-lg font-semibold",children:"Total Cost:"}),P.jsxs("span",{className:"text-2xl font-bold text-green-600",children:["$",p.toFixed(2)]})]}),P.jsxs("div",{className:"flex justify-between items-center text-sm text-gray-600 mb-4",children:[P.jsx("span",{children:"Cost per guest:"}),P.jsxs("span",{children:["$",(p/i).toFixed(2)]})]}),P.jsxs("button",{onClick:y,className:"w-full bg-green-500 text-white py-3 px-4 rounded-md hover:bg-green-600 transition-colors font-medium flex items-center justify-center space-x-2",children:[P.jsx(X_,{className:"h-5 w-5"}),P.jsx("span",{children:"Generate Order Summary"})]})]})]})]})},iR=({order:b,onStartOver:t})=>{const i=()=>{const u=new Date().toLocaleDateString();let h=`CATERING ORDER SUMMARY
`;h+=`Generated: ${u}
`,h+=`Guest Count: ${b.guestCount}
`,h+=`Cost per Guest: $${(b.totalCost/b.guestCount).toFixed(2)}

`;const f=b.items.reduce((g,p)=>(g[p.category]||(g[p.category]=[]),g[p.category].push(p),g),{});return Object.entries(f).forEach(([g,p])=>{h+=`${g.toUpperCase()}
`,h+=`${"=".repeat(g.length+10)}
`,p.forEach(y=>{h+=`${y.quantity}x ${y.name}`,y.description&&(h+=` - ${y.description}`),h+=`
   $${y.price.toFixed(2)} each = $${y.totalPrice.toFixed(2)}
`}),h+=`
`}),h+=`TOTAL COST: $${b.totalCost.toFixed(2)}
`,h},n=()=>{const u=i(),h=new Blob([u],{type:"text/plain"}),f=URL.createObjectURL(h),g=document.createElement("a");g.href=f,g.download=`catering-order-${new Date().toISOString().split("T")[0]}.txt`,document.body.appendChild(g),g.click(),document.body.removeChild(g),URL.revokeObjectURL(f)},r=()=>{const u=i(),h=window.open("","_blank");h&&(h.document.write(`
        <html>
          <head>
            <title>Catering Order</title>
            <style>
              body { font-family: monospace; white-space: pre-wrap; margin: 20px; }
              @media print { body { margin: 0; } }
            </style>
          </head>
          <body>${u}</body>
        </html>
      `),h.document.close(),h.print())},l=()=>{const u=i(),h=encodeURIComponent("Catering Order Summary"),f=encodeURIComponent(u);window.open(`mailto:?subject=${h}&body=${f}`)};return P.jsxs("div",{className:"w-full max-w-4xl mx-auto space-y-6",children:[P.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-6",children:[P.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[P.jsx("div",{className:"w-8 h-8 bg-green-500 rounded-full flex items-center justify-center",children:P.jsx("span",{className:"text-white font-bold",children:""})}),P.jsx("h2",{className:"text-2xl font-bold text-green-800",children:"Order Generated Successfully!"})]}),P.jsxs("p",{className:"text-green-700",children:["Your catering order has been calculated based on ",b.guestCount," guests"]})]}),P.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[P.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-6 text-center",children:[P.jsx(Y_,{className:"h-8 w-8 text-blue-500 mx-auto mb-2"}),P.jsx("div",{className:"text-2xl font-bold text-gray-800",children:b.guestCount}),P.jsx("div",{className:"text-sm text-gray-600",children:"Guests"})]}),P.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-6 text-center",children:[P.jsx("div",{className:"text-2xl font-bold text-gray-800",children:b.items.length}),P.jsx("div",{className:"text-sm text-gray-600",children:"Menu Items"})]}),P.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-6 text-center",children:[P.jsx(X_,{className:"h-8 w-8 text-green-500 mx-auto mb-2"}),P.jsxs("div",{className:"text-2xl font-bold text-green-600",children:["$",(b.totalCost/b.guestCount).toFixed(2)]}),P.jsx("div",{className:"text-sm text-gray-600",children:"Per Guest"})]})]}),P.jsxs("div",{className:"bg-white rounded-lg shadow-sm border",children:[P.jsx("div",{className:"p-6 border-b",children:P.jsx("h3",{className:"text-xl font-semibold text-gray-800",children:"Order Details"})}),P.jsx("div",{className:"p-6 space-y-6",children:Object.entries(b.items.reduce((u,h)=>(u[h.category]||(u[h.category]=[]),u[h.category].push(h),u),{})).map(([u,h])=>P.jsxs("div",{children:[P.jsx("h4",{className:"font-medium text-gray-800 mb-3 text-lg",children:u}),P.jsx("div",{className:"space-y-2",children:h.map(f=>P.jsxs("div",{className:"flex justify-between items-start p-3 bg-gray-50 rounded-md",children:[P.jsxs("div",{className:"flex-1",children:[P.jsxs("div",{className:"font-medium text-gray-800",children:[f.quantity,"x ",f.name]}),f.description&&P.jsx("div",{className:"text-sm text-gray-600 mt-1",children:f.description}),P.jsxs("div",{className:"text-sm text-gray-500 mt-1",children:["$",f.price.toFixed(2)," each",f.servingSize&&f.servingSize>1&&P.jsxs("span",{children:["  Serves ",f.servingSize]})]})]}),P.jsx("div",{className:"text-right",children:P.jsxs("div",{className:"font-semibold text-gray-800",children:["$",f.totalPrice.toFixed(2)]})})]},f.id))})]},u))}),P.jsx("div",{className:"p-6 border-t bg-gray-50",children:P.jsxs("div",{className:"flex justify-between items-center",children:[P.jsx("span",{className:"text-xl font-semibold text-gray-800",children:"Total Cost:"}),P.jsxs("span",{className:"text-2xl font-bold text-green-600",children:["$",b.totalCost.toFixed(2)]})]})})]}),P.jsxs("div",{className:"flex flex-wrap gap-3 justify-center",children:[P.jsxs("button",{onClick:n,className:"flex items-center space-x-2 px-6 py-3 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-colors",children:[P.jsx(Z2,{className:"h-5 w-5"}),P.jsx("span",{children:"Download Order"})]}),P.jsxs("button",{onClick:r,className:"flex items-center space-x-2 px-6 py-3 bg-gray-500 text-white rounded-md hover:bg-gray-600 transition-colors",children:[P.jsx(sC,{className:"h-5 w-5"}),P.jsx("span",{children:"Print Order"})]}),P.jsxs("button",{onClick:l,className:"flex items-center space-x-2 px-6 py-3 bg-purple-500 text-white rounded-md hover:bg-purple-600 transition-colors",children:[P.jsx(eC,{className:"h-5 w-5"}),P.jsx("span",{children:"Email Order"})]}),P.jsx("button",{onClick:t,className:"flex items-center space-x-2 px-6 py-3 bg-orange-500 text-white rounded-md hover:bg-orange-600 transition-colors",children:P.jsx("span",{children:"Create New Order"})})]})]})};function sR(){const[b,t]=Xe.useState("upload"),[i,n]=Xe.useState([]),[r,l]=Xe.useState(null),u=g=>{n(g),t("order")},h=g=>{l(g),t("summary")},f=()=>{t("upload"),n([]),l(null)};return P.jsxs("div",{className:"min-h-screen bg-gray-50",children:[P.jsx("header",{className:"bg-white shadow-sm border-b",children:P.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:P.jsxs("div",{className:"flex items-center space-x-3",children:[P.jsx(X2,{className:"h-8 w-8 text-orange-500"}),P.jsxs("div",{children:[P.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Catering Order Manager"}),P.jsx("p",{className:"text-sm text-gray-600",children:"Upload restaurant menu PDFs and generate quantity-based catering orders"})]})]})})}),P.jsx("div",{className:"bg-white border-b",children:P.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-3",children:P.jsxs("div",{className:"flex items-center space-x-4",children:[P.jsxs("div",{className:"flex items-center space-x-2",children:[P.jsx("div",{className:`w-3 h-3 rounded-full ${b==="upload"?"bg-blue-500":"bg-green-500"}`}),P.jsx("span",{className:`text-sm ${b==="upload"?"text-blue-600 font-medium":"text-green-600"}`,children:"Upload Menu"})]}),P.jsx("div",{className:`h-px flex-1 ${b==="upload"?"bg-gray-200":"bg-green-300"}`}),P.jsxs("div",{className:"flex items-center space-x-2",children:[P.jsx("div",{className:`w-3 h-3 rounded-full ${b==="upload"?"bg-gray-300":b==="order"?"bg-blue-500":"bg-green-500"}`}),P.jsx("span",{className:`text-sm ${b==="upload"?"text-gray-400":b==="order"?"text-blue-600 font-medium":"text-green-600"}`,children:"Create Order"})]}),P.jsx("div",{className:`h-px flex-1 ${b==="summary"?"bg-green-300":"bg-gray-200"}`}),P.jsxs("div",{className:"flex items-center space-x-2",children:[P.jsx("div",{className:`w-3 h-3 rounded-full ${b==="summary"?"bg-blue-500":"bg-gray-300"}`}),P.jsx("span",{className:`text-sm ${b==="summary"?"text-blue-600 font-medium":"text-gray-400"}`,children:"Order Summary"})]})]})})}),P.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[b==="upload"&&P.jsxs("div",{className:"text-center space-y-8",children:[P.jsxs("div",{children:[P.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Get Started with Your Catering Order"}),P.jsx("p",{className:"text-lg text-gray-600 max-w-2xl mx-auto",children:"Upload a PDF menu from your favorite restaurant and we'll help you calculate the perfect quantities for your event based on guest count."})]}),P.jsx(tR,{onMenuExtracted:u}),P.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 max-w-4xl mx-auto mt-12",children:[P.jsxs("div",{className:"text-center p-6",children:[P.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:P.jsx("span",{className:"text-blue-600 font-bold text-xl",children:"1"})}),P.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Upload PDF Menu"}),P.jsx("p",{className:"text-sm text-gray-600",children:"Select a restaurant menu PDF from your device or drag and drop it here"})]}),P.jsxs("div",{className:"text-center p-6",children:[P.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:P.jsx("span",{className:"text-blue-600 font-bold text-xl",children:"2"})}),P.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Set Guest Count"}),P.jsx("p",{className:"text-sm text-gray-600",children:"Enter your expected number of guests and adjust quantities with sliders"})]}),P.jsxs("div",{className:"text-center p-6",children:[P.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:P.jsx("span",{className:"text-blue-600 font-bold text-xl",children:"3"})}),P.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Generate Order"}),P.jsx("p",{className:"text-sm text-gray-600",children:"Get a complete catering order with costs and quantities calculated"})]})]})]}),b==="order"&&P.jsxs("div",{className:"space-y-8",children:[P.jsxs("div",{className:"text-center",children:[P.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Create Your Catering Order"}),P.jsxs("p",{className:"text-lg text-gray-600",children:["Found ",i.length," menu items. Set your guest count and adjust quantities."]})]}),P.jsx(eR,{menuItems:i,onOrderGenerated:h})]}),b==="summary"&&r&&P.jsx("div",{className:"space-y-8",children:P.jsx(iR,{order:r,onStartOver:f})})]}),P.jsx("footer",{className:"bg-white border-t mt-16",children:P.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:P.jsxs("div",{className:"text-center text-sm text-gray-500",children:[P.jsx("p",{children:"Catering Order Manager - Simplifying event planning one menu at a time"}),P.jsx("p",{className:"mt-1",children:"Works entirely in your browser - no data is sent to external servers"})]})})})]})}I2.createRoot(document.getElementById("root")).render(P.jsx(N2.StrictMode,{children:P.jsx(sR,{})}));
